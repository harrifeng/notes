<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2025-05-28 Wed 16:18 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>vbp</title>
<meta name="author" content="harrifeng@outlook.com" />
<meta name="generator" content="Org Mode" />
<link rel="stylesheet" type="text/css" href="src/readtheorg_theme/css/htmlize.css"/>
<link rel="stylesheet" type="text/css" href="src/readtheorg_theme/css/readtheorg.css"/>
<script type="text/javascript" src="src/lib/js/jquery.min.js"></script>
<script type="text/javascript" src="src/lib/js/bootstrap.min.js"></script>
<script type="text/javascript" src="src/lib/js/jquery.stickytableheaders.min.js"></script>
<script type="text/javascript" src="src/readtheorg_theme/js/readtheorg.js"></script>
</head>
<body>
<div id="content" class="content">
<h1 class="title">vbp</h1>
<div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#org734f169">1. Chapter 01: Vue.js概述</a>
<ul>
<li><a href="#org00d5af2">1.1. 六何分析Vue</a>
<ul>
<li><a href="#orgeb054cb">1.1.1. Vue是什么</a></li>
<li><a href="#org4c9a36b">1.1.2. Vue是由谁开发的</a></li>
<li><a href="#orgff632fd">1.1.3. Vue的发展历程</a></li>
<li><a href="#org3b2085e">1.1.4. Vue用在哪些项目的开发中</a></li>
<li><a href="#orgdcd05d8">1.1.5. 为什么要选择Vue</a></li>
</ul>
</li>
<li><a href="#org90618d2">1.2. Vue3的新特性</a>
<ul>
<li><a href="#org92d25ca">1.2.1. 内在核心的变化</a></li>
<li><a href="#org22d8187">1.2.2. 渲染引擎的改进</a></li>
<li><a href="#org234ddb1">1.2.3. 新的内置组件</a></li>
<li><a href="#org662a4a7">1.2.4. API的修改</a></li>
</ul>
</li>
<li><a href="#org4dd31e7">1.3. Vue3的运行环境</a>
<ul>
<li><a href="#org82975cf">1.3.1. 运行环境搭建</a></li>
<li><a href="#org5023498">1.3.2. Vue开发者调试工具</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#orgd572926">2. Chapter 02: 核心语法</a>
<ul>
<li><a href="#org8850054">2.1. 模板语法</a>
<ul>
<li><a href="#orgbce6ac4">2.1.1. 插值语法</a></li>
<li><a href="#org60b73af">2.1.2. 指令语法</a></li>
<li><a href="#orgec3f5dd">2.1.3. data和methods配置项</a></li>
</ul>
</li>
<li><a href="#orgdb3acca">2.2. 计算属性</a>
<ul>
<li><a href="#org3b903a5">2.2.1. 计算属性的基本使用</a></li>
<li><a href="#org01137af">2.2.2. 计算属性和method方法</a></li>
<li><a href="#orgf7b614a">2.2.3. 计算属性的setter</a></li>
</ul>
</li>
<li><a href="#org3c544a9">2.3. 监听</a>
<ul>
<li><a href="#org9eed041">2.3.1. 监听的基本使用</a></li>
</ul>
</li>
<li><a href="#orgdc2abaf">2.4. 绑定动态样式</a>
<ul>
<li><a href="#org5bcab27">2.4.1. 字符串绑定</a></li>
<li><a href="#org29610fe">2.4.2. 对象绑定</a></li>
<li><a href="#org2d83df4">2.4.3. 绑定数组</a></li>
</ul>
</li>
<li><a href="#org749a844">2.5. 条件渲染指令</a>
<ul>
<li><a href="#orgc8d799c">2.5.1. v-if相关指令</a></li>
<li><a href="#org78baa56">2.5.2. v-show指令</a></li>
<li><a href="#org36a55e2">2.5.3. 比较v-if和v-show指令</a></li>
</ul>
</li>
<li><a href="#orgd0780a6">2.6. 列表渲染指令</a>
<ul>
<li><a href="#orga60032d">2.6.1. 列表的动态渲染</a></li>
<li><a href="#orgc88dbfe">2.6.2. 列表的增,删,改</a></li>
<li><a href="#org4790364">2.6.3. 列表的过滤</a></li>
<li><a href="#org9dfa826">2.6.4. 列表的排序</a></li>
</ul>
</li>
<li><a href="#org9b3a3a5">2.7. 事件处理</a>
<ul>
<li><a href="#orgd140638">2.7.1. 绑定事件监听</a></li>
<li><a href="#orgf50dc4c">2.7.2. 事件修饰符</a></li>
<li><a href="#org47bdc6a">2.7.3. 按键修饰符</a></li>
</ul>
</li>
<li><a href="#orgbc21129">2.8. 收集表单数据</a>
<ul>
<li><a href="#org109d1d3">2.8.1. 使用v-model指令</a></li>
<li><a href="#orgb1cbf9f">2.8.2. 相关指令修饰符</a></li>
</ul>
</li>
<li><a href="#org870ffbf">2.9. Vue实例的生命周期</a></li>
<li><a href="#org08765c1">2.10. 过渡与动画</a></li>
<li><a href="#org8a001cc">2.11. 内置指令</a>
<ul>
<li><a href="#org665888e">2.11.1. v-text和v-html指令</a></li>
<li><a href="#org58e0105">2.11.2. v-pre指令</a></li>
<li><a href="#org60e85ce">2.11.3. v-once指令</a></li>
<li><a href="#orgc7a2e98">2.11.4. v-memo指令</a></li>
<li><a href="#org3e16f79">2.11.5. v-cloak指令</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#org4d3ff05">3. Chapter 03: Vue3新语法</a>
<ul>
<li><a href="#org685ad5f">3.1. 组合式API的了解</a></li>
<li><a href="#org928e03b">3.2. 利用ref函数定义响应式数据</a></li>
<li><a href="#org1fcd0b4">3.3. 利用reactive函数定义响应式数据</a></li>
<li><a href="#org8acddc2">3.4. toRefs与toRef函数</a></li>
<li><a href="#org67de46b">3.5. readonly与shallowReadonly函数</a>
<ul>
<li><a href="#orgc23a6e6">3.5.1. readonly</a></li>
<li><a href="#org1478d77">3.5.2. shallowReadonly</a></li>
</ul>
</li>
<li><a href="#orgfac6f80">3.6. shallowRef与shallowReactive函数</a>
<ul>
<li><a href="#orga78938c">3.6.1. shallowRef</a></li>
<li><a href="#orgb2ecc90">3.6.2. shallowReactive</a></li>
</ul>
</li>
<li><a href="#orgacb9095">3.7. toRaw与markRaw函数</a>
<ul>
<li><a href="#orgecd06d9">3.7.1. toRaw</a></li>
<li><a href="#org940614d">3.7.2. markRaw</a></li>
</ul>
</li>
<li><a href="#orgc0670e0">3.8. computed函数</a>
<ul>
<li><a href="#orge33465b">3.8.1. 只读计算属性</a></li>
<li><a href="#orgfd86d99">3.8.2. 可读写属性</a></li>
<li><a href="#org75c775c">3.8.3. 返回值</a></li>
</ul>
</li>
<li><a href="#org19228ad">3.9. watch函数</a>
<ul>
<li><a href="#org38b0cce">3.9.1. watch语法</a></li>
<li><a href="#org3860b71">3.9.2. watch使用举例</a></li>
</ul>
</li>
<li><a href="#orgc65396d">3.10. 生命周期钩子函数</a></li>
</ul>
</li>
<li><a href="#org887f42c">4. Chapter 04: 组件详情</a>
<ul>
<li><a href="#orgdf9a9f1">4.1. 脚手架项目的分析</a></li>
<li><a href="#org0fd0421">4.2. ESLint与Prettier</a></li>
<li><a href="#orgd1b4092">4.3. 组件样式控制</a>
<ul>
<li><a href="#org0c37ff0">4.3.1. 组件的定义与使用</a></li>
<li><a href="#org38f01a2">4.3.2. 全局样式控制</a></li>
<li><a href="#orgf090ecd">4.3.3. 局部作用域样式控制</a></li>
<li><a href="#org0ce370e">4.3.4. 深度样式控制</a></li>
</ul>
</li>
<li><a href="#orgea8228f">4.4. 组件通信之props</a>
<ul>
<li><a href="#org5a3d5f3">4.4.1. 组件关系</a></li>
<li><a href="#org43ba912">4.4.2. 父与子通信之props</a></li>
</ul>
</li>
<li><a href="#org50ff178">4.5. 组件通信之ref与defineExpose</a></li>
<li><a href="#org456e731">4.6. 组件通信之emits与defineEmits</a></li>
<li><a href="#org70f2081">4.7. 组件通信之attrs</a></li>
<li><a href="#org239ee97">4.8. 组件通信之provide与inject</a></li>
<li><a href="#org0ddb72a">4.9. 组件通信之slot</a>
<ul>
<li><a href="#orgc4c7e3a">4.9.1. 默认插槽</a></li>
<li><a href="#org32ac061">4.9.2. 具名插槽</a></li>
<li><a href="#org8f106ea">4.9.3. 作用域插槽</a></li>
</ul>
</li>
<li><a href="#org844d586">4.10. 内置组件之Component</a></li>
<li><a href="#org5de0a2e">4.11. 内置组件之KeepAlive</a></li>
<li><a href="#org60792c5">4.12. 内置组件之Teleport</a></li>
<li><a href="#org06c684a">4.13. 代码封装之自定义directive(指令)</a></li>
<li><a href="#org76a5e90">4.14. 代码封装之自定义hook (钩子)</a></li>
<li><a href="#orge5c28ff">4.15. 代码封装之plugin (插件)</a></li>
</ul>
</li>
<li><a href="#orge075e1c">5. Chapter 05: Vue路由</a>
<ul>
<li><a href="#orgb2643a4">5.1. 路由的概念与核心功能</a></li>
<li><a href="#orged1da81">5.2. 动态组件加载</a></li>
<li><a href="#org7750d89">5.3. 配置简单路由</a></li>
<li><a href="#org7bc5230">5.4. 路由连接高亮显示</a>
<ul>
<li><a href="#orgb19c135">5.4.1. 利用vue-router模块的内置样式实现路由链接高亮显示</a></li>
<li><a href="#org4e9964a">5.4.2. 利用active-class属性实现路由链接高亮显示</a></li>
</ul>
</li>
<li><a href="#orgc101e98">5.5. 嵌套路由</a></li>
<li><a href="#org35a5629">5.6. 动态路由传参</a></li>
<li><a href="#orgf6feb3c">5.7. 路由参数映射</a>
<ul>
<li><a href="#org0ca9d2d">5.7.1. props值为布尔</a></li>
<li><a href="#org2e8fbdd">5.7.2. props值为对象</a></li>
<li><a href="#org572884b">5.7.3. props值为函数</a></li>
<li><a href="#org205d4e3">5.7.4. 拆分路由配置代码,提高可维护性</a></li>
</ul>
</li>
<li><a href="#orgd1c295f">5.8. 命名路由切换</a></li>
<li><a href="#orgd55ace4">5.9. 命名视图渲染</a></li>
<li><a href="#org40b1698">5.10. 编程式路由导航</a></li>
<li><a href="#org12ebb3c">5.11. 路由过滤筛选</a></li>
<li><a href="#org6f23cc2">5.12. 路由的异步懒加载</a></li>
<li><a href="#org1c36b9a">5.13. 缓存路由组件</a></li>
</ul>
</li>
<li><a href="#orgf9f6924">6. Chapter 06: 数据请求</a>
<ul>
<li><a href="#orgc4cef5b">6.1. 数据请求的概念</a></li>
<li><a href="#orgaefd8a3">6.2. 数据接口</a></li>
<li><a href="#org3eac27c">6.3. 接口调试</a></li>
<li><a href="#orgb5e58a6">6.4. 原生API请求</a>
<ul>
<li><a href="#orgcf05f64">6.4.1. XMLHttpRequest</a></li>
<li><a href="#org63e5314">6.4.2. fetch</a></li>
<li><a href="#org0a6d440">6.4.3. axios</a></li>
</ul>
</li>
<li><a href="#orgd780913">6.5. axios请求</a></li>
</ul>
</li>
<li><a href="#org917eab7">7. Chapter 07: 状态管理</a>
<ul>
<li><a href="#org79b6b74">7.1. Pinia例子</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="outline-container-org734f169" class="outline-2">
<h2 id="org734f169"><span class="section-number-2">1.</span> Chapter 01: Vue.js概述</h2>
<div class="outline-text-2" id="text-1">
</div>
<div id="outline-container-org00d5af2" class="outline-3">
<h3 id="org00d5af2"><span class="section-number-3">1.1.</span> 六何分析Vue</h3>
<div class="outline-text-3" id="text-1-1">
<ul class="org-ul">
<li>所谓六何分析就是了解如下六个方面:
<ul class="org-ul">
<li>事件对象(What)</li>
<li>事件相关人员(Who)</li>
<li>事件发作历程(When)</li>
<li>事件应用场景(Where)</li>
<li>时间原因(Why)</li>
<li>如何了解应用与掌握该事件(How)</li>
</ul></li>
</ul>
</div>
<div id="outline-container-orgeb054cb" class="outline-4">
<h4 id="orgeb054cb"><span class="section-number-4">1.1.1.</span> Vue是什么</h4>
<div class="outline-text-4" id="text-1-1-1">
<ul class="org-ul">
<li>Vue是一款渐进式JavaScript框架</li>
<li>Vue还有如下著名的官方插件:
<ul class="org-ul">
<li>Pinia</li>
<li>Vuex</li>
<li>VueRouter</li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-org4c9a36b" class="outline-4">
<h4 id="org4c9a36b"><span class="section-number-4">1.1.2.</span> Vue是由谁开发的</h4>
<div class="outline-text-4" id="text-1-1-2">
<ul class="org-ul">
<li>Vue的主要作者是尤雨溪领导的开发团队</li>
</ul>
</div>
</div>
<div id="outline-container-orgff632fd" class="outline-4">
<h4 id="orgff632fd"><span class="section-number-4">1.1.3.</span> Vue的发展历程</h4>
<div class="outline-text-4" id="text-1-1-3">
<ul class="org-ul">
<li>Vue的发展历程如下
<ul class="org-ul">
<li>2015年10月26日, 1.0.0发布</li>
<li>2016年10月1日, 2.0.0发布</li>
<li>2020年9月18日, 3.0.0发布</li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-org3b2085e" class="outline-4">
<h4 id="org3b2085e"><span class="section-number-4">1.1.4.</span> Vue用在哪些项目的开发中</h4>
<div class="outline-text-4" id="text-1-1-4">
<ul class="org-ul">
<li>中国国内的互联网公司使用Vue较多</li>
</ul>
</div>
</div>
<div id="outline-container-orgdcd05d8" class="outline-4">
<h4 id="orgdcd05d8"><span class="section-number-4">1.1.5.</span> 为什么要选择Vue</h4>
<div class="outline-text-4" id="text-1-1-5">
<ul class="org-ul">
<li>Vue的优势有如下:
<ul class="org-ul">
<li>入门简单</li>
<li>功能强大</li>
<li>适应性强</li>
</ul></li>
</ul>
</div>
</div>
</div>
<div id="outline-container-org90618d2" class="outline-3">
<h3 id="org90618d2"><span class="section-number-3">1.2.</span> Vue3的新特性</h3>
<div class="outline-text-3" id="text-1-2">
<ul class="org-ul">
<li>Vue2是以JavaScript为开发基础的.而Vue3是以TypeScript为基础开发的</li>
<li>Vue3借鉴了其他框架和库的功能与优势,成功实现了API的高度抽象</li>
</ul>
</div>
<div id="outline-container-org92d25ca" class="outline-4">
<h4 id="org92d25ca"><span class="section-number-4">1.2.1.</span> 内在核心的变化</h4>
<div class="outline-text-4" id="text-1-2-1">
<ul class="org-ul">
<li>Vue3采用了浏览器中的一些新特性,比如Proxy,Reflect</li>
<li>Vue3选择了使用Typescript开发</li>
<li>Vue3将数据响应式从defineProperty更替为了Proxy</li>
</ul>
</div>
</div>
<div id="outline-container-org22d8187" class="outline-4">
<h4 id="org22d8187"><span class="section-number-4">1.2.2.</span> 渲染引擎的改进</h4>
<div class="outline-text-4" id="text-1-2-2">
<ul class="org-ul">
<li>Vue3对底层渲染引擎进行了改进,采用了新的虚拟DOM算法</li>
</ul>
</div>
</div>
<div id="outline-container-org234ddb1" class="outline-4">
<h4 id="org234ddb1"><span class="section-number-4">1.2.3.</span> 新的内置组件</h4>
<div class="outline-text-4" id="text-1-2-3">
<ul class="org-ul">
<li>Vue3新增了一些内置组件,开发人员可以利用它们来解决一些常见的问题,我们下面分别来介绍</li>
</ul>
</div>
<ol class="org-ol">
<li><a id="org996ea46"></a>Fragment<br />
<div class="outline-text-5" id="text-1-2-3-1">
<ul class="org-ul">
<li><p>
在 Vue 2 中，每个组件的模板都必须有一个唯一的根节点，像这样:
</p>
<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #721045;">template</span>&gt;
  &lt;<span style="color: #721045;">div</span>&gt;
    &lt;<span style="color: #721045;">h1</span>&gt;<span style="font-weight: bold; text-decoration: underline;">&#26631;&#39064;</span>&lt;/<span style="color: #721045;">h1</span>&gt;
    &lt;<span style="color: #721045;">p</span>&gt;&#20869;&#23481;&lt;/<span style="color: #721045;">p</span>&gt;
  &lt;/<span style="color: #721045;">div</span>&gt;
&lt;/<span style="color: #721045;">template</span>&gt;
</pre>
</div></li>
<li><p>
如果你试图写多个根节点vue2会报错,因为它要求模版中只能由一个根节点
</p>
<div class="org-src-container">
<pre class="src src-html"><span style="color: #7f0000;">&lt;!-- </span><span style="color: #7f0000;">vue2 error</span><span style="color: #7f0000;"> --&gt;</span>
&lt;<span style="color: #721045;">template</span>&gt;
  &lt;<span style="color: #721045;">h1</span>&gt;<span style="font-weight: bold; text-decoration: underline;">&#26631;&#39064;</span>&lt;/<span style="color: #721045;">h1</span>&gt;
  &lt;<span style="color: #721045;">p</span>&gt;&#20869;&#23481;&lt;/<span style="color: #721045;">p</span>&gt;
&lt;/<span style="color: #721045;">template</span>&gt;
</pre>
</div></li>
<li>Vue3提供了Fragment来解决这个问题:
<ul class="org-ul">
<li><p>
Fragment的最终效果是这样的,注意和上面报错的代码一致,只是vue3里面不报错了
</p>
<div class="org-src-container">
<pre class="src src-html"><span style="color: #7f0000;">&lt;!-- </span><span style="color: #7f0000;">vue3 ok</span><span style="color: #7f0000;"> --&gt;</span>
&lt;<span style="color: #721045;">template</span>&gt;
  &lt;<span style="color: #721045;">h1</span>&gt;<span style="font-weight: bold; text-decoration: underline;">&#26631;&#39064;</span>&lt;/<span style="color: #721045;">h1</span>&gt;
  &lt;<span style="color: #721045;">p</span>&gt;&#20869;&#23481;&lt;/<span style="color: #721045;">p</span>&gt;
&lt;/<span style="color: #721045;">template</span>&gt;
</pre>
</div></li>
<li><p>
上面其实是一个如下的代码的缩写,只不过Fragment tag可以省略
</p>
<div class="org-src-container">
<pre class="src src-html"><span style="color: #7f0000;">&lt;!-- </span><span style="color: #7f0000;">vue3 ok</span><span style="color: #7f0000;"> --&gt;</span>
&lt;<span style="color: #721045;">template</span>&gt;
  &lt;<span style="color: #721045;">Fragment</span>&gt;
    &lt;<span style="color: #721045;">h1</span>&gt;<span style="font-weight: bold; text-decoration: underline;">&#26631;&#39064;</span>&lt;/<span style="color: #721045;">h1</span>&gt;
    &lt;<span style="color: #721045;">p</span>&gt;&#20869;&#23481;&lt;/<span style="color: #721045;">p</span>&gt;
  &lt;/<span style="color: #721045;">Fragment</span>&gt;
&lt;/<span style="color: #721045;">template</span>&gt;
</pre>
</div></li>
</ul></li>
</ul>
</div>
</li>
<li><a id="orgcdab153"></a>Teleport<br />
<div class="outline-text-5" id="text-1-2-3-2">
<ul class="org-ul">
<li>Teleport 是 Vue 3 提供的一个内置组件，它允许你将某些 DOM 节点从当前组件的渲染位置“传送”（或者说移动）
到其他的 DOM 容器中，比如 body 或某个特定的 div。这在某些场景中非常有用，比如模态框（modal）、
弹窗（popup）、通知框等，它们通常需要被渲染在 body 或其他全局容器中，而不是嵌套在父组件的 DOM 结构中。
<ul class="org-ul">
<li><p>
下面是一个teleport的例子,把内容渲染到body,而不是嵌套在&lt;div&gt;内
</p>
<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #721045;">template</span>&gt;
  &lt;<span style="color: #721045;">div</span>&gt;
    &lt;<span style="color: #721045;">h1</span>&gt;<span style="font-weight: bold; text-decoration: underline;">&#24403;&#21069;&#32452;&#20214;&#20869;&#23481;</span>&lt;/<span style="color: #721045;">h1</span>&gt;
    &lt;<span style="color: #721045;">teleport</span> <span style="color: #005e8b;">to</span>=<span style="color: #3548cf;">"body"</span>&gt;
      &lt;<span style="color: #721045;">div</span> <span style="color: #005e8b;">class</span>=<span style="color: #3548cf;">"modal"</span>&gt;
        &#25105;&#26159;&#34987;&#20256;&#36865;&#21040; body &#30340;&#20869;&#23481;&#65281;
      &lt;/<span style="color: #721045;">div</span>&gt;
    &lt;/<span style="color: #721045;">teleport</span>&gt;
  &lt;/<span style="color: #721045;">div</span>&gt;
&lt;/<span style="color: #721045;">template</span>&gt;
</pre>
</div></li>
</ul></li>
<li>我们上面的to其实可以由三种常见的值:
<ul class="org-ul">
<li>"body": 将内容传递到body</li>
<li>"#app": 将内容传递到id为app的元素</li>
<li>.modal-container: 传送到某个类为modal-container的元素</li>
</ul></li>
</ul>
</div>
</li>
<li><a id="org60668f6"></a>Suspense<br />
<div class="outline-text-5" id="text-1-2-3-3">
<ul class="org-ul">
<li>Suspense 是 Vue 3 提供的一个异步组件加载工具，它允许你在等待异步内容加载时显示备用内容（也叫“占位内容”）。
等异步操作完成后，实际的内容会替换掉占位内容。
<ul class="org-ul">
<li><p>
示例如下
</p>
<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #721045;">template</span>&gt;
  &lt;<span style="color: #721045;">Suspense</span>&gt;
    <span style="color: #7f0000;">&lt;!-- </span><span style="color: #7f0000;">&#24322;&#27493;&#20869;&#23481;</span><span style="color: #7f0000;"> --&gt;</span>
    &lt;<span style="color: #721045;">template</span> #default&gt;
      &lt;<span style="color: #721045;">AsyncComponent</span> /&gt;
    &lt;/<span style="color: #721045;">template</span>&gt;

    <span style="color: #7f0000;">&lt;!-- </span><span style="color: #7f0000;">&#21344;&#20301;&#20869;&#23481;</span><span style="color: #7f0000;"> --&gt;</span>
    &lt;<span style="color: #721045;">template</span> #fallback&gt;
      &lt;<span style="color: #721045;">div</span>&gt;&#21152;&#36733;&#20013;...&lt;/<span style="color: #721045;">div</span>&gt;
    &lt;/<span style="color: #721045;">template</span>&gt;
  &lt;/<span style="color: #721045;">Suspense</span>&gt;
&lt;/<span style="color: #721045;">template</span>&gt;

&lt;<span style="color: #721045;">script</span>&gt;
  import { defineAsyncComponent } from "vue";

  const AsyncComponent = defineAsyncComponent(
    () =&gt; import("./components/MyAsyncComponent.vue"),
  );

  export default {
    components: {
      AsyncComponent,
    },
  };
&lt;/<span style="color: #721045;">script</span>&gt;
</pre>
</div></li>
</ul></li>
</ul>
</div>
</li>
</ol>
</div>
<div id="outline-container-org662a4a7" class="outline-4">
<h4 id="org662a4a7"><span class="section-number-4">1.2.4.</span> API的修改</h4>
<div class="outline-text-4" id="text-1-2-4">
<ul class="org-ul">
<li>Vue3中的变化主要体现在三个方面:
<ul class="org-ul">
<li>新添加了一些语法, 比如: 组合式API(ref, reactive), 初始化应用createApp</li>
<li>删除了一些API,比如: 将过滤器替换为计算属性</li>
<li>更新了一些API: 比如v-for和v-of的优先级</li>
</ul></li>
<li>下面具体介绍一些重点改进</li>
</ul>
</div>
<ol class="org-ol">
<li><a id="org3cf78f4"></a>组合式API<br />
<div class="outline-text-5" id="text-1-2-4-1">
<ul class="org-ul">
<li>组合式API是Vue3中最为重大的一个升级内容.也即是把代码的数据和函数"组合到一个地方"进行开发</li>
<li>组合到的那个地方,叫做setup</li>
<li>注意,组合式API存在,但是传统的选项API也依然可以使用(但是已经不再被推荐了)</li>
</ul>
</div>
</li>
<li><a id="org282201c"></a>filter过滤器的摒弃<br />
<div class="outline-text-5" id="text-1-2-4-2">
<ul class="org-ul">
<li>Vue2中经常使用过滤器功能,Vue3已经不再提供</li>
</ul>
</div>
</li>
<li><a id="org6f003ac"></a>bus总线移除<br />
<div class="outline-text-5" id="text-1-2-4-3">
<ul class="org-ul">
<li>Vue3中已经移除了bus总线</li>
</ul>
</div>
</li>
<li><a id="orgb17815a"></a>不再有全局Vue实例的$mount方法<br />
<div class="outline-text-5" id="text-1-2-4-4">
<ul class="org-ul">
<li>不再使用$mount方法,改为使用createApp命令</li>
</ul>
</div>
</li>
<li><a id="org1354572"></a>v-model<br />
<div class="outline-text-5" id="text-1-2-4-5">
<ul class="org-ul">
<li>Vue3的组件可以进行多次v-model的双向数据绑定处理</li>
</ul>
</div>
</li>
<li><a id="org16ec254"></a>样式的强化<br />
<div class="outline-text-5" id="text-1-2-4-6">
<ul class="org-ul">
<li>Vue3中增加了新的操作样式的方法</li>
</ul>
</div>
</li>
</ol>
</div>
</div>
<div id="outline-container-org4dd31e7" class="outline-3">
<h3 id="org4dd31e7"><span class="section-number-3">1.3.</span> Vue3的运行环境</h3>
<div class="outline-text-3" id="text-1-3">
</div>
<div id="outline-container-org82975cf" class="outline-4">
<h4 id="org82975cf"><span class="section-number-4">1.3.1.</span> 运行环境搭建</h4>
<div class="outline-text-4" id="text-1-3-1">
<ul class="org-ul">
<li>Vue3有两种方式搭建运行环境,分别是页面直接引用和通过脚手架创建Vue项目</li>
</ul>
</div>
<ol class="org-ol">
<li><a id="orgc25afbb"></a>页面直接引入Vue库<br />
<div class="outline-text-5" id="text-1-3-1-1">
<ul class="org-ul">
<li>我们通过cdn直接引入Vue到script标签内.这种方法对于快速实验很有帮助
<ul class="org-ul">
<li><p>
示例代码如下
</p>
<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #531ab6;">!doctype</span> html&gt;
&lt;<span style="color: #721045;">html</span> <span style="color: #005e8b;">lang</span>=<span style="color: #3548cf;">"en"</span>&gt;
  &lt;<span style="color: #721045;">head</span>&gt;
    &lt;<span style="color: #721045;">meta</span> <span style="color: #005e8b;">charset</span>=<span style="color: #3548cf;">"UTF-8"</span> /&gt;
    &lt;<span style="color: #721045;">meta</span> <span style="color: #005e8b;">name</span>=<span style="color: #3548cf;">"viewport"</span> <span style="color: #005e8b;">content</span>=<span style="color: #3548cf;">"width=device-width, initial-scale=1.0"</span> /&gt;
    &lt;<span style="color: #721045;">title</span>&gt;<span style="font-weight: bold; text-decoration: underline;">Vue 3 CDN &#31034;&#20363; - &#32452;&#21512;&#24335;API</span>&lt;/<span style="color: #721045;">title</span>&gt;
    <span style="color: #7f0000;">&lt;!-- </span><span style="color: #7f0000;">&#24341;&#20837; Vue 3 &#30340; CDN</span><span style="color: #7f0000;"> --&gt;</span>
    &lt;<span style="color: #721045;">script</span> <span style="color: #005e8b;">src</span>=<span style="color: #3548cf;">"https://unpkg.com/vue@3/dist/vue.global.js"</span>&gt;&lt;/<span style="color: #721045;">script</span>&gt;
  &lt;/<span style="color: #721045;">head</span>&gt;
  &lt;<span style="color: #721045;">body</span>&gt;
    &lt;<span style="color: #721045;">div</span> <span style="color: #005e8b;">id</span>=<span style="color: #3548cf;">"app"</span>&gt;
      <span style="color: #7f0000;">&lt;!-- </span><span style="color: #7f0000;">Vue &#27169;&#26495;</span><span style="color: #7f0000;"> --&gt;</span>
      &lt;<span style="color: #721045;">h1</span>&gt;<span style="font-weight: bold; text-decoration: underline;">{{ message }}</span>&lt;/<span style="color: #721045;">h1</span>&gt;
      &lt;<span style="color: #721045;">button</span> @click=<span style="color: #3548cf;">"updateMessage"</span>&gt;&#28857;&#20987;&#25105;&#26356;&#26032;&#28040;&#24687;&lt;/<span style="color: #721045;">button</span>&gt;
    &lt;/<span style="color: #721045;">div</span>&gt;

    &lt;<span style="color: #721045;">script</span>&gt;
      const { createApp, ref } = Vue; // &#20174; Vue &#20013;&#35299;&#26500;&#20986;&#38656;&#35201;&#30340;API

      // &#21019;&#24314; Vue &#24212;&#29992;
      const app = createApp({
        setup() {
          // &#20351;&#29992; ref &#21019;&#24314;&#21709;&#24212;&#24335;&#21464;&#37327;
          const message = ref("Hello, Vue 3 (Composition API)!");

          // &#23450;&#20041;&#19968;&#20010;&#26041;&#27861;&#26469;&#26356;&#26032;&#28040;&#24687;
          const updateMessage = () =&gt; {
            message.value = "&#20320;&#28857;&#20987;&#20102;&#25353;&#38062;&#65292;&#28040;&#24687;&#24050;&#26356;&#26032;&#65281;&#65288;&#32452;&#21512;&#24335;API&#65289;";
          };

          // &#36820;&#22238;&#27169;&#26495;&#20013;&#38656;&#35201;&#20351;&#29992;&#30340;&#25968;&#25454;&#21644;&#26041;&#27861;
          return {
            message,
            updateMessage,
          };
        },
      });

      // &#25346;&#36733;&#21040; #app
      app.mount("#app");
    &lt;/<span style="color: #721045;">script</span>&gt;
  &lt;/<span style="color: #721045;">body</span>&gt;
&lt;/<span style="color: #721045;">html</span>&gt;
</pre>
</div></li>
</ul></li>
</ul>
</div>
</li>
<li><a id="org22a52f0"></a>通过脚手架创建Vue项目<br />
<div class="outline-text-5" id="text-1-3-1-2">
<ul class="org-ul">
<li>SPA项目显然要有自己的npm项目,这种情况下如果要创建Vue项目可以:
<ul class="org-ul">
<li>使用vue cli (已经不再被推荐使用了)</li>
<li><p>
使用vite: 这是推荐的创建Vue3项目的方法,示例如下
</p>
<div class="org-src-container">
<pre class="src src-shell">npm init vue@latest
</pre>
</div></li>
</ul></li>
</ul>
</div>
</li>
</ol>
</div>
<div id="outline-container-org5023498" class="outline-4">
<h4 id="org5023498"><span class="section-number-4">1.3.2.</span> Vue开发者调试工具</h4>
<div class="outline-text-4" id="text-1-3-2">
<ul class="org-ul">
<li>可以在各大浏览器市场搜索并下载vue-devtools使用.</li>
</ul>
</div>
</div>
</div>
</div>
<div id="outline-container-orgd572926" class="outline-2">
<h2 id="orgd572926"><span class="section-number-2">2.</span> Chapter 02: 核心语法</h2>
<div class="outline-text-2" id="text-2">
</div>
<div id="outline-container-org8850054" class="outline-3">
<h3 id="org8850054"><span class="section-number-3">2.1.</span> 模板语法</h3>
<div class="outline-text-3" id="text-2-1">
<ul class="org-ul">
<li>Vue使用了一种基于HTML的模版语法,使用户能够生命式地将组件实例的数据绑定到呈现的DOM上</li>
<li>模版中除了HTML的结构,还包括两个Vue模版特有的语法:
<ul class="org-ul">
<li>插值: 只有一个功能,就是向标签中插入一个动态的值</li>
<li>指令: 用来操作其所在的标签,比如制动动态属性值,绑定事件监听,控制显示隐藏等</li>
</ul></li>
<li>底层机制中,Vue会将模版编译成高度优化的JavaScript代码,结合响应式系统,当应用状态数据变更时,Vue能够自
动更新需要变化的DOM节点,并且做到最小化更新</li>
</ul>
</div>
<div id="outline-container-orgbce6ac4" class="outline-4">
<h4 id="orgbce6ac4"><span class="section-number-4">2.1.1.</span> 插值语法</h4>
<div class="outline-text-4" id="text-2-1-1">
<ul class="org-ul">
<li>插值语法用来向标签中插入一个动态的值.格式很固定,就是一个双大括号包含一个JavaScript值
<ul class="org-ul">
<li><p>
示例如下
</p>
<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #531ab6;">!doctype</span> html&gt;
&lt;<span style="color: #721045;">html</span> <span style="color: #005e8b;">lang</span>=<span style="color: #3548cf;">"en"</span>&gt;
  &lt;<span style="color: #721045;">head</span>&gt;
    &lt;<span style="color: #721045;">meta</span> <span style="color: #005e8b;">charset</span>=<span style="color: #3548cf;">"UTF-8"</span> /&gt;
    &lt;<span style="color: #721045;">meta</span> <span style="color: #005e8b;">name</span>=<span style="color: #3548cf;">"viewport"</span> <span style="color: #005e8b;">content</span>=<span style="color: #3548cf;">"width=device-width, initial-scale=1.0"</span> /&gt;
    &lt;<span style="color: #721045;">title</span>&gt;<span style="font-weight: bold; text-decoration: underline;">&#25554;&#20540;&#35821;&#27861;</span>&lt;/<span style="color: #721045;">title</span>&gt;
    &lt;<span style="color: #721045;">script</span> <span style="color: #005e8b;">src</span>=<span style="color: #3548cf;">"https://unpkg.com/vue@3/dist/vue.global.js"</span>&gt;&lt;/<span style="color: #721045;">script</span>&gt;
  &lt;/<span style="color: #721045;">head</span>&gt;
  &lt;<span style="color: #721045;">body</span>&gt;
    &lt;<span style="color: #721045;">div</span> <span style="color: #005e8b;">id</span>=<span style="color: #3548cf;">"app"</span>&gt;
      <span style="color: #7f0000;">&lt;!-- </span><span style="color: #7f0000;">Vue &#27169;&#26495;</span><span style="color: #7f0000;"> --&gt;</span>
      &lt;<span style="color: #721045;">h1</span>&gt;<span style="font-weight: bold; text-decoration: underline;">{{ 123 }}</span>&lt;/<span style="color: #721045;">h1</span>&gt;
      &lt;<span style="color: #721045;">h1</span>&gt;<span style="font-weight: bold; text-decoration: underline;">{{ message }}</span>&lt;/<span style="color: #721045;">h1</span>&gt;
      &lt;<span style="color: #721045;">h1</span>&gt;<span style="font-weight: bold; text-decoration: underline;">{{ message.toUpperCase() }}</span>&lt;/<span style="color: #721045;">h1</span>&gt;
      &lt;<span style="color: #721045;">h1</span>&gt;<span style="font-weight: bold; text-decoration: underline;">{{ score }}</span>&lt;/<span style="color: #721045;">h1</span>&gt;
      &lt;<span style="color: #721045;">h1</span>&gt;<span style="font-weight: bold; text-decoration: underline;">{{ score &gt; 60 ? 'Passed!' : 'Failed' }}</span>&lt;/<span style="color: #721045;">h1</span>&gt;
    &lt;/<span style="color: #721045;">div</span>&gt;

    &lt;<span style="color: #721045;">script</span>&gt;
      const { createApp, ref } = Vue; // &#20174; Vue &#20013;&#35299;&#26500;&#20986;&#38656;&#35201;&#30340;API

      // &#21019;&#24314; Vue &#24212;&#29992;
      const app = createApp({
        setup() {
          const message = "Hello World";
          const score = 61;

          // &#36820;&#22238;&#27169;&#26495;&#20013;&#38656;&#35201;&#20351;&#29992;&#30340;&#25968;&#25454;
          return {
            message,
            score,
          };
        },
      });

      // &#25346;&#36733;&#21040; #app
      app.mount("#app");
    &lt;/<span style="color: #721045;">script</span>&gt;
  &lt;/<span style="color: #721045;">body</span>&gt;
&lt;/<span style="color: #721045;">html</span>&gt;
</pre>
</div></li>
<li>从上面的例子我们可以看到,双大括号里面可以包含任意的JavaScript表达式,可以是一个常量,一个变量,一个
变量的方法调用,甚至是一个三目表达式</li>
<li>还需要注意的是,插值语法只可以作为一个标签的文本,不能作为一个表情的属性值!</li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-org60b73af" class="outline-4">
<h4 id="org60b73af"><span class="section-number-4">2.1.2.</span> 指令语法</h4>
<div class="outline-text-4" id="text-2-1-2">
<ul class="org-ul">
<li>指令(Directive)是带有"v-"前缀的Vue自定义标签属性,其属性值一般是一个JavaScript表达式</li>
<li>Vue包含了不同的功能指令,比如:
<ul class="org-ul">
<li>v-bind用来动态指定属性值</li>
<li>v-on用来给标签绑定事件监听</li>
<li>v-if和v-show用来控制标签是否显示</li>
</ul></li>
<li>指令的作用域始终是这个指令属性所在的标签</li>
<li>我们下面以v-bind和v-on举一个例子
<ul class="org-ul">
<li><p>
示例如下
</p>
<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #531ab6;">!doctype</span> html&gt;
&lt;<span style="color: #721045;">html</span> <span style="color: #005e8b;">lang</span>=<span style="color: #3548cf;">"en"</span>&gt;
  &lt;<span style="color: #721045;">head</span>&gt;
    &lt;<span style="color: #721045;">meta</span> <span style="color: #005e8b;">charset</span>=<span style="color: #3548cf;">"UTF-8"</span> /&gt;
    &lt;<span style="color: #721045;">meta</span> <span style="color: #005e8b;">name</span>=<span style="color: #3548cf;">"viewport"</span> <span style="color: #005e8b;">content</span>=<span style="color: #3548cf;">"width=device-width, initial-scale=1.0"</span> /&gt;
    &lt;<span style="color: #721045;">title</span>&gt;<span style="font-weight: bold; text-decoration: underline;">&#25351;&#20196;&#35821;&#27861;</span>&lt;/<span style="color: #721045;">title</span>&gt;
    &lt;<span style="color: #721045;">script</span> <span style="color: #005e8b;">src</span>=<span style="color: #3548cf;">"https://unpkg.com/vue@3/dist/vue.global.js"</span>&gt;&lt;/<span style="color: #721045;">script</span>&gt;
  &lt;/<span style="color: #721045;">head</span>&gt;
  &lt;<span style="color: #721045;">body</span>&gt;
    &lt;<span style="color: #721045;">div</span> <span style="color: #005e8b;">id</span>=<span style="color: #3548cf;">"app"</span>&gt;
      <span style="color: #7f0000;">&lt;!-- </span><span style="color: #7f0000;">Vue &#27169;&#26495;</span><span style="color: #7f0000;"> --&gt;</span>
      &lt;<span style="color: #721045;">a</span> <span style="color: #8f0075;">v-bind</span>:<span style="color: #005e8b;">href</span>=<span style="color: #3548cf;">"url"</span>&gt;Bing to search&lt;/<span style="color: #721045;">a</span>&gt;
      &lt;<span style="color: #721045;">br</span> /&gt;
      &lt;<span style="color: #721045;">button</span> <span style="color: #8f0075;">v-on</span>:<span style="color: #005e8b;">click</span>=<span style="color: #3548cf;">"confirm"</span>&gt;Confirm&lt;/<span style="color: #721045;">button</span>&gt;
    &lt;/<span style="color: #721045;">div</span>&gt;

    &lt;<span style="color: #721045;">script</span>&gt;
      const { createApp } = Vue; // &#20174; Vue &#20013;&#35299;&#26500;&#20986;&#38656;&#35201;&#30340;API

      // &#21019;&#24314; Vue &#24212;&#29992;
      const app = createApp({
        setup() {
          const url = "https://bing.com";
          function confirm() {
            if (window.confirm("Are you sure?")) {
              window.location.href = "https://www.baidu.com";
            }
          }

          // &#36820;&#22238;&#27169;&#26495;&#20013;&#38656;&#35201;&#20351;&#29992;&#30340;&#25968;&#25454;
          return {
            url,
            confirm,
          };
        },
      });

      // &#25346;&#36733;&#21040; #app
      app.mount("#app");
    &lt;/<span style="color: #721045;">script</span>&gt;
  &lt;/<span style="color: #721045;">body</span>&gt;
&lt;/<span style="color: #721045;">html</span>&gt;
</pre>
</div></li>
<li>上例中用法v-bind使用总结,`v-bind:&lt;属性名&gt;="&lt;JavaScript表达式&gt;"`</li>
<li>上例中用法v-on使用总结,`v-on:&lt;事件名&gt;"&lt;方法名表达式&gt;"`</li>
<li>注意,无论是v-bind还是v-on,一旦使用之后,在双引号里面就可以书写JavaScript代码了.</li>
<li>更为重要的是,我们由于v-bind和v-on使用频率很高,我们会对他们进行简化:
<ol class="org-ol">
<li>`v-bind:&lt;属性名&gt;="&lt;JavaScript表达式&gt;"`简化成`:&lt;属性名&gt;="&lt;JavaScript表达式&gt;"`</li>
<li>`v-on:&lt;事件名&gt;"&lt;方法名表达式&gt;"`简化成`@&lt;事件名&gt;"&lt;方法名表达式&gt;"`</li>
</ol></li>
<li><p>
上面代码也就可以改成如下
</p>
<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #531ab6;">!doctype</span> html&gt;
&lt;<span style="color: #721045;">html</span> <span style="color: #005e8b;">lang</span>=<span style="color: #3548cf;">"en"</span>&gt;
  &lt;<span style="color: #721045;">head</span>&gt;
    &lt;<span style="color: #721045;">meta</span> <span style="color: #005e8b;">charset</span>=<span style="color: #3548cf;">"UTF-8"</span> /&gt;
    &lt;<span style="color: #721045;">meta</span> <span style="color: #005e8b;">name</span>=<span style="color: #3548cf;">"viewport"</span> <span style="color: #005e8b;">content</span>=<span style="color: #3548cf;">"width=device-width, initial-scale=1.0"</span> /&gt;
    &lt;<span style="color: #721045;">title</span>&gt;<span style="font-weight: bold; text-decoration: underline;">&#25351;&#20196;&#35821;&#27861;</span>&lt;/<span style="color: #721045;">title</span>&gt;
    &lt;<span style="color: #721045;">script</span> <span style="color: #005e8b;">src</span>=<span style="color: #3548cf;">"https://unpkg.com/vue@3/dist/vue.global.js"</span>&gt;&lt;/<span style="color: #721045;">script</span>&gt;
  &lt;/<span style="color: #721045;">head</span>&gt;
  &lt;<span style="color: #721045;">body</span>&gt;
    &lt;<span style="color: #721045;">div</span> <span style="color: #005e8b;">id</span>=<span style="color: #3548cf;">"app"</span>&gt;
      <span style="color: #7f0000;">&lt;!-- </span><span style="color: #7f0000;">Vue &#27169;&#26495;</span><span style="color: #7f0000;"> --&gt;</span>
      &lt;<span style="color: #721045;">a</span> :href=<span style="color: #3548cf;">"url"</span>&gt;Bing to search&lt;/<span style="color: #721045;">a</span>&gt;
      &lt;<span style="color: #721045;">br</span> /&gt;
      &lt;<span style="color: #721045;">button</span> @click=<span style="color: #3548cf;">"confirm"</span>&gt;Confirm&lt;/<span style="color: #721045;">button</span>&gt;
    &lt;/<span style="color: #721045;">div</span>&gt;

    &lt;<span style="color: #721045;">script</span>&gt;
      const { createApp } = Vue; // &#20174; Vue &#20013;&#35299;&#26500;&#20986;&#38656;&#35201;&#30340;API

      // &#21019;&#24314; Vue &#24212;&#29992;
      const app = createApp({
        setup() {
          const url = "https://bing.com";
          function confirm() {
            if (window.confirm("Are you sure?")) {
              window.location.href = "https://www.baidu.com";
            }
          }

          // &#36820;&#22238;&#27169;&#26495;&#20013;&#38656;&#35201;&#20351;&#29992;&#30340;&#25968;&#25454;
          return {
            url,
            confirm,
          };
        },
      });

      // &#25346;&#36733;&#21040; #app
      app.mount("#app");
    &lt;/<span style="color: #721045;">script</span>&gt;
  &lt;/<span style="color: #721045;">body</span>&gt;
&lt;/<span style="color: #721045;">html</span>&gt;
</pre>
</div></li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-orgec3f5dd" class="outline-4">
<h4 id="orgec3f5dd"><span class="section-number-4">2.1.3.</span> data和methods配置项</h4>
<div class="outline-text-4" id="text-2-1-3">
<ul class="org-ul">
<li>我们前面的例子,在createAp里面都是使用setup()来创建对象和函数,这是Vue3的推荐做法(也就是所谓的组合式API),
但是Vue3为了向前兼容,也要介绍下Vue2中主力使用,Vue3中还支持,但是不再推荐的选项式API</li>
<li>选项式API的核心,就是createApp函数"第一次参数对象"里面的两个属性(property),就是data和methods</li>
<li>先看第一个属性,也就是data属性.这个属性是一个"返回对象的函数",它必须是函数的原因是:
<ul class="org-ul">
<li>每个 Vue 组件实例都需要有自己独立的数据状态。如果 data 是一个对象，那么所有的组件实例会共享同一个数据对象（因为对象是引用类型）</li>
<li>如果 data 是一个函数，每次创建组件实例时，都会调用这个函数，返回一个全新的数据对象，从而使每个实例的数据是独立的</li>
</ul></li>
<li>再看第二个属性,也就是method.这个属性是一个普通的对象,这个对象的每个成员都是一个函数.每个函数中都可
以通过this.xxx来读取data对象中的属性(其中xxx在data属性中定义并返回)</li>
<li>下面我们通过一个例子来看下data和methods如何使用
<ul class="org-ul">
<li><p>
示例如下,这个例子中我们很清晰的能看出data是一个function,它返回一个对象. method是一个对象,成员都是对象
</p>
<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #531ab6;">!doctype</span> html&gt;

&lt;<span style="color: #721045;">html</span> <span style="color: #005e8b;">lang</span>=<span style="color: #3548cf;">"en"</span>&gt;
  &lt;<span style="color: #721045;">head</span>&gt;
    &lt;<span style="color: #721045;">meta</span> <span style="color: #005e8b;">charset</span>=<span style="color: #3548cf;">"UTF-8"</span> /&gt;
    &lt;<span style="color: #721045;">meta</span> <span style="color: #005e8b;">name</span>=<span style="color: #3548cf;">"viewport"</span> <span style="color: #005e8b;">content</span>=<span style="color: #3548cf;">"width=device-width, initial-scale=1.0"</span> /&gt;
    &lt;<span style="color: #721045;">title</span>&gt;<span style="font-weight: bold; text-decoration: underline;">&#36873;&#39033;&#24335;API</span>&lt;/<span style="color: #721045;">title</span>&gt;
    &lt;<span style="color: #721045;">script</span> <span style="color: #005e8b;">src</span>=<span style="color: #3548cf;">"https://unpkg.com/vue@3/dist/vue.global.js"</span>&gt;&lt;/<span style="color: #721045;">script</span>&gt;
  &lt;/<span style="color: #721045;">head</span>&gt;
  &lt;<span style="color: #721045;">body</span>&gt;
    &lt;<span style="color: #721045;">div</span> <span style="color: #005e8b;">id</span>=<span style="color: #3548cf;">"app"</span>&gt;
      &lt;<span style="color: #721045;">h2</span>&gt;<span style="font-weight: bold; font-style: italic; text-decoration: underline;">count: {{ count }}</span>&lt;/<span style="color: #721045;">h2</span>&gt;
      &lt;<span style="color: #721045;">button</span> @click=<span style="color: #3548cf;">"updateCount"</span>&gt;UpdateCount&lt;/<span style="color: #721045;">button</span>&gt;
    &lt;/<span style="color: #721045;">div</span>&gt;

    &lt;<span style="color: #721045;">script</span>&gt;
      const { createApp } = Vue; // &#20174; Vue &#20013;&#35299;&#26500;&#20986;&#38656;&#35201;&#30340;API

      // &#21019;&#24314; Vue &#24212;&#29992;
      const app = createApp({
        data: function () {
          return {
            count: 0,
          };
        },
        methods: {
          updateCount: function () {
            this.count += 1;
          },
        },
      });

      // &#25346;&#36733;&#21040; #app
      app.mount("#app");
    &lt;/<span style="color: #721045;">script</span>&gt;
  &lt;/<span style="color: #721045;">body</span>&gt;
&lt;/<span style="color: #721045;">html</span>&gt;
</pre>
</div></li>
<li><p>
上面是es5的写法,容易看出在对象中的"函数属性",比如data,写成如下
</p>
<div class="org-src-container">
<pre class="src src-js"><span style="color: #721045;">data</span>: <span style="color: #531ab6;">function</span> <span style="color: #000000;">()</span> <span style="color: #000000;">{</span>
  <span style="color: #531ab6;">return</span> <span style="color: #dd22dd;">{</span>
    count: 0,
  <span style="color: #dd22dd;">}</span>;
<span style="color: #000000;">}</span>
</pre>
</div></li>
<li><p>
从es6开始,Javascript支持对象方法的简写语法.那么data就可以如下书写了
</p>
<div class="org-src-container">
<pre class="src src-js">data<span style="color: #000000;">()</span> <span style="color: #000000;">{</span>
  <span style="color: #531ab6;">return</span> <span style="color: #dd22dd;">{</span>
    count: 0,
  <span style="color: #dd22dd;">}</span>;
<span style="color: #000000;">}</span>
</pre>
</div></li>
<li><p>
那么,使用简写语法更改data和updateCount之后的代码如下
</p>
<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #531ab6;">!doctype</span> html&gt;

&lt;<span style="color: #721045;">html</span> <span style="color: #005e8b;">lang</span>=<span style="color: #3548cf;">"en"</span>&gt;
  &lt;<span style="color: #721045;">head</span>&gt;
    &lt;<span style="color: #721045;">meta</span> <span style="color: #005e8b;">charset</span>=<span style="color: #3548cf;">"UTF-8"</span> /&gt;
    &lt;<span style="color: #721045;">meta</span> <span style="color: #005e8b;">name</span>=<span style="color: #3548cf;">"viewport"</span> <span style="color: #005e8b;">content</span>=<span style="color: #3548cf;">"width=device-width, initial-scale=1.0"</span> /&gt;
    &lt;<span style="color: #721045;">title</span>&gt;<span style="font-weight: bold; text-decoration: underline;">&#36873;&#39033;&#24335;API</span>&lt;/<span style="color: #721045;">title</span>&gt;
    &lt;<span style="color: #721045;">script</span> <span style="color: #005e8b;">src</span>=<span style="color: #3548cf;">"https://unpkg.com/vue@3/dist/vue.global.js"</span>&gt;&lt;/<span style="color: #721045;">script</span>&gt;
  &lt;/<span style="color: #721045;">head</span>&gt;
  &lt;<span style="color: #721045;">body</span>&gt;
    &lt;<span style="color: #721045;">div</span> <span style="color: #005e8b;">id</span>=<span style="color: #3548cf;">"app"</span>&gt;
      &lt;<span style="color: #721045;">h2</span>&gt;<span style="font-weight: bold; font-style: italic; text-decoration: underline;">count: {{ count }}</span>&lt;/<span style="color: #721045;">h2</span>&gt;
      &lt;<span style="color: #721045;">button</span> @click=<span style="color: #3548cf;">"updateCount"</span>&gt;UpdateCount&lt;/<span style="color: #721045;">button</span>&gt;
    &lt;/<span style="color: #721045;">div</span>&gt;

    &lt;<span style="color: #721045;">script</span>&gt;
      const { createApp } = Vue; // &#20174; Vue &#20013;&#35299;&#26500;&#20986;&#38656;&#35201;&#30340;API

      // &#21019;&#24314; Vue &#24212;&#29992;
      const app = createApp({
        data() {
          return {
            count: 0,
          };
        },
        methods: {
          updateCount() {
            this.count += 1;
          },
        },
      });

      // &#25346;&#36733;&#21040; #app
      app.mount("#app");
    &lt;/<span style="color: #721045;">script</span>&gt;
  &lt;/<span style="color: #721045;">body</span>&gt;
&lt;/<span style="color: #721045;">html</span>&gt;
</pre>
</div></li>
</ul></li>
</ul>
</div>
</div>
</div>
<div id="outline-container-orgdb3acca" class="outline-3">
<h3 id="orgdb3acca"><span class="section-number-3">2.2.</span> 计算属性</h3>
<div class="outline-text-3" id="text-2-2">
</div>
<div id="outline-container-org3b903a5" class="outline-4">
<h4 id="org3b903a5"><span class="section-number-4">2.2.1.</span> 计算属性的基本使用</h4>
<div class="outline-text-4" id="text-2-2-1">
<ul class="org-ul">
<li><p>
之前我们看到过用三元表达式动态判断data中的score值
</p>
<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #721045;">h1</span>&gt;<span style="font-weight: bold; text-decoration: underline;">{{ score &gt; 60 ? 'Passed!' : 'Failed' }}</span>&lt;/<span style="color: #721045;">h1</span>&gt;
</pre>
</div></li>
<li>上述方法首先看起来不直观,其次,如果这个逻辑需要在多处展示,那么显然我们把一段逻辑复制到各处就违反了DRY
原则.</li>
<li>对此,Vue给出的解决方案是计算属性,在createApp的对象参数中,其名字是computed</li>
<li>在Vue2中,使用computed的体验有些奇怪.因为computed和methods一样是一个"对象属性,且成员都是函数",但是
computed的函数在插值语法中使用的时候,是不加括号的.尽管有各种各样的解释,但是这确实猛一看令人费解,在
后面Vue3里面,我们会看到computed在setup()里面使用显然更加容易理解
<ul class="org-ul">
<li><p>
示例如下
</p>
<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #531ab6;">!doctype</span> html&gt;

&lt;<span style="color: #721045;">html</span> <span style="color: #005e8b;">lang</span>=<span style="color: #3548cf;">"en"</span>&gt;
  &lt;<span style="color: #721045;">head</span>&gt;
    &lt;<span style="color: #721045;">meta</span> <span style="color: #005e8b;">charset</span>=<span style="color: #3548cf;">"UTF-8"</span> /&gt;
    &lt;<span style="color: #721045;">meta</span> <span style="color: #005e8b;">name</span>=<span style="color: #3548cf;">"viewport"</span> <span style="color: #005e8b;">content</span>=<span style="color: #3548cf;">"width=device-width, initial-scale=1.0"</span> /&gt;
    &lt;<span style="color: #721045;">title</span>&gt;<span style="font-weight: bold; text-decoration: underline;">&#35745;&#31639;&#23646;&#24615;</span>&lt;/<span style="color: #721045;">title</span>&gt;
    &lt;<span style="color: #721045;">script</span> <span style="color: #005e8b;">src</span>=<span style="color: #3548cf;">"https://unpkg.com/vue@3/dist/vue.global.js"</span>&gt;&lt;/<span style="color: #721045;">script</span>&gt;
  &lt;/<span style="color: #721045;">head</span>&gt;
  &lt;<span style="color: #721045;">body</span>&gt;
    &lt;<span style="color: #721045;">div</span> <span style="color: #005e8b;">id</span>=<span style="color: #3548cf;">"app"</span>&gt;
      &lt;<span style="color: #721045;">h1</span>&gt;<span style="font-weight: bold; text-decoration: underline;">{{ score }}</span>&lt;/<span style="color: #721045;">h1</span>&gt;
      &lt;<span style="color: #721045;">h1</span>&gt;<span style="font-weight: bold; text-decoration: underline;">{{ examMessage }}</span>&lt;/<span style="color: #721045;">h1</span>&gt;
    &lt;/<span style="color: #721045;">div</span>&gt;

    &lt;<span style="color: #721045;">script</span>&gt;
      const { createApp } = Vue; // &#20174; Vue &#20013;&#35299;&#26500;&#20986;&#38656;&#35201;&#30340;API

      // &#21019;&#24314; Vue &#24212;&#29992;
      const app = createApp({
        data() {
          return {
            score: 61,
          };
        },
        computed: {
          examMessage() {
            const message = this.score &gt; 60 ? "Passed!" : "Failed";
            return message;
          },
        },
      });

      // &#25346;&#36733;&#21040; #app
      app.mount("#app");
    &lt;/<span style="color: #721045;">script</span>&gt;
  &lt;/<span style="color: #721045;">body</span>&gt;
&lt;/<span style="color: #721045;">html</span>&gt;
</pre>
</div></li>
<li>注意,我们这里使用this来访问score</li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-org01137af" class="outline-4">
<h4 id="org01137af"><span class="section-number-4">2.2.2.</span> 计算属性和method方法</h4>
<div class="outline-text-4" id="text-2-2-2">
<ul class="org-ul">
<li>其实methods能实现和computed完全相同的功能
<ul class="org-ul">
<li><p>
示例如下,注意methods是要带()调用的,computed不需要
</p>
<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #531ab6;">!doctype</span> html&gt;

&lt;<span style="color: #721045;">html</span> <span style="color: #005e8b;">lang</span>=<span style="color: #3548cf;">"en"</span>&gt;
  &lt;<span style="color: #721045;">head</span>&gt;
    &lt;<span style="color: #721045;">meta</span> <span style="color: #005e8b;">charset</span>=<span style="color: #3548cf;">"UTF-8"</span> /&gt;
    &lt;<span style="color: #721045;">meta</span> <span style="color: #005e8b;">name</span>=<span style="color: #3548cf;">"viewport"</span> <span style="color: #005e8b;">content</span>=<span style="color: #3548cf;">"width=device-width, initial-scale=1.0"</span> /&gt;
    &lt;<span style="color: #721045;">title</span>&gt;<span style="font-weight: bold; text-decoration: underline;">&#35745;&#31639;&#23646;&#24615;</span>&lt;/<span style="color: #721045;">title</span>&gt;
    &lt;<span style="color: #721045;">script</span> <span style="color: #005e8b;">src</span>=<span style="color: #3548cf;">"https://unpkg.com/vue@3/dist/vue.global.js"</span>&gt;&lt;/<span style="color: #721045;">script</span>&gt;
  &lt;/<span style="color: #721045;">head</span>&gt;
  &lt;<span style="color: #721045;">body</span>&gt;
    &lt;<span style="color: #721045;">div</span> <span style="color: #005e8b;">id</span>=<span style="color: #3548cf;">"app"</span>&gt;
      &lt;<span style="color: #721045;">h1</span>&gt;<span style="font-weight: bold; text-decoration: underline;">{{ score }}</span>&lt;/<span style="color: #721045;">h1</span>&gt;
      &lt;<span style="color: #721045;">h1</span>&gt;<span style="font-weight: bold; text-decoration: underline;">{{ examMessage }}</span>&lt;/<span style="color: #721045;">h1</span>&gt;
      &lt;<span style="color: #721045;">h1</span>&gt;<span style="font-weight: bold; text-decoration: underline;">{{ examMessage }}</span>&lt;/<span style="color: #721045;">h1</span>&gt;
      &lt;<span style="color: #721045;">h1</span>&gt;<span style="font-weight: bold; text-decoration: underline;">{{ examMessage }}</span>&lt;/<span style="color: #721045;">h1</span>&gt;
      &lt;<span style="color: #721045;">h1</span>&gt;<span style="font-weight: bold; text-decoration: underline;">{{ examMethod() }}</span>&lt;/<span style="color: #721045;">h1</span>&gt;
      &lt;<span style="color: #721045;">h1</span>&gt;<span style="font-weight: bold; text-decoration: underline;">{{ examMethod() }}</span>&lt;/<span style="color: #721045;">h1</span>&gt;
      &lt;<span style="color: #721045;">h1</span>&gt;<span style="font-weight: bold; text-decoration: underline;">{{ examMethod() }}</span>&lt;/<span style="color: #721045;">h1</span>&gt;
    &lt;/<span style="color: #721045;">div</span>&gt;

    &lt;<span style="color: #721045;">script</span>&gt;
      const { createApp } = Vue; // &#20174; Vue &#20013;&#35299;&#26500;&#20986;&#38656;&#35201;&#30340;API

      // &#21019;&#24314; Vue &#24212;&#29992;
      const app = createApp({
        data() {
          return {
            score: 61,
          };
        },
        computed: {
          examMessage() {
            console.log("computed");
            const message = this.score &gt; 60 ? "Passed!" : "Failed";
            return message;
          },
        },
        methods: {
          examMethod() {
            console.log("methods");
            const message = this.score &gt; 60 ? "Passed!" : "Failed";
            return message;
          },
        },
      });

      // &#25346;&#36733;&#21040; #app
      app.mount("#app");
    &lt;/<span style="color: #721045;">script</span>&gt;
  &lt;/<span style="color: #721045;">body</span>&gt;
&lt;/<span style="color: #721045;">html</span>&gt;

</pre>
</div></li>

<li><p>
methods和computed区别在于computed会有缓存,多次展示的情况下,计算属性只计算了一次,而method执行了三次,如下
</p>
<pre class="example" id="org122ff91">
computed
methods
methods
methods
</pre></li>
<li>因此,当有可能存在结果数据需要显示多次的情况时,明显应该选择计算属性</li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-orgf7b614a" class="outline-4">
<h4 id="orgf7b614a"><span class="section-number-4">2.2.3.</span> 计算属性的setter</h4>
<div class="outline-text-4" id="text-2-2-3">
<ul class="org-ul">
<li>默认情况下,computed属性是只读的,如果希望修改computed属性,我们需要把写入和读取在computd里面分开属性
<ul class="org-ul">
<li><p>
示例如下
</p>
<div class="org-src-container">
<pre class="src src-js">computed: <span style="color: #000000;">{</span>
  fullName: <span style="color: #dd22dd;">{</span>
    get<span style="color: #008899;">()</span> <span style="color: #008899;">{</span>
      <span style="color: #7f0000;">// </span><span style="color: #7f0000;">read logic</span>
    <span style="color: #008899;">}</span>,
    set <span style="color: #008899;">(</span>value<span style="color: #008899;">)</span> <span style="color: #008899;">{</span>
      <span style="color: #7f0000;">// </span><span style="color: #7f0000;">write logic</span>
    <span style="color: #008899;">}</span>
  <span style="color: #dd22dd;">}</span>
<span style="color: #000000;">}</span>
</pre>
</div></li>
</ul></li>
<li>具体使用方法我们会在组合式API中进行介绍</li>
</ul>
</div>
</div>
</div>
<div id="outline-container-org3c544a9" class="outline-3">
<h3 id="org3c544a9"><span class="section-number-3">2.3.</span> 监听</h3>
<div class="outline-text-3" id="text-2-3">
<ul class="org-ul">
<li>有些时候,在依赖数据发生变化时,我们需要让其产生一些"副作用",比如更新其他数据,此时,我们可以使用Vue的监听语法</li>
</ul>
</div>
<div id="outline-container-org9eed041" class="outline-4">
<h4 id="org9eed041"><span class="section-number-4">2.3.1.</span> 监听的基本使用</h4>
<div class="outline-text-4" id="text-2-3-1">
<ul class="org-ul">
<li>其实和computed的类似,需要一个watch的property
<ul class="org-ul">
<li><p>
示例如下
</p>
<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #531ab6;">!doctype</span> html&gt;

&lt;<span style="color: #721045;">html</span> <span style="color: #005e8b;">lang</span>=<span style="color: #3548cf;">"en"</span>&gt;
  &lt;<span style="color: #721045;">head</span>&gt;
    &lt;<span style="color: #721045;">meta</span> <span style="color: #005e8b;">charset</span>=<span style="color: #3548cf;">"UTF-8"</span> /&gt;
    &lt;<span style="color: #721045;">meta</span> <span style="color: #005e8b;">name</span>=<span style="color: #3548cf;">"viewport"</span> <span style="color: #005e8b;">content</span>=<span style="color: #3548cf;">"width=device-width, initial-scale=1.0"</span> /&gt;
    &lt;<span style="color: #721045;">title</span>&gt;<span style="font-weight: bold; text-decoration: underline;">&#35745;&#31639;&#23646;&#24615;</span>&lt;/<span style="color: #721045;">title</span>&gt;
    &lt;<span style="color: #721045;">script</span> <span style="color: #005e8b;">src</span>=<span style="color: #3548cf;">"https://unpkg.com/vue@3/dist/vue.global.js"</span>&gt;&lt;/<span style="color: #721045;">script</span>&gt;
  &lt;/<span style="color: #721045;">head</span>&gt;
  &lt;<span style="color: #721045;">body</span>&gt;
    &lt;<span style="color: #721045;">div</span> <span style="color: #005e8b;">id</span>=<span style="color: #3548cf;">"app"</span>&gt;
      &lt;<span style="color: #721045;">h1</span>&gt;<span style="font-weight: bold; text-decoration: underline;">Vue 3 &#36873;&#39033;&#24335; API - watch &#31034;&#20363;</span>&lt;/<span style="color: #721045;">h1</span>&gt;
      &lt;<span style="color: #721045;">p</span>&gt;&#36755;&#20837;&#26694;&#20013;&#30340;&#20540;&#65306;{{ inputValue }}&lt;/<span style="color: #721045;">p</span>&gt;
      &lt;<span style="color: #721045;">input</span> <span style="color: #005e8b;">v-model</span>=<span style="color: #3548cf;">"inputValue"</span> <span style="color: #005e8b;">placeholder</span>=<span style="color: #3548cf;">"&#35831;&#36755;&#20837;&#20869;&#23481;"</span> /&gt;
      &lt;<span style="color: #721045;">p</span>&gt;&#36755;&#20837;&#26694;&#30340;&#38271;&#24230;&#65306;{{ inputLength }}&lt;/<span style="color: #721045;">p</span>&gt;
    &lt;/<span style="color: #721045;">div</span>&gt;

    &lt;<span style="color: #721045;">script</span>&gt;
      const { createApp } = Vue; // &#20174; Vue &#20013;&#35299;&#26500;&#20986;&#38656;&#35201;&#30340;API

      // &#21019;&#24314; Vue &#24212;&#29992;
      const app = createApp({
        data() {
          return {
            inputValue: "", // &#36755;&#20837;&#26694;&#30340;&#20540;
            inputLength: 0, // &#36755;&#20837;&#26694;&#30340;&#38271;&#24230;
          };
        },
        watch: {
          // &#30417;&#21548; inputValue &#30340;&#21464;&#21270;
          inputValue(newValue) {
            // &#24403; inputValue &#21457;&#29983;&#21464;&#21270;&#26102;&#65292;&#26356;&#26032; inputLength
            this.inputLength = newValue.length;
            console.log(`&#26032;&#30340;&#20540;&#26159;: ${newValue}`);
          },
        },
      });

      // &#25346;&#36733;&#21040; #app
      app.mount("#app");
    &lt;/<span style="color: #721045;">script</span>&gt;
  &lt;/<span style="color: #721045;">body</span>&gt;
&lt;/<span style="color: #721045;">html</span>&gt;
</pre>
</div></li>
<li>具体使用方法在组合式API中讲解</li>
</ul></li>
</ul>
</div>
</div>
</div>
<div id="outline-container-orgdc2abaf" class="outline-3">
<h3 id="orgdc2abaf"><span class="section-number-3">2.4.</span> 绑定动态样式</h3>
<div class="outline-text-3" id="text-2-4">
<ul class="org-ul">
<li>项目开发中,动态页面除了数据需要动态,其样式也要动态.</li>
<li>在模版中,给标签绑定动态样式有两种方式:
<ul class="org-ul">
<li>class绑定</li>
<li>style绑定</li>
</ul></li>
<li>在HTML中,两种绑定方式都是字符串类型,Vue专门增强了class和style的绑定语法,除了字符串还支持对象和数组
类型值</li>
</ul>
</div>
<div id="outline-container-org5bcab27" class="outline-4">
<h4 id="org5bcab27"><span class="section-number-4">2.4.1.</span> 字符串绑定</h4>
<div class="outline-text-4" id="text-2-4-1">
<ul class="org-ul">
<li>这是最传统的方式，也就是直接在模板中绑定动态字符串值
<ul class="org-ul">
<li><p>
示例如下
</p>
<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #721045;">template</span>&gt;
  &lt;<span style="color: #721045;">div</span> :class=<span style="color: #3548cf;">"dynamicClass"</span> :style=<span style="color: #3548cf;">"dynamicStyle"</span>&gt;&#21160;&#24577;&#23383;&#31526;&#20018;&#32465;&#23450;&lt;/<span style="color: #721045;">div</span>&gt;
&lt;/<span style="color: #721045;">template</span>&gt;

&lt;<span style="color: #721045;">script</span>&gt;
export default {
  data() {
    return {
      dynamicClass: "box active", // &#21160;&#24577; class &#20540;
      dynamicStyle: "color: red; font-size: 16px;" // &#21160;&#24577; style &#20540;
    };
  }
};
&lt;/<span style="color: #721045;">script</span>&gt;
</pre>
</div></li>

<li>注意,上面的":class"其实就是"v-bind:class"的缩写</li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-org29610fe" class="outline-4">
<h4 id="org29610fe"><span class="section-number-4">2.4.2.</span> 对象绑定</h4>
<div class="outline-text-4" id="text-2-4-2">
<ul class="org-ul">
<li>Vue 支持使用对象的形式来绑定 class 和 style，从而更灵活地控制条件样式。
<ul class="org-ul">
<li><p>
示例如下
</p>
<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #721045;">template</span>&gt;
  &lt;<span style="color: #721045;">div</span> :class=<span style="color: #3548cf;">"classObject"</span> :style=<span style="color: #3548cf;">"styleObject"</span>&gt;&#23545;&#35937;&#32465;&#23450;&lt;/<span style="color: #721045;">div</span>&gt;
&lt;/<span style="color: #721045;">template</span>&gt;

&lt;<span style="color: #721045;">script</span>&gt;
export default {
  data() {
    return {
      classObject: {
        box: true, // &#22914;&#26524;&#20026; true&#65292;&#21017;&#20250;&#24212;&#29992;&#35813; class
        active: false, // &#22914;&#26524;&#20026; false&#65292;&#21017;&#19981;&#20250;&#24212;&#29992;&#35813; class
        warning: true // &#21160;&#24577;&#28155;&#21152;&#19968;&#20010; class
      },
      styleObject: {
        color: "blue", // &#21160;&#24577;&#35774;&#32622;&#39068;&#33394;
        fontSize: "20px", // &#21160;&#24577;&#35774;&#32622;&#23383;&#20307;&#22823;&#23567;
        border: "1px solid black" // &#21160;&#24577;&#22686;&#21152;&#36793;&#26694;
      }
    };
  }
};
&lt;/<span style="color: #721045;">script</span>&gt;
</pre>
</div></li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-org2d83df4" class="outline-4">
<h4 id="org2d83df4"><span class="section-number-4">2.4.3.</span> 绑定数组</h4>
<div class="outline-text-4" id="text-2-4-3">
<ul class="org-ul">
<li>Vue 还支持使用数组的方式来绑定 class 和 style，适用于多个 class 或 style 的动态组合。
<ul class="org-ul">
<li><p>
示例如下
</p>
<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #721045;">template</span>&gt;
  &lt;<span style="color: #721045;">div</span> :class=<span style="color: #3548cf;">"classArray"</span> :style=<span style="color: #3548cf;">"styleArray"</span>&gt;&#25968;&#32452;&#32465;&#23450;&lt;/<span style="color: #721045;">div</span>&gt;
&lt;/<span style="color: #721045;">template</span>&gt;

&lt;<span style="color: #721045;">script</span>&gt;
export default {
  data() {
    return {
      classArray: ["box", "active", dynamicClassName()], // &#21160;&#24577;&#32452;&#21512;&#22810;&#20010; class
      styleArray: [
        { color: "green" }, // &#26679;&#24335;1
        { fontSize: "18px" }, // &#26679;&#24335;2
        dynamicStyle() // &#21160;&#24577;&#26679;&#24335;
      ]
    };
  },
  methods: {
    dynamicClassName() {
      return "warning"; // &#21160;&#24577;&#36820;&#22238;&#19968;&#20010; class
    },
    dynamicStyle() {
      return { backgroundColor: "yellow" }; // &#21160;&#24577;&#36820;&#22238;&#19968;&#20010;&#26679;&#24335;
    }
  }
};
&lt;/<span style="color: #721045;">script</span>&gt;
</pre>
</div></li>
</ul></li>
</ul>
</div>
</div>
</div>
<div id="outline-container-org749a844" class="outline-3">
<h3 id="org749a844"><span class="section-number-3">2.5.</span> 条件渲染指令</h3>
<div class="outline-text-3" id="text-2-5">
<ul class="org-ul">
<li>实际项目中时候有两种场景很常见:
<ul class="org-ul">
<li>局部页面需要在满足某种条件后显示</li>
<li>在多个不同页面直接进行切换显示</li>
</ul></li>
<li>上面两种场景都可以通过v-if和v-show指令实现</li>
</ul>
</div>
<div id="outline-container-orgc8d799c" class="outline-4">
<h4 id="orgc8d799c"><span class="section-number-4">2.5.1.</span> v-if相关指令</h4>
<div class="outline-text-4" id="text-2-5-1">
<ul class="org-ul">
<li>v-if相关指令其实是如下三个:
<ul class="org-ul">
<li>v-if: 只有一个逻辑的时候使用</li>
<li>v-else: 只有两个逻辑的时候使用</li>
<li>v-else-if: 超过两个逻辑的时候使用</li>
</ul></li>
<li>下面是一个例子,有三个逻辑,所以把上面三个指令都使用了
<ul class="org-ul">
<li><p>
示例如下
</p>
<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #531ab6;">!doctype</span> html&gt;

&lt;<span style="color: #721045;">html</span> <span style="color: #005e8b;">lang</span>=<span style="color: #3548cf;">"en"</span>&gt;
  &lt;<span style="color: #721045;">head</span>&gt;
    &lt;<span style="color: #721045;">meta</span> <span style="color: #005e8b;">charset</span>=<span style="color: #3548cf;">"UTF-8"</span> /&gt;
    &lt;<span style="color: #721045;">meta</span> <span style="color: #005e8b;">name</span>=<span style="color: #3548cf;">"viewport"</span> <span style="color: #005e8b;">content</span>=<span style="color: #3548cf;">"width=device-width, initial-scale=1.0"</span> /&gt;
    &lt;<span style="color: #721045;">title</span>&gt;<span style="font-weight: bold; text-decoration: underline;">v-if</span>&lt;/<span style="color: #721045;">title</span>&gt;
    &lt;<span style="color: #721045;">script</span> <span style="color: #005e8b;">src</span>=<span style="color: #3548cf;">"https://unpkg.com/vue@3/dist/vue.global.js"</span>&gt;&lt;/<span style="color: #721045;">script</span>&gt;
  &lt;/<span style="color: #721045;">head</span>&gt;
  &lt;<span style="color: #721045;">body</span>&gt;
    &lt;<span style="color: #721045;">div</span> <span style="color: #005e8b;">id</span>=<span style="color: #3548cf;">"app"</span>&gt;
      &lt;<span style="color: #721045;">h1</span>&gt;<span style="font-weight: bold; text-decoration: underline;">Vue 3 &#26465;&#20214;&#28210;&#26579;&#31034;&#20363;</span>&lt;/<span style="color: #721045;">h1</span>&gt;
      &lt;<span style="color: #721045;">button</span> @click=<span style="color: #3548cf;">"setCondition(1)"</span>&gt;&#26174;&#31034;&#20869;&#23481; 1&lt;/<span style="color: #721045;">button</span>&gt;
      &lt;<span style="color: #721045;">button</span> @click=<span style="color: #3548cf;">"setCondition(2)"</span>&gt;&#26174;&#31034;&#20869;&#23481; 2&lt;/<span style="color: #721045;">button</span>&gt;
      &lt;<span style="color: #721045;">button</span> @click=<span style="color: #3548cf;">"setCondition(3)"</span>&gt;&#26174;&#31034;&#20869;&#23481; 3&lt;/<span style="color: #721045;">button</span>&gt;

      <span style="color: #7f0000;">&lt;!-- </span><span style="color: #7f0000;">&#26465;&#20214;&#28210;&#26579;</span><span style="color: #7f0000;"> --&gt;</span>
      &lt;<span style="color: #721045;">div</span> <span style="color: #005e8b;">v-if</span>=<span style="color: #3548cf;">"condition === 1"</span>&gt;
        &lt;<span style="color: #721045;">p</span>&gt;&#36825;&#26159;&#36890;&#36807; &lt;<span style="color: #721045;">strong</span>&gt;<span style="font-weight: bold;">v-if</span>&lt;/<span style="color: #721045;">strong</span>&gt; &#28210;&#26579;&#30340;&#20869;&#23481;&#65288;&#26465;&#20214; 1&#65289;&#12290;&lt;/<span style="color: #721045;">p</span>&gt;
      &lt;/<span style="color: #721045;">div</span>&gt;
      &lt;<span style="color: #721045;">div</span> <span style="color: #005e8b;">v-else-if</span>=<span style="color: #3548cf;">"condition === 2"</span>&gt;
        &lt;<span style="color: #721045;">p</span>&gt;&#36825;&#26159;&#36890;&#36807; &lt;<span style="color: #721045;">strong</span>&gt;<span style="font-weight: bold;">v-else-if</span>&lt;/<span style="color: #721045;">strong</span>&gt; &#28210;&#26579;&#30340;&#20869;&#23481;&#65288;&#26465;&#20214; 2&#65289;&#12290;&lt;/<span style="color: #721045;">p</span>&gt;
      &lt;/<span style="color: #721045;">div</span>&gt;
      &lt;<span style="color: #721045;">div</span> v-else&gt;
        &lt;<span style="color: #721045;">p</span>&gt;&#36825;&#26159;&#36890;&#36807; &lt;<span style="color: #721045;">strong</span>&gt;<span style="font-weight: bold;">v-else</span>&lt;/<span style="color: #721045;">strong</span>&gt; &#28210;&#26579;&#30340;&#20869;&#23481;&#65288;&#20854;&#20182;&#26465;&#20214;&#65289;&#12290;&lt;/<span style="color: #721045;">p</span>&gt;
      &lt;/<span style="color: #721045;">div</span>&gt;
    &lt;/<span style="color: #721045;">div</span>&gt;
    &lt;<span style="color: #721045;">script</span>&gt;
      const { createApp } = Vue; // &#20174; Vue &#20013;&#35299;&#26500;&#20986;&#38656;&#35201;&#30340;API

      // &#21019;&#24314; Vue &#24212;&#29992;
      const app = createApp({
        data() {
          return {
            condition: 1, // &#29992;&#20110;&#25511;&#21046;&#26174;&#31034;&#30340;&#26465;&#20214;
          };
        },
        methods: {
          setCondition(value) {
            this.condition = value; // &#21160;&#24577;&#35774;&#32622;&#26465;&#20214;
          },
        },
      });
      // &#25346;&#36733;&#21040; #app
      app.mount("#app");
    &lt;/<span style="color: #721045;">script</span>&gt;
  &lt;/<span style="color: #721045;">body</span>&gt;
&lt;/<span style="color: #721045;">html</span>&gt;
</pre>
</div></li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-org78baa56" class="outline-4">
<h4 id="org78baa56"><span class="section-number-4">2.5.2.</span> v-show指令</h4>
<div class="outline-text-4" id="text-2-5-2">
<ul class="org-ul">
<li>v-show也可以做到"隐藏-显示"内容
<ul class="org-ul">
<li><p>
示例如下
</p>
<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #531ab6;">!doctype</span> html&gt;

&lt;<span style="color: #721045;">html</span> <span style="color: #005e8b;">lang</span>=<span style="color: #3548cf;">"en"</span>&gt;
  &lt;<span style="color: #721045;">head</span>&gt;
    &lt;<span style="color: #721045;">meta</span> <span style="color: #005e8b;">charset</span>=<span style="color: #3548cf;">"UTF-8"</span> /&gt;
    &lt;<span style="color: #721045;">meta</span> <span style="color: #005e8b;">name</span>=<span style="color: #3548cf;">"viewport"</span> <span style="color: #005e8b;">content</span>=<span style="color: #3548cf;">"width=device-width, initial-scale=1.0"</span> /&gt;
    &lt;<span style="color: #721045;">title</span>&gt;<span style="font-weight: bold; text-decoration: underline;">v-show</span>&lt;/<span style="color: #721045;">title</span>&gt;
    &lt;<span style="color: #721045;">script</span> <span style="color: #005e8b;">src</span>=<span style="color: #3548cf;">"https://unpkg.com/vue@3/dist/vue.global.js"</span>&gt;&lt;/<span style="color: #721045;">script</span>&gt;
  &lt;/<span style="color: #721045;">head</span>&gt;
  &lt;<span style="color: #721045;">body</span>&gt;
    &lt;<span style="color: #721045;">div</span> <span style="color: #005e8b;">id</span>=<span style="color: #3548cf;">"app"</span>&gt;
      &lt;<span style="color: #721045;">h1</span>&gt;<span style="font-weight: bold; text-decoration: underline;">Vue 3 &#26465;&#20214;&#26174;&#31034;&#31034;&#20363; - &#20351;&#29992; v-show</span>&lt;/<span style="color: #721045;">h1</span>&gt;
      &lt;<span style="color: #721045;">button</span> @click=<span style="color: #3548cf;">"toggleVisibility"</span>&gt;&#20999;&#25442;&#26174;&#31034;&#29366;&#24577;&lt;/<span style="color: #721045;">button</span>&gt;

      <span style="color: #7f0000;">&lt;!-- </span><span style="color: #7f0000;">&#20351;&#29992; v-show &#25511;&#21046;&#20803;&#32032;&#26174;&#31034;/&#38544;&#34255;</span><span style="color: #7f0000;"> --&gt;</span>
      &lt;<span style="color: #721045;">p</span> <span style="color: #005e8b;">v-show</span>=<span style="color: #3548cf;">"isVisible"</span>&gt;
        &#36825;&#26159;&#36890;&#36807; &lt;<span style="color: #721045;">strong</span>&gt;<span style="font-weight: bold;">v-show</span>&lt;/<span style="color: #721045;">strong</span>&gt; &#25511;&#21046;&#26174;&#31034;&#30340;&#20869;&#23481;&#12290;
      &lt;/<span style="color: #721045;">p</span>&gt;
    &lt;/<span style="color: #721045;">div</span>&gt;
    &lt;<span style="color: #721045;">script</span>&gt;
      const { createApp } = Vue; // &#20174; Vue &#20013;&#35299;&#26500;&#20986;&#38656;&#35201;&#30340;API

      // &#21019;&#24314; Vue &#24212;&#29992;
      const app = createApp({
        data() {
          return {
            isVisible: true, // &#25511;&#21046;&#26174;&#31034;&#30340;&#24067;&#23572;&#20540;
          };
        },
        methods: {
          toggleVisibility() {
            this.isVisible = !this.isVisible; // &#20999;&#25442;&#26174;&#31034;&#29366;&#24577;
          },
        },
      });
      // &#25346;&#36733;&#21040; #app
      app.mount("#app");
    &lt;/<span style="color: #721045;">script</span>&gt;
  &lt;/<span style="color: #721045;">body</span>&gt;
&lt;/<span style="color: #721045;">html</span>&gt;
</pre>
</div></li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-org36a55e2" class="outline-4">
<h4 id="org36a55e2"><span class="section-number-4">2.5.3.</span> 比较v-if和v-show指令</h4>
<div class="outline-text-4" id="text-2-5-3">
<ul class="org-ul">
<li>v-if和v-show的效果是非常相似的,但是实现机制完全不同:
<ul class="org-ul">
<li>v-if 是按需渲染，只有条件满足时才会在 DOM 中插入或移除元素</li>
<li>v-show 是基于 CSS 的显示/隐藏，通过修改 display 样式控制元素的显示，而不会移除 DOM 元素</li>
</ul></li>
</ul>
</div>
</div>
</div>
<div id="outline-container-orgd0780a6" class="outline-3">
<h3 id="orgd0780a6"><span class="section-number-3">2.6.</span> 列表渲染指令</h3>
<div class="outline-text-3" id="text-2-6">
<ul class="org-ul">
<li>在项目开发的页面中,有很多列表效果需要动态显示,在Vue中被称之为列表渲染,可以通过v-for指令来实现</li>
<li>通过v-for指令可以遍历多种类型数据:
<ul class="org-ul">
<li>数组(最为常见)</li>
<li>对象</li>
<li>数值</li>
</ul></li>
</ul>
</div>
<div id="outline-container-orga60032d" class="outline-4">
<h4 id="orga60032d"><span class="section-number-4">2.6.1.</span> 列表的动态渲染</h4>
<div class="outline-text-4" id="text-2-6-1">
<ul class="org-ul">
<li>v-for指令在数组中有两种形式:
<ul class="org-ul">
<li><p>
完整形式,会有index,不太常用
</p>
<div class="org-src-container">
<pre class="src src-html"><span style="color: #005e8b;">v-for</span>="(item, index) in array"
</pre>
</div></li>
<li><p>
只有item,没有index,比较常用
</p>
<div class="org-src-container">
<pre class="src src-html"><span style="color: #005e8b;">v-for</span>="item in array"
</pre>
</div></li>
</ul></li>
<li>v-for指令在对象中也有两种形式:
<ul class="org-ul">
<li><p>
完整形式,value在前,name在后
</p>
<div class="org-src-container">
<pre class="src src-html"><span style="color: #005e8b;">v-for</span>="(value, name) in obj"
</pre>
</div></li>
<li><p>
也可以只用value,不用name
</p>
<div class="org-src-container">
<pre class="src src-html"><span style="color: #005e8b;">v-for</span>="value in obj"
</pre>
</div></li>
</ul></li>
<li>v-for指令的目标也可以是一个正整数n,其一般用于让当前模板在1-n取值范围内重复产生n次
<ul class="org-ul">
<li><p>
完整写法如下
</p>
<div class="org-src-container">
<pre class="src src-html"><span style="color: #005e8b;">v-for</span>="value in n"
</pre>
</div></li>
</ul></li>
<li>我们把前面三种情况都放到一个例子里面展示
<ul class="org-ul">
<li><p>
示例如下
</p>
<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #531ab6;">!doctype</span> html&gt;

&lt;<span style="color: #721045;">html</span> <span style="color: #005e8b;">lang</span>=<span style="color: #3548cf;">"en"</span>&gt;
  &lt;<span style="color: #721045;">head</span>&gt;
    &lt;<span style="color: #721045;">meta</span> <span style="color: #005e8b;">charset</span>=<span style="color: #3548cf;">"UTF-8"</span> /&gt;
    &lt;<span style="color: #721045;">meta</span> <span style="color: #005e8b;">name</span>=<span style="color: #3548cf;">"viewport"</span> <span style="color: #005e8b;">content</span>=<span style="color: #3548cf;">"width=device-width, initial-scale=1.0"</span> /&gt;
    &lt;<span style="color: #721045;">title</span>&gt;<span style="font-weight: bold; text-decoration: underline;">v-for</span>&lt;/<span style="color: #721045;">title</span>&gt;
    &lt;<span style="color: #721045;">script</span> <span style="color: #005e8b;">src</span>=<span style="color: #3548cf;">"https://unpkg.com/vue@3/dist/vue.global.js"</span>&gt;&lt;/<span style="color: #721045;">script</span>&gt;
  &lt;/<span style="color: #721045;">head</span>&gt;
  &lt;<span style="color: #721045;">body</span>&gt;
    &lt;<span style="color: #721045;">div</span> <span style="color: #005e8b;">id</span>=<span style="color: #3548cf;">"app"</span>&gt;
      &lt;<span style="color: #721045;">h2</span>&gt;<span style="font-weight: bold; font-style: italic; text-decoration: underline;">v-for array</span>&lt;/<span style="color: #721045;">h2</span>&gt;
      &lt;<span style="color: #721045;">ul</span>&gt;
        &lt;<span style="color: #721045;">li</span> <span style="color: #005e8b;">v-for</span>=<span style="color: #3548cf;">"(p,index) in persons"</span>&gt;{{index}}-{{p.name}}-{{p.age}}&lt;/<span style="color: #721045;">li</span>&gt;
      &lt;/<span style="color: #721045;">ul</span>&gt;
      &lt;<span style="color: #721045;">h2</span>&gt;<span style="font-weight: bold; font-style: italic; text-decoration: underline;">v-for object</span>&lt;/<span style="color: #721045;">h2</span>&gt;
      &lt;<span style="color: #721045;">ul</span>&gt;
        &lt;<span style="color: #721045;">li</span> <span style="color: #005e8b;">v-for</span>=<span style="color: #3548cf;">"(value,name) in car"</span>&gt;{{name}}-{{value}}&lt;/<span style="color: #721045;">li</span>&gt;
      &lt;/<span style="color: #721045;">ul</span>&gt;
      &lt;<span style="color: #721045;">h2</span>&gt;<span style="font-weight: bold; font-style: italic; text-decoration: underline;">v-for integer</span>&lt;/<span style="color: #721045;">h2</span>&gt;
      &lt;<span style="color: #721045;">ul</span>&gt;
        &lt;<span style="color: #721045;">li</span> <span style="color: #005e8b;">v-for</span>=<span style="color: #3548cf;">"value in num"</span>&gt;{{value}}&lt;/<span style="color: #721045;">li</span>&gt;
      &lt;/<span style="color: #721045;">ul</span>&gt;
    &lt;/<span style="color: #721045;">div</span>&gt;
    &lt;<span style="color: #721045;">script</span>&gt;
      const { createApp } = Vue; // &#20174; Vue &#20013;&#35299;&#26500;&#20986;&#38656;&#35201;&#30340;API

      // &#21019;&#24314; Vue &#24212;&#29992;
      const app = createApp({
        data() {
          return {
            persons: [
              { id: "001", name: "zhang-san", age: 21 },
              { id: "002", name: "li-si", age: 22 },
              { id: "003", name: "wang-wu", age: 23 },
            ],
            car: {
              name: "audi",
              price: "70k",
              color: "black",
            },
            num: 5,
          };
        },
      });
      // &#25346;&#36733;&#21040; #app
      app.mount("#app");
    &lt;/<span style="color: #721045;">script</span>&gt;
  &lt;/<span style="color: #721045;">body</span>&gt;
&lt;/<span style="color: #721045;">html</span>&gt;
</pre>
</div></li>
<li><p>
Vue官方文档建议我们,在使用v-for指令进行列表渲染的时候,最好同时指定唯一的key属性,这个key属性可以
提高列表更新渲染的性能.同时我们不能使用数组元素的下标来作为这个key,因为这个下标是不稳定的,可能会
产生错误.之前的例子需要如下更改
</p>
<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #721045;">ul</span>&gt;
  &lt;<span style="color: #721045;">li</span> <span style="color: #005e8b;">v-for</span>=<span style="color: #3548cf;">"(p,index) in persons"</span> :key=<span style="color: #3548cf;">"p.id"</span>&gt;{{index}}-{{p.name}}-{{p.age}}&lt;/<span style="color: #721045;">li</span>&gt;
&lt;/<span style="color: #721045;">ul</span>&gt;
</pre>
</div></li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-orgc88dbfe" class="outline-4">
<h4 id="orgc88dbfe"><span class="section-number-4">2.6.2.</span> 列表的增,删,改</h4>
<div class="outline-text-4" id="text-2-6-2">
<ul class="org-ul">
<li>实际项目中,列表初始状态显示后,往往会进行增,删,改等操作.
<ul class="org-ul">
<li><p>
示例如下
</p>
<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #531ab6;">!doctype</span> html&gt;

&lt;<span style="color: #721045;">html</span> <span style="color: #005e8b;">lang</span>=<span style="color: #3548cf;">"en"</span>&gt;
  &lt;<span style="color: #721045;">head</span>&gt;
    &lt;<span style="color: #721045;">meta</span> <span style="color: #005e8b;">charset</span>=<span style="color: #3548cf;">"UTF-8"</span> /&gt;
    &lt;<span style="color: #721045;">meta</span> <span style="color: #005e8b;">name</span>=<span style="color: #3548cf;">"viewport"</span> <span style="color: #005e8b;">content</span>=<span style="color: #3548cf;">"width=device-width, initial-scale=1.0"</span> /&gt;
    &lt;<span style="color: #721045;">title</span>&gt;<span style="font-weight: bold; text-decoration: underline;">v-for</span>&lt;/<span style="color: #721045;">title</span>&gt;
    &lt;<span style="color: #721045;">script</span> <span style="color: #005e8b;">src</span>=<span style="color: #3548cf;">"https://unpkg.com/vue@3/dist/vue.global.js"</span>&gt;&lt;/<span style="color: #721045;">script</span>&gt;
  &lt;/<span style="color: #721045;">head</span>&gt;
  &lt;<span style="color: #721045;">body</span>&gt;
    &lt;<span style="color: #721045;">div</span> <span style="color: #005e8b;">id</span>=<span style="color: #3548cf;">"app"</span>&gt;
      &lt;<span style="color: #721045;">h2</span>&gt;<span style="font-weight: bold; font-style: italic; text-decoration: underline;">v-for update</span>&lt;/<span style="color: #721045;">h2</span>&gt;
      &lt;<span style="color: #721045;">ul</span>&gt;
        &lt;<span style="color: #721045;">li</span> <span style="color: #005e8b;">v-for</span>=<span style="color: #3548cf;">"(p,index) in persons"</span> :key=<span style="color: #3548cf;">"p.id"</span>&gt;
          {{index}}-{{p.name}}-{{p.age}} --
          &lt;<span style="color: #721045;">button</span> @click=<span style="color: #3548cf;">"deleteItem(index)"</span>&gt;Delete&lt;/<span style="color: #721045;">button</span>&gt; --
          &lt;<span style="color: #721045;">button</span>
            @click=<span style="color: #3548cf;">"updateItem(index, {id: Date.now(), name: 'xiao-lan', age: 12})"</span>
          &gt;
            Update
          &lt;/<span style="color: #721045;">button</span>&gt;
        &lt;/<span style="color: #721045;">li</span>&gt;
      &lt;/<span style="color: #721045;">ul</span>&gt;
      &lt;<span style="color: #721045;">button</span> @click=<span style="color: #3548cf;">"addFirst({id:Date.now(), name: 'xiao-ming', age: 10})"</span>&gt;
        Add First
      &lt;/<span style="color: #721045;">button</span>&gt;
      &lt;<span style="color: #721045;">button</span> @click=<span style="color: #3548cf;">"addLast({id:Date.now(), name: 'xiao-hong', age: 11})"</span>&gt;
        Add Last
      &lt;/<span style="color: #721045;">button</span>&gt;
    &lt;/<span style="color: #721045;">div</span>&gt;
    &lt;<span style="color: #721045;">script</span>&gt;
      const { createApp } = Vue; // &#20174; Vue &#20013;&#35299;&#26500;&#20986;&#38656;&#35201;&#30340;API

      // &#21019;&#24314; Vue &#24212;&#29992;
      const app = createApp({
        data() {
          return {
            persons: [
              { id: "001", name: "zhang-san", age: 21 },
              { id: "002", name: "li-si", age: 22 },
              { id: "003", name: "wang-wu", age: 23 },
            ],
            car: {
              name: "audi",
              price: "70k",
              color: "black",
            },
            num: 5,
          };
        },
        methods: {
          addFirst(newP) {
            this.persons.unshift(newP);
          },
          addLast(newP) {
            this.persons.push(newP);
          },
          deleteItem(index) {
            this.persons.splice(index, 1);
          },
          updateItem(index, newP) {
            this.persons.splice(index, 1, newP);
          },
        },
      });
      // &#25346;&#36733;&#21040; #app
      app.mount("#app");
    &lt;/<span style="color: #721045;">script</span>&gt;
  &lt;/<span style="color: #721045;">body</span>&gt;
&lt;/<span style="color: #721045;">html</span>&gt;
</pre>
</div></li>
<li><p>
注意我们上面的写法是vue2和vue3都能接受的更改方法,也就是使用splice.但是在vue3里面,其实是可以直接更改数组元素的,比如
</p>
<div class="org-src-container">
<pre class="src src-js"><span style="color: #0000b0;">this</span>.persons<span style="color: #000000;">[</span>index<span style="color: #000000;">]</span> = newP
</pre>
</div></li>
<li>之所以Vue3能够直接修改了,底层原因是因为Vue2只能监控splice这种函数,而无法监控arr[index]这种赋值,但是Vue3做到了.</li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-org4790364" class="outline-4">
<h4 id="org4790364"><span class="section-number-4">2.6.3.</span> 列表的过滤</h4>
<div class="outline-text-4" id="text-2-6-3">
<ul class="org-ul">
<li>过滤是前端常见需求,一般来说,就是输入一个关键字,能匹配这个关键字的结果展示出来,否则则不展示
<ul class="org-ul">
<li><p>
示例如下,当没有任何输入的时候,所有结果展示,如果有任何输入,那么命中输入的结果展示.
</p>
<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #531ab6;">!doctype</span> html&gt;

&lt;<span style="color: #721045;">html</span> <span style="color: #005e8b;">lang</span>=<span style="color: #3548cf;">"en"</span>&gt;
  &lt;<span style="color: #721045;">head</span>&gt;
    &lt;<span style="color: #721045;">meta</span> <span style="color: #005e8b;">charset</span>=<span style="color: #3548cf;">"UTF-8"</span> /&gt;
    &lt;<span style="color: #721045;">meta</span> <span style="color: #005e8b;">name</span>=<span style="color: #3548cf;">"viewport"</span> <span style="color: #005e8b;">content</span>=<span style="color: #3548cf;">"width=device-width, initial-scale=1.0"</span> /&gt;
    &lt;<span style="color: #721045;">title</span>&gt;<span style="font-weight: bold; text-decoration: underline;">v-for</span>&lt;/<span style="color: #721045;">title</span>&gt;
    &lt;<span style="color: #721045;">script</span> <span style="color: #005e8b;">src</span>=<span style="color: #3548cf;">"https://unpkg.com/vue@3/dist/vue.global.js"</span>&gt;&lt;/<span style="color: #721045;">script</span>&gt;
  &lt;/<span style="color: #721045;">head</span>&gt;
  &lt;<span style="color: #721045;">body</span>&gt;
    &lt;<span style="color: #721045;">div</span> <span style="color: #005e8b;">id</span>=<span style="color: #3548cf;">"app"</span>&gt;
      &lt;<span style="color: #721045;">h2</span>&gt;<span style="font-weight: bold; font-style: italic; text-decoration: underline;">v-for filter</span>&lt;/<span style="color: #721045;">h2</span>&gt;
      &lt;<span style="color: #721045;">input</span>
        <span style="color: #005e8b;">type</span>=<span style="color: #3548cf;">"text"</span>
        <span style="color: #005e8b;">placeholder</span>=<span style="color: #3548cf;">"Please input username"</span>
        <span style="color: #005e8b;">v-model</span>=<span style="color: #3548cf;">"keyword"</span>
      /&gt;
      &lt;<span style="color: #721045;">ul</span>&gt;
        &lt;<span style="color: #721045;">li</span> <span style="color: #005e8b;">v-for</span>=<span style="color: #3548cf;">"(p,index) in filterPersons"</span> :key=<span style="color: #3548cf;">"index"</span>&gt;
          {{p.name}}-{{p.age}}-{{p.sex}}
        &lt;/<span style="color: #721045;">li</span>&gt;
      &lt;/<span style="color: #721045;">ul</span>&gt;
    &lt;/<span style="color: #721045;">div</span>&gt;
    &lt;<span style="color: #721045;">script</span>&gt;
      const { createApp } = Vue; // &#20174; Vue &#20013;&#35299;&#26500;&#20986;&#38656;&#35201;&#30340;API

      // &#21019;&#24314; Vue &#24212;&#29992;
      const app = createApp({
        data() {
          return {
            persons: [
              { id: "001", name: "zhang-san", age: 21, sex: "Male" },
              { id: "002", name: "li-si", age: 22, sex: "Female" },
              { id: "003", name: "wang-wu", age: 23, sex: "Male" },
            ],
            keyword: "",
          };
        },
        computed: {
          filterPersons() {
            return this.persons.filter((p) =&gt; {
              return p.name.indexOf(this.keyword) !== -1;
            });
          },
        },
      });
      // &#25346;&#36733;&#21040; #app
      app.mount("#app");
    &lt;/<span style="color: #721045;">script</span>&gt;
  &lt;/<span style="color: #721045;">body</span>&gt;
&lt;/<span style="color: #721045;">html</span>&gt;
</pre>
</div></li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-org9dfa826" class="outline-4">
<h4 id="org9dfa826"><span class="section-number-4">2.6.4.</span> 列表的排序</h4>
<div class="outline-text-4" id="text-2-6-4">
<ul class="org-ul">
<li>对于结果的排序也是前端常见需求
<ul class="org-ul">
<li><p>
示例代码如下
</p>
<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #531ab6;">!doctype</span> html&gt;

&lt;<span style="color: #721045;">html</span> <span style="color: #005e8b;">lang</span>=<span style="color: #3548cf;">"en"</span>&gt;
  &lt;<span style="color: #721045;">head</span>&gt;
    &lt;<span style="color: #721045;">meta</span> <span style="color: #005e8b;">charset</span>=<span style="color: #3548cf;">"UTF-8"</span> /&gt;
    &lt;<span style="color: #721045;">meta</span> <span style="color: #005e8b;">name</span>=<span style="color: #3548cf;">"viewport"</span> <span style="color: #005e8b;">content</span>=<span style="color: #3548cf;">"width=device-width, initial-scale=1.0"</span> /&gt;
    &lt;<span style="color: #721045;">title</span>&gt;<span style="font-weight: bold; text-decoration: underline;">v-for</span>&lt;/<span style="color: #721045;">title</span>&gt;
    &lt;<span style="color: #721045;">script</span> <span style="color: #005e8b;">src</span>=<span style="color: #3548cf;">"https://unpkg.com/vue@3/dist/vue.global.js"</span>&gt;&lt;/<span style="color: #721045;">script</span>&gt;
  &lt;/<span style="color: #721045;">head</span>&gt;
  &lt;<span style="color: #721045;">body</span>&gt;
    &lt;<span style="color: #721045;">div</span> <span style="color: #005e8b;">id</span>=<span style="color: #3548cf;">"app"</span>&gt;
      &lt;<span style="color: #721045;">h2</span>&gt;<span style="font-weight: bold; font-style: italic; text-decoration: underline;">v-for filter</span>&lt;/<span style="color: #721045;">h2</span>&gt;
      &lt;<span style="color: #721045;">input</span>
        <span style="color: #005e8b;">type</span>=<span style="color: #3548cf;">"text"</span>
        <span style="color: #005e8b;">placeholder</span>=<span style="color: #3548cf;">"Please input username"</span>
        <span style="color: #005e8b;">v-model</span>=<span style="color: #3548cf;">"keyword"</span>
      /&gt;
      &lt;<span style="color: #721045;">ul</span>&gt;
        &lt;<span style="color: #721045;">li</span> <span style="color: #005e8b;">v-for</span>=<span style="color: #3548cf;">"(p,index) in filterPersons"</span> :key=<span style="color: #3548cf;">"index"</span>&gt;
          {{p.name}}-{{p.age}}-{{p.sex}}
        &lt;/<span style="color: #721045;">li</span>&gt;
      &lt;/<span style="color: #721045;">ul</span>&gt;
      &lt;<span style="color: #721045;">button</span> @click=<span style="color: #3548cf;">"sortType = 2"</span>&gt;Order Asc&lt;/<span style="color: #721045;">button</span>&gt;
      &lt;<span style="color: #721045;">button</span> @click=<span style="color: #3548cf;">"sortType = 1"</span>&gt;Order Desc&lt;/<span style="color: #721045;">button</span>&gt;
      &lt;<span style="color: #721045;">button</span> @click=<span style="color: #3548cf;">"sortType = 0"</span>&gt;Original Order&lt;/<span style="color: #721045;">button</span>&gt;
    &lt;/<span style="color: #721045;">div</span>&gt;
    &lt;<span style="color: #721045;">script</span>&gt;
      const { createApp } = Vue; // &#20174; Vue &#20013;&#35299;&#26500;&#20986;&#38656;&#35201;&#30340;API

      // &#21019;&#24314; Vue &#24212;&#29992;
      const app = createApp({
        data() {
          return {
            persons: [
              { id: "001", name: "zhang-san", age: 21, sex: "Male" },
              { id: "002", name: "li-si", age: 22, sex: "Female" },
              { id: "003", name: "wang-wu", age: 19, sex: "Male" },
            ],
            keyword: "",
            sortType: 0,
          };
        },
        computed: {
          filterPersons() {
            const { persons, keyword, sortType } = this;

            const arr = persons.filter((p) =&gt; {
              return p.name.indexOf(keyword) !== -1;
            });

            if (sortType !== 0) {
              arr.sort((p1, p2) =&gt; {
                if (sortType === 1) {
                  return p2.age - p1.age;
                } else {
                  return p1.age - p2.age;
                }
              });
            }
            return arr;
          },
        },
      });
      // &#25346;&#36733;&#21040; #app
      app.mount("#app");
    &lt;/<span style="color: #721045;">script</span>&gt;
  &lt;/<span style="color: #721045;">body</span>&gt;
&lt;/<span style="color: #721045;">html</span>&gt;
</pre>
</div></li>
</ul></li>
</ul>
</div>
</div>
</div>
<div id="outline-container-org9b3a3a5" class="outline-3">
<h3 id="org9b3a3a5"><span class="section-number-3">2.7.</span> 事件处理</h3>
<div class="outline-text-3" id="text-2-7">
</div>
<div id="outline-container-orgd140638" class="outline-4">
<h4 id="orgd140638"><span class="section-number-4">2.7.1.</span> 绑定事件监听</h4>
<div class="outline-text-4" id="text-2-7-1">
<ul class="org-ul">
<li>我们可以在HTML标签上面使用v-on指令来绑定原生DOM事件监听
<ul class="org-ul">
<li><p>
基本语法格式如下
</p>
<div class="org-src-container">
<pre class="src src-html">v-on:&lt;<span style="color: #721045;">&#20107;&#20214;&#21517;</span>&gt;="handler"
</pre>
</div></li>
<li><p>
当然通常情况下,都会把v-on简化成@,如下
</p>
<div class="org-src-container">
<pre class="src src-html">@&lt;<span style="color: #721045;">&#20107;&#20214;&#21517;</span>&gt;="handler"
</pre>
</div></li>
</ul></li>
<li>上面的"handler"在Vue中,有多种写法:
<ul class="org-ul">
<li><p>
"handler"可以是一个函数名,对应methods中的同名方法,注意这里的handleClick1被触发时,浏览器会自动将事
件对象 event 作为参数传递给这个方法,event 包含了与事件相关的各种信息，比如点击的位置、触发事件的
元素、键盘按键（如果是键盘事件）等
</p>
<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #531ab6;">!doctype</span> html&gt;

&lt;<span style="color: #721045;">html</span> <span style="color: #005e8b;">lang</span>=<span style="color: #3548cf;">"en"</span>&gt;
  &lt;<span style="color: #721045;">head</span>&gt;
    &lt;<span style="color: #721045;">meta</span> <span style="color: #005e8b;">charset</span>=<span style="color: #3548cf;">"UTF-8"</span> /&gt;
    &lt;<span style="color: #721045;">meta</span> <span style="color: #005e8b;">name</span>=<span style="color: #3548cf;">"viewport"</span> <span style="color: #005e8b;">content</span>=<span style="color: #3548cf;">"width=device-width, initial-scale=1.0"</span> /&gt;
    &lt;<span style="color: #721045;">title</span>&gt;<span style="font-weight: bold; text-decoration: underline;">v-for</span>&lt;/<span style="color: #721045;">title</span>&gt;
    &lt;<span style="color: #721045;">script</span> <span style="color: #005e8b;">src</span>=<span style="color: #3548cf;">"https://unpkg.com/vue@3/dist/vue.global.js"</span>&gt;&lt;/<span style="color: #721045;">script</span>&gt;
  &lt;/<span style="color: #721045;">head</span>&gt;
  &lt;<span style="color: #721045;">body</span>&gt;
    &lt;<span style="color: #721045;">div</span> <span style="color: #005e8b;">id</span>=<span style="color: #3548cf;">"app"</span>&gt;
      &lt;<span style="color: #721045;">h2</span>&gt;<span style="font-weight: bold; font-style: italic; text-decoration: underline;">event</span>&lt;/<span style="color: #721045;">h2</span>&gt;
      &lt;<span style="color: #721045;">button</span> @click=<span style="color: #3548cf;">"handleClick1"</span>&gt;HandleClick1&lt;/<span style="color: #721045;">button</span>&gt;
    &lt;/<span style="color: #721045;">div</span>&gt;
    &lt;<span style="color: #721045;">script</span>&gt;
      const { createApp } = Vue; // &#20174; Vue &#20013;&#35299;&#26500;&#20986;&#38656;&#35201;&#30340;API

      // &#21019;&#24314; Vue &#24212;&#29992;
      const app = createApp({
        methods: {
          handleClick1(event) {
            alert(event.target.innerHTML);
          },
        },
      });
      // &#25346;&#36733;&#21040; #app
      app.mount("#app");
    &lt;/<span style="color: #721045;">script</span>&gt;
  &lt;/<span style="color: #721045;">body</span>&gt;
&lt;/<span style="color: #721045;">html</span>&gt;
</pre>
</div></li>
<li><p>
"handler"可以是一个语句
</p>
<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #531ab6;">!doctype</span> html&gt;

&lt;<span style="color: #721045;">html</span> <span style="color: #005e8b;">lang</span>=<span style="color: #3548cf;">"en"</span>&gt;
  &lt;<span style="color: #721045;">head</span>&gt;
    &lt;<span style="color: #721045;">meta</span> <span style="color: #005e8b;">charset</span>=<span style="color: #3548cf;">"UTF-8"</span> /&gt;
    &lt;<span style="color: #721045;">meta</span> <span style="color: #005e8b;">name</span>=<span style="color: #3548cf;">"viewport"</span> <span style="color: #005e8b;">content</span>=<span style="color: #3548cf;">"width=device-width, initial-scale=1.0"</span> /&gt;
    &lt;<span style="color: #721045;">title</span>&gt;<span style="font-weight: bold; text-decoration: underline;">v-for</span>&lt;/<span style="color: #721045;">title</span>&gt;
    &lt;<span style="color: #721045;">script</span> <span style="color: #005e8b;">src</span>=<span style="color: #3548cf;">"https://unpkg.com/vue@3/dist/vue.global.js"</span>&gt;&lt;/<span style="color: #721045;">script</span>&gt;
  &lt;/<span style="color: #721045;">head</span>&gt;
  &lt;<span style="color: #721045;">body</span>&gt;
    &lt;<span style="color: #721045;">div</span> <span style="color: #005e8b;">id</span>=<span style="color: #3548cf;">"app"</span>&gt;
      &lt;<span style="color: #721045;">h2</span>&gt;<span style="font-weight: bold; font-style: italic; text-decoration: underline;">event</span>&lt;/<span style="color: #721045;">h2</span>&gt;
      &lt;<span style="color: #721045;">h3</span>&gt;<span style="font-style: italic; text-decoration: underline;">{{ num }}</span>&lt;/<span style="color: #721045;">h3</span>&gt;
      &lt;<span style="color: #721045;">button</span> @click=<span style="color: #3548cf;">"num += 3"</span>&gt;Click to add 3 on num&lt;/<span style="color: #721045;">button</span>&gt;
    &lt;/<span style="color: #721045;">div</span>&gt;
    &lt;<span style="color: #721045;">script</span>&gt;
      const { createApp } = Vue; // &#20174; Vue &#20013;&#35299;&#26500;&#20986;&#38656;&#35201;&#30340;API

      // &#21019;&#24314; Vue &#24212;&#29992;
      const app = createApp({
        data() {
          return {
            num: 0,
          };
        },
        methods: {
          handleClick1(event) {
            alert(event.target.innerHTML);
          },
        },
      });
      // &#25346;&#36733;&#21040; #app
      app.mount("#app");
    &lt;/<span style="color: #721045;">script</span>&gt;
  &lt;/<span style="color: #721045;">body</span>&gt;
&lt;/<span style="color: #721045;">html</span>&gt;
</pre>
</div></li>
<li><p>
"handler"还可以是一个箭头函数,也就是事件监听回调函数,可以接收一个event对象. 这里的handleClick2比
上面的handleClick1可以多接收一个参数
</p>
<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #531ab6;">!doctype</span> html&gt;

&lt;<span style="color: #721045;">html</span> <span style="color: #005e8b;">lang</span>=<span style="color: #3548cf;">"en"</span>&gt;
  &lt;<span style="color: #721045;">head</span>&gt;
    &lt;<span style="color: #721045;">meta</span> <span style="color: #005e8b;">charset</span>=<span style="color: #3548cf;">"UTF-8"</span> /&gt;
    &lt;<span style="color: #721045;">meta</span> <span style="color: #005e8b;">name</span>=<span style="color: #3548cf;">"viewport"</span> <span style="color: #005e8b;">content</span>=<span style="color: #3548cf;">"width=device-width, initial-scale=1.0"</span> /&gt;
    &lt;<span style="color: #721045;">title</span>&gt;<span style="font-weight: bold; text-decoration: underline;">v-for</span>&lt;/<span style="color: #721045;">title</span>&gt;
    &lt;<span style="color: #721045;">script</span> <span style="color: #005e8b;">src</span>=<span style="color: #3548cf;">"https://unpkg.com/vue@3/dist/vue.global.js"</span>&gt;&lt;/<span style="color: #721045;">script</span>&gt;
  &lt;/<span style="color: #721045;">head</span>&gt;
  &lt;<span style="color: #721045;">body</span>&gt;
    &lt;<span style="color: #721045;">div</span> <span style="color: #005e8b;">id</span>=<span style="color: #3548cf;">"app"</span>&gt;
      &lt;<span style="color: #721045;">h2</span>&gt;<span style="font-weight: bold; font-style: italic; text-decoration: underline;">event</span>&lt;/<span style="color: #721045;">h2</span>&gt;
      &lt;<span style="color: #721045;">button</span> @click=<span style="color: #3548cf;">"event =&gt; handleClick2('data msg', event)"</span>&gt;
        Click to pass str and event
      &lt;/<span style="color: #721045;">button</span>&gt;
    &lt;/<span style="color: #721045;">div</span>&gt;
    &lt;<span style="color: #721045;">script</span>&gt;
      const { createApp } = Vue;

      // &#21019;&#24314; Vue &#24212;&#29992;
      const app = createApp({
        methods: {
          handleClick2(data, event) {
            alert(`Data: ${data}`);
            alert(`Event: ${event.target.innerHTML}`);
          },
        },
      });
      // &#25346;&#36733;&#21040; #app
      app.mount("#app");
    &lt;/<span style="color: #721045;">script</span>&gt;
  &lt;/<span style="color: #721045;">body</span>&gt;
&lt;/<span style="color: #721045;">html</span>&gt;
</pre>
</div></li>
<li><p>
上面回调函数还有Vue优化版(使用 $event)
</p>
<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #531ab6;">!doctype</span> html&gt;

&lt;<span style="color: #721045;">html</span> <span style="color: #005e8b;">lang</span>=<span style="color: #3548cf;">"en"</span>&gt;
  &lt;<span style="color: #721045;">head</span>&gt;
    &lt;<span style="color: #721045;">meta</span> <span style="color: #005e8b;">charset</span>=<span style="color: #3548cf;">"UTF-8"</span> /&gt;
    &lt;<span style="color: #721045;">meta</span> <span style="color: #005e8b;">name</span>=<span style="color: #3548cf;">"viewport"</span> <span style="color: #005e8b;">content</span>=<span style="color: #3548cf;">"width=device-width, initial-scale=1.0"</span> /&gt;
    &lt;<span style="color: #721045;">title</span>&gt;<span style="font-weight: bold; text-decoration: underline;">v-for</span>&lt;/<span style="color: #721045;">title</span>&gt;
    &lt;<span style="color: #721045;">script</span> <span style="color: #005e8b;">src</span>=<span style="color: #3548cf;">"https://unpkg.com/vue@3/dist/vue.global.js"</span>&gt;&lt;/<span style="color: #721045;">script</span>&gt;
  &lt;/<span style="color: #721045;">head</span>&gt;
  &lt;<span style="color: #721045;">body</span>&gt;
    &lt;<span style="color: #721045;">div</span> <span style="color: #005e8b;">id</span>=<span style="color: #3548cf;">"app"</span>&gt;
      &lt;<span style="color: #721045;">h2</span>&gt;<span style="font-weight: bold; font-style: italic; text-decoration: underline;">event use $event in function</span>&lt;/<span style="color: #721045;">h2</span>&gt;
      &lt;<span style="color: #721045;">button</span> @click=<span style="color: #3548cf;">"handleClick2('data msg', $event)"</span>&gt;
        Click to pass str and $event
      &lt;/<span style="color: #721045;">button</span>&gt;
    &lt;/<span style="color: #721045;">div</span>&gt;
    &lt;<span style="color: #721045;">script</span>&gt;
      const { createApp } = Vue;

      // &#21019;&#24314; Vue &#24212;&#29992;
      const app = createApp({
        methods: {
          handleClick2(data, event) {
            alert(`Data: ${data}`);
            alert(`Event: ${event.target.innerHTML}`);
          },
        },
      });
      // &#25346;&#36733;&#21040; #app
      app.mount("#app");
    &lt;/<span style="color: #721045;">script</span>&gt;
  &lt;/<span style="color: #721045;">body</span>&gt;
&lt;/<span style="color: #721045;">html</span>&gt;
</pre>
</div></li>
<li><p>
其实实践当中,传入一个event,或者一个data一个event的情况都不多,反而是传入一个data的情况多.这种情况下,
event不需要被传入,我们只传入data
</p>
<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #531ab6;">!doctype</span> html&gt;

&lt;<span style="color: #721045;">html</span> <span style="color: #005e8b;">lang</span>=<span style="color: #3548cf;">"en"</span>&gt;
  &lt;<span style="color: #721045;">head</span>&gt;
    &lt;<span style="color: #721045;">meta</span> <span style="color: #005e8b;">charset</span>=<span style="color: #3548cf;">"UTF-8"</span> /&gt;
    &lt;<span style="color: #721045;">meta</span> <span style="color: #005e8b;">name</span>=<span style="color: #3548cf;">"viewport"</span> <span style="color: #005e8b;">content</span>=<span style="color: #3548cf;">"width=device-width, initial-scale=1.0"</span> /&gt;
    &lt;<span style="color: #721045;">title</span>&gt;<span style="font-weight: bold; text-decoration: underline;">v-for</span>&lt;/<span style="color: #721045;">title</span>&gt;
    &lt;<span style="color: #721045;">script</span> <span style="color: #005e8b;">src</span>=<span style="color: #3548cf;">"https://unpkg.com/vue@3/dist/vue.global.js"</span>&gt;&lt;/<span style="color: #721045;">script</span>&gt;
  &lt;/<span style="color: #721045;">head</span>&gt;
  &lt;<span style="color: #721045;">body</span>&gt;
    &lt;<span style="color: #721045;">div</span> <span style="color: #005e8b;">id</span>=<span style="color: #3548cf;">"app"</span>&gt;
      &lt;<span style="color: #721045;">h2</span>&gt;<span style="font-weight: bold; font-style: italic; text-decoration: underline;">event use only data in function</span>&lt;/<span style="color: #721045;">h2</span>&gt;
      &lt;<span style="color: #721045;">button</span> @click=<span style="color: #3548cf;">"handleClick3('data pass to function')"</span>&gt;
        Click to pass str only
      &lt;/<span style="color: #721045;">button</span>&gt;
    &lt;/<span style="color: #721045;">div</span>&gt;
    &lt;<span style="color: #721045;">script</span>&gt;
      const { createApp } = Vue;

      // &#21019;&#24314; Vue &#24212;&#29992;
      const app = createApp({
        methods: {
          handleClick3(data) {
            alert(`Data: ${data}`);
          },
        },
      });
      // &#25346;&#36733;&#21040; #app
      app.mount("#app");
    &lt;/<span style="color: #721045;">script</span>&gt;
  &lt;/<span style="color: #721045;">body</span>&gt;
&lt;/<span style="color: #721045;">html</span>&gt;
</pre>
</div></li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-orgf50dc4c" class="outline-4">
<h4 id="orgf50dc4c"><span class="section-number-4">2.7.2.</span> 事件修饰符</h4>
<div class="outline-text-4" id="text-2-7-2">
<ul class="org-ul">
<li>原生DOM事件中,我们可以在实践监听回调函数中通过event.preventDefault来组织默认行为,还可以通过event.stopPropagation
来停止事件冒泡.</li>
<li>Vue设计了更加简洁的时间修饰符来实现对事件的类似操作.常用的事件修饰符有下面几个:
<ul class="org-ul">
<li>.stop: 停止事件冒泡</li>
<li>.prevent: 阻止默认行为</li>
<li>.once: 事件只处理一次</li>
</ul></li>
</ul>
</div>
<ol class="org-ol">
<li><a id="orgd49b52d"></a>stop阻止事件冒泡<br />
<div class="outline-text-5" id="text-2-7-2-1">
<ul class="org-ul">
<li>事件冒泡是指事件从最深的目标元素开始，逐级向上传播到父节点的过程。
<ul class="org-ul">
<li><p>
示例如下
</p>
<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #531ab6;">!doctype</span> html&gt;

&lt;<span style="color: #721045;">html</span> <span style="color: #005e8b;">lang</span>=<span style="color: #3548cf;">"en"</span>&gt;
  &lt;<span style="color: #721045;">head</span>&gt;
    &lt;<span style="color: #721045;">meta</span> <span style="color: #005e8b;">charset</span>=<span style="color: #3548cf;">"UTF-8"</span> /&gt;
    &lt;<span style="color: #721045;">meta</span> <span style="color: #005e8b;">name</span>=<span style="color: #3548cf;">"viewport"</span> <span style="color: #005e8b;">content</span>=<span style="color: #3548cf;">"width=device-width, initial-scale=1.0"</span> /&gt;
    &lt;<span style="color: #721045;">title</span>&gt;<span style="font-weight: bold; text-decoration: underline;">v-for</span>&lt;/<span style="color: #721045;">title</span>&gt;
    &lt;<span style="color: #721045;">script</span> <span style="color: #005e8b;">src</span>=<span style="color: #3548cf;">"https://unpkg.com/vue@3/dist/vue.global.js"</span>&gt;&lt;/<span style="color: #721045;">script</span>&gt;
  &lt;/<span style="color: #721045;">head</span>&gt;
  &lt;<span style="color: #721045;">body</span>&gt;
    &lt;<span style="color: #721045;">div</span> <span style="color: #005e8b;">id</span>=<span style="color: #3548cf;">"app"</span>&gt;
      &lt;<span style="color: #721045;">h2</span>&gt;<span style="font-weight: bold; font-style: italic; text-decoration: underline;">event stop</span>&lt;/<span style="color: #721045;">h2</span>&gt;

      &lt;<span style="color: #721045;">div</span>
        <span style="color: #005e8b;">style</span>=<span style="color: #3548cf;">"width: 200px; height: 200px; background: yellow"</span>
        @click=<span style="color: #3548cf;">"handleDivClick"</span>
      &gt;
        &lt;<span style="color: #721045;">button</span> @click=<span style="color: #3548cf;">"handleButtonClick"</span>&gt;Click Me&lt;/<span style="color: #721045;">button</span>&gt;
      &lt;/<span style="color: #721045;">div</span>&gt;
      &lt;<span style="color: #721045;">br</span> /&gt;
    &lt;/<span style="color: #721045;">div</span>&gt;
    &lt;<span style="color: #721045;">script</span>&gt;
      const { createApp } = Vue;

      // &#21019;&#24314; Vue &#24212;&#29992;
      const app = createApp({
        methods: {
          handleDivClick() {
            alert("Div clicked!");
          },
          handleButtonClick() {
            alert("Button clicked!");
          },
        },
      });
      // &#25346;&#36733;&#21040; #app
      app.mount("#app");
    &lt;/<span style="color: #721045;">script</span>&gt;
  &lt;/<span style="color: #721045;">body</span>&gt;
&lt;/<span style="color: #721045;">html</span>&gt;
</pre>
</div></li>
<li>如果点击 &lt;button&gt;，浏览器会先触发 button 的点击事件，再触发其父元素 div 的点击事件（向上传播）</li>
<li><p>
如果我们希望阻止事件冒泡（即点击按钮时，不触发父级 div 的点击事件），就可以使用 .stop 修饰符。
</p>
<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #531ab6;">!doctype</span> html&gt;

&lt;<span style="color: #721045;">html</span> <span style="color: #005e8b;">lang</span>=<span style="color: #3548cf;">"en"</span>&gt;
  &lt;<span style="color: #721045;">head</span>&gt;
    &lt;<span style="color: #721045;">meta</span> <span style="color: #005e8b;">charset</span>=<span style="color: #3548cf;">"UTF-8"</span> /&gt;
    &lt;<span style="color: #721045;">meta</span> <span style="color: #005e8b;">name</span>=<span style="color: #3548cf;">"viewport"</span> <span style="color: #005e8b;">content</span>=<span style="color: #3548cf;">"width=device-width, initial-scale=1.0"</span> /&gt;
    &lt;<span style="color: #721045;">title</span>&gt;<span style="font-weight: bold; text-decoration: underline;">v-for</span>&lt;/<span style="color: #721045;">title</span>&gt;
    &lt;<span style="color: #721045;">script</span> <span style="color: #005e8b;">src</span>=<span style="color: #3548cf;">"https://unpkg.com/vue@3/dist/vue.global.js"</span>&gt;&lt;/<span style="color: #721045;">script</span>&gt;
  &lt;/<span style="color: #721045;">head</span>&gt;
  &lt;<span style="color: #721045;">body</span>&gt;
    &lt;<span style="color: #721045;">div</span> <span style="color: #005e8b;">id</span>=<span style="color: #3548cf;">"app"</span>&gt;
      &lt;<span style="color: #721045;">h2</span>&gt;<span style="font-weight: bold; font-style: italic; text-decoration: underline;">event stop</span>&lt;/<span style="color: #721045;">h2</span>&gt;

      &lt;<span style="color: #721045;">div</span>
        <span style="color: #005e8b;">style</span>=<span style="color: #3548cf;">"width: 200px; height: 200px; background: yellow"</span>
        @click=<span style="color: #3548cf;">"handleDivClick"</span>
      &gt;
        &lt;<span style="color: #721045;">button</span> @click.stop=<span style="color: #3548cf;">"handleButtonClick"</span>&gt;Click Me&lt;/<span style="color: #721045;">button</span>&gt;
      &lt;/<span style="color: #721045;">div</span>&gt;
      &lt;<span style="color: #721045;">br</span> /&gt;
    &lt;/<span style="color: #721045;">div</span>&gt;
    &lt;<span style="color: #721045;">script</span>&gt;
      const { createApp } = Vue;

      // &#21019;&#24314; Vue &#24212;&#29992;
      const app = createApp({
        methods: {
          handleDivClick() {
            alert("Div clicked!");
          },
          handleButtonClick() {
            alert("Button clicked!");
          },
        },
      });
      // &#25346;&#36733;&#21040; #app
      app.mount("#app");
    &lt;/<span style="color: #721045;">script</span>&gt;
  &lt;/<span style="color: #721045;">body</span>&gt;
&lt;/<span style="color: #721045;">html</span>&gt;
</pre>
</div></li>
</ul></li>
</ul>
</div>
</li>
<li><a id="orgdf6f683"></a>prevent阻止事件默认行为<br />
<div class="outline-text-5" id="text-2-7-2-2">
<ul class="org-ul">
<li>这个就很容易理解了,我们可以阻止浏览器默认的行为(改成自己的行为)
<ul class="org-ul">
<li><p>
比如href是超链接到新的网址,但是我们可以改成alert
</p>
<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #531ab6;">!doctype</span> html&gt;

&lt;<span style="color: #721045;">html</span> <span style="color: #005e8b;">lang</span>=<span style="color: #3548cf;">"en"</span>&gt;
  &lt;<span style="color: #721045;">head</span>&gt;
    &lt;<span style="color: #721045;">meta</span> <span style="color: #005e8b;">charset</span>=<span style="color: #3548cf;">"UTF-8"</span> /&gt;
    &lt;<span style="color: #721045;">meta</span> <span style="color: #005e8b;">name</span>=<span style="color: #3548cf;">"viewport"</span> <span style="color: #005e8b;">content</span>=<span style="color: #3548cf;">"width=device-width, initial-scale=1.0"</span> /&gt;
    &lt;<span style="color: #721045;">title</span>&gt;<span style="font-weight: bold; text-decoration: underline;">v-for</span>&lt;/<span style="color: #721045;">title</span>&gt;
    &lt;<span style="color: #721045;">script</span> <span style="color: #005e8b;">src</span>=<span style="color: #3548cf;">"https://unpkg.com/vue@3/dist/vue.global.js"</span>&gt;&lt;/<span style="color: #721045;">script</span>&gt;
  &lt;/<span style="color: #721045;">head</span>&gt;
  &lt;<span style="color: #721045;">body</span>&gt;
    &lt;<span style="color: #721045;">div</span> <span style="color: #005e8b;">id</span>=<span style="color: #3548cf;">"app"</span>&gt;
      &lt;<span style="color: #721045;">h2</span>&gt;<span style="font-weight: bold; font-style: italic; text-decoration: underline;">event prevent</span>&lt;/<span style="color: #721045;">h2</span>&gt;
      &lt;<span style="color: #721045;">a</span> <span style="color: #005e8b;">href</span>=<span style="color: #3548cf;">"https://bing.com"</span> @click.prevent=<span style="color: #3548cf;">"handleClick"</span>&gt;Bing.com Link&lt;/<span style="color: #721045;">a</span>&gt;

      &lt;<span style="color: #721045;">br</span> /&gt;
    &lt;/<span style="color: #721045;">div</span>&gt;
    &lt;<span style="color: #721045;">script</span>&gt;
      const { createApp } = Vue;

      // &#21019;&#24314; Vue &#24212;&#29992;
      const app = createApp({
        methods: {
          handleClick() {
            alert("handle click!");
          },
        },
      });
      // &#25346;&#36733;&#21040; #app
      app.mount("#app");
    &lt;/<span style="color: #721045;">script</span>&gt;
  &lt;/<span style="color: #721045;">body</span>&gt;
&lt;/<span style="color: #721045;">html</span>&gt;
</pre>
</div></li>
</ul></li>
</ul>
</div>
</li>
<li><a id="org5b982d3"></a>once事件只处理一次<br />
<div class="outline-text-5" id="text-2-7-2-3">
<ul class="org-ul">
<li>这个也很容易理解,就是所有的事件只有第一次发生的时候处理
<ul class="org-ul">
<li><p>
示例如下,我们的button只有第一次点击的时候会alert
</p>
<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #531ab6;">!doctype</span> html&gt;

&lt;<span style="color: #721045;">html</span> <span style="color: #005e8b;">lang</span>=<span style="color: #3548cf;">"en"</span>&gt;
  &lt;<span style="color: #721045;">head</span>&gt;
    &lt;<span style="color: #721045;">meta</span> <span style="color: #005e8b;">charset</span>=<span style="color: #3548cf;">"UTF-8"</span> /&gt;
    &lt;<span style="color: #721045;">meta</span> <span style="color: #005e8b;">name</span>=<span style="color: #3548cf;">"viewport"</span> <span style="color: #005e8b;">content</span>=<span style="color: #3548cf;">"width=device-width, initial-scale=1.0"</span> /&gt;
    &lt;<span style="color: #721045;">title</span>&gt;<span style="font-weight: bold; text-decoration: underline;">v-for</span>&lt;/<span style="color: #721045;">title</span>&gt;
    &lt;<span style="color: #721045;">script</span> <span style="color: #005e8b;">src</span>=<span style="color: #3548cf;">"https://unpkg.com/vue@3/dist/vue.global.js"</span>&gt;&lt;/<span style="color: #721045;">script</span>&gt;
  &lt;/<span style="color: #721045;">head</span>&gt;
  &lt;<span style="color: #721045;">body</span>&gt;
    &lt;<span style="color: #721045;">div</span> <span style="color: #005e8b;">id</span>=<span style="color: #3548cf;">"app"</span>&gt;
      &lt;<span style="color: #721045;">h2</span>&gt;<span style="font-weight: bold; font-style: italic; text-decoration: underline;">event prevent</span>&lt;/<span style="color: #721045;">h2</span>&gt;
      &lt;<span style="color: #721045;">button</span> @click.once=<span style="color: #3548cf;">"handleClick"</span>&gt;Handle Once&lt;/<span style="color: #721045;">button</span>&gt;
      &lt;<span style="color: #721045;">br</span> /&gt;
    &lt;/<span style="color: #721045;">div</span>&gt;
    &lt;<span style="color: #721045;">script</span>&gt;
      const { createApp } = Vue;

      // &#21019;&#24314; Vue &#24212;&#29992;
      const app = createApp({
        methods: {
          handleClick() {
            alert("handle click!");
          },
        },
      });
      // &#25346;&#36733;&#21040; #app
      app.mount("#app");
    &lt;/<span style="color: #721045;">script</span>&gt;
  &lt;/<span style="color: #721045;">body</span>&gt;
&lt;/<span style="color: #721045;">html</span>&gt;
</pre>
</div></li>
</ul></li>
</ul>
</div>
</li>
</ol>
</div>
<div id="outline-container-org47bdc6a" class="outline-4">
<h4 id="org47bdc6a"><span class="section-number-4">2.7.3.</span> 按键修饰符</h4>
<div class="outline-text-4" id="text-2-7-3">
<ul class="org-ul">
<li>按键修饰符是Vue用来处理键盘事件的
<ul class="org-ul">
<li><p>
示例如下,我们可以使用enter来确认提交
</p>
<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #531ab6;">!doctype</span> html&gt;

&lt;<span style="color: #721045;">html</span> <span style="color: #005e8b;">lang</span>=<span style="color: #3548cf;">"en"</span>&gt;
  &lt;<span style="color: #721045;">head</span>&gt;
    &lt;<span style="color: #721045;">meta</span> <span style="color: #005e8b;">charset</span>=<span style="color: #3548cf;">"UTF-8"</span> /&gt;
    &lt;<span style="color: #721045;">meta</span> <span style="color: #005e8b;">name</span>=<span style="color: #3548cf;">"viewport"</span> <span style="color: #005e8b;">content</span>=<span style="color: #3548cf;">"width=device-width, initial-scale=1.0"</span> /&gt;
    &lt;<span style="color: #721045;">title</span>&gt;<span style="font-weight: bold; text-decoration: underline;">v-for</span>&lt;/<span style="color: #721045;">title</span>&gt;
    &lt;<span style="color: #721045;">script</span> <span style="color: #005e8b;">src</span>=<span style="color: #3548cf;">"https://unpkg.com/vue@3/dist/vue.global.js"</span>&gt;&lt;/<span style="color: #721045;">script</span>&gt;
  &lt;/<span style="color: #721045;">head</span>&gt;
  &lt;<span style="color: #721045;">body</span>&gt;
    &lt;<span style="color: #721045;">div</span> <span style="color: #005e8b;">id</span>=<span style="color: #3548cf;">"app"</span>&gt;
      &lt;<span style="color: #721045;">h2</span>&gt;<span style="font-weight: bold; font-style: italic; text-decoration: underline;">event keyup</span>&lt;/<span style="color: #721045;">h2</span>&gt;
      &lt;<span style="color: #721045;">input</span>
        <span style="color: #005e8b;">type</span>=<span style="color: #3548cf;">"text"</span>
        <span style="color: #005e8b;">v-model</span>=<span style="color: #3548cf;">"inputValue"</span>
        @keyup.enter=<span style="color: #3548cf;">"submitForm"</span>
        <span style="color: #005e8b;">placeholder</span>=<span style="color: #3548cf;">"Type something and press Enter"</span>
      /&gt;
      &lt;<span style="color: #721045;">p</span>&gt;Submitted Value: {{ submittedValue }}&lt;/<span style="color: #721045;">p</span>&gt;
    &lt;/<span style="color: #721045;">div</span>&gt;
    &lt;<span style="color: #721045;">script</span>&gt;
      const { createApp } = Vue;

      // &#21019;&#24314; Vue &#24212;&#29992;
      const app = createApp({
        data() {
          return {
            inputValue: "", // &#29992;&#25143;&#36755;&#20837;&#30340;&#20540;
            submittedValue: "", // &#25552;&#20132;&#21518;&#30340;&#20540;
          };
        },
        methods: {
          submitForm() {
            // &#23558;&#36755;&#20837;&#30340;&#20540;&#35774;&#32622;&#20026;&#24050;&#25552;&#20132;&#30340;&#20540;
            this.submittedValue = this.inputValue;
            alert(`You submitted: ${this.inputValue}`);
            // &#28165;&#31354;&#36755;&#20837;&#26694;
            this.inputValue = "";
          },
        },
      });
      // &#25346;&#36733;&#21040; #app
      app.mount("#app");
    &lt;/<span style="color: #721045;">script</span>&gt;
  &lt;/<span style="color: #721045;">body</span>&gt;
&lt;/<span style="color: #721045;">html</span>&gt;
</pre>
</div></li>
<li><p>
我们甚至可以使用组合键进行触发,比如常见的shift+enter触发
</p>
<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #531ab6;">!doctype</span> html&gt;

&lt;<span style="color: #721045;">html</span> <span style="color: #005e8b;">lang</span>=<span style="color: #3548cf;">"en"</span>&gt;
  &lt;<span style="color: #721045;">head</span>&gt;
    &lt;<span style="color: #721045;">meta</span> <span style="color: #005e8b;">charset</span>=<span style="color: #3548cf;">"UTF-8"</span> /&gt;
    &lt;<span style="color: #721045;">meta</span> <span style="color: #005e8b;">name</span>=<span style="color: #3548cf;">"viewport"</span> <span style="color: #005e8b;">content</span>=<span style="color: #3548cf;">"width=device-width, initial-scale=1.0"</span> /&gt;
    &lt;<span style="color: #721045;">title</span>&gt;<span style="font-weight: bold; text-decoration: underline;">v-for</span>&lt;/<span style="color: #721045;">title</span>&gt;
    &lt;<span style="color: #721045;">script</span> <span style="color: #005e8b;">src</span>=<span style="color: #3548cf;">"https://unpkg.com/vue@3/dist/vue.global.js"</span>&gt;&lt;/<span style="color: #721045;">script</span>&gt;
  &lt;/<span style="color: #721045;">head</span>&gt;
  &lt;<span style="color: #721045;">body</span>&gt;
    &lt;<span style="color: #721045;">div</span> <span style="color: #005e8b;">id</span>=<span style="color: #3548cf;">"app"</span>&gt;
      &lt;<span style="color: #721045;">h2</span>&gt;<span style="font-weight: bold; font-style: italic; text-decoration: underline;">event keyup</span>&lt;/<span style="color: #721045;">h2</span>&gt;
      &lt;<span style="color: #721045;">input</span>
        <span style="color: #005e8b;">type</span>=<span style="color: #3548cf;">"text"</span>
        <span style="color: #005e8b;">v-model</span>=<span style="color: #3548cf;">"inputValue"</span>
        @keyup.shift.enter=<span style="color: #3548cf;">"submitForm"</span>
        <span style="color: #005e8b;">placeholder</span>=<span style="color: #3548cf;">"Type something and press Enter"</span>
      /&gt;
      &lt;<span style="color: #721045;">p</span>&gt;Submitted Value: {{ submittedValue }}&lt;/<span style="color: #721045;">p</span>&gt;
    &lt;/<span style="color: #721045;">div</span>&gt;
    &lt;<span style="color: #721045;">script</span>&gt;
      const { createApp } = Vue;

      // &#21019;&#24314; Vue &#24212;&#29992;
      const app = createApp({
        data() {
          return {
            inputValue: "", // &#29992;&#25143;&#36755;&#20837;&#30340;&#20540;
            submittedValue: "", // &#25552;&#20132;&#21518;&#30340;&#20540;
          };
        },
        methods: {
          submitForm() {
            // &#23558;&#36755;&#20837;&#30340;&#20540;&#35774;&#32622;&#20026;&#24050;&#25552;&#20132;&#30340;&#20540;
            this.submittedValue = this.inputValue;
            alert(`You submitted: ${this.inputValue}`);
            // &#28165;&#31354;&#36755;&#20837;&#26694;
            this.inputValue = "";
          },
        },
      });
      // &#25346;&#36733;&#21040; #app
      app.mount("#app");
    &lt;/<span style="color: #721045;">script</span>&gt;
  &lt;/<span style="color: #721045;">body</span>&gt;
&lt;/<span style="color: #721045;">html</span>&gt;
</pre>
</div></li>
</ul></li>
</ul>
</div>
</div>
</div>
<div id="outline-container-orgbc21129" class="outline-3">
<h3 id="orgbc21129"><span class="section-number-3">2.8.</span> 收集表单数据</h3>
<div class="outline-text-3" id="text-2-8">
<ul class="org-ul">
<li>前端开发中,表单是常见的页面效果.我们通常需要根据用户的输入,将数据实时同步给Javascript变量
<ul class="org-ul">
<li><p>
比较原始的做法是一来绑定动态value属性,二来监听input,示例如下
</p>
<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #531ab6;">!doctype</span> html&gt;

&lt;<span style="color: #721045;">html</span> <span style="color: #005e8b;">lang</span>=<span style="color: #3548cf;">"en"</span>&gt;
  &lt;<span style="color: #721045;">head</span>&gt;
    &lt;<span style="color: #721045;">meta</span> <span style="color: #005e8b;">charset</span>=<span style="color: #3548cf;">"UTF-8"</span> /&gt;
    &lt;<span style="color: #721045;">meta</span> <span style="color: #005e8b;">name</span>=<span style="color: #3548cf;">"viewport"</span> <span style="color: #005e8b;">content</span>=<span style="color: #3548cf;">"width=device-width, initial-scale=1.0"</span> /&gt;
    &lt;<span style="color: #721045;">title</span>&gt;<span style="font-weight: bold; text-decoration: underline;">v-for</span>&lt;/<span style="color: #721045;">title</span>&gt;
    &lt;<span style="color: #721045;">script</span> <span style="color: #005e8b;">src</span>=<span style="color: #3548cf;">"https://unpkg.com/vue@3/dist/vue.global.js"</span>&gt;&lt;/<span style="color: #721045;">script</span>&gt;
  &lt;/<span style="color: #721045;">head</span>&gt;
  &lt;<span style="color: #721045;">body</span>&gt;
    &lt;<span style="color: #721045;">div</span> <span style="color: #005e8b;">id</span>=<span style="color: #3548cf;">"app"</span>&gt;
      &lt;<span style="color: #721045;">input</span>
        :value=<span style="color: #3548cf;">"inputValue"</span>
        @input=<span style="color: #3548cf;">"updateValue($event)"</span>
        <span style="color: #005e8b;">placeholder</span>=<span style="color: #3548cf;">"Type something here"</span>
      /&gt;
      &lt;<span style="color: #721045;">p</span>&gt;You typed: {{ inputValue }}&lt;/<span style="color: #721045;">p</span>&gt;
    &lt;/<span style="color: #721045;">div</span>&gt;
    &lt;<span style="color: #721045;">script</span>&gt;
      const { createApp } = Vue;

      // &#21019;&#24314; Vue &#24212;&#29992;
      const app = createApp({
        data() {
          return {
            inputValue: "",
          };
        },
        methods: {
          updateValue(event) {
            this.inputValue = event.target.value;
          },
        },
      });
      // &#25346;&#36733;&#21040; #app
      app.mount("#app");
    &lt;/<span style="color: #721045;">script</span>&gt;
  &lt;/<span style="color: #721045;">body</span>&gt;
&lt;/<span style="color: #721045;">html</span>&gt;
</pre>
</div></li>
<li><p>
但是Vue发明了v-model,可以同时做上面的两件事:也就是所谓的双向数据绑定,示例如下
</p>
<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #531ab6;">!doctype</span> html&gt;

&lt;<span style="color: #721045;">html</span> <span style="color: #005e8b;">lang</span>=<span style="color: #3548cf;">"en"</span>&gt;
  &lt;<span style="color: #721045;">head</span>&gt;
    &lt;<span style="color: #721045;">meta</span> <span style="color: #005e8b;">charset</span>=<span style="color: #3548cf;">"UTF-8"</span> /&gt;
    &lt;<span style="color: #721045;">meta</span> <span style="color: #005e8b;">name</span>=<span style="color: #3548cf;">"viewport"</span> <span style="color: #005e8b;">content</span>=<span style="color: #3548cf;">"width=device-width, initial-scale=1.0"</span> /&gt;
    &lt;<span style="color: #721045;">title</span>&gt;<span style="font-weight: bold; text-decoration: underline;">v-for</span>&lt;/<span style="color: #721045;">title</span>&gt;
    &lt;<span style="color: #721045;">script</span> <span style="color: #005e8b;">src</span>=<span style="color: #3548cf;">"https://unpkg.com/vue@3/dist/vue.global.js"</span>&gt;&lt;/<span style="color: #721045;">script</span>&gt;
  &lt;/<span style="color: #721045;">head</span>&gt;
  &lt;<span style="color: #721045;">body</span>&gt;
    &lt;<span style="color: #721045;">div</span> <span style="color: #005e8b;">id</span>=<span style="color: #3548cf;">"app"</span>&gt;
      &lt;<span style="color: #721045;">h2</span>&gt;<span style="font-weight: bold; font-style: italic; text-decoration: underline;">v-model</span>&lt;/<span style="color: #721045;">h2</span>&gt;
      &lt;<span style="color: #721045;">input</span> <span style="color: #005e8b;">v-model</span>=<span style="color: #3548cf;">"inputValue"</span> <span style="color: #005e8b;">placeholder</span>=<span style="color: #3548cf;">"Type something here"</span> /&gt;
      &lt;<span style="color: #721045;">p</span>&gt;You typed: {{ inputValue }}&lt;/<span style="color: #721045;">p</span>&gt;
    &lt;/<span style="color: #721045;">div</span>&gt;
    &lt;<span style="color: #721045;">script</span>&gt;
      const { createApp } = Vue;

      // &#21019;&#24314; Vue &#24212;&#29992;
      const app = createApp({
        data() {
          return {
            inputValue: "",
          };
        },
        methods: {
          updateValue(event) {
            this.inputValue = event.target.value;
          },
        },
      });
      // &#25346;&#36733;&#21040; #app
      app.mount("#app");
    &lt;/<span style="color: #721045;">script</span>&gt;
  &lt;/<span style="color: #721045;">body</span>&gt;
&lt;/<span style="color: #721045;">html</span>&gt;
</pre>
</div></li>
</ul></li>
</ul>
</div>
<div id="outline-container-org109d1d3" class="outline-4">
<h4 id="org109d1d3"><span class="section-number-4">2.8.1.</span> 使用v-model指令</h4>
<div class="outline-text-4" id="text-2-8-1">
<ul class="org-ul">
<li>v-model指令可以应用在各种不同类型的表单元素上,它会根据所应用的元素不同,自动扩展到不同的DOM属性和事件监听上
<ul class="org-ul">
<li><p>
输入框绑定,示例如下
</p>
<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #531ab6;">!doctype</span> html&gt;

&lt;<span style="color: #721045;">html</span> <span style="color: #005e8b;">lang</span>=<span style="color: #3548cf;">"en"</span>&gt;
  &lt;<span style="color: #721045;">head</span>&gt;
    &lt;<span style="color: #721045;">meta</span> <span style="color: #005e8b;">charset</span>=<span style="color: #3548cf;">"UTF-8"</span> /&gt;
    &lt;<span style="color: #721045;">meta</span> <span style="color: #005e8b;">name</span>=<span style="color: #3548cf;">"viewport"</span> <span style="color: #005e8b;">content</span>=<span style="color: #3548cf;">"width=device-width, initial-scale=1.0"</span> /&gt;
    &lt;<span style="color: #721045;">title</span>&gt;<span style="font-weight: bold; text-decoration: underline;">v-for</span>&lt;/<span style="color: #721045;">title</span>&gt;
    &lt;<span style="color: #721045;">script</span> <span style="color: #005e8b;">src</span>=<span style="color: #3548cf;">"https://unpkg.com/vue@3/dist/vue.global.js"</span>&gt;&lt;/<span style="color: #721045;">script</span>&gt;
  &lt;/<span style="color: #721045;">head</span>&gt;
  &lt;<span style="color: #721045;">body</span>&gt;
    &lt;<span style="color: #721045;">div</span> <span style="color: #005e8b;">id</span>=<span style="color: #3548cf;">"app"</span>&gt;
      &lt;<span style="color: #721045;">input</span> <span style="color: #005e8b;">v-model</span>=<span style="color: #3548cf;">"username"</span> <span style="color: #005e8b;">placeholder</span>=<span style="color: #3548cf;">"Enter your username"</span> /&gt;
      &lt;<span style="color: #721045;">p</span>&gt;Your username: {{ username }}&lt;/<span style="color: #721045;">p</span>&gt;
    &lt;/<span style="color: #721045;">div</span>&gt;
    &lt;<span style="color: #721045;">script</span>&gt;
      const { createApp } = Vue;

      // &#21019;&#24314; Vue &#24212;&#29992;
      const app = createApp({
        data() {
          return {
            username: "", // &#29992;&#25143;&#21517;
          };
        },
      });
      // &#25346;&#36733;&#21040; #app
      app.mount("#app");
    &lt;/<span style="color: #721045;">script</span>&gt;
  &lt;/<span style="color: #721045;">body</span>&gt;
&lt;/<span style="color: #721045;">html</span>&gt;
</pre>
</div></li>
<li><p>
单选框绑定,示例如下
</p>
<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #531ab6;">!doctype</span> html&gt;

&lt;<span style="color: #721045;">html</span> <span style="color: #005e8b;">lang</span>=<span style="color: #3548cf;">"en"</span>&gt;
  &lt;<span style="color: #721045;">head</span>&gt;
    &lt;<span style="color: #721045;">meta</span> <span style="color: #005e8b;">charset</span>=<span style="color: #3548cf;">"UTF-8"</span> /&gt;
    &lt;<span style="color: #721045;">meta</span> <span style="color: #005e8b;">name</span>=<span style="color: #3548cf;">"viewport"</span> <span style="color: #005e8b;">content</span>=<span style="color: #3548cf;">"width=device-width, initial-scale=1.0"</span> /&gt;
    &lt;<span style="color: #721045;">title</span>&gt;<span style="font-weight: bold; text-decoration: underline;">v-for</span>&lt;/<span style="color: #721045;">title</span>&gt;
    &lt;<span style="color: #721045;">script</span> <span style="color: #005e8b;">src</span>=<span style="color: #3548cf;">"https://unpkg.com/vue@3/dist/vue.global.js"</span>&gt;&lt;/<span style="color: #721045;">script</span>&gt;
  &lt;/<span style="color: #721045;">head</span>&gt;
  &lt;<span style="color: #721045;">body</span>&gt;
    &lt;<span style="color: #721045;">div</span> <span style="color: #005e8b;">id</span>=<span style="color: #3548cf;">"app"</span>&gt;
      &lt;<span style="color: #721045;">label</span>&gt;
        &lt;<span style="color: #721045;">input</span> <span style="color: #005e8b;">type</span>=<span style="color: #3548cf;">"radio"</span> <span style="color: #005e8b;">v-model</span>=<span style="color: #3548cf;">"gender"</span> <span style="color: #005e8b;">value</span>=<span style="color: #3548cf;">"Male"</span> /&gt;
        Male
      &lt;/<span style="color: #721045;">label</span>&gt;
      &lt;<span style="color: #721045;">label</span>&gt;
        &lt;<span style="color: #721045;">input</span> <span style="color: #005e8b;">type</span>=<span style="color: #3548cf;">"radio"</span> <span style="color: #005e8b;">v-model</span>=<span style="color: #3548cf;">"gender"</span> <span style="color: #005e8b;">value</span>=<span style="color: #3548cf;">"Female"</span> /&gt;
        Female
      &lt;/<span style="color: #721045;">label</span>&gt;
      &lt;<span style="color: #721045;">p</span>&gt;Your gender: {{ gender }}&lt;/<span style="color: #721045;">p</span>&gt;
    &lt;/<span style="color: #721045;">div</span>&gt;
    &lt;<span style="color: #721045;">script</span>&gt;
      const { createApp } = Vue;

      // &#21019;&#24314; Vue &#24212;&#29992;
      const app = createApp({
        data() {
          return {
            gender: "", // &#29992;&#25143;&#21517;
          };
        },
      });
      // &#25346;&#36733;&#21040; #app
      app.mount("#app");
    &lt;/<span style="color: #721045;">script</span>&gt;
  &lt;/<span style="color: #721045;">body</span>&gt;
&lt;/<span style="color: #721045;">html</span>&gt;
</pre>
</div></li>
<li><p>
复选框绑定
</p>
<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #531ab6;">!doctype</span> html&gt;

&lt;<span style="color: #721045;">html</span> <span style="color: #005e8b;">lang</span>=<span style="color: #3548cf;">"en"</span>&gt;
  &lt;<span style="color: #721045;">head</span>&gt;
    &lt;<span style="color: #721045;">meta</span> <span style="color: #005e8b;">charset</span>=<span style="color: #3548cf;">"UTF-8"</span> /&gt;
    &lt;<span style="color: #721045;">meta</span> <span style="color: #005e8b;">name</span>=<span style="color: #3548cf;">"viewport"</span> <span style="color: #005e8b;">content</span>=<span style="color: #3548cf;">"width=device-width, initial-scale=1.0"</span> /&gt;
    &lt;<span style="color: #721045;">title</span>&gt;<span style="font-weight: bold; text-decoration: underline;">v-for</span>&lt;/<span style="color: #721045;">title</span>&gt;
    &lt;<span style="color: #721045;">script</span> <span style="color: #005e8b;">src</span>=<span style="color: #3548cf;">"https://unpkg.com/vue@3/dist/vue.global.js"</span>&gt;&lt;/<span style="color: #721045;">script</span>&gt;
  &lt;/<span style="color: #721045;">head</span>&gt;
  &lt;<span style="color: #721045;">body</span>&gt;
    &lt;<span style="color: #721045;">div</span> <span style="color: #005e8b;">id</span>=<span style="color: #3548cf;">"app"</span>&gt;
      &lt;<span style="color: #721045;">h3</span>&gt;<span style="font-style: italic; text-decoration: underline;">Select your hobbies:</span>&lt;/<span style="color: #721045;">h3</span>&gt;
      &lt;<span style="color: #721045;">label</span>&gt;
        &lt;<span style="color: #721045;">input</span> <span style="color: #005e8b;">type</span>=<span style="color: #3548cf;">"checkbox"</span> <span style="color: #005e8b;">v-model</span>=<span style="color: #3548cf;">"hobbies"</span> <span style="color: #005e8b;">value</span>=<span style="color: #3548cf;">"Reading"</span> /&gt;
        Reading
      &lt;/<span style="color: #721045;">label</span>&gt;
      &lt;<span style="color: #721045;">label</span>&gt;
        &lt;<span style="color: #721045;">input</span> <span style="color: #005e8b;">type</span>=<span style="color: #3548cf;">"checkbox"</span> <span style="color: #005e8b;">v-model</span>=<span style="color: #3548cf;">"hobbies"</span> <span style="color: #005e8b;">value</span>=<span style="color: #3548cf;">"Traveling"</span> /&gt;
        Traveling
      &lt;/<span style="color: #721045;">label</span>&gt;
      &lt;<span style="color: #721045;">label</span>&gt;
        &lt;<span style="color: #721045;">input</span> <span style="color: #005e8b;">type</span>=<span style="color: #3548cf;">"checkbox"</span> <span style="color: #005e8b;">v-model</span>=<span style="color: #3548cf;">"hobbies"</span> <span style="color: #005e8b;">value</span>=<span style="color: #3548cf;">"Gaming"</span> /&gt;
        Gaming
      &lt;/<span style="color: #721045;">label</span>&gt;
      &lt;<span style="color: #721045;">p</span>&gt;Your hobbies: {{ hobbies }}&lt;/<span style="color: #721045;">p</span>&gt;
    &lt;/<span style="color: #721045;">div</span>&gt;
    &lt;<span style="color: #721045;">script</span>&gt;
      const { createApp } = Vue;

      // &#21019;&#24314; Vue &#24212;&#29992;
      const app = createApp({
        data() {
          return {
            hobbies: [],
          };
        },
      });
      // &#25346;&#36733;&#21040; #app
      app.mount("#app");
    &lt;/<span style="color: #721045;">script</span>&gt;
  &lt;/<span style="color: #721045;">body</span>&gt;
&lt;/<span style="color: #721045;">html</span>&gt;
</pre>
</div></li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-orgb1cbf9f" class="outline-4">
<h4 id="orgb1cbf9f"><span class="section-number-4">2.8.2.</span> 相关指令修饰符</h4>
<div class="outline-text-4" id="text-2-8-2">
<ul class="org-ul">
<li>.lazy的修饰符更改同步数据的方法:
<ul class="org-ul">
<li>默认情况下,v-model会在input事件触发的时候同步数据,具体效果就是每写一个字母,就会触发Javascript变量的改变.</li>
<li>加了.lazy之后,v-model会在change时间的时候同步数据,具体效果就是会在输入框失去焦点的时候,数据才会同步</li>
</ul></li>
<li>.trim的修饰符决定文本数据是否trim
<ul class="org-ul">
<li>默认情况下, v-model会把文本两端的空格同步到data对应属性上</li>
<li>加了.trim之后,v-model会把文本两端的空格去除之后,再同步到data对应属性上</li>
</ul></li>
<li>.number修饰符决定文本类型是否转换为number
<ul class="org-ul">
<li>默认情况下, v-model会把输入框的所有内容理解为文本类型,并且同步</li>
<li>加了.number之后,v-model会把文本转换为number类型,再同步给data对应属性</li>
</ul></li>
</ul>
</div>
</div>
</div>
<div id="outline-container-org870ffbf" class="outline-3">
<h3 id="org870ffbf"><span class="section-number-3">2.9.</span> Vue实例的生命周期</h3>
<div class="outline-text-3" id="text-2-9">
<ul class="org-ul">
<li>Vue的实例有不同的生命周期,具体可以分为如下几个部分:
<ul class="org-ul">
<li>创建阶段:先后有beforeCreate, created</li>
<li>挂载阶段:先后有beforeMount, mountd</li>
<li>更新阶段:先后有beforeUpdate, updated</li>
<li>销毁阶段:先后有beforeUnmount, unmountd</li>
</ul></li>
<li>我们可以通过一个例子来展示这些生命周期
<ul class="org-ul">
<li><p>
示例如下
</p>
<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #531ab6;">!doctype</span> html&gt;

&lt;<span style="color: #721045;">html</span> <span style="color: #005e8b;">lang</span>=<span style="color: #3548cf;">"en"</span>&gt;
  &lt;<span style="color: #721045;">head</span>&gt;
    &lt;<span style="color: #721045;">meta</span> <span style="color: #005e8b;">charset</span>=<span style="color: #3548cf;">"UTF-8"</span> /&gt;
    &lt;<span style="color: #721045;">meta</span> <span style="color: #005e8b;">name</span>=<span style="color: #3548cf;">"viewport"</span> <span style="color: #005e8b;">content</span>=<span style="color: #3548cf;">"width=device-width, initial-scale=1.0"</span> /&gt;
    &lt;<span style="color: #721045;">title</span>&gt;<span style="font-weight: bold; text-decoration: underline;">v-for</span>&lt;/<span style="color: #721045;">title</span>&gt;
    &lt;<span style="color: #721045;">script</span> <span style="color: #005e8b;">src</span>=<span style="color: #3548cf;">"https://unpkg.com/vue@3/dist/vue.global.js"</span>&gt;&lt;/<span style="color: #721045;">script</span>&gt;
  &lt;/<span style="color: #721045;">head</span>&gt;
  &lt;<span style="color: #721045;">body</span>&gt;
    &lt;<span style="color: #721045;">div</span> <span style="color: #005e8b;">id</span>=<span style="color: #3548cf;">"app"</span>&gt;
      &lt;<span style="color: #721045;">h3</span>&gt;<span style="font-style: italic; text-decoration: underline;">{{ title }}</span>&lt;/<span style="color: #721045;">h3</span>&gt;
      &lt;<span style="color: #721045;">button</span> @click=<span style="color: #3548cf;">"updateTitle"</span>&gt;Update Title&lt;/<span style="color: #721045;">button</span>&gt;
    &lt;/<span style="color: #721045;">div</span>&gt;
    &lt;<span style="color: #721045;">script</span>&gt;
      const { createApp } = Vue;

      // &#21019;&#24314; Vue &#24212;&#29992;
      const app = createApp({
        data() {
          return {
            title: "Hello World!",
          };
        },
        methods: {
          updateTitle() {
            this.title = "Title Updated!";
          },
        },
        beforeCreate() {
          console.log("beforeCreate: &#23454;&#20363;&#21021;&#22987;&#21270;&#21069;");
        },
        created() {
          console.log("created: &#23454;&#20363;&#24050;&#21019;&#24314;");
        },
        beforeMount() {
          console.log("beforeMount: &#25346;&#36733;&#21069;");
        },
        mounted() {
          console.log("mounted: &#25346;&#36733;&#23436;&#25104;");
        },
        beforeUpdate() {
          console.log("beforeUpdate: &#25968;&#25454;&#26356;&#26032;&#21069;");
        },
        updated() {
          console.log("updated: &#25968;&#25454;&#26356;&#26032;&#21518;");
        },
        beforeUnmount() {
          console.log("beforeUnmount: &#38144;&#27585;&#21069;");
        },
        unmounted() {
          console.log("unmounted: &#23454;&#20363;&#24050;&#38144;&#27585;");
        },
      });
      // &#25346;&#36733;&#21040; #app
      app.mount("#app");
    &lt;/<span style="color: #721045;">script</span>&gt;
  &lt;/<span style="color: #721045;">body</span>&gt;
&lt;/<span style="color: #721045;">html</span>&gt;
</pre>
</div></li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-org08765c1" class="outline-3">
<h3 id="org08765c1"><span class="section-number-3">2.10.</span> 过渡与动画</h3>
<div class="outline-text-3" id="text-2-10">
<ul class="org-ul">
<li>Vue 提供了一种简洁优雅的方式来处理 过渡与动画，用于在元素的插入、更新和移除时应用过渡效果。通过 Vue
的内置指令和工具，你可以轻松地实现动态效果，如淡入淡出、滑动、缩放等。</li>
</ul>
</div>
</div>
<div id="outline-container-org8a001cc" class="outline-3">
<h3 id="org8a001cc"><span class="section-number-3">2.11.</span> 内置指令</h3>
<div class="outline-text-3" id="text-2-11">
</div>
<div id="outline-container-org665888e" class="outline-4">
<h4 id="org665888e"><span class="section-number-4">2.11.1.</span> v-text和v-html指令</h4>
<div class="outline-text-4" id="text-2-11-1">
<ul class="org-ul">
<li>v-text和v-html是两个非常相近的指令,区别在于v-text会自动转移HTML标签,所以它是安全的,而v-html不会转义
HTML标签是,所以其不安全可能会导致XSS(当然其存在的意义是为了插入动态生成的HTML内容:
<ul class="org-ul">
<li><p>
我们先来看一个v-text的例子,它会显示&lt;strong&gt;Hello,Vue!&lt;/strong&gt;纯文本
</p>
<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #531ab6;">!doctype</span> html&gt;

&lt;<span style="color: #721045;">html</span> <span style="color: #005e8b;">lang</span>=<span style="color: #3548cf;">"en"</span>&gt;
  &lt;<span style="color: #721045;">head</span>&gt;
    &lt;<span style="color: #721045;">meta</span> <span style="color: #005e8b;">charset</span>=<span style="color: #3548cf;">"UTF-8"</span> /&gt;
    &lt;<span style="color: #721045;">meta</span> <span style="color: #005e8b;">name</span>=<span style="color: #3548cf;">"viewport"</span> <span style="color: #005e8b;">content</span>=<span style="color: #3548cf;">"width=device-width, initial-scale=1.0"</span> /&gt;
    &lt;<span style="color: #721045;">title</span>&gt;<span style="font-weight: bold; text-decoration: underline;">v-for</span>&lt;/<span style="color: #721045;">title</span>&gt;
    &lt;<span style="color: #721045;">script</span> <span style="color: #005e8b;">src</span>=<span style="color: #3548cf;">"https://unpkg.com/vue@3/dist/vue.global.js"</span>&gt;&lt;/<span style="color: #721045;">script</span>&gt;
  &lt;/<span style="color: #721045;">head</span>&gt;
  &lt;<span style="color: #721045;">body</span>&gt;
    &lt;<span style="color: #721045;">div</span> <span style="color: #005e8b;">id</span>=<span style="color: #3548cf;">"app"</span>&gt;
      &lt;<span style="color: #721045;">p</span> <span style="color: #005e8b;">v-text</span>=<span style="color: #3548cf;">"message"</span>&gt;&lt;/<span style="color: #721045;">p</span>&gt;
    &lt;/<span style="color: #721045;">div</span>&gt;
    &lt;<span style="color: #721045;">script</span>&gt;
      const { createApp } = Vue;

      // &#21019;&#24314; Vue &#24212;&#29992;
      const app = createApp({
        data() {
          return {
            message: "&lt;<span style="color: #721045;">strong</span>&gt;<span style="font-weight: bold;">Hello, Vue!</span>&lt;/<span style="color: #721045;">strong</span>&gt;",
          };
        },
      });
      // &#25346;&#36733;&#21040; #app
      app.mount("#app");
    &lt;/<span style="color: #721045;">script</span>&gt;
  &lt;/<span style="color: #721045;">body</span>&gt;
&lt;/<span style="color: #721045;">html</span>&gt;
</pre>
</div></li>
<li><p>
我们再来看一个v-html的例子,它会显示Hello,Vue!加粗文本
</p>
<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #531ab6;">!doctype</span> html&gt;

&lt;<span style="color: #721045;">html</span> <span style="color: #005e8b;">lang</span>=<span style="color: #3548cf;">"en"</span>&gt;
  &lt;<span style="color: #721045;">head</span>&gt;
    &lt;<span style="color: #721045;">meta</span> <span style="color: #005e8b;">charset</span>=<span style="color: #3548cf;">"UTF-8"</span> /&gt;
    &lt;<span style="color: #721045;">meta</span> <span style="color: #005e8b;">name</span>=<span style="color: #3548cf;">"viewport"</span> <span style="color: #005e8b;">content</span>=<span style="color: #3548cf;">"width=device-width, initial-scale=1.0"</span> /&gt;
    &lt;<span style="color: #721045;">title</span>&gt;<span style="font-weight: bold; text-decoration: underline;">v-for</span>&lt;/<span style="color: #721045;">title</span>&gt;
    &lt;<span style="color: #721045;">script</span> <span style="color: #005e8b;">src</span>=<span style="color: #3548cf;">"https://unpkg.com/vue@3/dist/vue.global.js"</span>&gt;&lt;/<span style="color: #721045;">script</span>&gt;
  &lt;/<span style="color: #721045;">head</span>&gt;
  &lt;<span style="color: #721045;">body</span>&gt;
    &lt;<span style="color: #721045;">div</span> <span style="color: #005e8b;">id</span>=<span style="color: #3548cf;">"app"</span>&gt;
      &lt;<span style="color: #721045;">p</span> <span style="color: #005e8b;">v-html</span>=<span style="color: #3548cf;">"message"</span>&gt;&lt;/<span style="color: #721045;">p</span>&gt;
    &lt;/<span style="color: #721045;">div</span>&gt;
    &lt;<span style="color: #721045;">script</span>&gt;
      const { createApp } = Vue;

      // &#21019;&#24314; Vue &#24212;&#29992;
      const app = createApp({
        data() {
          return {
            message: "&lt;<span style="color: #721045;">strong</span>&gt;<span style="font-weight: bold;">Hello, Vue!</span>&lt;/<span style="color: #721045;">strong</span>&gt;",
          };
        },
      });
      // &#25346;&#36733;&#21040; #app
      app.mount("#app");
    &lt;/<span style="color: #721045;">script</span>&gt;
  &lt;/<span style="color: #721045;">body</span>&gt;
&lt;/<span style="color: #721045;">html</span>&gt;
</pre>
</div></li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-org58e0105" class="outline-4">
<h4 id="org58e0105"><span class="section-number-4">2.11.2.</span> v-pre指令</h4>
<div class="outline-text-4" id="text-2-11-2">
<ul class="org-ul">
<li>v-pre指令会跳过当前所在元素(及其所有子元素)的编译
<ul class="org-ul">
<li><p>
比如我们有一个{{ message }}, 如果使用了v-pre,那么不会打印message变量的内容,而是直接打印"{{ message }}"
</p>
<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #531ab6;">!doctype</span> html&gt;

&lt;<span style="color: #721045;">html</span> <span style="color: #005e8b;">lang</span>=<span style="color: #3548cf;">"en"</span>&gt;
  &lt;<span style="color: #721045;">head</span>&gt;
    &lt;<span style="color: #721045;">meta</span> <span style="color: #005e8b;">charset</span>=<span style="color: #3548cf;">"UTF-8"</span> /&gt;
    &lt;<span style="color: #721045;">meta</span> <span style="color: #005e8b;">name</span>=<span style="color: #3548cf;">"viewport"</span> <span style="color: #005e8b;">content</span>=<span style="color: #3548cf;">"width=device-width, initial-scale=1.0"</span> /&gt;
    &lt;<span style="color: #721045;">title</span>&gt;<span style="font-weight: bold; text-decoration: underline;">v-for</span>&lt;/<span style="color: #721045;">title</span>&gt;
    &lt;<span style="color: #721045;">script</span> <span style="color: #005e8b;">src</span>=<span style="color: #3548cf;">"https://unpkg.com/vue@3/dist/vue.global.js"</span>&gt;&lt;/<span style="color: #721045;">script</span>&gt;
  &lt;/<span style="color: #721045;">head</span>&gt;
  &lt;<span style="color: #721045;">body</span>&gt;
    &lt;<span style="color: #721045;">div</span> <span style="color: #005e8b;">id</span>=<span style="color: #3548cf;">"app"</span>&gt;
      &lt;<span style="color: #721045;">p</span> v-pre&gt;{{ message }}&lt;/<span style="color: #721045;">p</span>&gt;
    &lt;/<span style="color: #721045;">div</span>&gt;
    &lt;<span style="color: #721045;">script</span>&gt;
      const { createApp } = Vue;

      // &#21019;&#24314; Vue &#24212;&#29992;
      const app = createApp({
        data() {
          return {
            message: "&lt;<span style="color: #721045;">strong</span>&gt;<span style="font-weight: bold;">Hello, Vue!</span>&lt;/<span style="color: #721045;">strong</span>&gt;",
          };
        },
      });
      // &#25346;&#36733;&#21040; #app
      app.mount("#app");
    &lt;/<span style="color: #721045;">script</span>&gt;
  &lt;/<span style="color: #721045;">body</span>&gt;
&lt;/<span style="color: #721045;">html</span>&gt;
</pre>
</div></li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-org60e85ce" class="outline-4">
<h4 id="org60e85ce"><span class="section-number-4">2.11.3.</span> v-once指令</h4>
<div class="outline-text-4" id="text-2-11-3">
<ul class="org-ul">
<li>v-once顾名思义就是只渲染一次.简单的说就是在动态显示时,使用该指令后不会再更新对应的data数据
<ul class="org-ul">
<li><p>
示例如下,第二个message由于被配置了v-once所以后面不会再改动.第一个message会进行相应改动
</p>
<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #531ab6;">!doctype</span> html&gt;

&lt;<span style="color: #721045;">html</span> <span style="color: #005e8b;">lang</span>=<span style="color: #3548cf;">"en"</span>&gt;
  &lt;<span style="color: #721045;">head</span>&gt;
    &lt;<span style="color: #721045;">meta</span> <span style="color: #005e8b;">charset</span>=<span style="color: #3548cf;">"UTF-8"</span> /&gt;
    &lt;<span style="color: #721045;">meta</span> <span style="color: #005e8b;">name</span>=<span style="color: #3548cf;">"viewport"</span> <span style="color: #005e8b;">content</span>=<span style="color: #3548cf;">"width=device-width, initial-scale=1.0"</span> /&gt;
    &lt;<span style="color: #721045;">title</span>&gt;<span style="font-weight: bold; text-decoration: underline;">v-for</span>&lt;/<span style="color: #721045;">title</span>&gt;
    &lt;<span style="color: #721045;">script</span> <span style="color: #005e8b;">src</span>=<span style="color: #3548cf;">"https://unpkg.com/vue@3/dist/vue.global.js"</span>&gt;&lt;/<span style="color: #721045;">script</span>&gt;
  &lt;/<span style="color: #721045;">head</span>&gt;
  &lt;<span style="color: #721045;">body</span>&gt;
    &lt;<span style="color: #721045;">div</span> <span style="color: #005e8b;">id</span>=<span style="color: #3548cf;">"app"</span>&gt;
      &lt;<span style="color: #721045;">p</span>&gt;{{ message }}&lt;/<span style="color: #721045;">p</span>&gt;
      &lt;<span style="color: #721045;">p</span> v-once&gt;{{ message }}&lt;/<span style="color: #721045;">p</span>&gt;
      &lt;<span style="color: #721045;">button</span> @click=<span style="color: #3548cf;">"message += '~'"</span>&gt;Change Message&lt;/<span style="color: #721045;">button</span>&gt;
    &lt;/<span style="color: #721045;">div</span>&gt;
    &lt;<span style="color: #721045;">script</span>&gt;
      const { createApp } = Vue;

      // &#21019;&#24314; Vue &#24212;&#29992;
      const app = createApp({
        data() {
          return {
            message: "Hello, Vue!",
          };
        },
      });
      // &#25346;&#36733;&#21040; #app
      app.mount("#app");
    &lt;/<span style="color: #721045;">script</span>&gt;
  &lt;/<span style="color: #721045;">body</span>&gt;
&lt;/<span style="color: #721045;">html</span>&gt;
</pre>
</div></li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-orgc7a2e98" class="outline-4">
<h4 id="orgc7a2e98"><span class="section-number-4">2.11.4.</span> v-memo指令</h4>
<div class="outline-text-4" id="text-2-11-4">
<ul class="org-ul">
<li>v-memo 是 Vue 3.2 引入的一个新指令，用于优化性能。它通过缓存和跳过更新，避免不必要的渲染，以提高应用的性能。</li>
<li>v-memo 指令适合以下场景：
<ul class="org-ul">
<li>性能优化：当某些部分的模板不需要频繁更新时，可以使用 v-memo 来减少渲染开销。</li>
<li>避免不必要的渲染：如果模板依赖的状态或属性长期不变，可以通过 v-memo 跳过渲染。</li>
<li>复杂计算或渲染：对于计算和渲染代价较高的部分，缓存可以提高性能。</li>
</ul></li>
<li>我们来看一个v-memo的例子:
<ul class="org-ul">
<li>示例如下:当message改变的时候v-memo缓存的模版会重新渲染,否则Vue会跳过该部分的更新</li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-org3e16f79" class="outline-4">
<h4 id="org3e16f79"><span class="section-number-4">2.11.5.</span> v-cloak指令</h4>
<div class="outline-text-4" id="text-2-11-5">
<ul class="org-ul">
<li>v-cloak 是 Vue 提供的一个非常简单但却非常实用的指令，用于在 Vue 应用初始化完成之前隐藏未渲染的模板内容
<ul class="org-ul">
<li><p>
示例如下,如果数据需要异步加载(比如API获取数据),可以使用v-cloak避免为渲染的模版内容被用户看到
</p>
<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #531ab6;">!doctype</span> html&gt;

&lt;<span style="color: #721045;">html</span> <span style="color: #005e8b;">lang</span>=<span style="color: #3548cf;">"en"</span>&gt;
  &lt;<span style="color: #721045;">head</span>&gt;
    &lt;<span style="color: #721045;">meta</span> <span style="color: #005e8b;">charset</span>=<span style="color: #3548cf;">"UTF-8"</span> /&gt;
    &lt;<span style="color: #721045;">meta</span> <span style="color: #005e8b;">name</span>=<span style="color: #3548cf;">"viewport"</span> <span style="color: #005e8b;">content</span>=<span style="color: #3548cf;">"width=device-width, initial-scale=1.0"</span> /&gt;
    &lt;<span style="color: #721045;">title</span>&gt;<span style="font-weight: bold; text-decoration: underline;">v-for</span>&lt;/<span style="color: #721045;">title</span>&gt;
    &lt;<span style="color: #721045;">script</span> <span style="color: #005e8b;">src</span>=<span style="color: #3548cf;">"https://unpkg.com/vue@3/dist/vue.global.js"</span>&gt;&lt;/<span style="color: #721045;">script</span>&gt;
  &lt;/<span style="color: #721045;">head</span>&gt;
  &lt;<span style="color: #721045;">body</span>&gt;
    &lt;<span style="color: #721045;">div</span> <span style="color: #005e8b;">id</span>=<span style="color: #3548cf;">"app"</span>&gt;
      &lt;<span style="color: #721045;">p</span> v-cloak&gt;{{ loadingMessage }}&lt;/<span style="color: #721045;">p</span>&gt;
    &lt;/<span style="color: #721045;">div</span>&gt;
    &lt;<span style="color: #721045;">script</span>&gt;
      const { createApp } = Vue;

      // &#21019;&#24314; Vue &#24212;&#29992;
      const app = createApp({
        data() {
          return {
            loadingMessage: "Loading data...",
          };
        },
        mounted() {
          setTimeout(() =&gt; {
            this.loadingMessage = "Data loaded successfully!";
          }, 2000); // &#27169;&#25311;&#25968;&#25454;&#21152;&#36733;
        },
      });
      // &#25346;&#36733;&#21040; #app
      app.mount("#app");
    &lt;/<span style="color: #721045;">script</span>&gt;
  &lt;/<span style="color: #721045;">body</span>&gt;
&lt;/<span style="color: #721045;">html</span>&gt;
</pre>
</div></li>
</ul></li>
</ul>
</div>
</div>
</div>
</div>
<div id="outline-container-org4d3ff05" class="outline-2">
<h2 id="org4d3ff05"><span class="section-number-2">3.</span> Chapter 03: Vue3新语法</h2>
<div class="outline-text-2" id="text-3">
<ul class="org-ul">
<li>第二章的例子全部是选项式API,Vue3新开发了组合式API,组合式API才是官方推荐的做法.我们可以认为选项式API
只是为了向前兼容而保留,新的代码一定要使用组合式API</li>
</ul>
</div>
<div id="outline-container-org685ad5f" class="outline-3">
<h3 id="org685ad5f"><span class="section-number-3">3.1.</span> 组合式API的了解</h3>
<div class="outline-text-3" id="text-3-1">
<ul class="org-ul">
<li>回顾第二章的选项式API的例子,其暴露的一个主要问题是: 操作同一内容目标的代码会被分散在不同的选项中,
比如data, methods, computed, watch以及声明周期钩子函数等</li>
<li>组合式API则不同,所有的逻辑全部在setup()函数里面书写,从而让逻辑更加清晰,便于代码的编写,查看和维护</li>
<li>setup()函数有两个参数:
<ul class="org-ul">
<li>props对象,包含传入的组件的属性</li>
<li>context,可以理解为除了props属性以外的其他的meta信息</li>
</ul></li>
<li>setup()返回一个对象,对象中包含数据和函数,都可以在模板中直接使用.</li>
<li>setup()在严格模式下,this是undefined,这样能让大家安心的写箭头函数,不用担心this被乱绑定</li>
<li>我们来用一个例子来展示下setup的基本使用
<ul class="org-ul">
<li><p>
示例如下
</p>
<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #531ab6;">!doctype</span> html&gt;
&lt;<span style="color: #721045;">html</span> <span style="color: #005e8b;">lang</span>=<span style="color: #3548cf;">"en"</span>&gt;
  &lt;<span style="color: #721045;">head</span>&gt;
    &lt;<span style="color: #721045;">meta</span> <span style="color: #005e8b;">charset</span>=<span style="color: #3548cf;">"UTF-8"</span> /&gt;
    &lt;<span style="color: #721045;">meta</span> <span style="color: #005e8b;">name</span>=<span style="color: #3548cf;">"viewport"</span> <span style="color: #005e8b;">content</span>=<span style="color: #3548cf;">"width=device-width, initial-scale=1.0"</span> /&gt;
    &lt;<span style="color: #721045;">script</span> <span style="color: #005e8b;">src</span>=<span style="color: #3548cf;">"https://unpkg.com/vue@3/dist/vue.global.js"</span>&gt;&lt;/<span style="color: #721045;">script</span>&gt;
  &lt;/<span style="color: #721045;">head</span>&gt;
  &lt;<span style="color: #721045;">body</span>&gt;
    &lt;<span style="color: #721045;">div</span> <span style="color: #005e8b;">id</span>=<span style="color: #3548cf;">"app"</span>&gt;
      <span style="color: #7f0000;">&lt;!-- </span><span style="color: #7f0000;">Vue &#27169;&#26495;</span><span style="color: #7f0000;"> --&gt;</span>
      &lt;<span style="color: #721045;">h1</span>&gt;<span style="font-weight: bold; text-decoration: underline;">{{ message }}</span>&lt;/<span style="color: #721045;">h1</span>&gt;
      &lt;<span style="color: #721045;">button</span> @click=<span style="color: #3548cf;">"handleClick"</span>&gt;Handle Click&lt;/<span style="color: #721045;">button</span>&gt;
    &lt;/<span style="color: #721045;">div</span>&gt;

    &lt;<span style="color: #721045;">script</span>&gt;
      "use strict";
      const { createApp } = Vue; // &#20174; Vue &#20013;&#35299;&#26500;&#20986;&#38656;&#35201;&#30340;API

      // &#21019;&#24314; Vue &#24212;&#29992;
      const app = createApp({
        setup() {
          console.log("this =&gt;", this);
          let message = "Hello World";
          function handleClick() {
            alert("handleClick");
            message += "~";
            console.log(message);
          }

          // &#36820;&#22238;&#27169;&#26495;&#20013;&#38656;&#35201;&#20351;&#29992;&#30340;&#25968;&#25454;
          return {
            message,
            handleClick,
          };
        },
      });

      // &#25346;&#36733;&#21040; #app
      app.mount("#app");
    &lt;/<span style="color: #721045;">script</span>&gt;
  &lt;/<span style="color: #721045;">body</span>&gt;
&lt;/<span style="color: #721045;">html</span>&gt;
</pre>
</div></li>
<li>上面的例子中,由于使用了严格模式,所以this的值总数undefined</li>
<li>我们的handleClick成功的触发了alert(),并且message的值也改变了,但是页面显示的message还是不变,因为
在Vue3里面,变量不再自动是响应式的了.需要ref或者reactive</li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-org928e03b" class="outline-3">
<h3 id="org928e03b"><span class="section-number-3">3.2.</span> 利用ref函数定义响应式数据</h3>
<div class="outline-text-3" id="text-3-2">
<ul class="org-ul">
<li>在Vue3中,数据需要被修饰后才能成为响应式数据,修饰的方法有两个:
<ul class="org-ul">
<li>ref: 能修饰任意类型,除了模版以外的地方需要".value"才能访问数据</li>
<li>reactive:只能修饰对象类型.任何时候不需要".value"</li>
</ul></li>
<li>ref相比之下,比reactive的使用范围更大(可以修饰基本类型),区别是在代码中需要".value"(在模版中不需要)
<ul class="org-ul">
<li><p>
示例如下
</p>
<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #531ab6;">!doctype</span> html&gt;
&lt;<span style="color: #721045;">html</span> <span style="color: #005e8b;">lang</span>=<span style="color: #3548cf;">"en"</span>&gt;
  &lt;<span style="color: #721045;">head</span>&gt;
    &lt;<span style="color: #721045;">meta</span> <span style="color: #005e8b;">charset</span>=<span style="color: #3548cf;">"UTF-8"</span> /&gt;
    &lt;<span style="color: #721045;">meta</span> <span style="color: #005e8b;">name</span>=<span style="color: #3548cf;">"viewport"</span> <span style="color: #005e8b;">content</span>=<span style="color: #3548cf;">"width=device-width, initial-scale=1.0"</span> /&gt;
    &lt;<span style="color: #721045;">script</span> <span style="color: #005e8b;">src</span>=<span style="color: #3548cf;">"https://unpkg.com/vue@3/dist/vue.global.js"</span>&gt;&lt;/<span style="color: #721045;">script</span>&gt;
  &lt;/<span style="color: #721045;">head</span>&gt;
  &lt;<span style="color: #721045;">body</span>&gt;
    &lt;<span style="color: #721045;">div</span> <span style="color: #005e8b;">id</span>=<span style="color: #3548cf;">"app"</span>&gt;
      <span style="color: #7f0000;">&lt;!-- </span><span style="color: #7f0000;">Vue &#27169;&#26495;</span><span style="color: #7f0000;"> --&gt;</span>
      &lt;<span style="color: #721045;">h1</span>&gt;<span style="font-weight: bold; text-decoration: underline;">{{ count }}</span>&lt;/<span style="color: #721045;">h1</span>&gt;
      &lt;<span style="color: #721045;">button</span> @click=<span style="color: #3548cf;">"handleClick"</span>&gt;Handle Click&lt;/<span style="color: #721045;">button</span>&gt;
    &lt;/<span style="color: #721045;">div</span>&gt;

    &lt;<span style="color: #721045;">script</span>&gt;
      "use strict";
      const { createApp, ref } = Vue; // &#20174; Vue &#20013;&#35299;&#26500;&#20986;&#38656;&#35201;&#30340;API

      // &#21019;&#24314; Vue &#24212;&#29992;
      const app = createApp({
        setup() {
          const count = ref(0);
          function handleClick() {
            count.value += 1;
          }

          // &#36820;&#22238;&#27169;&#26495;&#20013;&#38656;&#35201;&#20351;&#29992;&#30340;&#25968;&#25454;
          return {
            count,
            handleClick,
          };
        },
      });

      // &#25346;&#36733;&#21040; #app
      app.mount("#app");
    &lt;/<span style="color: #721045;">script</span>&gt;
  &lt;/<span style="color: #721045;">body</span>&gt;
&lt;/<span style="color: #721045;">html</span>&gt;
</pre>
</div></li>
<li>上例就是一个ref修饰基本类型(number)的例子,注意只有script中需要".value",在模板中,不需要".value"</li>
<li><p>
ref还可以修饰对象类型使其变为响应式,新的响应式对象的部分和整体都可以修改,如下
</p>
<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #531ab6;">!doctype</span> html&gt;
&lt;<span style="color: #721045;">html</span> <span style="color: #005e8b;">lang</span>=<span style="color: #3548cf;">"en"</span>&gt;
  &lt;<span style="color: #721045;">head</span>&gt;
    &lt;<span style="color: #721045;">meta</span> <span style="color: #005e8b;">charset</span>=<span style="color: #3548cf;">"UTF-8"</span> /&gt;
    &lt;<span style="color: #721045;">meta</span> <span style="color: #005e8b;">name</span>=<span style="color: #3548cf;">"viewport"</span> <span style="color: #005e8b;">content</span>=<span style="color: #3548cf;">"width=device-width, initial-scale=1.0"</span> /&gt;
    &lt;<span style="color: #721045;">script</span> <span style="color: #005e8b;">src</span>=<span style="color: #3548cf;">"https://unpkg.com/vue@3/dist/vue.global.js"</span>&gt;&lt;/<span style="color: #721045;">script</span>&gt;
  &lt;/<span style="color: #721045;">head</span>&gt;
  &lt;<span style="color: #721045;">body</span>&gt;
    &lt;<span style="color: #721045;">div</span> <span style="color: #005e8b;">id</span>=<span style="color: #3548cf;">"app"</span>&gt;
      <span style="color: #7f0000;">&lt;!-- </span><span style="color: #7f0000;">Vue &#27169;&#26495;</span><span style="color: #7f0000;"> --&gt;</span>
      &lt;<span style="color: #721045;">h1</span>&gt;<span style="font-weight: bold; text-decoration: underline;">{{ person }}</span>&lt;/<span style="color: #721045;">h1</span>&gt;
      &lt;<span style="color: #721045;">button</span> @click=<span style="color: #3548cf;">"changePersonAge"</span>&gt;Change Person Age&lt;/<span style="color: #721045;">button</span>&gt;
      &lt;<span style="color: #721045;">button</span> @click=<span style="color: #3548cf;">"changeWholePerson"</span>&gt;Change Whole Person&lt;/<span style="color: #721045;">button</span>&gt;
    &lt;/<span style="color: #721045;">div</span>&gt;

    &lt;<span style="color: #721045;">script</span>&gt;
      "use strict";
      const { createApp, ref } = Vue; // &#20174; Vue &#20013;&#35299;&#26500;&#20986;&#38656;&#35201;&#30340;API

      // &#21019;&#24314; Vue &#24212;&#29992;
      const app = createApp({
        setup() {
          const person = ref({ name: "Tom", age: 18 });
          function changeWholePerson() {
            person.value = { name: "Jack", age: 20 };
          }

          function changePersonAge() {
            person.value.age += 1;
          }

          // &#36820;&#22238;&#27169;&#26495;&#20013;&#38656;&#35201;&#20351;&#29992;&#30340;&#25968;&#25454;
          return {
            person,
            changeWholePerson,
            changePersonAge,
          };
        },
      });

      // &#25346;&#36733;&#21040; #app
      app.mount("#app");
    &lt;/<span style="color: #721045;">script</span>&gt;
  &lt;/<span style="color: #721045;">body</span>&gt;
&lt;/<span style="color: #721045;">html</span>&gt;
</pre>
</div></li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-org1fcd0b4" class="outline-3">
<h3 id="org1fcd0b4"><span class="section-number-3">3.3.</span> 利用reactive函数定义响应式数据</h3>
<div class="outline-text-3" id="text-3-3">
<ul class="org-ul">
<li>reactive可以让对象类型变成响应式,对象类型内部的任意数据都可以"响应式更改"(Javascript中更改,能直接反应到模板上)
<ul class="org-ul">
<li><p>
示例如下
</p>
<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #531ab6;">!doctype</span> html&gt;
&lt;<span style="color: #721045;">html</span> <span style="color: #005e8b;">lang</span>=<span style="color: #3548cf;">"en"</span>&gt;
  &lt;<span style="color: #721045;">head</span>&gt;
    &lt;<span style="color: #721045;">meta</span> <span style="color: #005e8b;">charset</span>=<span style="color: #3548cf;">"UTF-8"</span> /&gt;
    &lt;<span style="color: #721045;">meta</span> <span style="color: #005e8b;">name</span>=<span style="color: #3548cf;">"viewport"</span> <span style="color: #005e8b;">content</span>=<span style="color: #3548cf;">"width=device-width, initial-scale=1.0"</span> /&gt;
    &lt;<span style="color: #721045;">script</span> <span style="color: #005e8b;">src</span>=<span style="color: #3548cf;">"https://unpkg.com/vue@3/dist/vue.global.js"</span>&gt;&lt;/<span style="color: #721045;">script</span>&gt;
  &lt;/<span style="color: #721045;">head</span>&gt;
  &lt;<span style="color: #721045;">body</span>&gt;
    &lt;<span style="color: #721045;">div</span> <span style="color: #005e8b;">id</span>=<span style="color: #3548cf;">"app"</span>&gt;
      <span style="color: #7f0000;">&lt;!-- </span><span style="color: #7f0000;">Vue &#27169;&#26495;</span><span style="color: #7f0000;"> --&gt;</span>
      &lt;<span style="color: #721045;">h1</span>&gt;<span style="font-weight: bold; text-decoration: underline;">{{ person }}</span>&lt;/<span style="color: #721045;">h1</span>&gt;
      &lt;<span style="color: #721045;">button</span> @click=<span style="color: #3548cf;">"changePersonAge"</span>&gt;Change Person Age&lt;/<span style="color: #721045;">button</span>&gt;
      &lt;<span style="color: #721045;">button</span> @click=<span style="color: #3548cf;">"changeWholePerson"</span>&gt;Change Whole Person&lt;/<span style="color: #721045;">button</span>&gt;
    &lt;/<span style="color: #721045;">div</span>&gt;

    &lt;<span style="color: #721045;">script</span>&gt;
      "use strict";
      const { createApp, reactive } = Vue; // &#20174; Vue &#20013;&#35299;&#26500;&#20986;&#38656;&#35201;&#30340;API

      // &#21019;&#24314; Vue &#24212;&#29992;
      const app = createApp({
        setup() {
          const person = reactive({ name: "Tom", age: 18 });
          function changeWholePerson() {
            Object.assign(person, { name: "Jack", age: 20 });
          }

          function changePersonAge() {
            person.age += 1;
          }

          // &#36820;&#22238;&#27169;&#26495;&#20013;&#38656;&#35201;&#20351;&#29992;&#30340;&#25968;&#25454;
          return {
            person,
            changeWholePerson,
            changePersonAge,
          };
        },
      });

      // &#25346;&#36733;&#21040; #app
      app.mount("#app");
    &lt;/<span style="color: #721045;">script</span>&gt;
  &lt;/<span style="color: #721045;">body</span>&gt;
&lt;/<span style="color: #721045;">html</span>&gt;
</pre>
</div></li>
<li>我们注意到,使用reactive的情况下,哪里都不需要".value"</li>
<li>我们这个例子中的changeWholePerson就必须使用Object.assign函数来给具体某个属性赋值了.因为reactive
本来就是一个对象,如果直接赋值(假设这里是let不是const),那么对象会变成另外一个对象.相比之下因为ref
有".value",反而可以直接赋新值</li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-org8acddc2" class="outline-3">
<h3 id="org8acddc2"><span class="section-number-3">3.4.</span> toRefs与toRef函数</h3>
<div class="outline-text-3" id="text-3-4">
<ul class="org-ul">
<li>toRefs和toRef,顾名思义,就是把一个对象转换为ref对象,但是这个对象其实是有要求的,因为这个对象必须是reactive对象</li>
<li>为什么会有这种需求呢?
<ul class="org-ul">
<li>这是因为reactive是一个复杂的object,但是这个object中的某些成员希望:
<ol class="org-ol">
<li>解构赋值</li>
<li>依然保持之前的响应式绑定</li>
</ol></li>
</ul></li>
<li>toRef是提取单个属性,通过参数决定提取哪个属性
<ul class="org-ul">
<li><p>
示例如下
</p>
<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #531ab6;">!doctype</span> html&gt;
&lt;<span style="color: #721045;">html</span> <span style="color: #005e8b;">lang</span>=<span style="color: #3548cf;">"en"</span>&gt;
  &lt;<span style="color: #721045;">head</span>&gt;
    &lt;<span style="color: #721045;">meta</span> <span style="color: #005e8b;">charset</span>=<span style="color: #3548cf;">"UTF-8"</span> /&gt;
    &lt;<span style="color: #721045;">meta</span> <span style="color: #005e8b;">name</span>=<span style="color: #3548cf;">"viewport"</span> <span style="color: #005e8b;">content</span>=<span style="color: #3548cf;">"width=device-width, initial-scale=1.0"</span> /&gt;
    &lt;<span style="color: #721045;">script</span> <span style="color: #005e8b;">src</span>=<span style="color: #3548cf;">"https://unpkg.com/vue@3/dist/vue.global.js"</span>&gt;&lt;/<span style="color: #721045;">script</span>&gt;
  &lt;/<span style="color: #721045;">head</span>&gt;
  &lt;<span style="color: #721045;">body</span>&gt;
    &lt;<span style="color: #721045;">div</span> <span style="color: #005e8b;">id</span>=<span style="color: #3548cf;">"app"</span>&gt;
      <span style="color: #7f0000;">&lt;!-- </span><span style="color: #7f0000;">Vue &#27169;&#26495;</span><span style="color: #7f0000;"> --&gt;</span>
      &lt;<span style="color: #721045;">h1</span>&gt;<span style="font-weight: bold; text-decoration: underline;">{{ person }}</span>&lt;/<span style="color: #721045;">h1</span>&gt;
      &lt;<span style="color: #721045;">button</span> @click=<span style="color: #3548cf;">"changePersonAge"</span>&gt;Change Person Age&lt;/<span style="color: #721045;">button</span>&gt;
      &lt;<span style="color: #721045;">button</span> @click=<span style="color: #3548cf;">"changeWholePerson"</span>&gt;Change Whole Person&lt;/<span style="color: #721045;">button</span>&gt;
    &lt;/<span style="color: #721045;">div</span>&gt;

    &lt;<span style="color: #721045;">script</span>&gt;
      "use strict";
      const { createApp, reactive, toRef } = Vue; // &#20174; Vue &#20013;&#35299;&#26500;&#20986;&#38656;&#35201;&#30340;API

      // &#21019;&#24314; Vue &#24212;&#29992;
      const app = createApp({
        setup() {
          const person = reactive({ name: "Tom", age: 18 });
          function changeWholePerson() {
            Object.assign(person, { name: "Jack", age: 20 });
          }

          function changePersonAge() {
            const age = toRef(person, "age");
            age.value += 2;
          }

          // &#36820;&#22238;&#27169;&#26495;&#20013;&#38656;&#35201;&#20351;&#29992;&#30340;&#25968;&#25454;
          return {
            person,
            changeWholePerson,
            changePersonAge,
          };
        },
      });

      // &#25346;&#36733;&#21040; #app
      app.mount("#app");
    &lt;/<span style="color: #721045;">script</span>&gt;
  &lt;/<span style="color: #721045;">body</span>&gt;
&lt;/<span style="color: #721045;">html</span>&gt;
</pre>
</div></li>
</ul></li>
<li>toRefs是提取所有属性,可以通过解构赋值来完成
<ul class="org-ul">
<li><p>
示例如下
</p>
<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #531ab6;">!doctype</span> html&gt;
&lt;<span style="color: #721045;">html</span> <span style="color: #005e8b;">lang</span>=<span style="color: #3548cf;">"en"</span>&gt;
  &lt;<span style="color: #721045;">head</span>&gt;
    &lt;<span style="color: #721045;">meta</span> <span style="color: #005e8b;">charset</span>=<span style="color: #3548cf;">"UTF-8"</span> /&gt;
    &lt;<span style="color: #721045;">meta</span> <span style="color: #005e8b;">name</span>=<span style="color: #3548cf;">"viewport"</span> <span style="color: #005e8b;">content</span>=<span style="color: #3548cf;">"width=device-width, initial-scale=1.0"</span> /&gt;
    &lt;<span style="color: #721045;">script</span> <span style="color: #005e8b;">src</span>=<span style="color: #3548cf;">"https://unpkg.com/vue@3/dist/vue.global.js"</span>&gt;&lt;/<span style="color: #721045;">script</span>&gt;
  &lt;/<span style="color: #721045;">head</span>&gt;
  &lt;<span style="color: #721045;">body</span>&gt;
    &lt;<span style="color: #721045;">div</span> <span style="color: #005e8b;">id</span>=<span style="color: #3548cf;">"app"</span>&gt;
      <span style="color: #7f0000;">&lt;!-- </span><span style="color: #7f0000;">Vue &#27169;&#26495;</span><span style="color: #7f0000;"> --&gt;</span>
      &lt;<span style="color: #721045;">h1</span>&gt;<span style="font-weight: bold; text-decoration: underline;">{{ person }}</span>&lt;/<span style="color: #721045;">h1</span>&gt;
      &lt;<span style="color: #721045;">button</span> @click=<span style="color: #3548cf;">"changePersonAge"</span>&gt;Change Person Age&lt;/<span style="color: #721045;">button</span>&gt;
      &lt;<span style="color: #721045;">button</span> @click=<span style="color: #3548cf;">"changeWholePerson"</span>&gt;Change Whole Person&lt;/<span style="color: #721045;">button</span>&gt;
    &lt;/<span style="color: #721045;">div</span>&gt;

    &lt;<span style="color: #721045;">script</span>&gt;
      "use strict";
      const { createApp, reactive, toRefs } = Vue; // &#20174; Vue &#20013;&#35299;&#26500;&#20986;&#38656;&#35201;&#30340;API

      // &#21019;&#24314; Vue &#24212;&#29992;
      const app = createApp({
        setup() {
          const person = reactive({ name: "Tom", age: 18 });
          function changeWholePerson() {
            const { name, age } = toRefs(person);
            name.value += "~";
            age.value += 2;
          }

          function changePersonAge() {
            person.age += 1;
          }

          // &#36820;&#22238;&#27169;&#26495;&#20013;&#38656;&#35201;&#20351;&#29992;&#30340;&#25968;&#25454;
          return {
            person,
            changeWholePerson,
            changePersonAge,
          };
        },
      });

      // &#25346;&#36733;&#21040; #app
      app.mount("#app");
    &lt;/<span style="color: #721045;">script</span>&gt;
  &lt;/<span style="color: #721045;">body</span>&gt;
&lt;/<span style="color: #721045;">html</span>&gt;
</pre>
</div></li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-org67de46b" class="outline-3">
<h3 id="org67de46b"><span class="section-number-3">3.5.</span> readonly与shallowReadonly函数</h3>
<div class="outline-text-3" id="text-3-5">
<ul class="org-ul">
<li>在 Vue 3 中，readonly 和 shallowReadonly 是用于创建不可修改的响应式数据的工具。它们主要用于防止意
外修改数据，同时保持数据的响应式特性，使得视图仍然可以追踪数据的变化</li>
</ul>
</div>
<div id="outline-container-orgc23a6e6" class="outline-4">
<h4 id="orgc23a6e6"><span class="section-number-4">3.5.1.</span> readonly</h4>
<div class="outline-text-4" id="text-3-5-1">
<ul class="org-ul">
<li>readonly可以将一个响应式对象或普通对象转化为一个完全不可修改的响应式对象:
<ul class="org-ul">
<li>转化后的对象的所有属性都是只读的，无法被修改</li>
<li>对象中的嵌套属性也会变成只读（深层只读)</li>
<li>如果尝试修改这些属性，Vue 会在开发环境下发出警告</li>
</ul></li>
<li>readonly对象是深度只读的,任意部分修改都会报错
<ul class="org-ul">
<li><p>
示例如下
</p>
<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #531ab6;">!doctype</span> html&gt;
&lt;<span style="color: #721045;">html</span> <span style="color: #005e8b;">lang</span>=<span style="color: #3548cf;">"en"</span>&gt;
  &lt;<span style="color: #721045;">head</span>&gt;
    &lt;<span style="color: #721045;">meta</span> <span style="color: #005e8b;">charset</span>=<span style="color: #3548cf;">"UTF-8"</span> /&gt;
    &lt;<span style="color: #721045;">meta</span> <span style="color: #005e8b;">name</span>=<span style="color: #3548cf;">"viewport"</span> <span style="color: #005e8b;">content</span>=<span style="color: #3548cf;">"width=device-width, initial-scale=1.0"</span> /&gt;
    &lt;<span style="color: #721045;">script</span> <span style="color: #005e8b;">src</span>=<span style="color: #3548cf;">"https://unpkg.com/vue@3/dist/vue.global.js"</span>&gt;&lt;/<span style="color: #721045;">script</span>&gt;
  &lt;/<span style="color: #721045;">head</span>&gt;
  &lt;<span style="color: #721045;">body</span>&gt;
    &lt;<span style="color: #721045;">div</span> <span style="color: #005e8b;">id</span>=<span style="color: #3548cf;">"app"</span>&gt;
      <span style="color: #7f0000;">&lt;!-- </span><span style="color: #7f0000;">Vue &#27169;&#26495;</span><span style="color: #7f0000;"> --&gt;</span>
      &lt;<span style="color: #721045;">h1</span>&gt;<span style="font-weight: bold; text-decoration: underline;">{{ state.count }}</span>&lt;/<span style="color: #721045;">h1</span>&gt;
      &lt;<span style="color: #721045;">h1</span>&gt;<span style="font-weight: bold; text-decoration: underline;">{{ state.nested.value }}</span>&lt;/<span style="color: #721045;">h1</span>&gt;
    &lt;/<span style="color: #721045;">div</span>&gt;

    &lt;<span style="color: #721045;">script</span>&gt;
      "use strict";
      const { createApp, reactive, readonly } = Vue; // &#20174; Vue &#20013;&#35299;&#26500;&#20986;&#38656;&#35201;&#30340;API

      // &#21019;&#24314; Vue &#24212;&#29992;
      const app = createApp({
        setup() {
          const state = reactive({
            count: 0,
            nested: {
              value: 32,
            },
          });

          const readonlyState = readonly(state);
          console.log(readonlyState);
          /* Set operation on key "count" failed: target is readonly. */
          /* readonlyState.count++; */

          /* Set operation on key "value" failed: target is readonly. */
          /* readonlyState.nested.value = 100; */

          // &#36820;&#22238;&#27169;&#26495;&#20013;&#38656;&#35201;&#20351;&#29992;&#30340;&#25968;&#25454;
          return {
            state,
          };
        },
      });

      // &#25346;&#36733;&#21040; #app
      app.mount("#app");
    &lt;/<span style="color: #721045;">script</span>&gt;
  &lt;/<span style="color: #721045;">body</span>&gt;
&lt;/<span style="color: #721045;">html</span>&gt;
</pre>
</div></li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-org1478d77" class="outline-4">
<h4 id="org1478d77"><span class="section-number-4">3.5.2.</span> shallowReadonly</h4>
<div class="outline-text-4" id="text-3-5-2">
<ul class="org-ul">
<li>shallowReadonly 可以将一个对象转化为浅层只读的对象。只有对象的根属性是只读的，而嵌套属性仍然可以被修改:
<ul class="org-ul">
<li>转化后的对象的根属性是只读的，无法被修改。</li>
<li>对象中的嵌套属性仍然是可修改的（浅层只读）。</li>
<li>如果尝试修改根属性，Vue 会在开发环境下发出警告</li>
</ul></li>
<li>shallowReadonly适用于防止修改对象的顶层属性，同时允许嵌套属性可被修改
<ul class="org-ul">
<li><p>
示例如下,shallowRadonly中的nested.value可以被更改
</p>
<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #531ab6;">!doctype</span> html&gt;
&lt;<span style="color: #721045;">html</span> <span style="color: #005e8b;">lang</span>=<span style="color: #3548cf;">"en"</span>&gt;
  &lt;<span style="color: #721045;">head</span>&gt;
    &lt;<span style="color: #721045;">meta</span> <span style="color: #005e8b;">charset</span>=<span style="color: #3548cf;">"UTF-8"</span> /&gt;
    &lt;<span style="color: #721045;">meta</span> <span style="color: #005e8b;">name</span>=<span style="color: #3548cf;">"viewport"</span> <span style="color: #005e8b;">content</span>=<span style="color: #3548cf;">"width=device-width, initial-scale=1.0"</span> /&gt;
    &lt;<span style="color: #721045;">script</span> <span style="color: #005e8b;">src</span>=<span style="color: #3548cf;">"https://unpkg.com/vue@3/dist/vue.global.js"</span>&gt;&lt;/<span style="color: #721045;">script</span>&gt;
  &lt;/<span style="color: #721045;">head</span>&gt;
  &lt;<span style="color: #721045;">body</span>&gt;
    &lt;<span style="color: #721045;">div</span> <span style="color: #005e8b;">id</span>=<span style="color: #3548cf;">"app"</span>&gt;
      <span style="color: #7f0000;">&lt;!-- </span><span style="color: #7f0000;">Vue &#27169;&#26495;</span><span style="color: #7f0000;"> --&gt;</span>
      &lt;<span style="color: #721045;">h1</span>&gt;<span style="font-weight: bold; text-decoration: underline;">{{ state.count }}</span>&lt;/<span style="color: #721045;">h1</span>&gt;
      &lt;<span style="color: #721045;">h1</span>&gt;<span style="font-weight: bold; text-decoration: underline;">{{ state.nested.value }}</span>&lt;/<span style="color: #721045;">h1</span>&gt;
      &lt;<span style="color: #721045;">button</span> @click=<span style="color: #3548cf;">"changeNestedValue"</span>&gt;Change Nested Value&lt;/<span style="color: #721045;">button</span>&gt;
    &lt;/<span style="color: #721045;">div</span>&gt;

    &lt;<span style="color: #721045;">script</span>&gt;
      "use strict";
      const { createApp, reactive, shallowReadonly } = Vue; // &#20174; Vue &#20013;&#35299;&#26500;&#20986;&#38656;&#35201;&#30340;API

      // &#21019;&#24314; Vue &#24212;&#29992;
      const app = createApp({
        setup() {
          const state = reactive({
            count: 0,
            nested: {
              value: 32,
            },
          });

          const shallowReadonlyState = shallowReadonly(state);
          console.log(shallowReadonlyState);

          function changeNestedValue() {
            shallowReadonlyState.nested.value += 1;
          }

          // &#36820;&#22238;&#27169;&#26495;&#20013;&#38656;&#35201;&#20351;&#29992;&#30340;&#25968;&#25454;
          return {
            state,
            changeNestedValue,
          };
        },
      });

      // &#25346;&#36733;&#21040; #app
      app.mount("#app");
    &lt;/<span style="color: #721045;">script</span>&gt;
  &lt;/<span style="color: #721045;">body</span>&gt;
&lt;/<span style="color: #721045;">html</span>&gt;
</pre>
</div></li>
</ul></li>
</ul>
</div>
</div>
</div>
<div id="outline-container-orgfac6f80" class="outline-3">
<h3 id="orgfac6f80"><span class="section-number-3">3.6.</span> shallowRef与shallowReactive函数</h3>
<div class="outline-text-3" id="text-3-6">
<ul class="org-ul">
<li>通常情况下，Vue 的响应式系统会递归地追踪对象或数组的所有嵌套属性，确保深层次的响应式。然而，在某些
场景中(必须按需更新的场景)，我们可能只需要对对象的顶层属性进行响应式处理，而不追踪嵌套的属性。这种
情况下，就可以使用 shallowRef 和 shallowReactive。</li>
</ul>
</div>
<div id="outline-container-orga78938c" class="outline-4">
<h4 id="orga78938c"><span class="section-number-4">3.6.1.</span> shallowRef</h4>
<div class="outline-text-4" id="text-3-6-1">
<ul class="org-ul">
<li>shallowRef创建一个只追踪ref的顶层值的响应对象.如果这个值是一个对象或者数组,Vue不会地递归的将嵌套属性转换为响应式
<ul class="org-ul">
<li><p>
示例如下,只有把整个对象都改动的情况下,才能触发响应.
</p>
<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #531ab6;">!doctype</span> html&gt;
&lt;<span style="color: #721045;">html</span> <span style="color: #005e8b;">lang</span>=<span style="color: #3548cf;">"en"</span>&gt;
  &lt;<span style="color: #721045;">head</span>&gt;
    &lt;<span style="color: #721045;">meta</span> <span style="color: #005e8b;">charset</span>=<span style="color: #3548cf;">"UTF-8"</span> /&gt;
    &lt;<span style="color: #721045;">meta</span> <span style="color: #005e8b;">name</span>=<span style="color: #3548cf;">"viewport"</span> <span style="color: #005e8b;">content</span>=<span style="color: #3548cf;">"width=device-width, initial-scale=1.0"</span> /&gt;
    &lt;<span style="color: #721045;">script</span> <span style="color: #005e8b;">src</span>=<span style="color: #3548cf;">"https://unpkg.com/vue@3/dist/vue.global.js"</span>&gt;&lt;/<span style="color: #721045;">script</span>&gt;
  &lt;/<span style="color: #721045;">head</span>&gt;
  &lt;<span style="color: #721045;">body</span>&gt;
    &lt;<span style="color: #721045;">div</span> <span style="color: #005e8b;">id</span>=<span style="color: #3548cf;">"app"</span>&gt;
      <span style="color: #7f0000;">&lt;!-- </span><span style="color: #7f0000;">Vue &#27169;&#26495;</span><span style="color: #7f0000;"> --&gt;</span>
      &lt;<span style="color: #721045;">h1</span>&gt;<span style="font-weight: bold; text-decoration: underline;">{{ charData }}</span>&lt;/<span style="color: #721045;">h1</span>&gt;
      &lt;<span style="color: #721045;">button</span> @click=<span style="color: #3548cf;">"changeWholeChartData"</span>&gt;Change Whole Chart Data&lt;/<span style="color: #721045;">button</span>&gt;
      &lt;<span style="color: #721045;">button</span> @click=<span style="color: #3548cf;">"changeChartData"</span>&gt;Change Chart Data&lt;/<span style="color: #721045;">button</span>&gt;
      &lt;<span style="color: #721045;">button</span> @click=<span style="color: #3548cf;">"changeChartDataElement"</span>&gt;Change Chart Data Element&lt;/<span style="color: #721045;">button</span>&gt;
    &lt;/<span style="color: #721045;">div</span>&gt;

    &lt;<span style="color: #721045;">script</span>&gt;
      "use strict";
      const { createApp, shallowRef } = Vue;

      // &#21019;&#24314; Vue &#24212;&#29992;
      const app = createApp({
        setup() {
          const charData = shallowRef({
            labels: ["A", "B", "C"],
            datasets: [10, 20, 30],
          });

          function changeWholeChartData() {
            charData.value = {
              labels: ["X", "Y", "Z"],
              datasets: [15, 25, 35],
            };
          }

          function changeChartData() {
            charData.value.datasets = [50, 60, 70];
            console.log(charData.value);
          }

          function changeChartDataElement() {
            charData.value.datasets[0] += 10;
            console.log(charData.value);
          }

          // &#36820;&#22238;&#27169;&#26495;&#20013;&#38656;&#35201;&#20351;&#29992;&#30340;&#25968;&#25454;
          return {
            charData,
            changeWholeChartData,
            changeChartData,
            changeChartDataElement,
          };
        },
      });

      // &#25346;&#36733;&#21040; #app
      app.mount("#app");
    &lt;/<span style="color: #721045;">script</span>&gt;
  &lt;/<span style="color: #721045;">body</span>&gt;
&lt;/<span style="color: #721045;">html</span>&gt;
</pre>
</div></li>
<li>我们的changeChartData和changeChartDataElement分别只改动了一部分成员,是不会触发响应的</li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-orgb2ecc90" class="outline-4">
<h4 id="orgb2ecc90"><span class="section-number-4">3.6.2.</span> shallowReactive</h4>
<div class="outline-text-4" id="text-3-6-2">
<ul class="org-ul">
<li>shallowReactive当然就是shallowRef的reactive版本啦,和shallowRef稍微不同的是,更改shallowReactive的第
一层会触发视图更新,注意shallowRef是更改第零层触发更新!</li>
<li>那么shallowReactive能不能更改第零层呢?
<ul class="org-ul">
<li>答案是不可以,因为shallowReactive没有".value",更改第零层就把整个对象给换了.</li>
</ul></li>
<li>总结起来就是shallowReactive响应式范围是"对象的顶层属性",而不是shallowRef里面的"顶层值"
<ul class="org-ul">
<li><p>
示例如下
</p>
<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #531ab6;">!doctype</span> html&gt;
&lt;<span style="color: #721045;">html</span> <span style="color: #005e8b;">lang</span>=<span style="color: #3548cf;">"en"</span>&gt;
  &lt;<span style="color: #721045;">head</span>&gt;
    &lt;<span style="color: #721045;">meta</span> <span style="color: #005e8b;">charset</span>=<span style="color: #3548cf;">"UTF-8"</span> /&gt;
    &lt;<span style="color: #721045;">meta</span> <span style="color: #005e8b;">name</span>=<span style="color: #3548cf;">"viewport"</span> <span style="color: #005e8b;">content</span>=<span style="color: #3548cf;">"width=device-width, initial-scale=1.0"</span> /&gt;
    &lt;<span style="color: #721045;">script</span> <span style="color: #005e8b;">src</span>=<span style="color: #3548cf;">"https://unpkg.com/vue@3/dist/vue.global.js"</span>&gt;&lt;/<span style="color: #721045;">script</span>&gt;
  &lt;/<span style="color: #721045;">head</span>&gt;
  &lt;<span style="color: #721045;">body</span>&gt;
    &lt;<span style="color: #721045;">div</span> <span style="color: #005e8b;">id</span>=<span style="color: #3548cf;">"app"</span>&gt;
      <span style="color: #7f0000;">&lt;!-- </span><span style="color: #7f0000;">Vue &#27169;&#26495;</span><span style="color: #7f0000;"> --&gt;</span>
      &lt;<span style="color: #721045;">h1</span>&gt;<span style="font-weight: bold; text-decoration: underline;">{{ charData }}</span>&lt;/<span style="color: #721045;">h1</span>&gt;
      &lt;<span style="color: #721045;">button</span> @click=<span style="color: #3548cf;">"changeWholeChartData"</span>&gt;Change Whole Chart Data&lt;/<span style="color: #721045;">button</span>&gt;
      &lt;<span style="color: #721045;">button</span> @click=<span style="color: #3548cf;">"changeChartData"</span>&gt;Change Chart Data&lt;/<span style="color: #721045;">button</span>&gt;
      &lt;<span style="color: #721045;">button</span> @click=<span style="color: #3548cf;">"changeChartDataElement"</span>&gt;Change Chart Data Element&lt;/<span style="color: #721045;">button</span>&gt;
    &lt;/<span style="color: #721045;">div</span>&gt;

    &lt;<span style="color: #721045;">script</span>&gt;
      "use strict";
      const { createApp, shallowReactive } = Vue;

      // &#21019;&#24314; Vue &#24212;&#29992;
      const app = createApp({
        setup() {
          const charData = shallowReactive({
            labels: ["A", "B", "C"],
            datasets: [10, 20, 30],
          });

          function changeWholeChartData() {
            /* charData = {
             *   labels: ["X", "Y", "Z"],
             *   datasets: [15, 25, 35],
             * }; */

            Object.assign(charData, {
              labels: ["X", "Y", "Z"],
              datasets: [15, 25, 35],
            });
          }

          function changeChartData() {
            charData.datasets = [50, 60, 70];
          }

          function changeChartDataElement() {
            charData.datasets[0] += 10;
            console.log(charData);
          }

          // &#36820;&#22238;&#27169;&#26495;&#20013;&#38656;&#35201;&#20351;&#29992;&#30340;&#25968;&#25454;
          return {
            charData,
            changeWholeChartData,
            changeChartData,
            changeChartDataElement,
          };
        },
      });

      // &#25346;&#36733;&#21040; #app
      app.mount("#app");
    &lt;/<span style="color: #721045;">script</span>&gt;
  &lt;/<span style="color: #721045;">body</span>&gt;
&lt;/<span style="color: #721045;">html</span>&gt;
</pre>
</div></li>
<li>changeChartData能引起触发响应,这是预想到的</li>
<li>changeWholeChartData能触发响应是因为它用了Object.assign,本质上是多次changeChartData</li>
<li>changeCharDataElement不能触发响应,这是因为它已经是第二层了.</li>
</ul></li>
</ul>
</div>
</div>
</div>
<div id="outline-container-orgacb9095" class="outline-3">
<h3 id="orgacb9095"><span class="section-number-3">3.7.</span> toRaw与markRaw函数</h3>
<div class="outline-text-3" id="text-3-7">
</div>
<div id="outline-container-orgecd06d9" class="outline-4">
<h4 id="orgecd06d9"><span class="section-number-4">3.7.1.</span> toRaw</h4>
<div class="outline-text-4" id="text-3-7-1">
<ul class="org-ul">
<li>Vue通过reactive创建响应式对象的时候(ref内部.value其实也是reactive),会通过Proxy对原始对象进行代理,
toRaw函数会跳过Vue的响应式代理机制.直接返回原始对象
<ul class="org-ul">
<li><p>
toRaw通常会使用需要底层非响应式数据的情况下.比如下面的例子toRaw可以获取底层数据,而不是响应式后的数据
</p>
<div class="org-src-container">
<pre class="src src-typescript"><span style="color: #531ab6;">import</span> <span style="color: #000000;">{</span> reactive, toRaw <span style="color: #000000;">}</span> <span style="color: #531ab6;">from</span> <span style="color: #3548cf;">"vue"</span>;

<span style="color: #531ab6;">const</span> <span style="color: #005e8b;">originalData</span> = <span style="color: #000000;">{</span>
  count: 1,
  message: <span style="color: #3548cf;">"Hello World"</span>,
  car: <span style="color: #dd22dd;">{</span> name: <span style="color: #3548cf;">"bmw"</span>, price: 100 <span style="color: #dd22dd;">}</span>,
<span style="color: #000000;">}</span>;

<span style="color: #531ab6;">const</span> <span style="color: #005e8b;">reactiveData</span> = <span style="color: #721045;">reactive</span><span style="color: #000000;">(</span>originalData<span style="color: #000000;">)</span>;

<span style="color: #005f5f;">console</span>.<span style="color: #721045;">log</span><span style="color: #000000;">(</span>
  <span style="color: #3548cf;">`|originalData === reactiveData| =&gt; </span><span style="color: #531ab6;">${</span><span style="color: #000000; background-color: #fbf7f0;">originalData === reactiveData</span><span style="color: #531ab6;">}</span><span style="color: #3548cf;">`</span>,
<span style="color: #000000;">)</span>;
<span style="color: #005f5f;">console</span>.<span style="color: #721045;">log</span><span style="color: #000000;">(</span>
  <span style="color: #3548cf;">`|originalData === toRaw(reactiveData)| =&gt; ${</span>
<span style="color: #3548cf;">    originalData === toRaw(reactiveData)</span>
<span style="color: #3548cf;">  }`</span>,
<span style="color: #000000;">)</span>;

<span style="color: #7f0000;">// </span><span style="color: #7f0000;">&lt;====================OUTPUT====================&gt;</span>
<span style="color: #7f0000;">// </span><span style="color: #7f0000;">|originalData === reactiveData| =&gt; false</span>
<span style="color: #7f0000;">// </span><span style="color: #7f0000;">|originalData === toRaw(reactiveData)| =&gt; </span><span style="color: #005e8b;">true</span>
</pre>
</div></li>
<li>获取真正底层数据(而不是响应式数据)有很多用处,比如一个可以序列化(JSON.stringify)的复杂对象,一旦变
成响应式后,可能就无法成功序列化,还是要获取底层的对象后再进行序列化比较好.</li>
</ul></li>
<li>使用toRaw获取原始对象不会破坏响应机制,响应式对象依然有效.
<ul class="org-ul">
<li><p>
示例如下
</p>
<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #531ab6;">!doctype</span> html&gt;
&lt;<span style="color: #721045;">html</span> <span style="color: #005e8b;">lang</span>=<span style="color: #3548cf;">"en"</span>&gt;
  &lt;<span style="color: #721045;">head</span>&gt;
    &lt;<span style="color: #721045;">meta</span> <span style="color: #005e8b;">charset</span>=<span style="color: #3548cf;">"UTF-8"</span> /&gt;
    &lt;<span style="color: #721045;">meta</span> <span style="color: #005e8b;">name</span>=<span style="color: #3548cf;">"viewport"</span> <span style="color: #005e8b;">content</span>=<span style="color: #3548cf;">"width=device-width, initial-scale=1.0"</span> /&gt;
    &lt;<span style="color: #721045;">script</span> <span style="color: #005e8b;">src</span>=<span style="color: #3548cf;">"https://unpkg.com/vue@3/dist/vue.global.js"</span>&gt;&lt;/<span style="color: #721045;">script</span>&gt;
  &lt;/<span style="color: #721045;">head</span>&gt;
  &lt;<span style="color: #721045;">body</span>&gt;
    &lt;<span style="color: #721045;">div</span> <span style="color: #005e8b;">id</span>=<span style="color: #3548cf;">"app"</span>&gt;
      <span style="color: #7f0000;">&lt;!-- </span><span style="color: #7f0000;">Vue &#27169;&#26495;</span><span style="color: #7f0000;"> --&gt;</span>
      &lt;<span style="color: #721045;">h1</span>&gt;<span style="font-weight: bold; text-decoration: underline;">{{ state }}</span>&lt;/<span style="color: #721045;">h1</span>&gt;
      &lt;<span style="color: #721045;">button</span> @click=<span style="color: #3548cf;">"handleClick"</span>&gt;Handle Click&lt;/<span style="color: #721045;">button</span>&gt;
    &lt;/<span style="color: #721045;">div</span>&gt;

    &lt;<span style="color: #721045;">script</span>&gt;
      "use strict";
      const { createApp, reactive, toRaw } = Vue; // &#20174; Vue &#20013;&#35299;&#26500;&#20986;&#38656;&#35201;&#30340;API

      // &#21019;&#24314; Vue &#24212;&#29992;
      const app = createApp({
        setup() {
          const state = reactive({ count: 1 });
          const raw = toRaw(state);
          function handleClick() {
            state.count += 1;
            console.log(`|state.count| =&gt; ${state.count}`);
            console.log(`|raw.count| =&gt; ${raw.count}`);
          }

          // &#36820;&#22238;&#27169;&#26495;&#20013;&#38656;&#35201;&#20351;&#29992;&#30340;&#25968;&#25454;
          return {
            state,
            handleClick,
          };
        },
      });

      // &#25346;&#36733;&#21040; #app
      app.mount("#app");
    &lt;/<span style="color: #721045;">script</span>&gt;
  &lt;/<span style="color: #721045;">body</span>&gt;
&lt;/<span style="color: #721045;">html</span>&gt;
</pre>
</div></li>
<li>我们可以看到toRaw获取的原始对象和响应式对象一起改变了.</li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-org940614d" class="outline-4">
<h4 id="org940614d"><span class="section-number-4">3.7.2.</span> markRaw</h4>
<div class="outline-text-4" id="text-3-7-2">
<ul class="org-ul">
<li>当Vue创建响应式对象时,它会递归地将对象的每个属性转换为响应式,使用markRaw标记了某个对象后,Vue会跳过该
对象的响应式转换,并直接将其作为普通对象处理
<ul class="org-ul">
<li><p>
被标记为非响应式的对象不会被代理,但它可以嵌套在响应式对象中,示例如下
</p>
<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #531ab6;">!doctype</span> html&gt;
&lt;<span style="color: #721045;">html</span> <span style="color: #005e8b;">lang</span>=<span style="color: #3548cf;">"en"</span>&gt;
  &lt;<span style="color: #721045;">head</span>&gt;
    &lt;<span style="color: #721045;">meta</span> <span style="color: #005e8b;">charset</span>=<span style="color: #3548cf;">"UTF-8"</span> /&gt;
    &lt;<span style="color: #721045;">meta</span> <span style="color: #005e8b;">name</span>=<span style="color: #3548cf;">"viewport"</span> <span style="color: #005e8b;">content</span>=<span style="color: #3548cf;">"width=device-width, initial-scale=1.0"</span> /&gt;
    &lt;<span style="color: #721045;">script</span> <span style="color: #005e8b;">src</span>=<span style="color: #3548cf;">"https://unpkg.com/vue@3/dist/vue.global.js"</span>&gt;&lt;/<span style="color: #721045;">script</span>&gt;
  &lt;/<span style="color: #721045;">head</span>&gt;
  &lt;<span style="color: #721045;">body</span>&gt;
    &lt;<span style="color: #721045;">div</span> <span style="color: #005e8b;">id</span>=<span style="color: #3548cf;">"app"</span>&gt;
      <span style="color: #7f0000;">&lt;!-- </span><span style="color: #7f0000;">Vue &#27169;&#26495;</span><span style="color: #7f0000;"> --&gt;</span>
      &lt;<span style="color: #721045;">h1</span>&gt;<span style="font-weight: bold; text-decoration: underline;">{{ state }}</span>&lt;/<span style="color: #721045;">h1</span>&gt;
      &lt;<span style="color: #721045;">button</span> @click=<span style="color: #3548cf;">"increaseCount"</span>&gt;Increase Count&lt;/<span style="color: #721045;">button</span>&gt;
      &lt;<span style="color: #721045;">button</span> @click=<span style="color: #3548cf;">"changeName"</span>&gt;Change Name&lt;/<span style="color: #721045;">button</span>&gt;
    &lt;/<span style="color: #721045;">div</span>&gt;

    &lt;<span style="color: #721045;">script</span>&gt;
      "use strict";
      const { createApp, reactive, markRaw } = Vue; // &#20174; Vue &#20013;&#35299;&#26500;&#20986;&#38656;&#35201;&#30340;API

      // &#21019;&#24314; Vue &#24212;&#29992;
      const app = createApp({
        setup() {
          const original = { count: 1 };
          const raw = markRaw(original);
          const state = reactive({
            name: "Hello, World",
            sum: raw,
          });
          function increaseCount() {
            state.sum.count += 1;
            console.log(`|state| =&gt; ${state.sum.count}`);
          }
          function changeName() {
            state.name += "~";
          }

          // &#36820;&#22238;&#27169;&#26495;&#20013;&#38656;&#35201;&#20351;&#29992;&#30340;&#25968;&#25454;
          return {
            state,
            increaseCount,
            changeName,
          };
        },
      });

      // &#25346;&#36733;&#21040; #app
      app.mount("#app");
    &lt;/<span style="color: #721045;">script</span>&gt;
  &lt;/<span style="color: #721045;">body</span>&gt;
&lt;/<span style="color: #721045;">html</span>&gt;
</pre>
</div></li>
</ul></li>
</ul>
</div>
</div>
</div>
<div id="outline-container-orgc0670e0" class="outline-3">
<h3 id="orgc0670e0"><span class="section-number-3">3.8.</span> computed函数</h3>
<div class="outline-text-3" id="text-3-8">
<ul class="org-ul">
<li>我们这里讲解的是"Vue3的组合式API中的computed函数",其和第二章将的"选项式API中的computed属性"在功能上
是一样的,但是在语法的使用上是不一样的.</li>
<li>computed()的参数比较复杂分成了你的computed是只读的,还是可写的.返回值也和之前不一样,是一个ref</li>
</ul>
</div>
<div id="outline-container-orge33465b" class="outline-4">
<h4 id="orge33465b"><span class="section-number-4">3.8.1.</span> 只读计算属性</h4>
<div class="outline-text-4" id="text-3-8-1">
<ul class="org-ul">
<li>只读计算属性的输入是一个函数,这个函数的返回值就是计算属性的结果
<ul class="org-ul">
<li><p>
语法如下
</p>
<div class="org-src-container">
<pre class="src src-typescript"><span style="color: #531ab6;">const</span> <span style="color: #005e8b;">computedRef</span> = <span style="color: #721045;">computed</span><span style="color: #000000;">(</span>getterFunction<span style="color: #000000;">)</span>
</pre>
</div></li>
<li><p>
示例如下
</p>
<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #531ab6;">!doctype</span> html&gt;
&lt;<span style="color: #721045;">html</span> <span style="color: #005e8b;">lang</span>=<span style="color: #3548cf;">"en"</span>&gt;
  &lt;<span style="color: #721045;">head</span>&gt;
    &lt;<span style="color: #721045;">meta</span> <span style="color: #005e8b;">charset</span>=<span style="color: #3548cf;">"UTF-8"</span> /&gt;
    &lt;<span style="color: #721045;">meta</span> <span style="color: #005e8b;">name</span>=<span style="color: #3548cf;">"viewport"</span> <span style="color: #005e8b;">content</span>=<span style="color: #3548cf;">"width=device-width, initial-scale=1.0"</span> /&gt;
    &lt;<span style="color: #721045;">script</span> <span style="color: #005e8b;">src</span>=<span style="color: #3548cf;">"https://unpkg.com/vue@3/dist/vue.global.js"</span>&gt;&lt;/<span style="color: #721045;">script</span>&gt;
  &lt;/<span style="color: #721045;">head</span>&gt;
  &lt;<span style="color: #721045;">body</span>&gt;
    &lt;<span style="color: #721045;">div</span> <span style="color: #005e8b;">id</span>=<span style="color: #3548cf;">"app"</span>&gt;
      <span style="color: #7f0000;">&lt;!-- </span><span style="color: #7f0000;">Vue &#27169;&#26495;</span><span style="color: #7f0000;"> --&gt;</span>
      &lt;<span style="color: #721045;">h1</span>&gt;<span style="font-weight: bold; text-decoration: underline;">State: {{ state }}</span>&lt;/<span style="color: #721045;">h1</span>&gt;
      &lt;<span style="color: #721045;">h1</span>&gt;<span style="font-weight: bold; text-decoration: underline;">Computed 2 times count: {{ doubleCount }}</span>&lt;/<span style="color: #721045;">h1</span>&gt;
      &lt;<span style="color: #721045;">button</span> @click=<span style="color: #3548cf;">"handleClick"</span>&gt;Handle Click&lt;/<span style="color: #721045;">button</span>&gt;
    &lt;/<span style="color: #721045;">div</span>&gt;

    &lt;<span style="color: #721045;">script</span>&gt;
      "use strict";
      const { createApp, reactive, computed } = Vue; // &#20174; Vue &#20013;&#35299;&#26500;&#20986;&#38656;&#35201;&#30340;API

      // &#21019;&#24314; Vue &#24212;&#29992;
      const app = createApp({
        setup() {
          const state = reactive({ count: 1 });

          const doubleCount = computed(() =&gt; state.count * 2);

          function handleClick() {
            state.count++;
          }

          // &#36820;&#22238;&#27169;&#26495;&#20013;&#38656;&#35201;&#20351;&#29992;&#30340;&#25968;&#25454;

          return {
            state,
            doubleCount,
            handleClick,
          };
        },
      });

      // &#25346;&#36733;&#21040; #app
      app.mount("#app");
    &lt;/<span style="color: #721045;">script</span>&gt;
  &lt;/<span style="color: #721045;">body</span>&gt;
&lt;/<span style="color: #721045;">html</span>&gt;
</pre>
</div></li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-orgfd86d99" class="outline-4">
<h4 id="orgfd86d99"><span class="section-number-4">3.8.2.</span> 可读写属性</h4>
<div class="outline-text-4" id="text-3-8-2">
<ul class="org-ul">
<li>可读写计算属性的输入是一个对象,包含get和set两个函数
<ul class="org-ul">
<li><p>
语法如下
</p>
<div class="org-src-container">
<pre class="src src-typescript"><span style="color: #531ab6;">const</span> <span style="color: #005e8b;">computedRef</span> = <span style="color: #721045;">computed</span><span style="color: #000000;">(</span><span style="color: #dd22dd;">{</span>
  <span style="color: #000000; background-color: #fbf7f0;">get</span>: getterFunction,
  <span style="color: #000000; background-color: #fbf7f0;">set</span>: setterFunction,
<span style="color: #dd22dd;">}</span><span style="color: #000000;">)</span>;
</pre>
</div></li>
<li><p>
示例如下
</p>
<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #531ab6;">!doctype</span> html&gt;
&lt;<span style="color: #721045;">html</span> <span style="color: #005e8b;">lang</span>=<span style="color: #3548cf;">"en"</span>&gt;
  &lt;<span style="color: #721045;">head</span>&gt;
    &lt;<span style="color: #721045;">meta</span> <span style="color: #005e8b;">charset</span>=<span style="color: #3548cf;">"UTF-8"</span> /&gt;
    &lt;<span style="color: #721045;">meta</span> <span style="color: #005e8b;">name</span>=<span style="color: #3548cf;">"viewport"</span> <span style="color: #005e8b;">content</span>=<span style="color: #3548cf;">"width=device-width, initial-scale=1.0"</span> /&gt;
    &lt;<span style="color: #721045;">script</span> <span style="color: #005e8b;">src</span>=<span style="color: #3548cf;">"https://unpkg.com/vue@3/dist/vue.global.js"</span>&gt;&lt;/<span style="color: #721045;">script</span>&gt;
  &lt;/<span style="color: #721045;">head</span>&gt;
  &lt;<span style="color: #721045;">body</span>&gt;
    &lt;<span style="color: #721045;">div</span> <span style="color: #005e8b;">id</span>=<span style="color: #3548cf;">"app"</span>&gt;
      &lt;<span style="color: #721045;">p</span>&gt;Original Price: {{ state.price }}&lt;/<span style="color: #721045;">p</span>&gt;
      &lt;<span style="color: #721045;">p</span>&gt;Discount: {{ (state.discountRate * 100).toFixed(1) }}% Off&lt;/<span style="color: #721045;">p</span>&gt;
      &lt;<span style="color: #721045;">p</span>&gt;Discounted Price: {{ discountedPrice }}&lt;/<span style="color: #721045;">p</span>&gt;
      &lt;<span style="color: #721045;">button</span> @click=<span style="color: #3548cf;">"minusOne"</span>&gt;Minus one&lt;/<span style="color: #721045;">button</span>&gt;
    &lt;/<span style="color: #721045;">div</span>&gt;

    &lt;<span style="color: #721045;">script</span>&gt;
      "use strict";
      const { createApp, reactive, computed } = Vue; // &#20174; Vue &#20013;&#35299;&#26500;&#20986;&#38656;&#35201;&#30340;API

      // &#21019;&#24314; Vue &#24212;&#29992;
      const app = createApp({
        setup() {
          // &#23450;&#20041;&#19968;&#20010;&#21709;&#24212;&#24335;&#29366;&#24577;
          const state = reactive({
            price: 100, // &#21830;&#21697;&#21407;&#20215;
            discountRate: 0.2, // &#25240;&#25187;&#27604;&#20363;&#65288;20%&#65289;
          });

          // &#23450;&#20041;&#21487;&#35835;&#20889;&#30340;&#35745;&#31639;&#23646;&#24615;
          const discountedPrice = computed({
            // getter: &#29992;&#20110;&#35745;&#31639;&#25240;&#25187;&#20215;&#26684;
            get: () =&gt; {
              return state.price * (1 - state.discountRate);
            },
            // setter: &#24403;&#29992;&#25143;&#35774;&#32622;&#25240;&#25187;&#20215;&#26684;&#26102;&#65292;&#21453;&#21521;&#26356;&#26032;&#25240;&#25187;&#27604;&#20363;
            set: (newDiscountedPrice) =&gt; {
              state.discountRate = 1 - newDiscountedPrice / state.price;
            },
          });

          function minusOne() {
            if (discountedPrice.value - 1 &gt; 0) {
              discountedPrice.value--;
            }
          }

          // &#36820;&#22238;&#27169;&#26495;&#20013;&#38656;&#35201;&#20351;&#29992;&#30340;&#25968;&#25454;
          return {
            state,
            discountedPrice,
            minusOne,
          };
        },
      });

      // &#25346;&#36733;&#21040; #app
      app.mount("#app");
    &lt;/<span style="color: #721045;">script</span>&gt;
  &lt;/<span style="color: #721045;">body</span>&gt;
&lt;/<span style="color: #721045;">html</span>&gt;
</pre>
</div></li>
<li>注意,上例中的minusOne()函数的主要作用就是提供一个newDiscountedPrice给setter函数</li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-org75c775c" class="outline-4">
<h4 id="org75c775c"><span class="section-number-4">3.8.3.</span> 返回值</h4>
<div class="outline-text-4" id="text-3-8-3">
<ul class="org-ul">
<li>computed()函数的返回值是一个Vue的ref对象,它有如下特点:
<ul class="org-ul">
<li>响应式: 当依赖的数据发生变化时,技术属性的值会自动更新</li>
<li>惰性求值: 只有在访问.value时,才会触发计算逻辑</li>
<li>缓存: 如果依赖没有变化,则直接返回缓存值,避免重复计算</li>
</ul></li>
</ul>
</div>
</div>
</div>
<div id="outline-container-org19228ad" class="outline-3">
<h3 id="org19228ad"><span class="section-number-3">3.9.</span> watch函数</h3>
<div class="outline-text-3" id="text-3-9">
<ul class="org-ul">
<li>我们这里讲解的是"Vue3的组合式API中的watch函数",其和第二章将的"选项式API中的watch"在功能上
是一样的,但是在语法的使用上是不一样的.</li>
</ul>
</div>
<div id="outline-container-org38b0cce" class="outline-4">
<h4 id="org38b0cce"><span class="section-number-4">3.9.1.</span> watch语法</h4>
<div class="outline-text-4" id="text-3-9-1">
<ul class="org-ul">
<li>watch的语法非常复杂,无法用一句话说清楚
<ul class="org-ul">
<li><p>
watch语法原型如下
</p>
<div class="org-src-container">
<pre class="src src-typescript"><span style="color: #721045;">watch</span><span style="color: #000000;">(</span>source, callback, <span style="color: #dd22dd;">[</span>options<span style="color: #dd22dd;">]</span><span style="color: #000000;">)</span>
</pre>
</div></li>
</ul></li>
<li>watch的第一个参数source就非常的复杂,可以有如下四种情况:
<ul class="org-ul">
<li>可以是上一个响应式数据(如ref或者reactive对象, 其中reactive对象默认深度监听)</li>
<li>可以是一个gettr函数,用户返回需要监听的值</li>
<li>可以是一个数组,监听多个数据</li>
</ul></li>
<li>watch的第二个参数callback是一个在变化的时候执行的回调函数,这个callback函数也有两个参数:
<ul class="org-ul">
<li>newValue:变化后的值,更常用</li>
<li>oldValue:变化前的值,不常用</li>
</ul></li>
<li>watch的第三个参数,是一个可选的参数对象,这个参数对象可以选择如下两个配置:
<ul class="org-ul">
<li>immediate: 是否在初始化的时候立刻执行回调(默认为false)</li>
<li>deep: 是否进行深度监听(默认为false)</li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-org3860b71" class="outline-4">
<h4 id="org3860b71"><span class="section-number-4">3.9.2.</span> watch使用举例</h4>
<div class="outline-text-4" id="text-3-9-2">
<ul class="org-ul">
<li>最常见的就是监听单个响应式数据
<ul class="org-ul">
<li><p>
示例如下
</p>
<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #531ab6;">!doctype</span> html&gt;
&lt;<span style="color: #721045;">html</span> <span style="color: #005e8b;">lang</span>=<span style="color: #3548cf;">"en"</span>&gt;
  &lt;<span style="color: #721045;">head</span>&gt;
    &lt;<span style="color: #721045;">meta</span> <span style="color: #005e8b;">charset</span>=<span style="color: #3548cf;">"UTF-8"</span> /&gt;
    &lt;<span style="color: #721045;">meta</span> <span style="color: #005e8b;">name</span>=<span style="color: #3548cf;">"viewport"</span> <span style="color: #005e8b;">content</span>=<span style="color: #3548cf;">"width=device-width, initial-scale=1.0"</span> /&gt;
    &lt;<span style="color: #721045;">script</span> <span style="color: #005e8b;">src</span>=<span style="color: #3548cf;">"https://unpkg.com/vue@3/dist/vue.global.js"</span>&gt;&lt;/<span style="color: #721045;">script</span>&gt;
  &lt;/<span style="color: #721045;">head</span>&gt;
  &lt;<span style="color: #721045;">body</span>&gt;
    &lt;<span style="color: #721045;">div</span> <span style="color: #005e8b;">id</span>=<span style="color: #3548cf;">"app"</span>&gt;
      <span style="color: #7f0000;">&lt;!-- </span><span style="color: #7f0000;">Vue &#27169;&#26495;</span><span style="color: #7f0000;"> --&gt;</span>
      &lt;<span style="color: #721045;">h1</span>&gt;<span style="font-weight: bold; text-decoration: underline;">{{ count }}</span>&lt;/<span style="color: #721045;">h1</span>&gt;
      &lt;<span style="color: #721045;">button</span> @click=<span style="color: #3548cf;">"increaseCount"</span>&gt;Increase Count&lt;/<span style="color: #721045;">button</span>&gt;
    &lt;/<span style="color: #721045;">div</span>&gt;

    &lt;<span style="color: #721045;">script</span>&gt;
      "use strict";
      const { createApp, ref, watch } = Vue; // &#20174; Vue &#20013;&#35299;&#26500;&#20986;&#38656;&#35201;&#30340;API

      // &#21019;&#24314; Vue &#24212;&#29992;
      const app = createApp({
        setup() {
          const count = ref(0);
          function increaseCount() {
            count.value += 1;
          }
          watch(count, (newValue, oldValue) =&gt; {
            console.log(`|newValue| =&gt; ${newValue}`);
            console.log(`|oldValue| =&gt; ${oldValue}`);
          });

          // &#36820;&#22238;&#27169;&#26495;&#20013;&#38656;&#35201;&#20351;&#29992;&#30340;&#25968;&#25454;
          return {
            count,
            increaseCount,
          };
        },
      });

      // &#25346;&#36733;&#21040; #app
      app.mount("#app");
    &lt;/<span style="color: #721045;">script</span>&gt;
  &lt;/<span style="color: #721045;">body</span>&gt;
&lt;/<span style="color: #721045;">html</span>&gt;
</pre>
</div></li>
<li><p>
注意: ref默认是无法进行深度监听的
</p>
<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #531ab6;">!doctype</span> html&gt;
&lt;<span style="color: #721045;">html</span> <span style="color: #005e8b;">lang</span>=<span style="color: #3548cf;">"en"</span>&gt;
  &lt;<span style="color: #721045;">head</span>&gt;
    &lt;<span style="color: #721045;">meta</span> <span style="color: #005e8b;">charset</span>=<span style="color: #3548cf;">"UTF-8"</span> /&gt;
    &lt;<span style="color: #721045;">meta</span> <span style="color: #005e8b;">name</span>=<span style="color: #3548cf;">"viewport"</span> <span style="color: #005e8b;">content</span>=<span style="color: #3548cf;">"width=device-width, initial-scale=1.0"</span> /&gt;
    &lt;<span style="color: #721045;">script</span> <span style="color: #005e8b;">src</span>=<span style="color: #3548cf;">"https://unpkg.com/vue@3/dist/vue.global.js"</span>&gt;&lt;/<span style="color: #721045;">script</span>&gt;
  &lt;/<span style="color: #721045;">head</span>&gt;
  &lt;<span style="color: #721045;">body</span>&gt;
    &lt;<span style="color: #721045;">div</span> <span style="color: #005e8b;">id</span>=<span style="color: #3548cf;">"app"</span>&gt;
      <span style="color: #7f0000;">&lt;!-- </span><span style="color: #7f0000;">Vue &#27169;&#26495;</span><span style="color: #7f0000;"> --&gt;</span>
      &lt;<span style="color: #721045;">h1</span>&gt;<span style="font-weight: bold; text-decoration: underline;">{{ state }}</span>&lt;/<span style="color: #721045;">h1</span>&gt;
      &lt;<span style="color: #721045;">button</span> @click=<span style="color: #3548cf;">"increaseCount"</span>&gt;Increase Count&lt;/<span style="color: #721045;">button</span>&gt;
    &lt;/<span style="color: #721045;">div</span>&gt;

    &lt;<span style="color: #721045;">script</span>&gt;
      "use strict";
      const { createApp, ref, watch } = Vue; // &#20174; Vue &#20013;&#35299;&#26500;&#20986;&#38656;&#35201;&#30340;API

      // &#21019;&#24314; Vue &#24212;&#29992;
      const app = createApp({
        setup() {
          const state = ref({ count: 0 });
          function increaseCount() {
            state.value.count += 1;
          }
          watch(state, (newValue, oldValue) =&gt; {
            console.log(`|newValue| =&gt; ${newValue}`);
            console.log(`|oldValue| =&gt; ${oldValue}`);
          });

          // &#36820;&#22238;&#27169;&#26495;&#20013;&#38656;&#35201;&#20351;&#29992;&#30340;&#25968;&#25454;
          return {
            state,
            increaseCount,
          };
        },
      });

      // &#25346;&#36733;&#21040; #app
      app.mount("#app");
    &lt;/<span style="color: #721045;">script</span>&gt;
  &lt;/<span style="color: #721045;">body</span>&gt;
&lt;/<span style="color: #721045;">html</span>&gt;
</pre>
</div></li>
<li><p>
想要能够深度检查,必须加上deep: true
</p>
<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #531ab6;">!doctype</span> html&gt;
&lt;<span style="color: #721045;">html</span> <span style="color: #005e8b;">lang</span>=<span style="color: #3548cf;">"en"</span>&gt;
  &lt;<span style="color: #721045;">head</span>&gt;
    &lt;<span style="color: #721045;">meta</span> <span style="color: #005e8b;">charset</span>=<span style="color: #3548cf;">"UTF-8"</span> /&gt;
    &lt;<span style="color: #721045;">meta</span> <span style="color: #005e8b;">name</span>=<span style="color: #3548cf;">"viewport"</span> <span style="color: #005e8b;">content</span>=<span style="color: #3548cf;">"width=device-width, initial-scale=1.0"</span> /&gt;
    &lt;<span style="color: #721045;">script</span> <span style="color: #005e8b;">src</span>=<span style="color: #3548cf;">"https://unpkg.com/vue@3/dist/vue.global.js"</span>&gt;&lt;/<span style="color: #721045;">script</span>&gt;
  &lt;/<span style="color: #721045;">head</span>&gt;
  &lt;<span style="color: #721045;">body</span>&gt;
    &lt;<span style="color: #721045;">div</span> <span style="color: #005e8b;">id</span>=<span style="color: #3548cf;">"app"</span>&gt;
      <span style="color: #7f0000;">&lt;!-- </span><span style="color: #7f0000;">Vue &#27169;&#26495;</span><span style="color: #7f0000;"> --&gt;</span>
      &lt;<span style="color: #721045;">h1</span>&gt;<span style="font-weight: bold; text-decoration: underline;">{{ state }}</span>&lt;/<span style="color: #721045;">h1</span>&gt;
      &lt;<span style="color: #721045;">button</span> @click=<span style="color: #3548cf;">"increaseCount"</span>&gt;Increase Count&lt;/<span style="color: #721045;">button</span>&gt;
    &lt;/<span style="color: #721045;">div</span>&gt;

    &lt;<span style="color: #721045;">script</span>&gt;
      "use strict";
      const { createApp, ref, watch } = Vue; // &#20174; Vue &#20013;&#35299;&#26500;&#20986;&#38656;&#35201;&#30340;API

      // &#21019;&#24314; Vue &#24212;&#29992;
      const app = createApp({
        setup() {
          const state = ref({ count: 0 });
          function increaseCount() {
            state.value.count += 1;
          }
          watch(
            state,
            (newValue, oldValue) =&gt; {
              console.log(newValue, oldValue);
            },
            { deep: true },
          );

          // &#36820;&#22238;&#27169;&#26495;&#20013;&#38656;&#35201;&#20351;&#29992;&#30340;&#25968;&#25454;
          return {
            state,
            increaseCount,
          };
        },
      });

      // &#25346;&#36733;&#21040; #app
      app.mount("#app");
    &lt;/<span style="color: #721045;">script</span>&gt;
  &lt;/<span style="color: #721045;">body</span>&gt;
&lt;/<span style="color: #721045;">html</span>&gt;
</pre>
</div></li>
<li><p>
reactive对象就是默认就是deep: true的,示例如下
</p>
<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #531ab6;">!doctype</span> html&gt;
&lt;<span style="color: #721045;">html</span> <span style="color: #005e8b;">lang</span>=<span style="color: #3548cf;">"en"</span>&gt;
  &lt;<span style="color: #721045;">head</span>&gt;
    &lt;<span style="color: #721045;">meta</span> <span style="color: #005e8b;">charset</span>=<span style="color: #3548cf;">"UTF-8"</span> /&gt;
    &lt;<span style="color: #721045;">meta</span> <span style="color: #005e8b;">name</span>=<span style="color: #3548cf;">"viewport"</span> <span style="color: #005e8b;">content</span>=<span style="color: #3548cf;">"width=device-width, initial-scale=1.0"</span> /&gt;
    &lt;<span style="color: #721045;">script</span> <span style="color: #005e8b;">src</span>=<span style="color: #3548cf;">"https://unpkg.com/vue@3/dist/vue.global.js"</span>&gt;&lt;/<span style="color: #721045;">script</span>&gt;
  &lt;/<span style="color: #721045;">head</span>&gt;
  &lt;<span style="color: #721045;">body</span>&gt;
    &lt;<span style="color: #721045;">div</span> <span style="color: #005e8b;">id</span>=<span style="color: #3548cf;">"app"</span>&gt;
      <span style="color: #7f0000;">&lt;!-- </span><span style="color: #7f0000;">Vue &#27169;&#26495;</span><span style="color: #7f0000;"> --&gt;</span>
      &lt;<span style="color: #721045;">h1</span>&gt;<span style="font-weight: bold; text-decoration: underline;">{{ state }}</span>&lt;/<span style="color: #721045;">h1</span>&gt;
      &lt;<span style="color: #721045;">button</span> @click=<span style="color: #3548cf;">"increaseCount"</span>&gt;Increase Count&lt;/<span style="color: #721045;">button</span>&gt;
    &lt;/<span style="color: #721045;">div</span>&gt;

    &lt;<span style="color: #721045;">script</span>&gt;
      "use strict";
      const { createApp, reactive, watch } = Vue; // &#20174; Vue &#20013;&#35299;&#26500;&#20986;&#38656;&#35201;&#30340;API

      // &#21019;&#24314; Vue &#24212;&#29992;
      const app = createApp({
        setup() {
          const state = reactive({ count: 0 });
          function increaseCount() {
            state.count += 1;
          }
          watch(state, (newValue, oldValue) =&gt; {
            console.log(newValue, oldValue);
          });

          // &#36820;&#22238;&#27169;&#26495;&#20013;&#38656;&#35201;&#20351;&#29992;&#30340;&#25968;&#25454;
          return {
            state,
            increaseCount,
          };
        },
      });

      // &#25346;&#36733;&#21040; #app
      app.mount("#app");
    &lt;/<span style="color: #721045;">script</span>&gt;
  &lt;/<span style="color: #721045;">body</span>&gt;
&lt;/<span style="color: #721045;">html</span>&gt;
</pre>
</div></li>
</ul></li>
<li>可以用数组来监听多个响应式数据
<ul class="org-ul">
<li><p>
示例如下
</p>
<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #531ab6;">!doctype</span> html&gt;
&lt;<span style="color: #721045;">html</span> <span style="color: #005e8b;">lang</span>=<span style="color: #3548cf;">"en"</span>&gt;
  &lt;<span style="color: #721045;">head</span>&gt;
    &lt;<span style="color: #721045;">meta</span> <span style="color: #005e8b;">charset</span>=<span style="color: #3548cf;">"UTF-8"</span> /&gt;
    &lt;<span style="color: #721045;">meta</span> <span style="color: #005e8b;">name</span>=<span style="color: #3548cf;">"viewport"</span> <span style="color: #005e8b;">content</span>=<span style="color: #3548cf;">"width=device-width, initial-scale=1.0"</span> /&gt;
    &lt;<span style="color: #721045;">script</span> <span style="color: #005e8b;">src</span>=<span style="color: #3548cf;">"https://unpkg.com/vue@3/dist/vue.global.js"</span>&gt;&lt;/<span style="color: #721045;">script</span>&gt;
  &lt;/<span style="color: #721045;">head</span>&gt;
  &lt;<span style="color: #721045;">body</span>&gt;
    &lt;<span style="color: #721045;">div</span> <span style="color: #005e8b;">id</span>=<span style="color: #3548cf;">"app"</span>&gt;
      <span style="color: #7f0000;">&lt;!-- </span><span style="color: #7f0000;">Vue &#27169;&#26495;</span><span style="color: #7f0000;"> --&gt;</span>
      &lt;<span style="color: #721045;">h1</span>&gt;<span style="font-weight: bold; text-decoration: underline;">{{ price }}</span>&lt;/<span style="color: #721045;">h1</span>&gt;
      &lt;<span style="color: #721045;">h1</span>&gt;<span style="font-weight: bold; text-decoration: underline;">{{ quantity }}</span>&lt;/<span style="color: #721045;">h1</span>&gt;
      &lt;<span style="color: #721045;">button</span> @click=<span style="color: #3548cf;">"increasePrice"</span>&gt;Increase Price&lt;/<span style="color: #721045;">button</span>&gt;
      &lt;<span style="color: #721045;">button</span> @click=<span style="color: #3548cf;">"increaseQuantity"</span>&gt;Increase Quantity&lt;/<span style="color: #721045;">button</span>&gt;
    &lt;/<span style="color: #721045;">div</span>&gt;

    &lt;<span style="color: #721045;">script</span>&gt;
      "use strict";
      const { createApp, ref, watch } = Vue; // &#20174; Vue &#20013;&#35299;&#26500;&#20986;&#38656;&#35201;&#30340;API

      // &#21019;&#24314; Vue &#24212;&#29992;
      const app = createApp({
        setup() {
          const price = ref(1);
          const quantity = ref(2);
          function increasePrice() {
            price.value += 1;
          }
          function increaseQuantity() {
            quantity.value += 1;
          }
          watch(price, (newValue, oldValue) =&gt; {
            console.log(`|newValue| =&gt; ${newValue}`);
            console.log(`|oldValue| =&gt; ${oldValue}`);
          });

          // &#36820;&#22238;&#27169;&#26495;&#20013;&#38656;&#35201;&#20351;&#29992;&#30340;&#25968;&#25454;
          return {
            price,
            quantity,
            increasePrice,
            increaseQuantity,
          };
        },
      });

      // &#25346;&#36733;&#21040; #app
      app.mount("#app");
    &lt;/<span style="color: #721045;">script</span>&gt;
  &lt;/<span style="color: #721045;">body</span>&gt;
&lt;/<span style="color: #721045;">html</span>&gt;
</pre>
</div></li>
</ul></li>
<li>使用getter函数来监听
<ul class="org-ul">
<li><p>
示例如下,下例中由于getter函数只关注了state.count,所以state.message的更改不会被watch到
</p>
<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #531ab6;">!doctype</span> html&gt;
&lt;<span style="color: #721045;">html</span> <span style="color: #005e8b;">lang</span>=<span style="color: #3548cf;">"en"</span>&gt;
  &lt;<span style="color: #721045;">head</span>&gt;
    &lt;<span style="color: #721045;">meta</span> <span style="color: #005e8b;">charset</span>=<span style="color: #3548cf;">"UTF-8"</span> /&gt;
    &lt;<span style="color: #721045;">meta</span> <span style="color: #005e8b;">name</span>=<span style="color: #3548cf;">"viewport"</span> <span style="color: #005e8b;">content</span>=<span style="color: #3548cf;">"width=device-width, initial-scale=1.0"</span> /&gt;
    &lt;<span style="color: #721045;">script</span> <span style="color: #005e8b;">src</span>=<span style="color: #3548cf;">"https://unpkg.com/vue@3/dist/vue.global.js"</span>&gt;&lt;/<span style="color: #721045;">script</span>&gt;
  &lt;/<span style="color: #721045;">head</span>&gt;
  &lt;<span style="color: #721045;">body</span>&gt;
    &lt;<span style="color: #721045;">div</span> <span style="color: #005e8b;">id</span>=<span style="color: #3548cf;">"app"</span>&gt;
      <span style="color: #7f0000;">&lt;!-- </span><span style="color: #7f0000;">Vue &#27169;&#26495;</span><span style="color: #7f0000;"> --&gt;</span>
      &lt;<span style="color: #721045;">h1</span>&gt;<span style="font-weight: bold; text-decoration: underline;">{{ state }}</span>&lt;/<span style="color: #721045;">h1</span>&gt;
      &lt;<span style="color: #721045;">button</span> @click=<span style="color: #3548cf;">"increaseCount"</span>&gt;Increase Count&lt;/<span style="color: #721045;">button</span>&gt;
      &lt;<span style="color: #721045;">button</span> @click=<span style="color: #3548cf;">"changeMessage"</span>&gt;Change Message&lt;/<span style="color: #721045;">button</span>&gt;
    &lt;/<span style="color: #721045;">div</span>&gt;

    &lt;<span style="color: #721045;">script</span>&gt;
      "use strict";
      const { createApp, reactive, watch } = Vue; // &#20174; Vue &#20013;&#35299;&#26500;&#20986;&#38656;&#35201;&#30340;API

      // &#21019;&#24314; Vue &#24212;&#29992;
      const app = createApp({
        setup() {
          const state = reactive({ count: 0, message: "hello" });
          function increaseCount() {
            state.count += 1;
          }
          function changeMessage() {
            state.message += "~";
          }
          watch(
            () =&gt; state.count,
            (newValue, oldValue) =&gt; {
              console.log(newValue, oldValue);
            },
          );

          // &#36820;&#22238;&#27169;&#26495;&#20013;&#38656;&#35201;&#20351;&#29992;&#30340;&#25968;&#25454;
          return {
            state,
            increaseCount,
            changeMessage,
          };
        },
      });

      // &#25346;&#36733;&#21040; #app
      app.mount("#app");
    &lt;/<span style="color: #721045;">script</span>&gt;
  &lt;/<span style="color: #721045;">body</span>&gt;
&lt;/<span style="color: #721045;">html</span>&gt;
</pre>
</div></li>
</ul></li>
</ul>
</div>
</div>
</div>
<div id="outline-container-orgc65396d" class="outline-3">
<h3 id="orgc65396d"><span class="section-number-3">3.10.</span> 生命周期钩子函数</h3>
<div class="outline-text-3" id="text-3-10">
<ul class="org-ul">
<li>组合式API的声明周期和选项式API的生命周期不太一样,主要区别在于:
<ol class="org-ol">
<li>选项式API中的的beforeCreate()和created()这两个函数被setup()替代了</li>
<li>调用的位置不一样:
<ul class="org-ul">
<li><p>
选项式生命周期函数都是在createApp的最顶层调用的,如下
</p>
<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #531ab6;">!doctype</span> html&gt;

&lt;<span style="color: #721045;">html</span> <span style="color: #005e8b;">lang</span>=<span style="color: #3548cf;">"en"</span>&gt;
  &lt;<span style="color: #721045;">head</span>&gt;
    &lt;<span style="color: #721045;">meta</span> <span style="color: #005e8b;">charset</span>=<span style="color: #3548cf;">"UTF-8"</span> /&gt;
    &lt;<span style="color: #721045;">meta</span> <span style="color: #005e8b;">name</span>=<span style="color: #3548cf;">"viewport"</span> <span style="color: #005e8b;">content</span>=<span style="color: #3548cf;">"width=device-width, initial-scale=1.0"</span> /&gt;
    &lt;<span style="color: #721045;">title</span>&gt;<span style="font-weight: bold; text-decoration: underline;">v-for</span>&lt;/<span style="color: #721045;">title</span>&gt;
    &lt;<span style="color: #721045;">script</span> <span style="color: #005e8b;">src</span>=<span style="color: #3548cf;">"https://unpkg.com/vue@3/dist/vue.global.js"</span>&gt;&lt;/<span style="color: #721045;">script</span>&gt;
  &lt;/<span style="color: #721045;">head</span>&gt;
  &lt;<span style="color: #721045;">body</span>&gt;
    &lt;<span style="color: #721045;">div</span> <span style="color: #005e8b;">id</span>=<span style="color: #3548cf;">"app"</span>&gt;
      &lt;<span style="color: #721045;">h3</span>&gt;<span style="font-style: italic; text-decoration: underline;">{{ title }}</span>&lt;/<span style="color: #721045;">h3</span>&gt;
      &lt;<span style="color: #721045;">button</span> @click=<span style="color: #3548cf;">"updateTitle"</span>&gt;Update Title&lt;/<span style="color: #721045;">button</span>&gt;
    &lt;/<span style="color: #721045;">div</span>&gt;
    &lt;<span style="color: #721045;">script</span>&gt;
      const { createApp } = Vue;

      // &#21019;&#24314; Vue &#24212;&#29992;
      const app = createApp({
        data() {
          return {
            title: "Hello World!",
          };
        },
        methods: {
          updateTitle() {
            this.title = "Title Updated!";
          },
        },
        beforeCreate() {
          console.log("beforeCreate: &#23454;&#20363;&#21021;&#22987;&#21270;&#21069;");
        },
        created() {
          console.log("created: &#23454;&#20363;&#24050;&#21019;&#24314;");
        },
        beforeMount() {
          console.log("beforeMount: &#25346;&#36733;&#21069;");
        },
        mounted() {
          console.log("mounted: &#25346;&#36733;&#23436;&#25104;");
        },
        beforeUpdate() {
          console.log("beforeUpdate: &#25968;&#25454;&#26356;&#26032;&#21069;");
        },
        updated() {
          console.log("updated: &#25968;&#25454;&#26356;&#26032;&#21518;");
        },
        beforeUnmount() {
          console.log("beforeUnmount: &#38144;&#27585;&#21069;");
        },
        unmounted() {
          console.log("unmounted: &#23454;&#20363;&#24050;&#38144;&#27585;");
        },
      });
      // &#25346;&#36733;&#21040; #app
      app.mount("#app");
    &lt;/<span style="color: #721045;">script</span>&gt;
  &lt;/<span style="color: #721045;">body</span>&gt;
&lt;/<span style="color: #721045;">html</span>&gt;
</pre>
</div></li>
<li><p>
组合式API的生命周期函数在setup()函数内部调用,如下
</p>
<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #531ab6;">!doctype</span> html&gt;
&lt;<span style="color: #721045;">html</span> <span style="color: #005e8b;">lang</span>=<span style="color: #3548cf;">"en"</span>&gt;
  &lt;<span style="color: #721045;">head</span>&gt;
    &lt;<span style="color: #721045;">meta</span> <span style="color: #005e8b;">charset</span>=<span style="color: #3548cf;">"UTF-8"</span> /&gt;
    &lt;<span style="color: #721045;">meta</span> <span style="color: #005e8b;">name</span>=<span style="color: #3548cf;">"viewport"</span> <span style="color: #005e8b;">content</span>=<span style="color: #3548cf;">"width=device-width, initial-scale=1.0"</span> /&gt;
    &lt;<span style="color: #721045;">script</span> <span style="color: #005e8b;">src</span>=<span style="color: #3548cf;">"https://unpkg.com/vue@3/dist/vue.global.js"</span>&gt;&lt;/<span style="color: #721045;">script</span>&gt;
  &lt;/<span style="color: #721045;">head</span>&gt;
  &lt;<span style="color: #721045;">body</span>&gt;
    &lt;<span style="color: #721045;">div</span> <span style="color: #005e8b;">id</span>=<span style="color: #3548cf;">"app"</span>&gt;
      &lt;<span style="color: #721045;">h3</span>&gt;<span style="font-style: italic; text-decoration: underline;">{{ title }}</span>&lt;/<span style="color: #721045;">h3</span>&gt;
      &lt;<span style="color: #721045;">button</span> @click=<span style="color: #3548cf;">"updateTitle"</span>&gt;Update Title&lt;/<span style="color: #721045;">button</span>&gt;
    &lt;/<span style="color: #721045;">div</span>&gt;

    &lt;<span style="color: #721045;">script</span>&gt;
      "use strict";

      const {
        createApp,
        ref,
        onBeforeMount,
        onMounted,
        onBeforeUpdate,
        onUpdated,
        onBeforeUnmount,
        onUnmounted,
      } = Vue;

      // &#21019;&#24314; Vue &#24212;&#29992;
      const app = createApp({
        setup() {
          const title = ref("Hello World!");

          const updateTitle = () =&gt; {
            title.value = "Title Updated!";
          };

          // &#29983;&#21629;&#21608;&#26399;&#38057;&#23376;
          console.log("beforeCreate: &#23454;&#20363;&#21021;&#22987;&#21270;&#21069;");
          onBeforeMount(() =&gt; {
            console.log("beforeMount: &#25346;&#36733;&#21069;");
          });
          onMounted(() =&gt; {
            console.log("mounted: &#25346;&#36733;&#23436;&#25104;");
          });
          onBeforeUpdate(() =&gt; {
            console.log("beforeUpdate: &#25968;&#25454;&#26356;&#26032;&#21069;");
          });
          onUpdated(() =&gt; {
            console.log("updated: &#25968;&#25454;&#26356;&#26032;&#21518;");
          });
          onBeforeUnmount(() =&gt; {
            console.log("beforeUnmount: &#38144;&#27585;&#21069;");
          });
          onUnmounted(() =&gt; {
            console.log("unmounted: &#23454;&#20363;&#24050;&#38144;&#27585;");
          });

          return {
            title,
            updateTitle,
          };
        },
      });

      // &#25346;&#36733;&#21040; #app
      app.mount("#app");
    &lt;/<span style="color: #721045;">script</span>&gt;
  &lt;/<span style="color: #721045;">body</span>&gt;
&lt;/<span style="color: #721045;">html</span>&gt;
</pre>
</div></li>
</ul></li>
</ol></li>
</ul>
</div>
</div>
</div>
<div id="outline-container-org887f42c" class="outline-2">
<h2 id="org887f42c"><span class="section-number-2">4.</span> Chapter 04: 组件详情</h2>
<div class="outline-text-2" id="text-4">
</div>
<div id="outline-container-orgdf9a9f1" class="outline-3">
<h3 id="orgdf9a9f1"><span class="section-number-3">4.1.</span> 脚手架项目的分析</h3>
<div class="outline-text-3" id="text-4-1">
<ul class="org-ul">
<li>早期Vue的创建方法是使用@vue/cli命令行创建,当前这种方法已经被放弃了.</li>
<li>当前推荐使用vite来创建vue项目
<ul class="org-ul">
<li><p>
具体步骤如下,假设我们创建一个vue3-demo的项目
</p>
<div class="org-src-container">
<pre class="src src-shell">$ npm init vue@latest vue3-demo

&gt; npx
&gt; create-vue vue3-demo

&#9484;  Vue.js - The Progressive JavaScript Framework
&#9474;
&#9671;  Select features to include<span style="color: #531ab6;"> in</span> your project: <span style="color: #000000;">(</span>&#8593;/&#8595; to navigate, space to select, a to toggle all, enter to confirm<span style="color: #000000;">)</span>
&#9474;  TypeScript, ESLint <span style="color: #000000;">(</span>error prevention<span style="color: #000000;">)</span>, Prettier <span style="color: #000000;">(</span>code formatting<span style="color: #000000;">)</span>
&#9474;
&#9671;  Install Oxlint for faster linting? <span style="color: #000000;">(</span>experimental<span style="color: #000000;">)</span>
&#9474;  No

Scaffolding project<span style="color: #531ab6;"> in</span> /Users/fenghaoran/code/vue3-demo...
&#9474;
&#9492;  Done. Now run:

   <span style="color: #8f0075;">cd</span> vue3-demo
   npm install
   npm run format
   npm run dev

| Optional: Initialize Git<span style="color: #531ab6;"> in</span> your project directory with:

   git init &amp;&amp; git add -A &amp;&amp; git commit -m <span style="color: #3548cf;">"initial commit"</span>
</pre>
</div></li>
<li><p>
创建之后的文件夹列表如下
</p>
<div class="org-src-container">
<pre class="src src-shell">$ tree vue3-demo/
vue3-demo/
&#9500;&#9472;&#9472; README.md
&#9500;&#9472;&#9472; env.d.ts
&#9500;&#9472;&#9472; eslint.config.ts
&#9500;&#9472;&#9472; index.html
&#9500;&#9472;&#9472; package.json
&#9500;&#9472;&#9472; public
&#9474;&#160;&#160; &#9492;&#9472;&#9472; favicon.ico
&#9500;&#9472;&#9472; src
&#9474;&#160;&#160; &#9500;&#9472;&#9472; App.vue
&#9474;&#160;&#160; &#9500;&#9472;&#9472; assets
&#9474;&#160;&#160; &#9474;&#160;&#160; &#9500;&#9472;&#9472; base.css
&#9474;&#160;&#160; &#9474;&#160;&#160; &#9500;&#9472;&#9472; logo.svg
&#9474;&#160;&#160; &#9474;&#160;&#160; &#9492;&#9472;&#9472; main.css
&#9474;&#160;&#160; &#9500;&#9472;&#9472; components
&#9474;&#160;&#160; &#9474;&#160;&#160; &#9500;&#9472;&#9472; HelloWorld.vue
&#9474;&#160;&#160; &#9474;&#160;&#160; &#9500;&#9472;&#9472; TheWelcome.vue
&#9474;&#160;&#160; &#9474;&#160;&#160; &#9500;&#9472;&#9472; WelcomeItem.vue
&#9474;&#160;&#160; &#9474;&#160;&#160; &#9492;&#9472;&#9472; icons
&#9474;&#160;&#160; &#9474;&#160;&#160;     &#9500;&#9472;&#9472; IconCommunity.vue
&#9474;&#160;&#160; &#9474;&#160;&#160;     &#9500;&#9472;&#9472; IconDocumentation.vue
&#9474;&#160;&#160; &#9474;&#160;&#160;     &#9500;&#9472;&#9472; IconEcosystem.vue
&#9474;&#160;&#160; &#9474;&#160;&#160;     &#9500;&#9472;&#9472; IconSupport.vue
&#9474;&#160;&#160; &#9474;&#160;&#160;     &#9492;&#9472;&#9472; IconTooling.vue
&#9474;&#160;&#160; &#9492;&#9472;&#9472; main.ts
&#9500;&#9472;&#9472; tsconfig.app.json
&#9500;&#9472;&#9472; tsconfig.json
&#9500;&#9472;&#9472; tsconfig.node.json
&#9492;&#9472;&#9472; vite.config.ts
6 directories, 23 files
</pre>
</div></li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-org0fd0421" class="outline-3">
<h3 id="org0fd0421"><span class="section-number-3">4.2.</span> ESLint与Prettier</h3>
<div class="outline-text-3" id="text-4-2">
<ul class="org-ul">
<li>ESLint和Prettier是经常容易混淆的两个工具,两者虽然有一些功能重合(格式化代码的功能),但是通常情况下是互补的:
<ul class="org-ul">
<li>ESLint是一个代码质量检查工具,其主要目的是通过定义规则来发现和修复签字的代码错误,或者不良的编程习
惯. 我们可以把ESLint理解为一个老师,会帮你指出你写代码的逻辑问题(比如,"你这里有个错误的变量")</li>
<li>Prettier是一个代码格式化工具,其主要目的是通过统一的规则自动化格式代码,使得代码的风格一致,而不关注
代码的逻辑正确性.我们可以把Prettier理解为一位排版师,会帮助你整理代码的外观(比如,"这里应该多一个空格")</li>
</ul></li>
<li>当前ESLint的配置已经高度的模块化,Vue自己为ESLint创建了一个config配置文件,所以我们的vue3-demo里面的
配置文件主要从这个config配置文件里面引入
<ul class="org-ul">
<li><p>
默认的eslint.config.ts内容如下
</p>
<div class="org-src-container">
<pre class="src src-typescript"><span style="color: #531ab6;">import</span> <span style="color: #000000;">{</span> globalIgnores <span style="color: #000000;">}</span> <span style="color: #531ab6;">from</span> <span style="color: #3548cf;">'eslint/config'</span>
<span style="color: #531ab6;">import</span> <span style="color: #000000;">{</span> defineConfigWithVueTs, vueTsConfigs <span style="color: #000000;">}</span> <span style="color: #531ab6;">from</span> <span style="color: #3548cf;">'@vue/eslint-config-typescript'</span>
<span style="color: #531ab6;">import</span> pluginVue <span style="color: #531ab6;">from</span> <span style="color: #3548cf;">'eslint-plugin-vue'</span>
<span style="color: #531ab6;">import</span> skipFormatting <span style="color: #531ab6;">from</span> <span style="color: #3548cf;">'@vue/eslint-config-prettier/skip-formatting'</span>

<span style="color: #7f0000;">// </span><span style="color: #7f0000;">To allow more languages other than `ts` in `.vue` files, uncomment the following lines:</span>
<span style="color: #7f0000;">// </span><span style="color: #7f0000;">import { configureVueProject } from '@vue/eslint-config-typescript'</span>
<span style="color: #7f0000;">// </span><span style="color: #7f0000;">configureVueProject({ scriptLangs: ['ts', 'tsx'] })</span>
<span style="color: #7f0000;">// </span><span style="color: #7f0000;">More info at https://github.com/vuejs/eslint-config-typescript/#advanced-setup</span>

<span style="color: #531ab6;">export</span> <span style="color: #531ab6;">default</span> <span style="color: #721045;">defineConfigWithVueTs</span><span style="color: #000000;">(</span>
  <span style="color: #dd22dd;">{</span>
    name: <span style="color: #3548cf;">'app/files-to-lint'</span>,
    files: <span style="color: #008899;">[</span><span style="color: #3548cf;">'**/*.{ts,mts,tsx,vue}'</span><span style="color: #008899;">]</span>,
  <span style="color: #dd22dd;">}</span>,

  <span style="color: #721045;">globalIgnores</span><span style="color: #dd22dd;">(</span><span style="color: #008899;">[</span><span style="color: #3548cf;">'**/dist/**'</span>, <span style="color: #3548cf;">'**/dist-ssr/**'</span>, <span style="color: #3548cf;">'**/coverage/**'</span><span style="color: #008899;">]</span><span style="color: #dd22dd;">)</span>,

  pluginVue.configs<span style="color: #dd22dd;">[</span><span style="color: #3548cf;">'flat/essential'</span><span style="color: #dd22dd;">]</span>,
  vueTsConfigs.recommended,
  skipFormatting,
<span style="color: #000000;">)</span>
</pre>
</div></li>
</ul></li>
<li>Prettier的配置也把主要内容放到 $schema里面,另外规定了三个场景配置
<ul class="org-ul">
<li><p>
默认的.prettierrc.json内容如下
</p>
<div class="org-src-container">
<pre class="src src-json"><span style="color: #000000;">{</span>
  <span style="color: #531ab6;">"$schema"</span>: <span style="color: #3548cf;">"https://json.schemastore.org/prettierrc"</span>,
  <span style="color: #531ab6;">"semi"</span>: <span style="color: #0000b0;">false</span>,
  <span style="color: #531ab6;">"singleQuote"</span>: <span style="color: #0000b0;">true</span>,
  <span style="color: #531ab6;">"printWidth"</span>: <span style="color: #0000b0;">100</span>
<span style="color: #000000;">}</span>
</pre>
</div></li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-orgd1b4092" class="outline-3">
<h3 id="orgd1b4092"><span class="section-number-3">4.3.</span> 组件样式控制</h3>
<div class="outline-text-3" id="text-4-3">
</div>
<div id="outline-container-org0c37ff0" class="outline-4">
<h4 id="org0c37ff0"><span class="section-number-4">4.3.1.</span> 组件的定义与使用</h4>
<div class="outline-text-4" id="text-4-3-1">
<ul class="org-ul">
<li>当前脚手架中有太多预定义的样式和组件,我们将下列数据进行删除:
<ul class="org-ul">
<li><p>
递归删除src下的assets子目录
</p>
<div class="org-src-container">
<pre class="src src-shell">$ git diff --cached --color --stat
 code/ch04/vue3-demo/src/assets/base.css | 86 ------------------------------------------------------------------
 code/ch04/vue3-demo/src/assets/logo.svg |  1 -
 code/ch04/vue3-demo/src/assets/main.css | 35 ---------------------------
 3 files changed, 122 deletions<span style="color: #000000;">(</span>-<span style="color: #000000;">)</span>
</pre>
</div></li>
<li><p>
递归删除src下的components子目录
</p>
<div class="org-src-container">
<pre class="src src-shell">$ git diff --cached --color --stat
 code/ch04/vue3-demo/src/components/HelloWorld.vue              | 41 ------------------
 code/ch04/vue3-demo/src/components/TheWelcome.vue              | 94 ------------------------------------------
 code/ch04/vue3-demo/src/components/WelcomeItem.vue             | 87 --------------------------------------
 code/ch04/vue3-demo/src/components/icons/IconCommunity.vue     |  7 ----
 code/ch04/vue3-demo/src/components/icons/IconDocumentation.vue |  7 ----
 code/ch04/vue3-demo/src/components/icons/IconEcosystem.vue     |  7 ----
 code/ch04/vue3-demo/src/components/icons/IconSupport.vue       |  7 ----
 code/ch04/vue3-demo/src/components/icons/IconTooling.vue       | 19 ---------
 8 files changed, 269 deletions<span style="color: #000000;">(</span>-<span style="color: #000000;">)</span>
</pre>
</div></li>
<li><p>
main.js里面的样式引入要删除
</p>
<div class="org-src-container">
<pre class="src src-diff">diff --git a/code/ch04/vue3-demo/src/main.ts b/code/ch04/vue3-demo/src/main.ts
index 0ac3a5f..01433bc 100644
--- <span style="font-weight: bold;">a/code/ch04/vue3-demo/src/main.ts</span>
+++ <span style="font-weight: bold;">b/code/ch04/vue3-demo/src/main.ts</span>
<span style="background-color: #dfd5cf; font-weight: bold;">@@ -1,5 +1,3 @@</span>
<span style="color: #aa2222; background-color: #f4d0cf;">-</span><span style="color: #8f1313; background-color: #f4d0cf;">import './assets/main.css'</span>
<span style="color: #aa2222; background-color: #f4d0cf;">-</span>
 import { createApp } from 'vue'
 import App from './App.vue'
</pre>
</div></li>
<li><p>
新增一个自己写的component HelloWorld.vue,内容如下
</p>
<div class="org-src-container">
<pre class="src src-diff">diff --git a/code/ch04/vue3-demo/src/components/HelloWorld.vue b/code/ch04/vue3-demo/src/components/HelloWorld.vue
new file mode 100644
index 0000000..cde4034
--- <span style="font-weight: bold;">/dev/null</span>
+++ <span style="font-weight: bold;">b/code/ch04/vue3-demo/src/components/HelloWorld.vue</span>
<span style="background-color: #dfd5cf; font-weight: bold;">@@ -0,0 +1,6 @@</span>
<span style="color: #006700; background-color: #c3ebc1;">+</span><span style="color: #005000; background-color: #c3ebc1;">&lt;template&gt;</span>
<span style="color: #006700; background-color: #c3ebc1;">+</span><span style="color: #005000; background-color: #c3ebc1;">  &lt;div&gt;</span>
<span style="color: #006700; background-color: #c3ebc1;">+</span><span style="color: #005000; background-color: #c3ebc1;">    &lt;h3&gt;HelloWorld Component Title&lt;/h3&gt;</span>
<span style="color: #006700; background-color: #c3ebc1;">+</span><span style="color: #005000; background-color: #c3ebc1;">    &lt;div&gt;&lt;p&gt;hello world content&lt;/p&gt;&lt;/div&gt;</span>
<span style="color: #006700; background-color: #c3ebc1;">+</span><span style="color: #005000; background-color: #c3ebc1;">  &lt;/div&gt;</span>
+&lt;/template&gt;
</pre>
</div></li>
<li><p>
我们选择删除App.Vue的内容,然后重新编写代码如下
</p>
<div class="org-src-container">
<pre class="src src-diff">diff --git a/code/ch04/vue3-demo/src/App.vue b/code/ch04/vue3-demo/src/App.vue
index d05208d..8659e0e 100644
--- <span style="font-weight: bold;">a/code/ch04/vue3-demo/src/App.vue</span>
+++ <span style="font-weight: bold;">b/code/ch04/vue3-demo/src/App.vue</span>
<span style="background-color: #dfd5cf; font-weight: bold;">@@ -1,47 +1,22 @@</span>
 &lt;script setup lang="ts"&gt;
 import HelloWorld from './components/HelloWorld.vue'
<span style="color: #aa2222; background-color: #f4d0cf;">-</span><span style="color: #8f1313; background-color: #f4d0cf;">import </span><span style="color: #8f1313; background-color: #f3b5a7;">TheWelcome</span><span style="color: #8f1313; background-color: #f4d0cf;"> from '</span><span style="color: #8f1313; background-color: #f3b5a7;">./components/TheWelcome.</span><span style="color: #8f1313; background-color: #f4d0cf;">vue'</span>
<span style="color: #006700; background-color: #c3ebc1;">+</span><span style="color: #005000; background-color: #c3ebc1;">import </span><span style="color: #005000; background-color: #acd6a5;">{</span><span style="color: #005000; background-color: #c3ebc1;"> </span><span style="color: #005000; background-color: #acd6a5;">ref }</span><span style="color: #005000; background-color: #c3ebc1;"> from 'vue'</span>
<span style="color: #005000; background-color: #acd6a5;">+</span><span style="color: #005000; background-color: #acd6a5;">const count = ref(0)</span><span style="color: #005000; background-color: #acd6a5;">
</span><span style="color: #005000; background-color: #acd6a5;">+</span><span style="color: #005000; background-color: #acd6a5;">const increment = () =&gt; {</span><span style="color: #005000; background-color: #acd6a5;">
</span><span style="color: #005000; background-color: #acd6a5;">+</span><span style="color: #005000; background-color: #acd6a5;">  count.value++</span><span style="color: #005000; background-color: #acd6a5;">
</span><span style="color: #005000; background-color: #acd6a5;">+</span><span style="color: #005000; background-color: #acd6a5;">}</span>
 &lt;/script&gt;

 &lt;template&gt;
<span style="color: #aa2222; background-color: #f4d0cf;">-</span><span style="color: #8f1313; background-color: #f4d0cf;">  &lt;</span><span style="color: #8f1313; background-color: #f3b5a7;">header</span><span style="color: #8f1313; background-color: #f4d0cf;">&gt;</span>
<span style="color: #8f1313; background-color: #f3b5a7;">-</span><span style="color: #8f1313; background-color: #f4d0cf;">    &lt;</span><span style="color: #8f1313; background-color: #f3b5a7;">img alt="Vue logo" class="logo" src=".</span><span style="color: #8f1313; background-color: #f4d0cf;">/</span><span style="color: #8f1313; background-color: #f3b5a7;">assets/logo.svg" width="125" height="125" /</span><span style="color: #8f1313; background-color: #f4d0cf;">&gt;</span>
<span style="color: #aa2222; background-color: #f4d0cf;">-</span>
<span style="color: #8f1313; background-color: #f3b5a7;">-</span><span style="color: #8f1313; background-color: #f4d0cf;">    &lt;</span><span style="color: #8f1313; background-color: #f3b5a7;">div class="wrapper"</span><span style="color: #8f1313; background-color: #f4d0cf;">&gt;</span>
<span style="color: #aa2222; background-color: #f4d0cf;">-</span><span style="color: #8f1313; background-color: #f4d0cf;">      &lt;</span><span style="color: #8f1313; background-color: #f3b5a7;">HelloWorld</span><span style="color: #8f1313; background-color: #f4d0cf;"> </span><span style="color: #8f1313; background-color: #f3b5a7;">msg</span><span style="color: #8f1313; background-color: #f4d0cf;">="</span><span style="color: #8f1313; background-color: #f3b5a7;">You did it!</span><span style="color: #8f1313; background-color: #f4d0cf;">" </span><span style="color: #8f1313; background-color: #f3b5a7;">/</span><span style="color: #8f1313; background-color: #f4d0cf;">&gt;</span>
<span style="color: #8f1313; background-color: #f3b5a7;">-</span><span style="color: #8f1313; background-color: #f4d0cf;">    &lt;/</span><span style="color: #8f1313; background-color: #f3b5a7;">div&gt;</span><span style="color: #8f1313; background-color: #f3b5a7;">
</span><span style="color: #8f1313; background-color: #f3b5a7;">-</span><span style="color: #8f1313; background-color: #f3b5a7;">  &lt;/header</span><span style="color: #8f1313; background-color: #f4d0cf;">&gt;</span>
<span style="color: #006700; background-color: #c3ebc1;">+</span><span style="color: #005000; background-color: #c3ebc1;">  &lt;</span><span style="color: #005000; background-color: #acd6a5;">h2</span><span style="color: #005000; background-color: #c3ebc1;">&gt;</span><span style="color: #005000; background-color: #acd6a5;">App</span><span style="color: #005000; background-color: #c3ebc1;"> </span><span style="color: #005000; background-color: #acd6a5;">Title</span><span style="color: #005000; background-color: #c3ebc1;">&lt;/</span><span style="color: #005000; background-color: #acd6a5;">h2</span><span style="color: #005000; background-color: #c3ebc1;">&gt;</span>
<span style="color: #006700; background-color: #c3ebc1;">+</span><span style="color: #005000; background-color: #c3ebc1;">  </span><span style="color: #005000; background-color: #acd6a5;">&lt;p&gt;count:</span><span style="color: #005000; background-color: #c3ebc1;"> </span><span style="color: #005000; background-color: #acd6a5;">{{</span><span style="color: #005000; background-color: #c3ebc1;"> </span><span style="color: #005000; background-color: #acd6a5;">count</span><span style="color: #005000; background-color: #c3ebc1;"> </span><span style="color: #005000; background-color: #acd6a5;">}}</span><span style="color: #005000; background-color: #c3ebc1;">&lt;</span><span style="color: #005000; background-color: #acd6a5;">/p</span><span style="color: #005000; background-color: #c3ebc1;">&gt;</span>
<span style="color: #006700; background-color: #c3ebc1;">+</span><span style="color: #005000; background-color: #c3ebc1;">  &lt;</span><span style="color: #005000; background-color: #acd6a5;">button</span><span style="color: #005000; background-color: #c3ebc1;"> </span><span style="color: #005000; background-color: #acd6a5;">@click</span><span style="color: #005000; background-color: #c3ebc1;">="</span><span style="color: #005000; background-color: #acd6a5;">increment</span><span style="color: #005000; background-color: #c3ebc1;">"&gt;</span><span style="color: #005000; background-color: #acd6a5;">Add</span><span style="color: #005000; background-color: #c3ebc1;">&lt;/</span><span style="color: #005000; background-color: #acd6a5;">button</span><span style="color: #005000; background-color: #c3ebc1;">&gt;</span>

<span style="color: #aa2222; background-color: #f4d0cf;">-</span><span style="color: #8f1313; background-color: #f4d0cf;">  &lt;</span><span style="color: #8f1313; background-color: #f3b5a7;">main&gt;</span>
<span style="color: #8f1313; background-color: #f3b5a7;">-</span><span style="color: #8f1313; background-color: #f3b5a7;">    &lt;TheWelcome</span><span style="color: #8f1313; background-color: #f4d0cf;"> /</span><span style="color: #8f1313; background-color: #f3b5a7;">&gt;</span><span style="color: #8f1313; background-color: #f3b5a7;">
</span><span style="color: #8f1313; background-color: #f3b5a7;">-</span><span style="color: #8f1313; background-color: #f3b5a7;">  &lt;/main</span><span style="color: #8f1313; background-color: #f4d0cf;">&gt;</span>
<span style="color: #006700; background-color: #c3ebc1;">+</span><span style="color: #005000; background-color: #c3ebc1;">  &lt;</span><span style="color: #005000; background-color: #acd6a5;">HelloWorld</span><span style="color: #005000; background-color: #c3ebc1;"> /&gt;</span>
 &lt;/template&gt;

 &lt;style scoped&gt;
<span style="color: #aa2222; background-color: #f4d0cf;">-</span><span style="color: #8f1313; background-color: #f3b5a7;">header</span><span style="color: #8f1313; background-color: #f4d0cf;"> {</span>
<span style="color: #aa2222; background-color: #f4d0cf;">-</span><span style="color: #8f1313; background-color: #f4d0cf;">  </span><span style="color: #8f1313; background-color: #f3b5a7;">line-height</span><span style="color: #8f1313; background-color: #f4d0cf;">: </span><span style="color: #8f1313; background-color: #f3b5a7;">1.5</span><span style="color: #8f1313; background-color: #f4d0cf;">;</span>
<span style="color: #8f1313; background-color: #f3b5a7;">-</span><span style="color: #8f1313; background-color: #f3b5a7;">}</span><span style="color: #8f1313; background-color: #f3b5a7;">
</span><span style="color: #8f1313; background-color: #f3b5a7;">-</span><span style="color: #8f1313; background-color: #f3b5a7;">
</span><span style="color: #8f1313; background-color: #f3b5a7;">-</span><span style="color: #8f1313; background-color: #f3b5a7;">.logo {</span><span style="color: #8f1313; background-color: #f3b5a7;">
</span><span style="color: #8f1313; background-color: #f3b5a7;">-</span><span style="color: #8f1313; background-color: #f3b5a7;">  display: block;</span><span style="color: #8f1313; background-color: #f3b5a7;">
</span><span style="color: #8f1313; background-color: #f3b5a7;">-</span><span style="color: #8f1313; background-color: #f3b5a7;">  margin: 0 auto 2rem;</span><span style="color: #8f1313; background-color: #f3b5a7;">
</span><span style="color: #8f1313; background-color: #f3b5a7;">-</span><span style="color: #8f1313; background-color: #f3b5a7;">}</span><span style="color: #8f1313; background-color: #f3b5a7;">
</span><span style="color: #8f1313; background-color: #f3b5a7;">-</span><span style="color: #8f1313; background-color: #f3b5a7;">
</span><span style="color: #8f1313; background-color: #f3b5a7;">-</span><span style="color: #8f1313; background-color: #f3b5a7;">@media (min-width: 1024px) {</span><span style="color: #8f1313; background-color: #f3b5a7;">
</span><span style="color: #8f1313; background-color: #f3b5a7;">-</span><span style="color: #8f1313; background-color: #f3b5a7;">  header {</span><span style="color: #8f1313; background-color: #f3b5a7;">
</span><span style="color: #8f1313; background-color: #f3b5a7;">-</span><span style="color: #8f1313; background-color: #f3b5a7;">    display: flex;</span><span style="color: #8f1313; background-color: #f3b5a7;">
</span><span style="color: #8f1313; background-color: #f3b5a7;">-</span><span style="color: #8f1313; background-color: #f3b5a7;">    place-items: center;</span><span style="color: #8f1313; background-color: #f3b5a7;">
</span><span style="color: #8f1313; background-color: #f3b5a7;">-</span><span style="color: #8f1313; background-color: #f3b5a7;">    padding-right: calc(var(--section-gap) / 2);</span><span style="color: #8f1313; background-color: #f3b5a7;">
</span><span style="color: #8f1313; background-color: #f3b5a7;">-</span><span style="color: #8f1313; background-color: #f3b5a7;">  }</span><span style="color: #8f1313; background-color: #f3b5a7;">
</span><span style="color: #8f1313; background-color: #f3b5a7;">-</span><span style="color: #8f1313; background-color: #f3b5a7;">
</span><span style="color: #8f1313; background-color: #f3b5a7;">-</span><span style="color: #8f1313; background-color: #f3b5a7;">  .logo {</span><span style="color: #8f1313; background-color: #f3b5a7;">
</span><span style="color: #8f1313; background-color: #f3b5a7;">-</span><span style="color: #8f1313; background-color: #f3b5a7;">    margin: 0 2rem 0 0;</span><span style="color: #8f1313; background-color: #f3b5a7;">
</span><span style="color: #8f1313; background-color: #f3b5a7;">-</span><span style="color: #8f1313; background-color: #f3b5a7;">  }</span><span style="color: #8f1313; background-color: #f3b5a7;">
</span><span style="color: #8f1313; background-color: #f3b5a7;">-</span><span style="color: #8f1313; background-color: #f3b5a7;">
</span><span style="color: #8f1313; background-color: #f3b5a7;">-</span><span style="color: #8f1313; background-color: #f3b5a7;">  header .wrapper {</span><span style="color: #8f1313; background-color: #f3b5a7;">
</span><span style="color: #8f1313; background-color: #f3b5a7;">-</span><span style="color: #8f1313; background-color: #f3b5a7;">    display: flex;</span><span style="color: #8f1313; background-color: #f3b5a7;">
</span><span style="color: #8f1313; background-color: #f3b5a7;">-</span><span style="color: #8f1313; background-color: #f3b5a7;">    place-items: flex-start;</span><span style="color: #8f1313; background-color: #f3b5a7;">
</span><span style="color: #8f1313; background-color: #f3b5a7;">-</span><span style="color: #8f1313; background-color: #f3b5a7;">    flex-wrap: wrap;</span><span style="color: #8f1313; background-color: #f3b5a7;">
</span><span style="color: #8f1313; background-color: #f3b5a7;">-</span><span style="color: #8f1313; background-color: #f3b5a7;">  }</span>
<span style="color: #006700; background-color: #c3ebc1;">+</span><span style="color: #005000; background-color: #acd6a5;">p</span><span style="color: #005000; background-color: #c3ebc1;"> {</span>
<span style="color: #006700; background-color: #c3ebc1;">+</span><span style="color: #005000; background-color: #c3ebc1;">  </span><span style="color: #005000; background-color: #acd6a5;">background</span><span style="color: #005000; background-color: #c3ebc1;">: </span><span style="color: #005000; background-color: #acd6a5;">#ccc</span><span style="color: #005000; background-color: #c3ebc1;">;</span>
 }
 &lt;/style&gt;
</pre>
</div></li>
</ul></li>
<li>更改之后,我们使用npm install安装,之后在运行npm run dev,就可以看到相对应的效果了</li>
</ul>
</div>
</div>
<div id="outline-container-org38f01a2" class="outline-4">
<h4 id="org38f01a2"><span class="section-number-4">4.3.2.</span> 全局样式控制</h4>
<div class="outline-text-4" id="text-4-3-2">
<ul class="org-ul">
<li>我们的代码中在style里面加上历史 scoped,所以 = background: #ccc = 只会对App组件起作用,HelloWorld背景并没有改变;</li>
<li><p>
如果我们删除scoped,那么我们会发现,HelloWorld组件也会有同样的样式
</p>
<div class="org-src-container">
<pre class="src src-diff">diff --git a/code/ch04/vue3-demo/src/App.vue b/code/ch04/vue3-demo/src/App.vue
index 8659e0e..255e4fb 100644
--- <span style="font-weight: bold;">a/code/ch04/vue3-demo/src/App.vue</span>
+++ <span style="font-weight: bold;">b/code/ch04/vue3-demo/src/App.vue</span>
<span style="background-color: #dfd5cf; font-weight: bold;">@@ -15,7 +15,7 @@</span><span style="background-color: #dfd5cf;"> const increment = () =&gt; {</span>
   &lt;HelloWorld /&gt;
 &lt;/template&gt;

<span style="color: #aa2222; background-color: #f4d0cf;">-</span><span style="color: #8f1313; background-color: #f4d0cf;">&lt;style </span><span style="color: #8f1313; background-color: #f3b5a7;">scoped</span><span style="color: #8f1313; background-color: #f4d0cf;">&gt;</span>
<span style="color: #006700; background-color: #c3ebc1;">+</span><span style="color: #005000; background-color: #c3ebc1;">&lt;style&gt;</span>
 p {
   background: #ccc;
 }
</pre>
</div></li>
</ul>
</div>
</div>
<div id="outline-container-orgf090ecd" class="outline-4">
<h4 id="orgf090ecd"><span class="section-number-4">4.3.3.</span> 局部作用域样式控制</h4>
<div class="outline-text-4" id="text-4-3-3">
<ul class="org-ul">
<li>从上面的例子我们也可以看到,在Vue里面,只要在 <code>&lt;style&gt;</code> 里面加了 scoped,那么这个style只能作用于当前
的组件了,其原理也很简单.那就是一旦加了scoped,那么:
<ul class="org-ul">
<li>当前组件所有标签会加上data-v-xxx的唯一标识</li>
<li>style的样式选择器会最右侧加上data-v-xxx的属性选择器,保证只能在当前组件起作用</li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-org0ce370e" class="outline-4">
<h4 id="org0ce370e"><span class="section-number-4">4.3.4.</span> 深度样式控制</h4>
<div class="outline-text-4" id="text-4-3-4">
<ul class="org-ul">
<li>我们前面介绍了:
<ul class="org-ul">
<li>不加scoped是会让css在全局起作用</li>
<li>加了scoped是只能在当前组件起作用</li>
</ul></li>
<li>那有没有一种情况,就是我们只在 <code>当前组件,及其子组件起作用</code> ?
<ul class="org-ul">
<li><p>
有的,答案就是deep标签,使用方法如下
</p>
<div class="org-src-container">
<pre class="src src-diff">diff --git a/code/ch04/vue3-demo/src/App.vue b/code/ch04/vue3-demo/src/App.vue
index 8659e0e..c846836 100644
--- <span style="font-weight: bold;">a/code/ch04/vue3-demo/src/App.vue</span>
+++ <span style="font-weight: bold;">b/code/ch04/vue3-demo/src/App.vue</span>
<span style="background-color: #dfd5cf; font-weight: bold;">@@ -19,4 +19,7 @@</span><span style="background-color: #dfd5cf;"> const increment = () =&gt; {</span>
 p {
   background: #ccc;
 }
<span style="color: #006700; background-color: #c3ebc1;">+</span><span style="color: #005000; background-color: #c3ebc1;">div :deep(h3) {</span>
<span style="color: #006700; background-color: #c3ebc1;">+</span><span style="color: #005000; background-color: #c3ebc1;">  font-size: 50px;</span>
<span style="color: #006700; background-color: #c3ebc1;">+</span><span style="color: #005000; background-color: #c3ebc1;">}</span>
 &lt;/style&gt;
</pre>
</div></li>
</ul></li>
</ul>
</div>
</div>
</div>
<div id="outline-container-orgea8228f" class="outline-3">
<h3 id="orgea8228f"><span class="section-number-3">4.4.</span> 组件通信之props</h3>
<div class="outline-text-3" id="text-4-4">
</div>
<div id="outline-container-org5a3d5f3" class="outline-4">
<h4 id="org5a3d5f3"><span class="section-number-4">4.4.1.</span> 组件关系</h4>
<div class="outline-text-4" id="text-4-4-1">
<ul class="org-ul">
<li>前面讲了组件的嵌套情况: 在App父组件中嵌套了HelloWorld子组件</li>
<li>Vue组件之间嵌套层次和结构将产生如下几种关系模式:
<ul class="org-ul">
<li><p>
父与子关系模式
</p>
<pre class="example" id="org9d43d65">
+-------------------+
|       App         |
|        |          |
|        |          |
|        v          |
|  +-------------+  |
|  | HelloWorld  |  |
|  |             |  |
|  +-------------+  |
+-------------------+
</pre></li>

<li><p>
子与父关系模式
</p>
<pre class="example" id="orgb1010a6">
+-------------------+
|       App         |
|        ^          |
|        |          |
|        |          |
|  +-----+-------+  |
|  | HelloWorld  |  |
|  |             |  |
|  +-------------+  |
+-------------------+
</pre></li>
<li>组与孙关系模式: 父有子,子也有子,一旦超过了父子的模式,我们都称之为祖与孙关系模式</li>
<li>其他关系(非父子,非祖孙)模式: 两个不同组件继承系列之间也会有交互关系,我们就称之为其他关系</li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-org43ba912" class="outline-4">
<h4 id="org43ba912"><span class="section-number-4">4.4.2.</span> 父与子通信之props</h4>
<div class="outline-text-4" id="text-4-4-2">
<ul class="org-ul">
<li>从父向子传递,主要使用props,在vue3的组合式API里面,就是defineProps.
<ul class="org-ul">
<li><p>
示例如下,在子组件里面设置defineProps,并且在模板里面可以使用
</p>
<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #721045;">template</span>&gt;
  &lt;<span style="color: #721045;">div</span>&gt;
    &lt;<span style="color: #721045;">h3</span>&gt;<span style="font-style: italic; text-decoration: underline;">HelloWorld Component Title</span>&lt;/<span style="color: #721045;">h3</span>&gt;
    &lt;<span style="color: #721045;">div</span>&gt;strProp: {{ strProp }}&lt;/<span style="color: #721045;">div</span>&gt;
    &lt;<span style="color: #721045;">div</span>&gt;numProp: {{ numProp }}&lt;/<span style="color: #721045;">div</span>&gt;
    &lt;<span style="color: #721045;">div</span>&gt;boolProp: {{ boolProp }}&lt;/<span style="color: #721045;">div</span>&gt;
    &lt;<span style="color: #721045;">div</span>&gt;arrProp: {{ arrProp }}&lt;/<span style="color: #721045;">div</span>&gt;
    &lt;<span style="color: #721045;">div</span>&gt;objProp: {{ objProp }}&lt;/<span style="color: #721045;">div</span>&gt;
    &lt;<span style="color: #721045;">button</span> @click=<span style="color: #3548cf;">"funcProp"</span>&gt;Click&lt;/<span style="color: #721045;">button</span>&gt;
  &lt;/<span style="color: #721045;">div</span>&gt;
&lt;/<span style="color: #721045;">template</span>&gt;

&lt;<span style="color: #721045;">script</span> setup <span style="color: #005e8b;">lang</span>=<span style="color: #3548cf;">"ts"</span>&gt;
defineProps({
  strProp: String,
  numProp: Number,
  boolProp: Boolean,
  arrProp: Array,
  objProp: Object,
  funcProp: Function,
})
&lt;/<span style="color: #721045;">script</span>&gt;
</pre>
</div></li>
<li><p>
同时在父组件里面传递这些数据
</p>
<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #721045;">script</span> setup <span style="color: #005e8b;">lang</span>=<span style="color: #3548cf;">"ts"</span>&gt;
import HelloWorld from './components/HelloWorld.vue'
import { ref } from 'vue'
const count = ref(0)
const increment = () =&gt; {
  count.value++
}
&lt;/<span style="color: #721045;">script</span>&gt;

&lt;<span style="color: #721045;">template</span>&gt;
  &lt;<span style="color: #721045;">h2</span>&gt;<span style="font-weight: bold; font-style: italic; text-decoration: underline;">App Title</span>&lt;/<span style="color: #721045;">h2</span>&gt;
  &lt;<span style="color: #721045;">p</span>&gt;count: {{ count }}&lt;/<span style="color: #721045;">p</span>&gt;
  &lt;<span style="color: #721045;">button</span> @click=<span style="color: #3548cf;">"increment"</span>&gt;Add&lt;/<span style="color: #721045;">button</span>&gt;

  &lt;<span style="color: #721045;">HelloWorld</span>
    <span style="color: #005e8b;">strProp</span>=<span style="color: #3548cf;">"Hello"</span>
    :numProp=<span style="color: #3548cf;">"123"</span>
    :boolProp=<span style="color: #3548cf;">"true"</span>
    :arrProp=<span style="color: #3548cf;">"[1, 2, 3]"</span>
    :objProp=<span style="color: #3548cf;">"{ key: 'value' }"</span>
    :funcProp=<span style="color: #3548cf;">"() =&gt; console.log('Hello from Parent')"</span>
  /&gt;
&lt;/<span style="color: #721045;">template</span>&gt;

&lt;<span style="color: #721045;">style</span> scoped&gt;
p {
  background: #ccc;
}
div :deep(h3) {
  font-size: 50px;
}
&lt;/<span style="color: #721045;">style</span>&gt;
</pre>
</div></li>
</ul></li>
<li>defineProps 是用于 从父组件向子组件传递数据 的机制。它是单向数据流的一部分，Vue 的设计理念中，数据
从父组件流向子组件，而子组件不能直接通过 props 修改父组件传递的数据。这种单向数据流设计有以下优点：
<ul class="org-ul">
<li>父组件是数据的唯一来源，数据流简单清晰。</li>
<li>避免了数据的来源混乱，方便调试和维护。</li>
</ul></li>
</ul>
</div>
</div>
</div>
<div id="outline-container-org50ff178" class="outline-3">
<h3 id="org50ff178"><span class="section-number-3">4.5.</span> 组件通信之ref与defineExpose</h3>
<div class="outline-text-3" id="text-4-5">
<ul class="org-ul">
<li><p>
上一节讲了"从父到子"的数据传递,这里我们讲解使用ref和defineExpose来做到"从子到父"的数据传递:
</p>
<ul class="org-ul">
<li><p>
首先需要在子组件定义,整个代码和之前是差不多的,只不过最后使用defineExpose再把数据和函数"曝光"一下
</p>
<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #721045;">template</span>&gt;
  &lt;<span style="color: #721045;">div</span>&gt;
    &lt;<span style="color: #721045;">h3</span>&gt;<span style="font-style: italic; text-decoration: underline;">HelloWorld Component Title</span>&lt;/<span style="color: #721045;">h3</span>&gt;
    &lt;<span style="color: #721045;">p</span>&gt;sub component {{ count }}&lt;/<span style="color: #721045;">p</span>&gt;
    &lt;<span style="color: #721045;">button</span> @click=<span style="color: #3548cf;">"increment"</span>&gt;Increment&lt;/<span style="color: #721045;">button</span>&gt;
  &lt;/<span style="color: #721045;">div</span>&gt;
&lt;/<span style="color: #721045;">template</span>&gt;

&lt;<span style="color: #721045;">script</span> setup <span style="color: #005e8b;">lang</span>=<span style="color: #3548cf;">"ts"</span>&gt;
import { ref } from 'vue'
const count = ref(0)

const increment = () =&gt; {
  count.value++
}
defineExpose({
  count,
  increment,
})
&lt;/<span style="color: #721045;">script</span>&gt;
</pre>
</div></li>
<li><p>
之后是父组件里面,需要使用 <code>childRef = ref(null)</code> 创建一下引用,才能使用,还要注意在HelloWorld组件
调用里面的 ref="childRef"
</p>
<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #721045;">script</span> setup <span style="color: #005e8b;">lang</span>=<span style="color: #3548cf;">"ts"</span>&gt;
import HelloWorld from './components/HelloWorld.vue'
import { ref } from 'vue'
const childRef = ref(null) // childRef&#26159;&#22810;&#20010;&#20540;&#30340;&#21512;&#20307;
const incrementChildRef = () =&gt; {
  if (childRef.value) {
    childRef.value.increment()
    console.log(childRef.value.count)
  }
}
&lt;/<span style="color: #721045;">script</span>&gt;

&lt;<span style="color: #721045;">template</span>&gt;
  &lt;<span style="color: #721045;">h2</span>&gt;<span style="font-weight: bold; font-style: italic; text-decoration: underline;">App Title</span>&lt;/<span style="color: #721045;">h2</span>&gt;

  &lt;<span style="color: #721045;">button</span> @click=<span style="color: #3548cf;">"incrementChildRef"</span>&gt;Increment From App&lt;/<span style="color: #721045;">button</span>&gt;

  &lt;<span style="color: #721045;">HelloWorld</span> <span style="color: #005e8b;">ref</span>=<span style="color: #3548cf;">"childRef"</span> /&gt;
&lt;/<span style="color: #721045;">template</span>&gt;

&lt;<span style="color: #721045;">style</span> scoped&gt;
p {
  background: #ccc;
}
div :deep(h3) {
  font-size: 50px;
}
&lt;/<span style="color: #721045;">style</span>&gt;
</pre>
</div></li>
<li><p>
上面例子中,父组件还成功调用了子组件的函数,向子组件传递了信息,这说明:
</p>
<pre class="example" id="org077e71c">
ref和defineExpose的交互方式是双向完全打通的
</pre></li>
</ul>
<p>
的单向传递数据
</p></li>
</ul>
</div>
</div>
<div id="outline-container-org456e731" class="outline-3">
<h3 id="org456e731"><span class="section-number-3">4.6.</span> 组件通信之emits与defineEmits</h3>
<div class="outline-text-3" id="text-4-6">
<ul class="org-ul">
<li>ref和defineExpose双向完全打通的通信方式会引入更加紧密的耦合,不是特别推荐.</li>
<li>我们这一节就会研究低耦合的,纯粹的"从子向父",也就是emits和defineEmits
<ul class="org-ul">
<li><p>
首先需要在子组件里面emit两个函数(一个更新通知,一个直接通知),注意这里的emit()函数是defineEmit()的
返回值,是真正执行emit行为的函数,这是比较少见的用法
</p>
<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #721045;">template</span>&gt;
  &lt;<span style="color: #721045;">div</span>&gt;
    &lt;<span style="color: #721045;">h3</span>&gt;<span style="font-style: italic; text-decoration: underline;">HelloWorld Component Title</span>&lt;/<span style="color: #721045;">h3</span>&gt;
    &lt;<span style="color: #721045;">p</span>&gt;sub component {{ count }}&lt;/<span style="color: #721045;">p</span>&gt;
    &lt;<span style="color: #721045;">button</span> @click=<span style="color: #3548cf;">"increment"</span>&gt;Increment&lt;/<span style="color: #721045;">button</span>&gt;
    &lt;<span style="color: #721045;">button</span> @click=<span style="color: #3548cf;">"notifyCount"</span>&gt;Notify Count&lt;/<span style="color: #721045;">button</span>&gt;
  &lt;/<span style="color: #721045;">div</span>&gt;
&lt;/<span style="color: #721045;">template</span>&gt;

&lt;<span style="color: #721045;">script</span> setup <span style="color: #005e8b;">lang</span>=<span style="color: #3548cf;">"ts"</span>&gt;
import { ref } from 'vue'
const count = ref(0)

const emit = defineEmits(['notifyParentCount', 'increment'])

const increment = () =&gt; {
  count.value++
  emit('increment', count.value)
}

const notifyCount = () =&gt; {
  emit('notifyParentCount', count.value)
}
&lt;/<span style="color: #721045;">script</span>&gt;
</pre>
</div></li>

<li><p>
其次在父组件里面需要根据子组件emit的不同函数进行相应的函数申请,并在模版里面绑定
</p>
<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #721045;">script</span> setup <span style="color: #005e8b;">lang</span>=<span style="color: #3548cf;">"ts"</span>&gt;
import HelloWorld from './components/HelloWorld.vue'

const handleIncrement = (newCount) =&gt; {
  console.log('parent got new count', newCount)
}

const handleNotifyParentCount = (currentCount) =&gt; {
  console.log('parent got count', currentCount)
}
&lt;/<span style="color: #721045;">script</span>&gt;

&lt;<span style="color: #721045;">template</span>&gt;
  &lt;<span style="color: #721045;">h2</span>&gt;<span style="font-weight: bold; font-style: italic; text-decoration: underline;">App Title</span>&lt;/<span style="color: #721045;">h2</span>&gt;

  &lt;<span style="color: #721045;">HelloWorld</span> @notifyParentCount=<span style="color: #3548cf;">"handleNotifyParentCount"</span> @increment=<span style="color: #3548cf;">"handleIncrement"</span> /&gt;
&lt;/<span style="color: #721045;">template</span>&gt;

&lt;<span style="color: #721045;">style</span> scoped&gt;
p {
  background: #ccc;
}
div :deep(h3) {
  font-size: 50px;
}
&lt;/<span style="color: #721045;">style</span>&gt;
</pre>
</div></li>
</ul></li>
<li>相比起其他方式, emits和defineEmist的优点如下:
<ul class="org-ul">
<li>松耦合：父组件无需直接操作子组件的状态或方法，更符合组件间松散耦合的设计原则。</li>
<li>事件驱动：更容易理解和维护，特别是在需要向多个父组件发送通知的场景下。</li>
<li>简洁：不需要使用 ref 或 defineExpose，代码更简洁。</li>
</ul></li>
<li>使用 emits 更适合以下场景：
<ul class="org-ul">
<li>子组件向父组件传递数据（如表单数据、按钮点击状态等）。</li>
<li>父组件只需要监听子组件发生的动作，而不需要直接操作子组件。</li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-org70f2081" class="outline-3">
<h3 id="org70f2081"><span class="section-number-3">4.7.</span> 组件通信之attrs</h3>
<div class="outline-text-3" id="text-4-7">
<ul class="org-ul">
<li>前面讲了通过props可以从父向子传递信息,但是有些信息不是一个props,比如input的占位符,这种属于属性,在
Vue里面是attr,我们需要使用Vue3里面新提供的useAttr
<ul class="org-ul">
<li><p>
首先需要在子组件里面引入useAttrs,并且创建变量attrs,把这个变量通过v-bind绑定后,就可以从父组件获取
传递过来的属性值
</p>
<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #721045;">template</span>&gt;
  &lt;<span style="color: #721045;">div</span>&gt;
    &lt;<span style="color: #721045;">h3</span>&gt;<span style="font-style: italic; text-decoration: underline;">HelloWorld Component Title</span>&lt;/<span style="color: #721045;">h3</span>&gt;
    &lt;<span style="color: #721045;">input</span> <span style="color: #005e8b;">v-bind</span>=<span style="color: #3548cf;">"attrs"</span> /&gt;<span style="color: #7f0000;">&lt;!-- </span><span style="color: #7f0000;">attrs received from parent</span><span style="color: #7f0000;"> --&gt;</span>
  &lt;/<span style="color: #721045;">div</span>&gt;
&lt;/<span style="color: #721045;">template</span>&gt;

&lt;<span style="color: #721045;">script</span> setup <span style="color: #005e8b;">lang</span>=<span style="color: #3548cf;">"ts"</span>&gt;
import { useAttrs } from 'vue'

const attrs = useAttrs()
console.log(attrs)
&lt;/<span style="color: #721045;">script</span>&gt;
</pre>
</div></li>
<li><p>
子组件配置后,父组件可以把任意的attr传递过去,不需要挨个声明.这里父组件向HelloWorld组件传递了本该
给&lt;input&gt;的属性
</p>
<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #721045;">script</span> setup <span style="color: #005e8b;">lang</span>=<span style="color: #3548cf;">"ts"</span>&gt;
import HelloWorld from './components/HelloWorld.vue'
&lt;/<span style="color: #721045;">script</span>&gt;

&lt;<span style="color: #721045;">template</span>&gt;
  &lt;<span style="color: #721045;">h2</span>&gt;<span style="font-weight: bold; font-style: italic; text-decoration: underline;">App Title</span>&lt;/<span style="color: #721045;">h2</span>&gt;

  &lt;<span style="color: #721045;">h3</span>&gt;<span style="font-style: italic; text-decoration: underline;">Send HelloWorld some attrs</span>&lt;/<span style="color: #721045;">h3</span>&gt;
  &lt;<span style="color: #721045;">HelloWorld</span> <span style="color: #005e8b;">placeholder</span>=<span style="color: #3548cf;">"please input content"</span> <span style="color: #005e8b;">maxlength</span>=<span style="color: #3548cf;">"3"</span> /&gt;
&lt;/<span style="color: #721045;">template</span>&gt;

&lt;<span style="color: #721045;">style</span> scoped&gt;
p {
  background: #ccc;
}
div :deep(h3) {
  font-size: 50px;
}
&lt;/<span style="color: #721045;">style</span>&gt;
</pre>
</div></li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-org239ee97" class="outline-3">
<h3 id="org239ee97"><span class="section-number-3">4.8.</span> 组件通信之provide与inject</h3>
<div class="outline-text-3" id="text-4-8">
<ul class="org-ul">
<li>在 Vue 3 中，provide 和 inject 是一组用于跨层级组件通信的 API。它们允许祖先组件将数据提供给后代组件，
而无需通过一层层地传递 props 和 emit，非常适合解决深层嵌套组件的通信问题
<ul class="org-ul">
<li><p>
我们需要在祖先组件(App.vue)中使用provide,将数据传递给后代
</p>
<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #721045;">script</span> setup <span style="color: #005e8b;">lang</span>=<span style="color: #3548cf;">"ts"</span>&gt;
import { provide, ref } from 'vue'
import Child from './components/Child.vue'

const message = ref('Hello from App component')
const count = ref(32)

provide('message', message)
provide('count', count)
&lt;/<span style="color: #721045;">script</span>&gt;

&lt;<span style="color: #721045;">template</span>&gt;
  &lt;<span style="color: #721045;">h2</span>&gt;<span style="font-weight: bold; font-style: italic; text-decoration: underline;">App Title</span>&lt;/<span style="color: #721045;">h2</span>&gt;

  &lt;<span style="color: #721045;">Child</span> /&gt;
&lt;/<span style="color: #721045;">template</span>&gt;

&lt;<span style="color: #721045;">style</span> scoped&gt;
p {
  background: #ccc;
}
div :deep(h3) {
  font-size: 50px;
}
&lt;/<span style="color: #721045;">style</span>&gt;
</pre>
</div></li>
<li><p>
Child.vue是App的子组件,其不参与数据的提供和接收,但是负责串联组件,比如Child组件被App组件引用,而
Child组件又引用Grandson组件
</p>
<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #721045;">template</span>&gt;
  &lt;<span style="color: #721045;">div</span>&gt;
    &lt;<span style="color: #721045;">h3</span>&gt;<span style="font-style: italic; text-decoration: underline;">Child Component</span>&lt;/<span style="color: #721045;">h3</span>&gt;
    &lt;<span style="color: #721045;">Grandson</span> /&gt;
  &lt;/<span style="color: #721045;">div</span>&gt;
&lt;/<span style="color: #721045;">template</span>&gt;

&lt;<span style="color: #721045;">script</span> setup <span style="color: #005e8b;">lang</span>=<span style="color: #3548cf;">"ts"</span>&gt;
import Grandson from './Grandson.vue'
&lt;/<span style="color: #721045;">script</span>&gt;
</pre>
</div></li>
<li><p>
Grandson组件和App组件中间隔着Child组件,但是却可以使用inject来获取App组件provide出来的数据,实现了 <b>跨层级的组件通信</b>
</p>
<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #721045;">template</span>&gt;
  &lt;<span style="color: #721045;">div</span>&gt;
    &lt;<span style="color: #721045;">h3</span>&gt;<span style="font-style: italic; text-decoration: underline;">Grandson Component</span>&lt;/<span style="color: #721045;">h3</span>&gt;
    &lt;<span style="color: #721045;">p</span>&gt;message: {{ message }}&lt;/<span style="color: #721045;">p</span>&gt;
    &lt;<span style="color: #721045;">p</span>&gt;count: {{ count }}&lt;/<span style="color: #721045;">p</span>&gt;
    &lt;<span style="color: #721045;">button</span> @click=<span style="color: #3548cf;">"increment"</span>&gt;Increment&lt;/<span style="color: #721045;">button</span>&gt;
  &lt;/<span style="color: #721045;">div</span>&gt;
&lt;/<span style="color: #721045;">template</span>&gt;

&lt;<span style="color: #721045;">script</span> setup <span style="color: #005e8b;">lang</span>=<span style="color: #3548cf;">"ts"</span>&gt;
import { inject } from 'vue'

const message = inject('message')
const count = inject('count')

const increment = () =&gt; {
  if (count) {
    count.value++
  }
}
&lt;/<span style="color: #721045;">script</span>&gt;
</pre>
</div></li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-org0ddb72a" class="outline-3">
<h3 id="org0ddb72a"><span class="section-number-3">4.9.</span> 组件通信之slot</h3>
<div class="outline-text-3" id="text-4-9">
<ul class="org-ul">
<li>在 Vue 3 中，slot 是一种用于在组件内部插入动态内容的机制。通过 slot，父组件可以将内容传递到子组件的
特定位置，同时还能支持内容传递和数据通信.</li>
</ul>
</div>
<div id="outline-container-orgc4c7e3a" class="outline-4">
<h4 id="orgc4c7e3a"><span class="section-number-4">4.9.1.</span> 默认插槽</h4>
<div class="outline-text-4" id="text-4-9-1">
<ul class="org-ul">
<li>有时候,父组件想传递一些HTML标签和属性,比如title,content等.如果用props传递,那么会非常的麻烦.这时候,
我们就可以使用默认插槽,因为默认插槽的数据子组件是"照单全收",写起来非常方便
<ul class="org-ul">
<li><p>
在子组件里面留好&lt;slot&gt;的位置
</p>
<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #721045;">template</span>&gt;
  &lt;<span style="color: #721045;">div</span>&gt;
    &lt;<span style="color: #721045;">h3</span>&gt;<span style="font-style: italic; text-decoration: underline;">HelloWorld Component</span>&lt;/<span style="color: #721045;">h3</span>&gt;
    <span style="color: #7f0000;">&lt;!-- </span><span style="color: #7f0000;">Wait for Parent Component insert here</span><span style="color: #7f0000;"> --&gt;</span>
    &lt;<span style="color: #721045;">slot</span>&gt;&lt;/<span style="color: #721045;">slot</span>&gt;
  &lt;/<span style="color: #721045;">div</span>&gt;
&lt;/<span style="color: #721045;">template</span>&gt;
</pre>
</div></li>
<li><p>
在父组件里面用子组件&lt;HelloWorld&gt;&lt;/HelloWorld&gt;包围的部分就会传递给子组件
</p>
<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #721045;">script</span> setup <span style="color: #005e8b;">lang</span>=<span style="color: #3548cf;">"ts"</span>&gt;
import HelloWorld from './components/HelloWorld.vue'
&lt;/<span style="color: #721045;">script</span>&gt;

&lt;<span style="color: #721045;">template</span>&gt;
  &lt;<span style="color: #721045;">h2</span>&gt;<span style="font-weight: bold; font-style: italic; text-decoration: underline;">App Title</span>&lt;/<span style="color: #721045;">h2</span>&gt;

  &lt;<span style="color: #721045;">HelloWorld</span>&gt;
    &lt;<span style="color: #721045;">p</span>&gt;App insert this content&lt;/<span style="color: #721045;">p</span>&gt;
  &lt;/<span style="color: #721045;">HelloWorld</span>&gt;
&lt;/<span style="color: #721045;">template</span>&gt;

&lt;<span style="color: #721045;">style</span> scoped&gt;
p {
  background: #ccc;
}
div :deep(h3) {
  font-size: 50px;
}
&lt;/<span style="color: #721045;">style</span>&gt;
</pre>
</div></li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-org32ac061" class="outline-4">
<h4 id="org32ac061"><span class="section-number-4">4.9.2.</span> 具名插槽</h4>
<div class="outline-text-4" id="text-4-9-2">
<ul class="org-ul">
<li>默认插槽只能有一个,但是具名插槽因为名字不同,所以可以有多个
<ul class="org-ul">
<li><p>
首先在子组件里面配置多个slot,每个都有name
</p>
<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #721045;">template</span>&gt;
  &lt;<span style="color: #721045;">div</span>&gt;
    &lt;<span style="color: #721045;">h3</span>&gt;<span style="font-style: italic; text-decoration: underline;">HelloWorld Component</span>&lt;/<span style="color: #721045;">h3</span>&gt;
    &lt;<span style="color: #721045;">slot</span> <span style="color: #005e8b;">name</span>=<span style="color: #3548cf;">"header"</span> &gt;&lt;/<span style="color: #721045;">slot</span>&gt;
    &lt;<span style="color: #721045;">slot</span> <span style="color: #005e8b;">name</span>=<span style="color: #3548cf;">"footer"</span> &gt;&lt;/<span style="color: #721045;">slot</span>&gt;
  &lt;/<span style="color: #721045;">div</span>&gt;
&lt;/<span style="color: #721045;">template</span>&gt;
</pre>
</div></li>
<li><p>
然后再父component里面,分别给不同name的slot补充值即可
</p>
<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #721045;">script</span> setup <span style="color: #005e8b;">lang</span>=<span style="color: #3548cf;">"ts"</span>&gt;
import HelloWorld from './components/HelloWorld.vue'
&lt;/<span style="color: #721045;">script</span>&gt;

&lt;<span style="color: #721045;">template</span>&gt;
  &lt;<span style="color: #721045;">h2</span>&gt;<span style="font-weight: bold; font-style: italic; text-decoration: underline;">App Title</span>&lt;/<span style="color: #721045;">h2</span>&gt;

  &lt;<span style="color: #721045;">HelloWorld</span>&gt;
    &lt;<span style="color: #721045;">template</span> #header&gt;
      &lt;<span style="color: #721045;">h3</span>&gt;<span style="font-style: italic; text-decoration: underline;"> App insert header content </span>&lt;/<span style="color: #721045;">h3</span>&gt;
    &lt;/<span style="color: #721045;">template</span>&gt;
    &lt;<span style="color: #721045;">template</span> #footer&gt;
      &lt;<span style="color: #721045;">h3</span>&gt;<span style="font-style: italic; text-decoration: underline;"> App insert footer content </span>&lt;/<span style="color: #721045;">h3</span>&gt;
    &lt;/<span style="color: #721045;">template</span>&gt;
  &lt;/<span style="color: #721045;">HelloWorld</span>&gt;
&lt;/<span style="color: #721045;">template</span>&gt;

&lt;<span style="color: #721045;">style</span> scoped&gt;
p {
  background: #ccc;
}
div :deep(h3) {
  font-size: 50px;
}
&lt;/<span style="color: #721045;">style</span>&gt;
</pre>
</div></li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-org8f106ea" class="outline-4">
<h4 id="org8f106ea"><span class="section-number-4">4.9.3.</span> 作用域插槽</h4>
<div class="outline-text-4" id="text-4-9-3">
<ul class="org-ul">
<li>当父组件中写的插槽数据需要使用子组件中的数据时,就会应用到作用域插槽.子组件通过作用域插槽传递了数据给父组件.</li>
<li>下面就是一个使用作用域插槽在父组件中展示子组件生成时间的例子
<ul class="org-ul">
<li><p>
首先在子组件里面传递一个timestamp
</p>
<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #721045;">script</span> setup <span style="color: #005e8b;">lang</span>=<span style="color: #3548cf;">"ts"</span>&gt;
import { ref } from 'vue'
const timestamp = ref(new Date().toLocaleString())
&lt;/<span style="color: #721045;">script</span>&gt;

&lt;<span style="color: #721045;">template</span>&gt;
  &lt;<span style="color: #721045;">div</span>&gt;
    &lt;<span style="color: #721045;">h3</span>&gt;<span style="font-style: italic; text-decoration: underline;">HelloWorld Component</span>&lt;/<span style="color: #721045;">h3</span>&gt;
    &lt;<span style="color: #721045;">slot</span> <span style="color: #005e8b;">name</span>=<span style="color: #3548cf;">"footer"</span> :timestamp=<span style="color: #3548cf;">"timestamp"</span>&gt; &lt;/<span style="color: #721045;">slot</span>&gt;
  &lt;/<span style="color: #721045;">div</span>&gt;
&lt;/<span style="color: #721045;">template</span>&gt;
</pre>
</div></li>
<li><p>
然后在父组件里面可以通过 #footer="{ timestamp }" 获取这个子组件传递来的值
</p>
<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #721045;">script</span> setup <span style="color: #005e8b;">lang</span>=<span style="color: #3548cf;">"ts"</span>&gt;
import HelloWorld from './components/HelloWorld.vue'
&lt;/<span style="color: #721045;">script</span>&gt;

&lt;<span style="color: #721045;">template</span>&gt;
  &lt;<span style="color: #721045;">h2</span>&gt;<span style="font-weight: bold; font-style: italic; text-decoration: underline;">App Title</span>&lt;/<span style="color: #721045;">h2</span>&gt;

  &lt;<span style="color: #721045;">HelloWorld</span>&gt;
    &lt;<span style="color: #721045;">template</span> #footer=<span style="color: #3548cf;">"{ timestamp }"</span>&gt;
      &lt;<span style="color: #721045;">h3</span>&gt;<span style="font-style: italic; text-decoration: underline;">App insert footer content at {{ timestamp }}</span>&lt;/<span style="color: #721045;">h3</span>&gt;
    &lt;/<span style="color: #721045;">template</span>&gt;
  &lt;/<span style="color: #721045;">HelloWorld</span>&gt;
&lt;/<span style="color: #721045;">template</span>&gt;

&lt;<span style="color: #721045;">style</span> scoped&gt;
p {
  background: #ccc;
}
div :deep(h3) {
  font-size: 50px;
}
&lt;/<span style="color: #721045;">style</span>&gt;
</pre>
</div></li>
</ul></li>
</ul>
</div>
</div>
</div>
<div id="outline-container-org844d586" class="outline-3">
<h3 id="org844d586"><span class="section-number-3">4.10.</span> 内置组件之Component</h3>
<div class="outline-text-3" id="text-4-10">
<ul class="org-ul">
<li>&lt;Component&gt; 是 Vue 提供的内置组件，通过其 is 属性，可以动态加载和渲染不同的组件。它的作用是根据需
要动态决定渲染哪个组件，而不需要使用条件渲染（如 v-if 或 v-else）手动控制</li>
<li>下面是一个切换component的例子,这个是Component组件场景的使用场景
<ul class="org-ul">
<li><p>
我们首先创建一个HelloA组件
</p>
<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #721045;">template</span>&gt;
  &lt;<span style="color: #721045;">div</span>&gt;
    &lt;<span style="color: #721045;">h3</span>&gt;<span style="font-style: italic; text-decoration: underline;">HelloA Component</span>&lt;/<span style="color: #721045;">h3</span>&gt;
  &lt;/<span style="color: #721045;">div</span>&gt;
&lt;/<span style="color: #721045;">template</span>&gt;

&lt;<span style="color: #721045;">script</span> setup <span style="color: #005e8b;">lang</span>=<span style="color: #3548cf;">"ts"</span>&gt;&lt;/<span style="color: #721045;">script</span>&gt;
</pre>
</div></li>
<li><p>
然后创建一个HelloB组件
</p>
<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #721045;">template</span>&gt;
  &lt;<span style="color: #721045;">div</span>&gt;
    &lt;<span style="color: #721045;">h3</span>&gt;<span style="font-style: italic; text-decoration: underline;">HelloB Component</span>&lt;/<span style="color: #721045;">h3</span>&gt;
  &lt;/<span style="color: #721045;">div</span>&gt;
&lt;/<span style="color: #721045;">template</span>&gt;
&lt;<span style="color: #721045;">script</span> setup <span style="color: #005e8b;">lang</span>=<span style="color: #3548cf;">"ts"</span>&gt;&lt;/<span style="color: #721045;">script</span>&gt;
</pre>
</div></li>
<li><p>
我们的App组件在页面上面有两个按钮,点击A按钮切换到显示HelloA组件,点击B按钮切换到显示HelloB组件.注
意这里ref里面使用了markRaw,这样的话不会对组件进行递归响应式数据代理
</p>
<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #721045;">script</span> setup <span style="color: #005e8b;">lang</span>=<span style="color: #3548cf;">"ts"</span>&gt;
import HelloA from './components/HelloA.vue'
import HelloB from './components/HelloB.vue'
import { ref, markRaw } from 'vue'

const currentComponent = ref(markRaw(HelloA))

function setComponent(componentName) {
  if (componentName == 'A') {
    currentComponent.value = markRaw(HelloA)
  } else {
    currentComponent.value = markRaw(HelloB)
  }
}
&lt;/<span style="color: #721045;">script</span>&gt;

&lt;<span style="color: #721045;">template</span>&gt;
  &lt;<span style="color: #721045;">h2</span>&gt;<span style="font-weight: bold; font-style: italic; text-decoration: underline;">App Title</span>&lt;/<span style="color: #721045;">h2</span>&gt;

  &lt;<span style="color: #721045;">div</span>&gt;&lt;<span style="color: #721045;">Component</span> :is=<span style="color: #3548cf;">"currentComponent"</span> /&gt;&lt;/<span style="color: #721045;">div</span>&gt;

  &lt;<span style="color: #721045;">button</span> @click=<span style="color: #3548cf;">"setComponent('A')"</span>&gt;Switch to HelloA&lt;/<span style="color: #721045;">button</span>&gt;
  &lt;<span style="color: #721045;">button</span> @click=<span style="color: #3548cf;">"setComponent('B')"</span>&gt;Switch to HelloB&lt;/<span style="color: #721045;">button</span>&gt;
&lt;/<span style="color: #721045;">template</span>&gt;

&lt;<span style="color: #721045;">style</span> scoped&gt;
p {
  background: #ccc;
}
div :deep(h3) {
  font-size: 50px;
}
&lt;/<span style="color: #721045;">style</span>&gt;
</pre>
</div></li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-org5de0a2e" class="outline-3">
<h3 id="org5de0a2e"><span class="section-number-3">4.11.</span> 内置组件之KeepAlive</h3>
<div class="outline-text-3" id="text-4-11">
<ul class="org-ul">
<li>&lt;keep-alive&gt; 是 Vue 3 提供的一个内置组件，用于缓存动态组件的状态。它可以在组件切换时保持已被缓存的组件的状态，避免重新渲染组件，从而提升性能</li>
<li>被包裹在 &lt;keep-alive&gt; 中的组件会被缓存到内存中，当再次激活时会从缓存中恢复，而不是重新创建, 其主要使用场景有:
<ul class="org-ul">
<li>动态切换时需要保留状态:比如选项组件,切换选项卡时不希望重新加载内容，而是保留之前的状态</li>
<li>避免频繁销毁和重新创建组件:如果一个动态组件的初始化性能开销较大,使用&lt;keep-alive&gt;可以提高性能</li>
<li>路由切换时保留页面状态: 在使用Vue Router 构建的单页面应用中,可以通过&lt;keep-alive&gt;缓存某些路由组件</li>
</ul></li>
<li>下面我们就展示一个&lt;keep-alive&gt;的例子,展示如何缓存动态组件的状态
<ul class="org-ul">
<li><p>
首先是在子组件HelloA里面,不需要额外设置,只是一个简单的从输入框读数据到value,我们会看到后面切换到
HelloB,再切换回来的时候,所有的数据和状态都在
</p>
<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #721045;">template</span>&gt;
  &lt;<span style="color: #721045;">div</span>&gt;
    &lt;<span style="color: #721045;">h3</span>&gt;<span style="font-style: italic; text-decoration: underline;">HelloA Component</span>&lt;/<span style="color: #721045;">h3</span>&gt;
    &lt;<span style="color: #721045;">input</span> <span style="color: #005e8b;">v-model</span>=<span style="color: #3548cf;">"value"</span> <span style="color: #005e8b;">placeholder</span>=<span style="color: #3548cf;">"please input"</span> /&gt;
    &lt;<span style="color: #721045;">p</span>&gt;input content: {{ value }}&lt;/<span style="color: #721045;">p</span>&gt;
  &lt;/<span style="color: #721045;">div</span>&gt;
&lt;/<span style="color: #721045;">template</span>&gt;

&lt;<span style="color: #721045;">script</span> setup <span style="color: #005e8b;">lang</span>=<span style="color: #3548cf;">"ts"</span>&gt;
import { ref } from 'vue'

const value = ref('')
&lt;/<span style="color: #721045;">script</span>&gt;
</pre>
</div></li>
<li><p>
其次子组件HelloB,只是静态的内容.
</p>
<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #721045;">template</span>&gt;
  &lt;<span style="color: #721045;">div</span>&gt;
    &lt;<span style="color: #721045;">h3</span>&gt;<span style="font-style: italic; text-decoration: underline;">HelloB Component</span>&lt;/<span style="color: #721045;">h3</span>&gt;
  &lt;/<span style="color: #721045;">div</span>&gt;
&lt;/<span style="color: #721045;">template</span>&gt;
&lt;<span style="color: #721045;">script</span> setup <span style="color: #005e8b;">lang</span>=<span style="color: #3548cf;">"ts"</span>&gt;&lt;/<span style="color: #721045;">script</span>&gt;
</pre>
</div></li>
<li><p>
&lt;keep-alive&gt;配置在App.vue里面, 在Component外围增加&lt;keep-alive&gt;了,就能保证缓存这个Component组件
</p>
<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #721045;">script</span> setup <span style="color: #005e8b;">lang</span>=<span style="color: #3548cf;">"ts"</span>&gt;
import HelloA from './components/HelloA.vue'
import HelloB from './components/HelloB.vue'
import { ref, markRaw } from 'vue'

const currentComponent = ref(markRaw(HelloA))

function setComponent(componentName) {
  if (componentName == 'A') {
    currentComponent.value = markRaw(HelloA)
  } else {
    currentComponent.value = markRaw(HelloB)
  }
}
&lt;/<span style="color: #721045;">script</span>&gt;

&lt;<span style="color: #721045;">template</span>&gt;
  &lt;<span style="color: #721045;">h2</span>&gt;<span style="font-weight: bold; font-style: italic; text-decoration: underline;">App Title</span>&lt;/<span style="color: #721045;">h2</span>&gt;

  &lt;<span style="color: #721045;">keep-alive</span>&gt;&lt;<span style="color: #721045;">Component</span> :is=<span style="color: #3548cf;">"currentComponent"</span> /&gt;&lt;/<span style="color: #721045;">keep-alive</span>&gt;

  &lt;<span style="color: #721045;">button</span> @click=<span style="color: #3548cf;">"setComponent('A')"</span>&gt;Switch to HelloA&lt;/<span style="color: #721045;">button</span>&gt;
  &lt;<span style="color: #721045;">button</span> @click=<span style="color: #3548cf;">"setComponent('B')"</span>&gt;Switch to HelloB&lt;/<span style="color: #721045;">button</span>&gt;
&lt;/<span style="color: #721045;">template</span>&gt;

&lt;<span style="color: #721045;">style</span> scoped&gt;
p {
  background: #ccc;
}
div :deep(h3) {
  font-size: 50px;
}
&lt;/<span style="color: #721045;">style</span>&gt;
</pre>
</div></li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-org60792c5" class="outline-3">
<h3 id="org60792c5"><span class="section-number-3">4.12.</span> 内置组件之Teleport</h3>
<div class="outline-text-3" id="text-4-12">
<ul class="org-ul">
<li>在 Vue 3 中，&lt;teleport&gt; 是一个内置组件，用于将子组件或元素渲染到 DOM 的指定位置，而不是嵌套在父组件
的 DOM 结构中。它可以帮助我们更灵活地管理 DOM 结构，特别是在实现模态框、弹窗等需要脱离主组件的场景中非常有用。</li>
<li>下面就是一个使用&lt;teleport&gt;的例子
<ul class="org-ul">
<li><p>
示例如下
</p>
<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #531ab6;">!doctype</span> html&gt;
&lt;<span style="color: #721045;">html</span> <span style="color: #005e8b;">lang</span>=<span style="color: #3548cf;">"en"</span>&gt;
  &lt;<span style="color: #721045;">head</span>&gt;
    &lt;<span style="color: #721045;">meta</span> <span style="color: #005e8b;">charset</span>=<span style="color: #3548cf;">"UTF-8"</span> /&gt;
    &lt;<span style="color: #721045;">meta</span> <span style="color: #005e8b;">name</span>=<span style="color: #3548cf;">"viewport"</span> <span style="color: #005e8b;">content</span>=<span style="color: #3548cf;">"width=device-width, initial-scale=1.0"</span> /&gt;
    &lt;<span style="color: #721045;">title</span>&gt;<span style="font-weight: bold; text-decoration: underline;">&#25554;&#20540;&#35821;&#27861;</span>&lt;/<span style="color: #721045;">title</span>&gt;
    &lt;<span style="color: #721045;">script</span> <span style="color: #005e8b;">src</span>=<span style="color: #3548cf;">"https://unpkg.com/vue@3/dist/vue.global.js"</span>&gt;&lt;/<span style="color: #721045;">script</span>&gt;
  &lt;/<span style="color: #721045;">head</span>&gt;
  &lt;<span style="color: #721045;">body</span>&gt;
    &lt;<span style="color: #721045;">div</span> <span style="color: #005e8b;">id</span>=<span style="color: #3548cf;">"app"</span>&gt;
      <span style="color: #7f0000;">&lt;!-- </span><span style="color: #7f0000;">Vue &#27169;&#26495;</span><span style="color: #7f0000;"> --&gt;</span>
      &lt;<span style="color: #721045;">h1</span>&gt;<span style="font-weight: bold; text-decoration: underline;">{{ 123 }}</span>&lt;/<span style="color: #721045;">h1</span>&gt;
      &lt;<span style="color: #721045;">h1</span>&gt;<span style="font-weight: bold; text-decoration: underline;">{{ message }}</span>&lt;/<span style="color: #721045;">h1</span>&gt;
      &lt;<span style="color: #721045;">h1</span>&gt;<span style="font-weight: bold; text-decoration: underline;">{{ message.toUpperCase() }}</span>&lt;/<span style="color: #721045;">h1</span>&gt;
      &lt;<span style="color: #721045;">h1</span>&gt;<span style="font-weight: bold; text-decoration: underline;">{{ score }}</span>&lt;/<span style="color: #721045;">h1</span>&gt;
      &lt;<span style="color: #721045;">h1</span>&gt;<span style="font-weight: bold; text-decoration: underline;">{{ score &gt; 60 ? 'Passed!' : 'Failed' }}</span>&lt;/<span style="color: #721045;">h1</span>&gt;
    &lt;/<span style="color: #721045;">div</span>&gt;

    &lt;<span style="color: #721045;">script</span>&gt;
      const { createApp, ref } = Vue; // &#20174; Vue &#20013;&#35299;&#26500;&#20986;&#38656;&#35201;&#30340;API

      // &#21019;&#24314; Vue &#24212;&#29992;
      const app = createApp({
        setup() {
          const message = "Hello World";
          const score = 61;

          // &#36820;&#22238;&#27169;&#26495;&#20013;&#38656;&#35201;&#20351;&#29992;&#30340;&#25968;&#25454;
          return {
            message,
            score,
          };
        },
      });

      // &#25346;&#36733;&#21040; #app
      app.mount("#app");
    &lt;/<span style="color: #721045;">script</span>&gt;
  &lt;/<span style="color: #721045;">body</span>&gt;
&lt;/<span style="color: #721045;">html</span>&gt;
</pre>
</div></li>
<li>上面的例子中,点击“打开模态框”按钮，会显示一个模态框。</li>
<li>我们可以在浏览器右键检查模态框,我们会发现模态框的内容虽然在父组件中定义，但实际上被渲染到了 body
元素下，而不是嵌套在父组件的 DOM 结构中.</li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-org06c684a" class="outline-3">
<h3 id="org06c684a"><span class="section-number-3">4.13.</span> 代码封装之自定义directive(指令)</h3>
<div class="outline-text-3" id="text-4-13">
<ul class="org-ul">
<li>Vue代码的封装方式有很多种,主要有:
<ul class="org-ul">
<li>component(组件)</li>
<li>filter(过滤器)</li>
<li>directive(指令)</li>
<li>mixin(混入), 在vue3中已经被hook替代</li>
<li>hook(钩子)</li>
<li>plugin(插件)</li>
<li>library(类库)</li>
<li>framework(框架)</li>
</ul></li>
<li>本节主要介绍directive(指令)相关知识.</li>
<li>所谓directive,分为两种:
<ul class="org-ul">
<li>内置的指令,常用的有v-bind, v-model, v-for等</li>
<li><p>
自定义指令,也就是使用directive函数自己创建的指令,自定义指令通常用于封装复杂的 DOM 操作逻辑,比如下
面的代码,就是自动聚焦到input,通过自己创建的v-focuse指令
</p>
<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #531ab6;">!doctype</span> html&gt;
&lt;<span style="color: #721045;">html</span> <span style="color: #005e8b;">lang</span>=<span style="color: #3548cf;">"en"</span>&gt;
  &lt;<span style="color: #721045;">head</span>&gt;
    &lt;<span style="color: #721045;">meta</span> <span style="color: #005e8b;">charset</span>=<span style="color: #3548cf;">"UTF-8"</span> /&gt;
    &lt;<span style="color: #721045;">meta</span> <span style="color: #005e8b;">name</span>=<span style="color: #3548cf;">"viewport"</span> <span style="color: #005e8b;">content</span>=<span style="color: #3548cf;">"width=device-width, initial-scale=1.0"</span> /&gt;
    &lt;<span style="color: #721045;">title</span>&gt;<span style="font-weight: bold; text-decoration: underline;">Directive: Auto Focus</span>&lt;/<span style="color: #721045;">title</span>&gt;
    &lt;<span style="color: #721045;">script</span> <span style="color: #005e8b;">src</span>=<span style="color: #3548cf;">"https://unpkg.com/vue@3/dist/vue.global.js"</span>&gt;&lt;/<span style="color: #721045;">script</span>&gt;
    &lt;<span style="color: #721045;">style</span>&gt;
      h3 {
        color: #992753;
      }
    &lt;/<span style="color: #721045;">style</span>&gt;
  &lt;/<span style="color: #721045;">head</span>&gt;
  &lt;<span style="color: #721045;">body</span>&gt;
    &lt;<span style="color: #721045;">div</span> <span style="color: #005e8b;">id</span>=<span style="color: #3548cf;">"app"</span>&gt;
      &lt;<span style="color: #721045;">h3</span>&gt;<span style="font-style: italic; text-decoration: underline;">Directive: Auto Focus</span>&lt;/<span style="color: #721045;">h3</span>&gt;
      &lt;<span style="color: #721045;">input</span> v-focus <span style="color: #005e8b;">placehoolder</span>=<span style="color: #3548cf;">"Auto focus when loading"</span> /&gt;
      &lt;<span style="color: #721045;">p</span>&gt;{{ count }}&lt;/<span style="color: #721045;">p</span>&gt;
    &lt;/<span style="color: #721045;">div</span>&gt;

    &lt;<span style="color: #721045;">script</span>&gt;
      const { ref, createApp } = Vue; // &#20174; Vue &#20013;&#35299;&#26500;&#20986;&#38656;&#35201;&#30340;API

      // &#21019;&#24314; Vue &#24212;&#29992;
      const app = createApp({
        setup() {
          const count = ref(0);
          return {
            count,
          };
        },
      });
      app.directive("focus", {
        mounted(el) {
          el.focus(); // auto focus
        },
      });

      // &#25346;&#36733;&#21040; #app
      app.mount("#app");
    &lt;/<span style="color: #721045;">script</span>&gt;
  &lt;/<span style="color: #721045;">body</span>&gt;
&lt;/<span style="color: #721045;">html</span>&gt;
</pre>
</div></li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-org76a5e90" class="outline-3">
<h3 id="org76a5e90"><span class="section-number-3">4.14.</span> 代码封装之自定义hook (钩子)</h3>
<div class="outline-text-3" id="text-4-14">
<ul class="org-ul">
<li>Hook 是以 use 为前缀命名的函数（如 useFetch、useCounter），用于封装响应式状态、副作用或业务逻辑。
它通过组合式 API（如 ref、reactive、onMounted）实现逻辑复用，解决了 Vue2 中 Mixin 的命名冲突、逻辑
分散等问题</li>
<li>下面的例子中,我们把经典的count计数逻辑包装到hook里面
<ul class="org-ul">
<li><p>
hook在项目中的位置是src/hooks/useCounter.ts
</p>
<div class="org-src-container">
<pre class="src src-typescript"><span style="color: #531ab6;">import</span> <span style="color: #000000;">{</span> ref <span style="color: #000000;">}</span> <span style="color: #531ab6;">from</span> <span style="color: #3548cf;">'vue'</span>

<span style="color: #531ab6;">export</span> <span style="color: #531ab6;">function</span> <span style="color: #721045;">useCounter</span><span style="color: #000000;">()</span> <span style="color: #000000;">{</span>
  <span style="color: #531ab6;">const</span> <span style="color: #005e8b;">count</span> = <span style="color: #721045;">ref</span><span style="color: #dd22dd;">(</span>0<span style="color: #dd22dd;">)</span>

  <span style="color: #531ab6;">const</span> <span style="color: #005e8b;">increment</span> = <span style="color: #dd22dd;">()</span> <span style="color: #531ab6;">=&gt;</span> <span style="color: #dd22dd;">{</span>
    count.value++
  <span style="color: #dd22dd;">}</span>

  <span style="color: #531ab6;">const</span> <span style="color: #005e8b;">decrement</span> = <span style="color: #dd22dd;">()</span> <span style="color: #531ab6;">=&gt;</span> <span style="color: #dd22dd;">{</span>
    count.value--
  <span style="color: #dd22dd;">}</span>

  <span style="color: #531ab6;">return</span> <span style="color: #dd22dd;">{</span> count, increment, decrement<span style="color: #dd22dd;">}</span>
<span style="color: #000000;">}</span>
</pre>
</div></li>
<li><p>
定义之后,我们就可以在App.vue里面使用这个hook了,代码如下
</p>
<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #721045;">script</span> setup <span style="color: #005e8b;">lang</span>=<span style="color: #3548cf;">"ts"</span>&gt;
import { useCounter } from './hooks/useCounter'
const { count, increment, decrement } = useCounter()
&lt;/<span style="color: #721045;">script</span>&gt;

&lt;<span style="color: #721045;">template</span>&gt;
  &lt;<span style="color: #721045;">h2</span>&gt;<span style="font-weight: bold; font-style: italic; text-decoration: underline;">App Title</span>&lt;/<span style="color: #721045;">h2</span>&gt;
  &lt;<span style="color: #721045;">p</span>&gt;Count: {{ count }}&lt;/<span style="color: #721045;">p</span>&gt;
  &lt;<span style="color: #721045;">button</span> @click=<span style="color: #3548cf;">"increment"</span>&gt;Increment&lt;/<span style="color: #721045;">button</span>&gt;
  &lt;<span style="color: #721045;">button</span> @click=<span style="color: #3548cf;">"decrement"</span>&gt;Decrement&lt;/<span style="color: #721045;">button</span>&gt;
&lt;/<span style="color: #721045;">template</span>&gt;

&lt;<span style="color: #721045;">style</span> scoped&gt;
p {
  background: #ccc;
}
div :deep(h3) {
  font-size: 50px;
}
&lt;/<span style="color: #721045;">style</span>&gt;
</pre>
</div></li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-orge5c28ff" class="outline-3">
<h3 id="orge5c28ff"><span class="section-number-3">4.15.</span> 代码封装之plugin (插件)</h3>
<div class="outline-text-3" id="text-4-15">
<ul class="org-ul">
<li>Vue 插件是一种可以增强 Vue 应用功能的机制。它通常用于向应用中注册全局的功能，比如：
<ul class="org-ul">
<li>注册全局组件。</li>
<li>添加全局方法或属性。</li>
<li>注册自定义指令。</li>
<li>增强 Vue 应用的功能，例如集成第三方库。</li>
</ul></li>
</ul>
</div>
</div>
</div>
<div id="outline-container-orge075e1c" class="outline-2">
<h2 id="orge075e1c"><span class="section-number-2">5.</span> Chapter 05: Vue路由</h2>
<div class="outline-text-2" id="text-5">
<ul class="org-ul">
<li>程序开发分为后端路由和前端路由
<ul class="org-ul">
<li>后端路由: 在传统MVC架构的Web开发中,路由规则由后台设置,后端路由先通过用户请求的URL分发大具体处理
程序中,然后返回一个新页面.每次新页面都会刷新,对网络要求高</li>
<li>前端路由: 其原理是不同路由对应的不用页面内容有前端处理,后端值需要返回动态数据,实现用户访问不同的
URL在前台切换页面显示不同的内容</li>
</ul></li>
</ul>
</div>
<div id="outline-container-orgb2643a4" class="outline-3">
<h3 id="orgb2643a4"><span class="section-number-3">5.1.</span> 路由的概念与核心功能</h3>
<div class="outline-text-3" id="text-5-1">
<ul class="org-ul">
<li>路由是前端应用中的核心内容,随着页面增多功能不断增强,单纯的利用组件切换页面已经无法满足应用程序的开
发,扩展和维护需求.需要使用路由</li>
<li>通过路由导航,用户可以管理应用中不断增多的模块内容,并且可以根据业务的需求,在各个不同的模块之间进行自
由切换操作</li>
<li><p>
相比于前一章,我们需要增加一个依赖vue-router
</p>
<div class="org-src-container">
<pre class="src src-diff">--- <span style="font-weight: bold;">package.json</span>        2025-05-19 10:53:32
+++ <span style="font-weight: bold;">/Users/fenghaoran/github/vbp/code/ch05/vbp-ch5/package.json</span> 2025-05-21 15:39:31
<span style="background-color: #dfd5cf; font-weight: bold;">@@ -13,7 +13,8 @@</span>
     "format": "prettier --write src/"
   },
   "dependencies": {
<span style="color: #aa2222; background-color: #f4d0cf;">-</span><span style="color: #8f1313; background-color: #f4d0cf;">    "vue": "^3.5.13"</span>
<span style="color: #006700; background-color: #c3ebc1;">+</span><span style="color: #005000; background-color: #c3ebc1;">    "vue": "^3.5.13"</span><span style="color: #005000; background-color: #acd6a5;">,</span><span style="color: #005000; background-color: #acd6a5;">
</span><span style="color: #005000; background-color: #acd6a5;">+</span><span style="color: #005000; background-color: #acd6a5;">    "vue-router": "^4.5.0"</span>
   },
   "devDependencies": {
     "@tsconfig/node22": "^22.0.1",
</pre>
</div></li>
</ul>
</div>
</div>
<div id="outline-container-orged1da81" class="outline-3">
<h3 id="orged1da81"><span class="section-number-3">5.2.</span> 动态组件加载</h3>
<div class="outline-text-3" id="text-5-2">
<ul class="org-ul">
<li>为了学习新内容,我们使用 <code>npm init vue@latest vbp-ch5</code> 创建一个新的项目,并且:
<ul class="org-ul">
<li>首先删除components文件夹里面的所有文件, 删除views文件夹里面的所有文件</li>
<li><p>
然后我们在index.html引入bootstrap
</p>
<div class="org-src-container">
<pre class="src src-diff">--- <span style="font-weight: bold;">a/code/ch05/vbp-ch5/index.html</span>
+++ <span style="font-weight: bold;">b/code/ch05/vbp-ch5/index.html</span>
<span style="background-color: #dfd5cf; font-weight: bold;">@@ -4,6 +4,7 @@</span>
     &lt;meta charset="UTF-8"&gt;
     &lt;link rel="icon" href="/favicon.ico"&gt;
     &lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;
<span style="color: #006700; background-color: #c3ebc1;">+</span><span style="color: #005000; background-color: #c3ebc1;">    &lt;link href="https://cdn.bootcdn.net/ajax/libs/twitter-bootstrap/5.1.3/css/bootstrap.min.css" rel="stylesheet" /&gt;</span>
     &lt;title&gt;Vite App&lt;/title&gt;
   &lt;/head&gt;
   &lt;body&gt;
</pre>
</div></li>
<li><p>
在views文件夹下创建Home.vue,内容如下
</p>
<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #721045;">template</span>&gt;
  &lt;<span style="color: #721045;">div</span>&gt;Home&lt;/<span style="color: #721045;">div</span>&gt;
&lt;/<span style="color: #721045;">template</span>&gt;
</pre>
</div></li>
<li><p>
在views文件夹下创建Users.vue,内容如下
</p>
<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #721045;">template</span>&gt;
  &lt;<span style="color: #721045;">div</span>&gt;Users&lt;/<span style="color: #721045;">div</span>&gt;
&lt;/<span style="color: #721045;">template</span>&gt;
</pre>
</div></li>
<li><p>
App.vue内容更改如下
</p>
<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #721045;">script</span> setup <span style="color: #005e8b;">lang</span>=<span style="color: #3548cf;">"ts"</span>&gt;
import Home from './views/Home.vue'
import Users from './views/Users.vue'
import { ref, markRaw } from 'vue'
const selectPage = ref(null)

function changePage(page) {
  selectPage.value = markRaw(page)
}
&lt;/<span style="color: #721045;">script</span>&gt;

&lt;<span style="color: #721045;">template</span>&gt;
  &lt;<span style="color: #721045;">div</span> <span style="color: #005e8b;">class</span>=<span style="color: #3548cf;">"container"</span>&gt;
    &lt;<span style="color: #721045;">button</span> <span style="color: #005e8b;">class</span>=<span style="color: #3548cf;">"btn btn-secondary"</span> @click=<span style="color: #3548cf;">"changePage(Home)"</span>&gt;Change to Home&lt;/<span style="color: #721045;">button</span>&gt;
    &lt;<span style="color: #721045;">button</span> <span style="color: #005e8b;">class</span>=<span style="color: #3548cf;">"btn btn-secondary"</span> @click=<span style="color: #3548cf;">"changePage(Users)"</span>&gt;Change to Users&lt;/<span style="color: #721045;">button</span>&gt;

    &lt;<span style="color: #721045;">Component</span> :is=<span style="color: #3548cf;">"selectPage"</span>&gt;&lt;/<span style="color: #721045;">Component</span>&gt;
  &lt;/<span style="color: #721045;">div</span>&gt;
&lt;/<span style="color: #721045;">template</span>&gt;

&lt;<span style="color: #721045;">style</span> scoped&gt;&lt;/<span style="color: #721045;">style</span>&gt;
</pre>
</div></li>
<li>经过这些改动,我们可以看到"使用按钮切换页面"的效果了</li>
</ul></li>
<li>新版本的vue初始化vite配置文件中,已经内置了动态组件加载,我们可以通过这些更改来简化我们的引入路径
<ul class="org-ul">
<li><p>
我们可以使用`@`来代替src文件夹,所以我们的App.vue可以做如下更改
</p>
<div class="org-src-container">
<pre class="src src-diff">diff --git a/code/ch05/vbp-ch5/src/App.vue b/code/ch05/vbp-ch5/src/App.vue
index 88313b8..771c30b 100644
--- <span style="font-weight: bold;">a/code/ch05/vbp-ch5/src/App.vue</span>
+++ <span style="font-weight: bold;">b/code/ch05/vbp-ch5/src/App.vue</span>
<span style="background-color: #dfd5cf; font-weight: bold;">@@ -1,6 +1,6 @@</span>
 &lt;script setup lang="ts"&gt;
<span style="color: #aa2222; background-color: #f4d0cf;">-</span><span style="color: #8f1313; background-color: #f4d0cf;">import Home from './views/Home.vue'</span>
<span style="color: #aa2222; background-color: #f4d0cf;">-</span><span style="color: #8f1313; background-color: #f4d0cf;">import Users from './views/Users.vue'</span>
<span style="color: #006700; background-color: #c3ebc1;">+</span><span style="color: #005000; background-color: #c3ebc1;">import Home from '@/views/Home.vue'</span>
<span style="color: #006700; background-color: #c3ebc1;">+</span><span style="color: #005000; background-color: #c3ebc1;">import Users from '@/views/Users.vue'</span>
 import { ref, markRaw } from 'vue'
 const selectPage = ref(null)
</pre>
</div></li>

<li><p>
如果在给vite.config增加如下更改,可以让我们引入的时候忽略文件后缀
</p>
<div class="org-src-container">
<pre class="src src-diff">diff --git a/code/ch05/vbp-ch5/vite.config.ts b/code/ch05/vbp-ch5/vite.config.ts
index 4217010..6260b24 100644
--- <span style="font-weight: bold;">a/code/ch05/vbp-ch5/vite.config.ts</span>
+++ <span style="font-weight: bold;">b/code/ch05/vbp-ch5/vite.config.ts</span>
<span style="background-color: #dfd5cf; font-weight: bold;">@@ -14,5 +14,6 @@</span><span style="background-color: #dfd5cf;"> export default defineConfig({</span>
     alias: {
       '@': fileURLToPath(new URL('./src', import.meta.url))
     },
<span style="color: #006700; background-color: #c3ebc1;">+</span><span style="color: #005000; background-color: #c3ebc1;">    extensions: ['.mjs', '.js', '.ts', '.jsx', '.tsx', '.json', '.vue']</span>
   },
 })
</pre>
</div></li>
<li><p>
更改vite.config之后,我们的App.vue可以做如下更改而不报错
</p>
<div class="org-src-container">
<pre class="src src-diff">diff --git a/code/ch05/vbp-ch5/src/App.vue b/code/ch05/vbp-ch5/src/App.vue
index 771c30b..9f08de4 100644
--- <span style="font-weight: bold;">a/code/ch05/vbp-ch5/src/App.vue</span>
+++ <span style="font-weight: bold;">b/code/ch05/vbp-ch5/src/App.vue</span>
<span style="background-color: #dfd5cf; font-weight: bold;">@@ -1,6 +1,6 @@</span>
 &lt;script setup lang="ts"&gt;
<span style="color: #aa2222; background-color: #f4d0cf;">-</span><span style="color: #8f1313; background-color: #f4d0cf;">import Home from '@/views/Home.vue'</span>
<span style="color: #aa2222; background-color: #f4d0cf;">-</span><span style="color: #8f1313; background-color: #f4d0cf;">import Users from '@/views/Users.vue'</span>
<span style="color: #006700; background-color: #c3ebc1;">+</span><span style="color: #005000; background-color: #c3ebc1;">import Home from '@/views/Home'</span>
<span style="color: #006700; background-color: #c3ebc1;">+</span><span style="color: #005000; background-color: #c3ebc1;">import Users from '@/views/Users'</span>
 import { ref, markRaw } from 'vue'
 const selectPage = ref(null)
</pre>
</div></li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-org7750d89" class="outline-3">
<h3 id="org7750d89"><span class="section-number-3">5.3.</span> 配置简单路由</h3>
<div class="outline-text-3" id="text-5-3">
<ul class="org-ul">
<li>路由的主要配置需要的函数,需要从'vue-router'引入,需要在两处进行配置方能起作用:
<ul class="org-ul">
<li><p>
首先在main.ts里面创建router,并且在mount之前引入到app中
</p>
<div class="org-src-container">
<pre class="src src-diff">diff --git a/code/ch05/01/src/main.ts b/code/ch05/01/src/main.ts
index 6e10bf8..192fb24 100644
--- <span style="font-weight: bold;">a/code/ch05/01/src/main.ts</span>
+++ <span style="font-weight: bold;">b/code/ch05/01/src/main.ts</span>
<span style="background-color: #dfd5cf; font-weight: bold;">@@ -2,7 +2,22 @@</span><span style="background-color: #dfd5cf;"> import './assets/main.css'</span>

 import { createApp } from 'vue'
 import App from './App.vue'
<span style="color: #006700; background-color: #c3ebc1;">+</span><span style="color: #005000; background-color: #c3ebc1;">import { createRouter, createWebHashHistory } from 'vue-router'</span>
<span style="color: #006700; background-color: #c3ebc1;">+</span><span style="color: #005000; background-color: #c3ebc1;">import Home from '@/views/Home'</span>
<span style="color: #006700; background-color: #c3ebc1;">+</span><span style="color: #005000; background-color: #c3ebc1;">import Users from '@/views/Users'</span>
<span style="color: #006700; background-color: #c3ebc1;">+</span>
<span style="color: #006700; background-color: #c3ebc1;">+</span><span style="color: #005000; background-color: #c3ebc1;">const routes = [</span>
<span style="color: #006700; background-color: #c3ebc1;">+</span><span style="color: #005000; background-color: #c3ebc1;">  { path: '/', component: Home },</span>
<span style="color: #006700; background-color: #c3ebc1;">+</span><span style="color: #005000; background-color: #c3ebc1;">  { path: '/users', component: Users },</span>
<span style="color: #006700; background-color: #c3ebc1;">+</span><span style="color: #005000; background-color: #c3ebc1;">]</span>
<span style="color: #006700; background-color: #c3ebc1;">+</span>
<span style="color: #006700; background-color: #c3ebc1;">+</span><span style="color: #005000; background-color: #c3ebc1;">const router = createRouter({</span>
<span style="color: #006700; background-color: #c3ebc1;">+</span><span style="color: #005000; background-color: #c3ebc1;">  history: createWebHashHistory(),</span>
<span style="color: #006700; background-color: #c3ebc1;">+</span><span style="color: #005000; background-color: #c3ebc1;">  routes,</span>
<span style="color: #006700; background-color: #c3ebc1;">+</span><span style="color: #005000; background-color: #c3ebc1;">})</span>

 const app = createApp(App)

<span style="color: #006700; background-color: #c3ebc1;">+</span><span style="color: #005000; background-color: #c3ebc1;">app.use(router)</span>
<span style="color: #006700; background-color: #c3ebc1;">+</span>
 app.mount('#app')
</pre>
</div></li>
<li><p>
其次在App.vue中调用,我们发现现在使用"/", "/users"就可以在&lt;router-view&gt;里面展示对应页面的内容了
</p>
<div class="org-src-container">
<pre class="src src-diff">diff --git a/code/ch05/01/src/App.vue b/code/ch05/01/src/App.vue
index 9f08de4..63c5f88 100644
--- <span style="font-weight: bold;">a/code/ch05/01/src/App.vue</span>
+++ <span style="font-weight: bold;">b/code/ch05/01/src/App.vue</span>
<span style="background-color: #dfd5cf; font-weight: bold;">@@ -11,10 +11,10 @@</span><span style="background-color: #dfd5cf;"> function changePage(page) {</span>

 &lt;template&gt;
   &lt;div class="container"&gt;
<span style="color: #aa2222; background-color: #f4d0cf;">-</span><span style="color: #8f1313; background-color: #f4d0cf;">    &lt;button class="btn btn-secondary" @click="changePage(Home)"&gt;Change to Home&lt;/button&gt;</span>
<span style="color: #aa2222; background-color: #f4d0cf;">-</span><span style="color: #8f1313; background-color: #f4d0cf;">    &lt;button class="btn btn-secondary" @click="changePage(Users)"&gt;Change to Users&lt;/button&gt;</span>
<span style="color: #006700; background-color: #c3ebc1;">+</span><span style="color: #005000; background-color: #c3ebc1;">    &lt;router-link to="/" class="btn btn-secondary"&gt;Router Change to Home&lt;/router-link&gt;</span>
<span style="color: #006700; background-color: #c3ebc1;">+</span><span style="color: #005000; background-color: #c3ebc1;">    &lt;router-link to="/users" class="btn btn-secondary"&gt;Router Change to Users&lt;/router-link&gt;</span>

<span style="color: #aa2222; background-color: #f4d0cf;">-</span><span style="color: #8f1313; background-color: #f4d0cf;">    &lt;Component :is="selectPage"&gt;&lt;/Component&gt;</span>
<span style="color: #006700; background-color: #c3ebc1;">+</span><span style="color: #005000; background-color: #c3ebc1;">    &lt;router-view&gt;&lt;/router-view&gt;</span>
   &lt;/div&gt;
 &lt;/template&gt;
</pre>
</div></li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-org7bc5230" class="outline-3">
<h3 id="org7bc5230"><span class="section-number-3">5.4.</span> 路由连接高亮显示</h3>
<div class="outline-text-3" id="text-5-4">
<ul class="org-ul">
<li>当前两个路由button(其实是a link),样式是一样的,无论当前页面选中的是谁,都无法区分是哪个按钮按下的效果</li>
<li>我们想通过各种方式能够体现区别,提高用户体验</li>
</ul>
</div>
<div id="outline-container-orgb19c135" class="outline-4">
<h4 id="orgb19c135"><span class="section-number-4">5.4.1.</span> 利用vue-router模块的内置样式实现路由链接高亮显示</h4>
<div class="outline-text-4" id="text-5-4-1">
<ul class="org-ul">
<li>使用vue-router的时候,被选中的a标签会有router-link-active这个类,我们可以把这个类改成特殊的样式,这样
被选中的a标签就会"与众不同"了
<ul class="org-ul">
<li><p>
我们只需要更改App.vue即可
</p>
<div class="org-src-container">
<pre class="src src-diff">diff --git a/code/ch05/01/src/App.vue b/code/ch05/01/src/App.vue
index 63c5f88..1326dce 100644
--- <span style="font-weight: bold;">a/code/ch05/01/src/App.vue</span>
+++ <span style="font-weight: bold;">b/code/ch05/01/src/App.vue</span>
<span style="background-color: #dfd5cf; font-weight: bold;">@@ -18,4 +18,9 @@</span><span style="background-color: #dfd5cf;"> function changePage(page) {</span>
   &lt;/div&gt;
 &lt;/template&gt;

<span style="color: #aa2222; background-color: #f4d0cf;">-</span><span style="color: #8f1313; background-color: #f4d0cf;">&lt;style scoped&gt;&lt;/style&gt;</span>
<span style="color: #006700; background-color: #c3ebc1;">+</span><span style="color: #005000; background-color: #c3ebc1;">&lt;style scoped&gt;</span>
<span style="color: #005000; background-color: #acd6a5;">+</span><span style="color: #005000; background-color: #acd6a5;">.router-link-active {</span><span style="color: #005000; background-color: #acd6a5;">
</span><span style="color: #005000; background-color: #acd6a5;">+</span><span style="color: #005000; background-color: #acd6a5;">  background-color: #923156;</span><span style="color: #005000; background-color: #acd6a5;">
</span><span style="color: #005000; background-color: #acd6a5;">+</span><span style="color: #005000; background-color: #acd6a5;">  font-weight: bolder;</span><span style="color: #005000; background-color: #acd6a5;">
</span><span style="color: #005000; background-color: #acd6a5;">+</span><span style="color: #005000; background-color: #acd6a5;">}</span><span style="color: #005000; background-color: #acd6a5;">
+</span>&lt;/style&gt;
</pre>
</div></li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-org4e9964a" class="outline-4">
<h4 id="org4e9964a"><span class="section-number-4">5.4.2.</span> 利用active-class属性实现路由链接高亮显示</h4>
<div class="outline-text-4" id="text-5-4-2">
<ul class="org-ul">
<li><p>
有时候我们的项目有总体的高亮样式,如下
</p>
<div class="org-src-container">
<pre class="src src-css"><span style="color: #721045;">.active</span> <span style="color: #000000;">{</span>
  <span style="color: #531ab6;">background-color</span>: <span style="color: #ffffff; background-color: #626126;">#626126</span>;
  <span style="color: #531ab6;">font-weight</span>: bolder;
<span style="color: #000000;">}</span>
</pre>
</div></li>

<li>那么这种情况下,我们只需要给所有的router-link加上active-class="active"就可以了
<ul class="org-ul">
<li><p>
这里我们为了显示对比,只给第一个router-link加上active-class="active",我们会发现最终的效果是只有第一个button在页面被选中的时候,实现了上一节css的高亮样式
</p>
<div class="org-src-container">
<pre class="src src-diff">diff --git a/code/ch05/03/src/App.vue b/code/ch05/03/src/App.vue
index 63c5f88..c704193 100644
--- <span style="font-weight: bold;">a/code/ch05/03/src/App.vue</span>
+++ <span style="font-weight: bold;">b/code/ch05/03/src/App.vue</span>
<span style="background-color: #dfd5cf; font-weight: bold;">@@ -11,10 +11,12 @@</span><span style="background-color: #dfd5cf;"> function changePage(page) {</span>

 &lt;template&gt;
   &lt;div class="container"&gt;
<span style="color: #aa2222; background-color: #f4d0cf;">-</span><span style="color: #8f1313; background-color: #f4d0cf;">    &lt;router-link to="/" class="btn btn-secondary"&gt;Router Change to Home&lt;/router-link&gt;</span>
<span style="color: #006700; background-color: #c3ebc1;">+</span><span style="color: #005000; background-color: #c3ebc1;">    &lt;router-link active-class="active" to="/" class="btn btn-secondary"</span>
<span style="color: #006700; background-color: #c3ebc1;">+</span><span style="color: #005000; background-color: #c3ebc1;">      &gt;Router Change to Home&lt;/router-link</span>
<span style="color: #006700; background-color: #c3ebc1;">+</span><span style="color: #005000; background-color: #c3ebc1;">    &gt;</span>
     &lt;router-link to="/users" class="btn btn-secondary"&gt;Router Change to Users&lt;/router-link&gt;

     &lt;router-view&gt;&lt;/router-view&gt;
   &lt;/div&gt;
 &lt;/template&gt;
</pre>
</div></li>
<li><p>
我们当然也可以把所有的router-link都加上active-class="active",但是我们有更加方便的办法,就是更改main.ts
里面createRouter的参数,就可以自动在所有router-link里面添加active-class="active",所以之前添加的就
可以删掉了
</p>
<div class="org-src-container">
<pre class="src src-diff">diff --git a/code/ch05/04/src/App.vue b/code/ch05/04/src/App.vue
index c704193..d45e3b9 100644
--- <span style="font-weight: bold;">a/code/ch05/04/src/App.vue</span>
+++ <span style="font-weight: bold;">b/code/ch05/04/src/App.vue</span>
<span style="background-color: #dfd5cf; font-weight: bold;">@@ -11,7 +11,7 @@</span><span style="background-color: #dfd5cf;"> function changePage(page) {</span>

 &lt;template&gt;
   &lt;div class="container"&gt;
<span style="color: #aa2222; background-color: #f4d0cf;">-</span><span style="color: #8f1313; background-color: #f4d0cf;">    &lt;router-link </span><span style="color: #8f1313; background-color: #f3b5a7;">active-class="active"</span><span style="color: #8f1313; background-color: #f4d0cf;"> to="/" class="btn btn-secondary"</span>
<span style="color: #006700; background-color: #c3ebc1;">+</span><span style="color: #005000; background-color: #c3ebc1;">    &lt;router-link to="/" class="btn btn-secondary"</span>
       &gt;Router Change to Home&lt;/router-link
     &gt;
     &lt;router-link to="/users" class="btn btn-secondary"&gt;Router Change to Users&lt;/router-link&gt;
diff --git a/code/ch05/04/src/main.ts b/code/ch05/04/src/main.ts
index 14f6507..1af7961 100644
--- <span style="font-weight: bold;">a/code/ch05/04/src/main.ts</span>
+++ <span style="font-weight: bold;">b/code/ch05/04/src/main.ts</span>
<span style="background-color: #dfd5cf; font-weight: bold;">@@ -14,6 +14,7 @@</span><span style="background-color: #dfd5cf;"> const routes = [</span>
 const router = createRouter({
   history: createWebHashHistory(),
   routes,
<span style="color: #006700; background-color: #c3ebc1;">+</span><span style="color: #005000; background-color: #c3ebc1;">  linkActiveClass: 'active',</span>
 })
</pre>
</div></li>
</ul></li>
</ul>
</div>
</div>
</div>
<div id="outline-container-orgc101e98" class="outline-3">
<h3 id="orgc101e98"><span class="section-number-3">5.5.</span> 嵌套路由</h3>
<div class="outline-text-3" id="text-5-5">
<ul class="org-ul">
<li>实际业务当中,不可能只有一层路由,而是可能进行路由嵌套.</li>
<li><p>
所谓路由嵌套,是指第一层路由的结果页面里面还是有路由.我们用下面的图来进行讲解
</p>
<pre class="example" id="orgf9e4a91">
+--------------------------------------------+
|  First Route Link Area                     |
|                                            |
|  +--------------------------------------+  |
|  |  First router-view Area              |  |
|  |               +--------------------+ |  |
|  |  Second Route |  Second router-view| |  |
|  |  Link Area    |  Area              | |  |
|  |               |                    | |  |
|  |               +--------------------+ |  |
|  +--------------------------------------+  |
+--------------------------------------------+
</pre></li>
<li>为了达到上述效果,我们要做如下的改动:
<ul class="org-ul">
<li>首先把创建文件夹src/views/user,并且把用户相关的代码都放到这个文件夹里面</li>
<li><p>
第一个放到src/views/user的文件是Users.vue,而且进行重大修改,修改后如下.
</p>
<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #721045;">template</span>&gt;
  &lt;<span style="color: #721045;">div</span>&gt;
    &lt;<span style="color: #721045;">nav</span> <span style="color: #005e8b;">aria-label</span>=<span style="color: #3548cf;">"breadcrumb"</span>&gt;
      &lt;<span style="color: #721045;">ol</span> <span style="color: #005e8b;">class</span>=<span style="color: #3548cf;">"breadcrumb"</span>&gt;
        &lt;<span style="color: #721045;">li</span> <span style="color: #005e8b;">class</span>=<span style="color: #3548cf;">"breadcrum-item"</span>&gt;
          &lt;<span style="color: #721045;">router-link</span> <span style="color: #005e8b;">to</span>=<span style="color: #3548cf;">"/"</span> <span style="color: #005e8b;">class</span>=<span style="color: #3548cf;">"text-decoration-none"</span>&gt;Home&lt;/<span style="color: #721045;">router-link</span>&gt;
        &lt;/<span style="color: #721045;">li</span>&gt;
        &lt;<span style="color: #721045;">li</span> <span style="color: #005e8b;">class</span>=<span style="color: #3548cf;">"breadcrum-item active"</span>&gt;
          &lt;<span style="color: #721045;">router-link</span> <span style="color: #005e8b;">to</span>=<span style="color: #3548cf;">"/users"</span> <span style="color: #005e8b;">class</span>=<span style="color: #3548cf;">"text-decoration-none"</span>&gt;User&lt;/<span style="color: #721045;">router-link</span>&gt;
        &lt;/<span style="color: #721045;">li</span>&gt;
      &lt;/<span style="color: #721045;">ol</span>&gt;
    &lt;/<span style="color: #721045;">nav</span>&gt;
  &lt;/<span style="color: #721045;">div</span>&gt;
  &lt;<span style="color: #721045;">div</span> <span style="color: #005e8b;">class</span>=<span style="color: #3548cf;">"row"</span>&gt;
    &lt;<span style="color: #721045;">div</span> <span style="color: #005e8b;">class</span>=<span style="color: #3548cf;">"col-3"</span>&gt;
      &lt;<span style="color: #721045;">h1</span>&gt;<span style="font-weight: bold; text-decoration: underline;">User List</span>&lt;/<span style="color: #721045;">h1</span>&gt;
      &lt;<span style="color: #721045;">div</span> <span style="color: #005e8b;">class</span>=<span style="color: #3548cf;">"list-group"</span>&gt;
        &lt;<span style="color: #721045;">router-link</span> <span style="color: #005e8b;">to</span>=<span style="color: #3548cf;">"/users/detail"</span> <span style="color: #005e8b;">class</span>=<span style="color: #3548cf;">"list-group-item list-group-item-action"</span>
          &gt;User 1&lt;/<span style="color: #721045;">router-link</span>
        &gt;
        &lt;<span style="color: #721045;">router-link</span> <span style="color: #005e8b;">to</span>=<span style="color: #3548cf;">"/users/detail"</span> <span style="color: #005e8b;">class</span>=<span style="color: #3548cf;">"list-group-item list-group-item-action"</span>
          &gt;User 2&lt;/<span style="color: #721045;">router-link</span>
        &gt;
      &lt;/<span style="color: #721045;">div</span>&gt;
    &lt;/<span style="color: #721045;">div</span>&gt;
    &lt;<span style="color: #721045;">div</span> <span style="color: #005e8b;">class</span>=<span style="color: #3548cf;">"col-9"</span>&gt;
      &lt;<span style="color: #721045;">router-view</span>&gt;&lt;/<span style="color: #721045;">router-view</span>&gt;
    &lt;/<span style="color: #721045;">div</span>&gt;
  &lt;/<span style="color: #721045;">div</span>&gt;
&lt;/<span style="color: #721045;">template</span>&gt;
</pre>
</div></li>
<li>注意,本来Users.vue就是App.vue中的router-view,但是当前Users.vue里面也有router-view了,这就是所谓的
嵌套</li>
<li><p>
在views/users里面创建第一个文件UserStart.vue,这个是嵌套的router-view默认的显示
</p>
<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #721045;">template</span>&gt;
  &lt;<span style="color: #721045;">div</span>&gt;
    &lt;<span style="color: #721045;">h1</span>&gt;<span style="font-weight: bold; text-decoration: underline;">UserStart</span>&lt;/<span style="color: #721045;">h1</span>&gt;
  &lt;/<span style="color: #721045;">div</span>&gt;
&lt;/<span style="color: #721045;">template</span>&gt;
</pre>
</div></li>
<li><p>
在views/users里面创建第二个文件UserDetail.vue,这个是嵌套的router-view点击具体信息后的显示,在UserDetail
里面,进行了第三次嵌套
</p>
<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #721045;">template</span>&gt;
  &lt;<span style="color: #721045;">div</span>&gt;
    &lt;<span style="color: #721045;">h1</span>&gt;<span style="font-weight: bold; text-decoration: underline;">UserDetail</span>&lt;/<span style="color: #721045;">h1</span>&gt;
    &lt;<span style="color: #721045;">router-link</span> <span style="color: #005e8b;">to</span>=<span style="color: #3548cf;">"/users/edit"</span> <span style="color: #005e8b;">class</span>=<span style="color: #3548cf;">"btn btn-primary"</span>&gt;Edit User&lt;/<span style="color: #721045;">router-link</span>&gt;
  &lt;/<span style="color: #721045;">div</span>&gt;
&lt;/<span style="color: #721045;">template</span>&gt;
</pre>
</div></li>
<li><p>
在views/users里面创建第二个文件UserEdit.vue,这个是嵌套的router-view点击修改信息后的显示.
</p>
<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #721045;">template</span>&gt;
  &lt;<span style="color: #721045;">div</span>&gt;
    &lt;<span style="color: #721045;">h1</span>&gt;<span style="font-weight: bold; text-decoration: underline;">UserEdit</span>&lt;/<span style="color: #721045;">h1</span>&gt;
  &lt;/<span style="color: #721045;">div</span>&gt;
&lt;/<span style="color: #721045;">template</span>&gt;
</pre>
</div></li>
<li><p>
同时我们要把新加的文件都给与path,新的path设置成老的/users的子path,用children来指代
</p>
<div class="org-src-container">
<pre class="src src-diff">diff --git a/code/ch05/05/src/main.ts b/code/ch05/05/src/main.ts
index 1af7961..6234bdc 100644
--- <span style="font-weight: bold;">a/code/ch05/05/src/main.ts</span>
+++ <span style="font-weight: bold;">b/code/ch05/05/src/main.ts</span>
<span style="background-color: #dfd5cf; font-weight: bold;">@@ -4,11 +4,22 @@</span><span style="background-color: #dfd5cf;"> import { createApp } from 'vue'</span>
 import App from './App.vue'
 import { createRouter, createWebHashHistory } from 'vue-router'
 import Home from '@/views/Home'
<span style="color: #aa2222; background-color: #f4d0cf;">-</span><span style="color: #8f1313; background-color: #f4d0cf;">import Users from '@/views/Users'</span>
<span style="color: #006700; background-color: #c3ebc1;">+</span><span style="color: #005000; background-color: #c3ebc1;">import Users from '@/views/user/Users'</span>
<span style="color: #006700; background-color: #c3ebc1;">+</span><span style="color: #005000; background-color: #c3ebc1;">import UserStart from '@/views/user/UserStart'</span>
<span style="color: #006700; background-color: #c3ebc1;">+</span><span style="color: #005000; background-color: #c3ebc1;">import UserDetail from '@/views/user/UserDetail'</span>
<span style="color: #006700; background-color: #c3ebc1;">+</span><span style="color: #005000; background-color: #c3ebc1;">import UserEdit from '@/views/user/UserEdit'</span>

 const routes = [
   { path: '/', component: Home },
<span style="color: #aa2222; background-color: #f4d0cf;">-</span><span style="color: #8f1313; background-color: #f4d0cf;">  { path: '/users', component: Users },</span>
<span style="color: #006700; background-color: #c3ebc1;">+</span><span style="color: #005000; background-color: #c3ebc1;">  {</span>
<span style="color: #006700; background-color: #c3ebc1;">+</span><span style="color: #005000; background-color: #c3ebc1;">    path: '/users',</span>
<span style="color: #006700; background-color: #c3ebc1;">+</span><span style="color: #005000; background-color: #c3ebc1;">    component: Users,</span>
<span style="color: #006700; background-color: #c3ebc1;">+</span><span style="color: #005000; background-color: #c3ebc1;">    children: [</span>
<span style="color: #006700; background-color: #c3ebc1;">+</span><span style="color: #005000; background-color: #c3ebc1;">      { path: '', component: UserStart },</span>
<span style="color: #006700; background-color: #c3ebc1;">+</span><span style="color: #005000; background-color: #c3ebc1;">      { path: 'detail', component: UserDetail },</span>
<span style="color: #006700; background-color: #c3ebc1;">+</span><span style="color: #005000; background-color: #c3ebc1;">      { path: 'edit', component: UserEdit },</span>
<span style="color: #006700; background-color: #c3ebc1;">+</span><span style="color: #005000; background-color: #c3ebc1;">    ],</span>
<span style="color: #006700; background-color: #c3ebc1;">+</span><span style="color: #005000; background-color: #c3ebc1;">  },</span>
 ]
</pre>
</div></li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-org35a5629" class="outline-3">
<h3 id="org35a5629"><span class="section-number-3">5.6.</span> 动态路由传参</h3>
<div class="outline-text-3" id="text-5-6">
<ul class="org-ul">
<li>上一节我们已经做到能够跳转到不同的页面,但是没有区分不同用户,因为不同用户的url是动态的,和用户id相关的</li>
<li>为了能够做到不同用户调转不同的页面,我们需要做如下的更改
<ul class="org-ul">
<li><p>
首先我们的Users.vue先自己创造三个用户id,然后需要使用v-for来遍历,而不是挨个列出用户.注意这里的":to"
是"v-bind:to"的缩写
</p>
<div class="org-src-container">
<pre class="src src-diff">diff --git a/code/ch05/07/src/views/user/Users.vue b/code/ch05/07/src/views/user/Users.vue
index 65f11d9..a0a1eeb 100644
--- <span style="font-weight: bold;">a/code/ch05/07/src/views/user/Users.vue</span>
+++ <span style="font-weight: bold;">b/code/ch05/07/src/views/user/Users.vue</span>
<span style="background-color: #dfd5cf; font-weight: bold;">@@ -1,3 +1,8 @@</span>
<span style="color: #006700; background-color: #c3ebc1;">+</span><span style="color: #005000; background-color: #c3ebc1;">&lt;script setup lang="ts"&gt;</span>
<span style="color: #006700; background-color: #c3ebc1;">+</span><span style="color: #005000; background-color: #c3ebc1;">import { ref } from 'vue'</span>
<span style="color: #006700; background-color: #c3ebc1;">+</span><span style="color: #005000; background-color: #c3ebc1;">const ids = ref([1, 2, 3])</span>
<span style="color: #006700; background-color: #c3ebc1;">+</span><span style="color: #005000; background-color: #c3ebc1;">&lt;/script&gt;</span>
<span style="color: #006700; background-color: #c3ebc1;">+</span>
 &lt;template&gt;
   &lt;div&gt;
     &lt;nav aria-label="breadcrumb"&gt;
<span style="background-color: #dfd5cf; font-weight: bold;">@@ -15,12 +20,14 @@</span>
     &lt;div class="col-3"&gt;
       &lt;h1&gt;User List&lt;/h1&gt;
       &lt;div class="list-group"&gt;
<span style="color: #aa2222; background-color: #f4d0cf;">-</span><span style="color: #8f1313; background-color: #f4d0cf;">        &lt;router-link </span><span style="color: #8f1313; background-color: #f3b5a7;">to="/users/detail" class="list</span><span style="color: #8f1313; background-color: #f4d0cf;">-</span><span style="color: #8f1313; background-color: #f3b5a7;">group-item</span><span style="color: #8f1313; background-color: #f4d0cf;"> </span><span style="color: #8f1313; background-color: #f3b5a7;">list-group-item-action"</span>
<span style="color: #8f1313; background-color: #f3b5a7;">-</span><span style="color: #8f1313; background-color: #f4d0cf;">          </span><span style="color: #8f1313; background-color: #f3b5a7;">&gt;User</span><span style="color: #8f1313; background-color: #f4d0cf;"> </span><span style="color: #8f1313; background-color: #f3b5a7;">1&lt;/router</span><span style="color: #8f1313; background-color: #f4d0cf;">-</span><span style="color: #8f1313; background-color: #f3b5a7;">link</span>
<span style="color: #8f1313; background-color: #f3b5a7;">-</span><span style="color: #8f1313; background-color: #f4d0cf;">        </span><span style="color: #8f1313; background-color: #f3b5a7;">&gt;</span>
<span style="color: #aa2222; background-color: #f4d0cf;">-</span><span style="color: #8f1313; background-color: #f4d0cf;">        </span><span style="color: #8f1313; background-color: #f3b5a7;">&lt;router-link</span><span style="color: #8f1313; background-color: #f4d0cf;"> to="/users/</span><span style="color: #8f1313; background-color: #f3b5a7;">detail</span><span style="color: #8f1313; background-color: #f4d0cf;">" class="list-group-item list-group-item-action"</span>
<span style="color: #8f1313; background-color: #f3b5a7;">-</span><span style="color: #8f1313; background-color: #f3b5a7;">          &gt;User 2&lt;/router-link</span>
<span style="color: #006700; background-color: #c3ebc1;">+</span><span style="color: #005000; background-color: #c3ebc1;">        &lt;router-link</span>
<span style="color: #006700; background-color: #c3ebc1;">+</span><span style="color: #005000; background-color: #c3ebc1;">          </span><span style="color: #005000; background-color: #acd6a5;">v-for="id</span><span style="color: #005000; background-color: #c3ebc1;"> </span><span style="color: #005000; background-color: #acd6a5;">in</span><span style="color: #005000; background-color: #c3ebc1;"> </span><span style="color: #005000; background-color: #acd6a5;">ids"</span>
<span style="color: #006700; background-color: #c3ebc1;">+</span><span style="color: #005000; background-color: #c3ebc1;">          </span><span style="color: #005000; background-color: #acd6a5;">:key="id"</span>
<span style="color: #006700; background-color: #c3ebc1;">+</span><span style="color: #005000; background-color: #c3ebc1;">          </span><span style="color: #005000; background-color: #acd6a5;">:</span><span style="color: #005000; background-color: #c3ebc1;">to="</span><span style="color: #005000; background-color: #acd6a5;">`</span><span style="color: #005000; background-color: #c3ebc1;">/users/</span><span style="color: #005000; background-color: #acd6a5;">${id}`</span><span style="color: #005000; background-color: #c3ebc1;">"</span>
<span style="color: #005000; background-color: #acd6a5;">+</span><span style="color: #005000; background-color: #c3ebc1;">          class="list-group-item list-group-item-action"</span>
         &gt;
<span style="color: #006700; background-color: #c3ebc1;">+</span><span style="color: #005000; background-color: #c3ebc1;">          User {{ id }}</span>
<span style="color: #006700; background-color: #c3ebc1;">+</span><span style="color: #005000; background-color: #c3ebc1;">        &lt;/router-link&gt;</span>
       &lt;/div&gt;
     &lt;/div&gt;
     &lt;div class="col-9"&gt;
</pre>
</div></li>
<li><p>
UserDetail页面由于有跳转,也需要更新,注意更新的时候我们能从 $route.param 里面获取传递的id
</p>
<div class="org-src-container">
<pre class="src src-diff">diff --git a/code/ch05/07/src/views/user/UserDetail.vue b/code/ch05/07/src/views/user/UserDetail.vue
index 4355984..300a7e7 100644
--- <span style="font-weight: bold;">a/code/ch05/07/src/views/user/UserDetail.vue</span>
+++ <span style="font-weight: bold;">b/code/ch05/07/src/views/user/UserDetail.vue</span>
<span style="background-color: #dfd5cf; font-weight: bold;">@@ -1,6 +1,9 @@</span>
 &lt;template&gt;
   &lt;div&gt;
     &lt;h1&gt;UserDetail&lt;/h1&gt;
<span style="color: #aa2222; background-color: #f4d0cf;">-</span><span style="color: #8f1313; background-color: #f4d0cf;">    &lt;router-link to="/users/edit" class="btn btn-primary"&gt;Edit User&lt;/router-link&gt;</span>
<span style="color: #006700; background-color: #c3ebc1;">+</span><span style="color: #005000; background-color: #c3ebc1;">    &lt;</span><span style="color: #005000; background-color: #acd6a5;">p&gt;User ID: {{ $route.params.id }}&lt;/p&gt;</span><span style="color: #005000; background-color: #acd6a5;">
</span><span style="color: #005000; background-color: #acd6a5;">+</span><span style="color: #005000; background-color: #acd6a5;">    &lt;</span><span style="color: #005000; background-color: #c3ebc1;">router-link </span><span style="color: #005000; background-color: #acd6a5;">:</span><span style="color: #005000; background-color: #c3ebc1;">to="</span><span style="color: #005000; background-color: #acd6a5;">`</span><span style="color: #005000; background-color: #c3ebc1;">/users/</span><span style="color: #005000; background-color: #acd6a5;">${$route.params.id}/</span><span style="color: #005000; background-color: #c3ebc1;">edit</span><span style="color: #005000; background-color: #acd6a5;">`</span><span style="color: #005000; background-color: #c3ebc1;">" class="btn btn-primary"</span>
<span style="color: #005000; background-color: #acd6a5;">+</span><span style="color: #005000; background-color: #c3ebc1;">      &gt;Edit User</span>
<span style="color: #005000; background-color: #acd6a5;">+</span><span style="color: #005000; background-color: #c3ebc1;">    &lt;/router-link&gt;</span>
   &lt;/div&gt;
 &lt;/template&gt;
</pre>
</div></li>
<li><p>
UserEdit页面当前没有其他逻辑,就展示下id表示我们在编辑某个用户就可以了
</p>
<div class="org-src-container">
<pre class="src src-diff">diff --git a/code/ch05/07/src/views/user/UserEdit.vue b/code/ch05/07/src/views/user/UserEdit.vue
index a6d28dc..3271099 100644
--- <span style="font-weight: bold;">a/code/ch05/07/src/views/user/UserEdit.vue</span>
+++ <span style="font-weight: bold;">b/code/ch05/07/src/views/user/UserEdit.vue</span>
<span style="background-color: #dfd5cf; font-weight: bold;">@@ -1,5 +1,6 @@</span>
 &lt;template&gt;
   &lt;div&gt;
     &lt;h1&gt;UserEdit&lt;/h1&gt;
<span style="color: #006700; background-color: #c3ebc1;">+</span><span style="color: #005000; background-color: #c3ebc1;">    &lt;p&gt; User ID : {{ $route.params.id }} &lt;/p&gt;</span>
   &lt;/div&gt;
 &lt;/template&gt;
</pre>
</div></li>
<li><p>
最后,我们需要把访问具体页面的path改动一下,毕竟我们现在是动态的url了
</p>
<div class="org-src-container">
<pre class="src src-diff">diff --git a/code/ch05/07/src/main.ts b/code/ch05/07/src/main.ts
index 6234bdc..d806556 100644
--- <span style="font-weight: bold;">a/code/ch05/07/src/main.ts</span>
+++ <span style="font-weight: bold;">b/code/ch05/07/src/main.ts</span>
<span style="background-color: #dfd5cf; font-weight: bold;">@@ -16,8 +16,8 @@</span><span style="background-color: #dfd5cf;"> const routes = [</span>
     component: Users,
     children: [
       { path: '', component: UserStart },
<span style="color: #aa2222; background-color: #f4d0cf;">-</span><span style="color: #8f1313; background-color: #f4d0cf;">      { path: '</span><span style="color: #8f1313; background-color: #f3b5a7;">detail</span><span style="color: #8f1313; background-color: #f4d0cf;">', component: UserDetail },</span>
<span style="color: #aa2222; background-color: #f4d0cf;">-</span><span style="color: #8f1313; background-color: #f4d0cf;">      { path: 'edit', component: UserEdit },</span>
<span style="color: #006700; background-color: #c3ebc1;">+</span><span style="color: #005000; background-color: #c3ebc1;">      { path: '</span><span style="color: #005000; background-color: #acd6a5;">:id</span><span style="color: #005000; background-color: #c3ebc1;">', component: UserDetail },</span>
<span style="color: #006700; background-color: #c3ebc1;">+</span><span style="color: #005000; background-color: #c3ebc1;">      { path: '</span><span style="color: #005000; background-color: #acd6a5;">:id/</span><span style="color: #005000; background-color: #c3ebc1;">edit', component: UserEdit },</span>
     ],
   },
 ]
</pre>
</div></li>
</ul></li>
<li>这样更改以后,就能轻松的到达指定页面了,url里面的id也是动态的了.</li>
<li>但是,美中不足的是,还是我们编辑到user id为2 的时候,左侧导航栏的高亮丢失了为了能够记住当前编辑的id,
我们还需要做如下的更改:
<ul class="org-ul">
<li>引入useRoute()这个hook来获取route.params.id</li>
<li>使用watch来监控route.params.id的更改,并且赋值给currentId,通过currentId来判断当前编辑的用户是哪个,并且高亮该用户</li>
<li><p>
具体改动如下
</p>
<div class="org-src-container">
<pre class="src src-diff">diff --git a/code/ch05/07/src/views/user/Users.vue b/code/ch05/07/src/views/user/Users.vue
index a0a1eeb..af3710e 100644
--- <span style="font-weight: bold;">a/code/ch05/07/src/views/user/Users.vue</span>
+++ <span style="font-weight: bold;">b/code/ch05/07/src/views/user/Users.vue</span>
<span style="background-color: #dfd5cf; font-weight: bold;">@@ -1,6 +1,18 @@</span>
 &lt;script setup lang="ts"&gt;
<span style="color: #aa2222; background-color: #f4d0cf;">-</span><span style="color: #8f1313; background-color: #f4d0cf;">import { ref } from 'vue'</span>
<span style="color: #006700; background-color: #c3ebc1;">+</span><span style="color: #005000; background-color: #c3ebc1;">import { ref</span><span style="color: #005000; background-color: #acd6a5;">,</span><span style="color: #005000; background-color: #c3ebc1;"> </span><span style="color: #005000; background-color: #acd6a5;">watch</span><span style="color: #005000; background-color: #c3ebc1;"> } from 'vue</span><span style="color: #005000; background-color: #acd6a5;">'</span><span style="color: #005000; background-color: #acd6a5;">
</span><span style="color: #005000; background-color: #acd6a5;">+</span><span style="color: #005000; background-color: #acd6a5;">import { useRoute } from 'vue-router</span><span style="color: #005000; background-color: #c3ebc1;">'</span>
 const ids = ref([1, 2, 3])
<span style="color: #006700; background-color: #c3ebc1;">+</span>
<span style="color: #006700; background-color: #c3ebc1;">+</span><span style="color: #005000; background-color: #c3ebc1;">const route = useRoute()</span>
<span style="color: #006700; background-color: #c3ebc1;">+</span><span style="color: #005000; background-color: #c3ebc1;">const currentId = ref(null)</span>
<span style="color: #006700; background-color: #c3ebc1;">+</span>
<span style="color: #006700; background-color: #c3ebc1;">+</span><span style="color: #005000; background-color: #c3ebc1;">watch(</span>
<span style="color: #006700; background-color: #c3ebc1;">+</span><span style="color: #005000; background-color: #c3ebc1;">  () =&gt; route.params.id,</span>
<span style="color: #006700; background-color: #c3ebc1;">+</span><span style="color: #005000; background-color: #c3ebc1;">  (val) =&gt; {</span>
<span style="color: #006700; background-color: #c3ebc1;">+</span><span style="color: #005000; background-color: #c3ebc1;">    currentId.value = +val</span>
<span style="color: #006700; background-color: #c3ebc1;">+</span><span style="color: #005000; background-color: #c3ebc1;">  },</span>
<span style="color: #006700; background-color: #c3ebc1;">+</span><span style="color: #005000; background-color: #c3ebc1;">  { immediate: true },</span>
<span style="color: #006700; background-color: #c3ebc1;">+</span><span style="color: #005000; background-color: #c3ebc1;">)</span>
 &lt;/script&gt;

 &lt;template&gt;
<span style="background-color: #dfd5cf; font-weight: bold;">@@ -25,6 +37,7 @@</span><span style="background-color: #dfd5cf;"> const ids = ref([1, 2, 3])</span>
           :key="id"
           :to="`/users/${id}`"
           class="list-group-item list-group-item-action"
<span style="color: #006700; background-color: #c3ebc1;">+</span><span style="color: #005000; background-color: #c3ebc1;">          :class="{ active: id === currentId }"</span>
         &gt;
           User {{ id }}
         &lt;/router-link&gt;
</pre>
</div></li>
</ul></li>
<li>route除了params参数,还有query参数.query参数就是url在`?`之后通过多个`&amp;`传递的key-value字符串组合,我
们改写下当前的例子,从query传递name和age,需要做如下修改:
<ul class="org-ul">
<li><p>
首先在UserDetail里面的url里面加上传递的query(这里只是举例子,所以不同User传递的是同样的query)
</p>
<div class="org-src-container">
<pre class="src src-diff">diff --git a/code/ch05/07/src/views/user/UserDetail.vue b/code/ch05/07/src/views/user/UserDetail.vue
index 300a7e7..27c3f87 100644
--- <span style="font-weight: bold;">a/code/ch05/07/src/views/user/UserDetail.vue</span>
+++ <span style="font-weight: bold;">b/code/ch05/07/src/views/user/UserDetail.vue</span>
<span style="background-color: #dfd5cf; font-weight: bold;">@@ -2,7 +2,7 @@</span>
   &lt;div&gt;
     &lt;h1&gt;UserDetail&lt;/h1&gt;
     &lt;p&gt;User ID: {{ $route.params.id }}&lt;/p&gt;
<span style="color: #aa2222; background-color: #f4d0cf;">-</span><span style="color: #8f1313; background-color: #f4d0cf;">    &lt;router-link :to="`/users/${$route.params.id}/edit`" class="btn btn-primary"</span>
<span style="color: #006700; background-color: #c3ebc1;">+</span><span style="color: #005000; background-color: #c3ebc1;">    &lt;router-link :to="`/users/${$route.params.id}/edit</span><span style="color: #005000; background-color: #acd6a5;">?name=zhangsan&amp;age=18</span><span style="color: #005000; background-color: #c3ebc1;">`" class="btn btn-primary"</span>
       &gt;Edit User
     &lt;/router-link&gt;
   &lt;/div&gt;
</pre>
</div></li>
<li><p>
然后在UserEdit页面就能显示这些query
</p>
<div class="org-src-container">
<pre class="src src-diff">diff --git a/code/ch05/07/src/views/user/UserEdit.vue b/code/ch05/07/src/views/user/UserEdit.vue
index 6b69be7..b4c90c3 100644
--- <span style="font-weight: bold;">a/code/ch05/07/src/views/user/UserEdit.vue</span>
+++ <span style="font-weight: bold;">b/code/ch05/07/src/views/user/UserEdit.vue</span>
<span style="background-color: #dfd5cf; font-weight: bold;">@@ -2,5 +2,7 @@</span>
   &lt;div&gt;
     &lt;h1&gt;UserEdit&lt;/h1&gt;
     &lt;p&gt;User ID : {{ $route.params.id }}&lt;/p&gt;
<span style="color: #006700; background-color: #c3ebc1;">+</span><span style="color: #005000; background-color: #c3ebc1;">    &lt;p&gt;User Name : {{ $route.query.name }}&lt;/p&gt;</span>
<span style="color: #006700; background-color: #c3ebc1;">+</span><span style="color: #005000; background-color: #c3ebc1;">    &lt;p&gt;User Age : {{ $route.query.age }}&lt;/p&gt;</span>
   &lt;/div&gt;
 &lt;/template&gt;
</pre>
</div></li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-orgf6feb3c" class="outline-3">
<h3 id="orgf6feb3c"><span class="section-number-3">5.7.</span> 路由参数映射</h3>
<div class="outline-text-3" id="text-5-7">
<ul class="org-ul">
<li>在Vue3中,我们还可以使用props来传递参数</li>
<li>我们可以修改main.ts中props的值,这个值的不同会带来不同的效果</li>
</ul>
</div>
<div id="outline-container-org0ca9d2d" class="outline-4">
<h4 id="org0ca9d2d"><span class="section-number-4">5.7.1.</span> props值为布尔</h4>
<div class="outline-text-4" id="text-5-7-1">
<ul class="org-ul">
<li>props值为布尔的情况下,我们只能用props传递之前的$route.params,而不能传递$route.query.我们可以通过下面的例子来证实
<ul class="org-ul">
<li><p>
首先,需要修改main.ts,增加props的配置,我们这次修改的是UserEdit这个path的配置
</p>
<div class="org-src-container">
<pre class="src src-diff">diff --git a/code/ch05/08/src/main.ts b/code/ch05/08/src/main.ts
index d806556..13ba03c 100644
--- <span style="font-weight: bold;">a/code/ch05/08/src/main.ts</span>
+++ <span style="font-weight: bold;">b/code/ch05/08/src/main.ts</span>
<span style="background-color: #dfd5cf; font-weight: bold;">@@ -17,7 +17,7 @@</span><span style="background-color: #dfd5cf;"> const routes = [</span>
     children: [
       { path: '', component: UserStart },
       { path: ':id', component: UserDetail },
<span style="color: #aa2222; background-color: #f4d0cf;">-</span><span style="color: #8f1313; background-color: #f4d0cf;">      { path: ':id/edit', component: UserEdit },</span>
<span style="color: #006700; background-color: #c3ebc1;">+</span><span style="color: #005000; background-color: #c3ebc1;">      { path: ':id/edit', component: UserEdit</span><span style="color: #005000; background-color: #acd6a5;">, props: true</span><span style="color: #005000; background-color: #c3ebc1;"> },</span>
     ],
   },
 ]
</pre>
</div></li>
<li><p>
其次,我们在UserEdit页面上面明确的把参数通过defineProps给传递进来并且进行显示
</p>
<div class="org-src-container">
<pre class="src src-diff">diff --git a/code/ch05/08/src/views/user/UserEdit.vue b/code/ch05/08/src/views/user/UserEdit.vue
index b4c90c3..d5b1e5b 100644
--- <span style="font-weight: bold;">a/code/ch05/08/src/views/user/UserEdit.vue</span>
+++ <span style="font-weight: bold;">b/code/ch05/08/src/views/user/UserEdit.vue</span>
<span style="background-color: #dfd5cf; font-weight: bold;">@@ -1,8 +1,17 @@</span>
<span style="color: #006700; background-color: #c3ebc1;">+</span><span style="color: #005000; background-color: #c3ebc1;">&lt;script setup lang="ts"&gt;</span>
<span style="color: #006700; background-color: #c3ebc1;">+</span><span style="color: #005000; background-color: #c3ebc1;">const props = defineProps(['id', 'name', 'age'])</span>
<span style="color: #006700; background-color: #c3ebc1;">+</span><span style="color: #005000; background-color: #c3ebc1;">&lt;/script&gt;</span>
<span style="color: #006700; background-color: #c3ebc1;">+</span>
 &lt;template&gt;
   &lt;div&gt;
     &lt;h1&gt;UserEdit&lt;/h1&gt;
     &lt;p&gt;User ID : {{ $route.params.id }}&lt;/p&gt;
     &lt;p&gt;User Name : {{ $route.query.name }}&lt;/p&gt;
     &lt;p&gt;User Age : {{ $route.query.age }}&lt;/p&gt;
<span style="color: #006700; background-color: #c3ebc1;">+</span>
<span style="color: #006700; background-color: #c3ebc1;">+</span><span style="color: #005000; background-color: #c3ebc1;">    &lt;h2&gt;Props Mapping&lt;/h2&gt;</span>
<span style="color: #006700; background-color: #c3ebc1;">+</span><span style="color: #005000; background-color: #c3ebc1;">    &lt;p&gt;id: {{ id }}&lt;/p&gt;</span>
<span style="color: #006700; background-color: #c3ebc1;">+</span><span style="color: #005000; background-color: #c3ebc1;">    &lt;p&gt;name: {{ name }}&lt;/p&gt;</span>
<span style="color: #006700; background-color: #c3ebc1;">+</span><span style="color: #005000; background-color: #c3ebc1;">    &lt;p&gt;age: {{ age }}&lt;/p&gt;</span>
   &lt;/div&gt;
 &lt;/template&gt;
</pre>
</div></li>
<li>这样修改后,我们会发现最终的Props Mapping页面里面只有id显示成功,说明只有$route.params传递成功了.</li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-org2e8fbdd" class="outline-4">
<h4 id="org2e8fbdd"><span class="section-number-4">5.7.2.</span> props值为对象</h4>
<div class="outline-text-4" id="text-5-7-2">
<ul class="org-ul">
<li>props值为对象类型的情况下,只能把这个对象的值给传递了,之前的无论是$route.params 还是 $route.query都没法进行传递了
<ul class="org-ul">
<li><p>
首先还是修改main.ts
</p>
<div class="org-src-container">
<pre class="src src-diff">diff --git a/code/ch05/08/src/main.ts b/code/ch05/08/src/main.ts
index 13ba03c..aa21f84 100644
--- <span style="font-weight: bold;">a/code/ch05/08/src/main.ts</span>
+++ <span style="font-weight: bold;">b/code/ch05/08/src/main.ts</span>
<span style="background-color: #dfd5cf; font-weight: bold;">@@ -17,7 +17,7 @@</span><span style="background-color: #dfd5cf;"> const routes = [</span>
     children: [
       { path: '', component: UserStart },
       { path: ':id', component: UserDetail },
<span style="color: #aa2222; background-color: #f4d0cf;">-</span><span style="color: #8f1313; background-color: #f4d0cf;">      { path: ':id/edit', component: UserEdit, props: </span><span style="color: #8f1313; background-color: #f3b5a7;">true</span><span style="color: #8f1313; background-color: #f4d0cf;"> },</span>
<span style="color: #006700; background-color: #c3ebc1;">+</span><span style="color: #005000; background-color: #c3ebc1;">      { path: ':id/edit', component: UserEdit, props: </span><span style="color: #005000; background-color: #acd6a5;">{ level: 'beginner' }</span><span style="color: #005000; background-color: #c3ebc1;"> },</span>
     ],
   },
 ]
</pre>
</div></li>
<li><p>
然后修改UserEdit,增加level的显示
</p>
<div class="org-src-container">
<pre class="src src-diff">diff --git a/code/ch05/08/src/views/user/UserEdit.vue b/code/ch05/08/src/views/user/UserEdit.vue
index 790e40e..074e8f6 100644
--- <span style="font-weight: bold;">a/code/ch05/08/src/views/user/UserEdit.vue</span>
+++ <span style="font-weight: bold;">b/code/ch05/08/src/views/user/UserEdit.vue</span>
<span style="background-color: #dfd5cf; font-weight: bold;">@@ -1,5 +1,5 @@</span>
 &lt;script setup lang="ts"&gt;
<span style="color: #aa2222; background-color: #f4d0cf;">-</span><span style="color: #8f1313; background-color: #f4d0cf;">const props = defineProps(['id', 'name', 'age'])</span>
<span style="color: #006700; background-color: #c3ebc1;">+</span><span style="color: #005000; background-color: #c3ebc1;">const props = defineProps(['id', 'name', 'age'</span><span style="color: #005000; background-color: #acd6a5;">, 'level'</span><span style="color: #005000; background-color: #c3ebc1;">])</span>
 &lt;/script&gt;

 &lt;template&gt;
<span style="background-color: #dfd5cf; font-weight: bold;">@@ -13,5 +13,6 @@</span><span style="background-color: #dfd5cf;"> const props = defineProps(['id', 'name', 'age'])</span>
     &lt;p&gt;id: {{ id }}&lt;/p&gt;
     &lt;p&gt;name: {{ name }}&lt;/p&gt;
     &lt;p&gt;age: {{ age }}&lt;/p&gt;
<span style="color: #006700; background-color: #c3ebc1;">+</span><span style="color: #005000; background-color: #c3ebc1;">    &lt;p&gt;level: {{ level }}&lt;/p&gt;</span>
   &lt;/div&gt;
 &lt;/template&gt;
</pre>
</div></li>
<li>最后启动后发现,只有level能显示出来</li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-org572884b" class="outline-4">
<h4 id="org572884b"><span class="section-number-4">5.7.3.</span> props值为函数</h4>
<div class="outline-text-4" id="text-5-7-3">
<ul class="org-ul">
<li>上两种方式都有各种各样的问题,我们最终会选择把props设置为一个函数,这样就能返回$route.params,$route.query和自定义的值了
<ul class="org-ul">
<li><p>
首先更改main.ts
</p>
<div class="org-src-container">
<pre class="src src-diff">diff --git a/code/ch05/08/src/main.ts b/code/ch05/08/src/main.ts
index aa21f84..f1a6759 100644
--- <span style="font-weight: bold;">a/code/ch05/08/src/main.ts</span>
+++ <span style="font-weight: bold;">b/code/ch05/08/src/main.ts</span>
<span style="background-color: #dfd5cf; font-weight: bold;">@@ -17,7 +17,16 @@</span><span style="background-color: #dfd5cf;"> const routes = [</span>
     children: [
       { path: '', component: UserStart },
       { path: ':id', component: UserDetail },
<span style="color: #aa2222; background-color: #f4d0cf;">-</span><span style="color: #8f1313; background-color: #f4d0cf;">      { path: ':id/edit', component: UserEdit, props: { level: 'beginner' } },</span>
<span style="color: #006700; background-color: #c3ebc1;">+</span><span style="color: #005000; background-color: #c3ebc1;">      {</span>
<span style="color: #005000; background-color: #acd6a5;">+</span><span style="color: #005000; background-color: #c3ebc1;">        path: ':id/edit',</span>
<span style="color: #005000; background-color: #acd6a5;">+</span><span style="color: #005000; background-color: #c3ebc1;">        component: UserEdit,</span>
<span style="color: #005000; background-color: #acd6a5;">+</span><span style="color: #005000; background-color: #c3ebc1;">        props: </span><span style="color: #005000; background-color: #acd6a5;">(route) =&gt; (</span><span style="color: #005000; background-color: #c3ebc1;">{</span>
<span style="color: #005000; background-color: #acd6a5;">+</span><span style="color: #005000; background-color: #acd6a5;">          id: route.params.id,</span><span style="color: #005000; background-color: #acd6a5;">
</span><span style="color: #005000; background-color: #acd6a5;">+</span><span style="color: #005000; background-color: #acd6a5;">          name: route.query.name,</span><span style="color: #005000; background-color: #acd6a5;">
</span><span style="color: #005000; background-color: #acd6a5;">+</span><span style="color: #005000; background-color: #acd6a5;">          age: route.query.age,</span><span style="color: #005000; background-color: #acd6a5;">
</span><span style="color: #005000; background-color: #acd6a5;">+</span><span style="color: #005000; background-color: #c3ebc1;">          level: 'beginner'</span><span style="color: #005000; background-color: #acd6a5;">,</span>
<span style="color: #005000; background-color: #acd6a5;">+</span><span style="color: #005000; background-color: #c3ebc1;">        }</span><span style="color: #005000; background-color: #acd6a5;">),</span><span style="color: #005000; background-color: #acd6a5;">
</span><span style="color: #005000; background-color: #acd6a5;">+</span><span style="color: #005000; background-color: #c3ebc1;">      },</span>
     ],
   },
 ]
</pre>
</div></li>
<li>然后我们就直接能看到所有的值,包括$route.params,$route.query和level都正确显示了.</li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-org205d4e3" class="outline-4">
<h4 id="org205d4e3"><span class="section-number-4">5.7.4.</span> 拆分路由配置代码,提高可维护性</h4>
<div class="outline-text-4" id="text-5-7-4">
<ul class="org-ul">
<li>在路由多了以后,我们可以为路由单独建立一个文件夹(然后使用export default 这个文件夹下的index.js)
<ul class="org-ul">
<li><p>
首先把router的相关转移到src/router/index.ts
</p>
<div class="org-src-container">
<pre class="src src-typescript"><span style="color: #531ab6;">import</span> <span style="color: #000000;">{</span> createRouter, createWebHashHistory <span style="color: #000000;">}</span> <span style="color: #531ab6;">from</span> <span style="color: #3548cf;">'vue-router'</span>
<span style="color: #531ab6;">import</span> Home <span style="color: #531ab6;">from</span> <span style="color: #3548cf;">'@/views/Home'</span>
<span style="color: #531ab6;">import</span> Users <span style="color: #531ab6;">from</span> <span style="color: #3548cf;">'@/views/user/Users'</span>
<span style="color: #531ab6;">import</span> UserStart <span style="color: #531ab6;">from</span> <span style="color: #3548cf;">'@/views/user/UserStart'</span>
<span style="color: #531ab6;">import</span> UserDetail <span style="color: #531ab6;">from</span> <span style="color: #3548cf;">'@/views/user/UserDetail'</span>
<span style="color: #531ab6;">import</span> UserEdit <span style="color: #531ab6;">from</span> <span style="color: #3548cf;">'@/views/user/UserEdit'</span>

<span style="color: #531ab6;">const</span> <span style="color: #005e8b;">routes</span> = <span style="color: #000000;">[</span>
  <span style="color: #dd22dd;">{</span> path: <span style="color: #3548cf;">'/'</span>, component: <span style="color: #005f5f;">Home</span> <span style="color: #dd22dd;">}</span>,
  <span style="color: #dd22dd;">{</span>
    path: <span style="color: #3548cf;">'/users'</span>,
    component: <span style="color: #005f5f;">Users</span>,
    children: <span style="color: #008899;">[</span>
      <span style="color: #972500;">{</span> path: <span style="color: #3548cf;">''</span>, component: <span style="color: #005f5f;">UserStart</span> <span style="color: #972500;">}</span>,
      <span style="color: #972500;">{</span> path: <span style="color: #3548cf;">':id'</span>, component: <span style="color: #005f5f;">UserDetail</span> <span style="color: #972500;">}</span>,
      <span style="color: #972500;">{</span>
        path: <span style="color: #3548cf;">':id/edit'</span>,
        component: <span style="color: #005f5f;">UserEdit</span>,
        props: <span style="color: #808000;">(</span>route<span style="color: #808000;">)</span> <span style="color: #531ab6;">=&gt;</span> <span style="color: #808000;">(</span><span style="color: #531ab6;">{</span>
          id: route.params.id,
          name: route.query.name,
          age: route.query.age,
          level: <span style="color: #3548cf;">'beginner'</span>,
        <span style="color: #531ab6;">}</span><span style="color: #808000;">)</span>,
      <span style="color: #972500;">}</span>,
    <span style="color: #008899;">]</span>,
  <span style="color: #dd22dd;">}</span>,
<span style="color: #000000;">]</span>

<span style="color: #531ab6;">const</span> <span style="color: #005e8b;">router</span> = <span style="color: #721045;">createRouter</span><span style="color: #000000;">(</span><span style="color: #dd22dd;">{</span>
  history: <span style="color: #721045;">createWebHashHistory</span><span style="color: #008899;">()</span>,
  routes,
  linkActiveClass: <span style="color: #3548cf;">'active'</span>,
<span style="color: #dd22dd;">}</span><span style="color: #000000;">)</span>

<span style="color: #531ab6;">export</span> <span style="color: #531ab6;">default</span> router
</pre>
</div></li>
<li><p>
然后更改main.ts里面的引入代码
</p>
<div class="org-src-container">
<pre class="src src-typescript"><span style="color: #3548cf;">"./assets/main.css"</span>;

<span style="color: #531ab6;">import</span> <span style="color: #000000;">{</span> createApp <span style="color: #000000;">}</span> <span style="color: #531ab6;">from</span> <span style="color: #3548cf;">"vue"</span>;
<span style="color: #531ab6;">import</span> App <span style="color: #531ab6;">from</span> <span style="color: #3548cf;">"./App.vue"</span>;
<span style="color: #531ab6;">import</span> router <span style="color: #531ab6;">from</span> <span style="color: #3548cf;">"./router"</span>;

<span style="color: #531ab6;">const</span> <span style="color: #005e8b;">app</span> = <span style="color: #721045;">createApp</span><span style="color: #000000;">(</span>App<span style="color: #000000;">)</span>;

app.<span style="color: #721045;">use</span><span style="color: #000000;">(</span>router<span style="color: #000000;">)</span>;

app.<span style="color: #721045;">mount</span><span style="color: #000000;">(</span><span style="color: #3548cf;">"#app"</span><span style="color: #000000;">)</span>;
</pre>
</div></li>
</ul></li>
</ul>
</div>
</div>
</div>
<div id="outline-container-orgd1c295f" class="outline-3">
<h3 id="orgd1c295f"><span class="section-number-3">5.8.</span> 命名路由切换</h3>
<div class="outline-text-3" id="text-5-8">
<ul class="org-ul">
<li>router-link路由跳转的参数既可以是字符串类型,也能是对象类型. 下面就是对象类型的例子
<ul class="org-ul">
<li><p>
首先需要给路由起个名字,比如userEdit
</p>
<div class="org-src-container">
<pre class="src src-diff">$ git diff --cached --color
diff --git a/code/ch05/10/src/router/index.ts b/code/ch05/10/src/router/index.ts
index 5a2fb35..462dd21 100644
--- <span style="font-weight: bold;">a/code/ch05/10/src/router/index.ts</span>
+++ <span style="font-weight: bold;">b/code/ch05/10/src/router/index.ts</span>
<span style="background-color: #dfd5cf; font-weight: bold;">@@ -14,6 +14,7 @@</span><span style="background-color: #dfd5cf;"> const routes = [</span>
       { path: '', component: UserStart },
       { path: ':id', component: UserDetail },
       {
<span style="color: #006700; background-color: #c3ebc1;">+</span><span style="color: #005000; background-color: #c3ebc1;">        name: 'userEdit',</span>
         path: ':id/edit',
         component: UserEdit,
         props: (route) =&gt; ({
</pre>
</div></li>

<li><p>
然后我们的:to就可以更改为更容易被使用的对象模式,这时候就会用到上面起的名字userEdit
</p>
<div class="org-src-container">
<pre class="src src-diff">diff --git a/code/ch05/10/src/views/user/UserDetail.vue b/code/ch05/10/src/views/user/UserDetail.vue
index 3225a0b..e33b920 100644
--- <span style="font-weight: bold;">a/code/ch05/10/src/views/user/UserDetail.vue</span>
+++ <span style="font-weight: bold;">b/code/ch05/10/src/views/user/UserDetail.vue</span>
<span style="background-color: #dfd5cf; font-weight: bold;">@@ -3,7 +3,12 @@</span>
     &lt;h1&gt;UserDetail&lt;/h1&gt;
     &lt;p&gt;User ID: {{ $route.params.id }}&lt;/p&gt;
     &lt;router-link
<span style="color: #aa2222; background-color: #f4d0cf;">-</span><span style="color: #8f1313; background-color: #f4d0cf;">      :to="</span><span style="color: #8f1313; background-color: #f3b5a7;">`/users/$</span><span style="color: #8f1313; background-color: #f4d0cf;">{$route.params.id}</span><span style="color: #8f1313; background-color: #f3b5a7;">/edit?</span><span style="color: #8f1313; background-color: #f4d0cf;">name</span><span style="color: #8f1313; background-color: #f3b5a7;">=zhangsan&amp;</span><span style="color: #8f1313; background-color: #f4d0cf;">age</span><span style="color: #8f1313; background-color: #f3b5a7;">=</span><span style="color: #8f1313; background-color: #f4d0cf;">18</span><span style="color: #8f1313; background-color: #f3b5a7;">`</span><span style="color: #8f1313; background-color: #f4d0cf;">" class="btn btn-primary"</span>
<span style="color: #006700; background-color: #c3ebc1;">+</span><span style="color: #005000; background-color: #c3ebc1;">      :to="{</span>
<span style="color: #005000; background-color: #acd6a5;">+</span><span style="color: #005000; background-color: #acd6a5;">        name: 'userEdit',</span><span style="color: #005000; background-color: #acd6a5;">
</span><span style="color: #005000; background-color: #acd6a5;">+</span><span style="color: #005000; background-color: #acd6a5;">        params: { id:</span><span style="color: #005000; background-color: #c3ebc1;"> $route.params.id }</span><span style="color: #005000; background-color: #acd6a5;">,</span><span style="color: #005000; background-color: #acd6a5;">
</span><span style="color: #005000; background-color: #acd6a5;">+</span><span style="color: #005000; background-color: #acd6a5;">        query: {</span><span style="color: #005000; background-color: #c3ebc1;"> name</span><span style="color: #005000; background-color: #acd6a5;">: 'zhang-san',</span><span style="color: #005000; background-color: #c3ebc1;"> age</span><span style="color: #005000; background-color: #acd6a5;">:</span><span style="color: #005000; background-color: #c3ebc1;"> 18 </span><span style="color: #005000; background-color: #acd6a5;">},</span><span style="color: #005000; background-color: #acd6a5;">
</span><span style="color: #005000; background-color: #acd6a5;">+</span><span style="color: #005000; background-color: #acd6a5;">      }</span><span style="color: #005000; background-color: #c3ebc1;">"</span>
<span style="color: #005000; background-color: #acd6a5;">+</span><span style="color: #005000; background-color: #c3ebc1;">      class="btn btn-primary"</span>
       &gt;Edit User
     &lt;/router-link&gt;
   &lt;/div&gt;
</pre>
</div></li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-orgd55ace4" class="outline-3">
<h3 id="orgd55ace4"><span class="section-number-3">5.9.</span> 命名视图渲染</h3>
<div class="outline-text-3" id="text-5-9">
<ul class="org-ul">
<li>命名视图是用来给视图命名,从而可以为不同的页面配置不同的组件组合</li>
<li>比如我们希望只有首页有footer,其他页面没有,那么可以这样配置
<ul class="org-ul">
<li><p>
首先创建一个src/components/Footer.vue
</p>
<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #721045;">template</span>&gt;
  &lt;<span style="color: #721045;">footer</span> <span style="color: #005e8b;">class</span>=<span style="color: #3548cf;">"footer mt-3 py-3 bg-light"</span>&gt;
    &lt;<span style="color: #721045;">div</span> <span style="color: #005e8b;">class</span>=<span style="color: #3548cf;">"container"</span>&gt;
      &lt;<span style="color: #721045;">span</span> <span style="color: #005e8b;">class</span>=<span style="color: #3548cf;">"text-muted"</span>&gt;All Rights Reserved&lt;/<span style="color: #721045;">span</span>&gt;
    &lt;/<span style="color: #721045;">div</span>&gt;
  &lt;/<span style="color: #721045;">footer</span>&gt;
&lt;/<span style="color: #721045;">template</span>&gt;
</pre>
</div></li>
<li><p>
然后更改router/index.ts,让我们的header和footer有自己的名字
</p>
<div class="org-src-container">
<pre class="src src-diff">diff --git a/code/ch05/11/src/router/index.ts b/code/ch05/11/src/router/index.ts
index 462dd21..b30434c 100644
--- <span style="font-weight: bold;">a/code/ch05/11/src/router/index.ts</span>
+++ <span style="font-weight: bold;">b/code/ch05/11/src/router/index.ts</span>
<span style="background-color: #dfd5cf; font-weight: bold;">@@ -4,9 +4,18 @@</span><span style="background-color: #dfd5cf;"> import Users from '@/views/user/Users'</span>
 import UserStart from '@/views/user/UserStart'
 import UserDetail from '@/views/user/UserDetail'
 import UserEdit from '@/views/user/UserEdit'
<span style="color: #006700; background-color: #c3ebc1;">+</span><span style="color: #005000; background-color: #c3ebc1;">import Header from '@/components/Header'</span>
<span style="color: #006700; background-color: #c3ebc1;">+</span><span style="color: #005000; background-color: #c3ebc1;">import Footer from '@/components/Footer'</span>

 const routes = [
<span style="color: #aa2222; background-color: #f4d0cf;">-</span><span style="color: #8f1313; background-color: #f4d0cf;">  { path: '/', </span><span style="color: #8f1313; background-color: #f3b5a7;">component</span><span style="color: #8f1313; background-color: #f4d0cf;">: Home },</span>
<span style="color: #006700; background-color: #c3ebc1;">+</span><span style="color: #005000; background-color: #c3ebc1;">  {</span>
<span style="color: #005000; background-color: #acd6a5;">+</span><span style="color: #005000; background-color: #c3ebc1;">    path: '/',</span>
<span style="color: #005000; background-color: #acd6a5;">+</span><span style="color: #005000; background-color: #acd6a5;">    components</span><span style="color: #005000; background-color: #c3ebc1;">: </span><span style="color: #005000; background-color: #acd6a5;">{</span><span style="color: #005000; background-color: #acd6a5;">
</span><span style="color: #005000; background-color: #acd6a5;">+</span><span style="color: #005000; background-color: #acd6a5;">      default:</span><span style="color: #005000; background-color: #c3ebc1;"> Home</span><span style="color: #005000; background-color: #acd6a5;">,</span><span style="color: #005000; background-color: #acd6a5;">
</span><span style="color: #005000; background-color: #acd6a5;">+</span><span style="color: #005000; background-color: #acd6a5;">      'router-view-header': Header,</span><span style="color: #005000; background-color: #acd6a5;">
</span><span style="color: #005000; background-color: #acd6a5;">+</span><span style="color: #005000; background-color: #acd6a5;">      'router-view-footer': Footer,</span><span style="color: #005000; background-color: #acd6a5;">
</span><span style="color: #005000; background-color: #acd6a5;">+</span><span style="color: #005000; background-color: #acd6a5;">    },</span><span style="color: #005000; background-color: #acd6a5;">
</span><span style="color: #005000; background-color: #acd6a5;">+</span><span style="color: #005000; background-color: #c3ebc1;">  },</span>
   {
     path: '/users',
     component: Users,
</pre>
</div></li>
<li><p>
配置App.vue里面,既有header,又有footer
</p>
<div class="org-src-container">
<pre class="src src-diff">diff --git a/code/ch05/11/src/App.vue b/code/ch05/11/src/App.vue
index 242adf6..d7e0583 100644
--- <span style="font-weight: bold;">a/code/ch05/11/src/App.vue</span>
+++ <span style="font-weight: bold;">b/code/ch05/11/src/App.vue</span>
<span style="background-color: #dfd5cf; font-weight: bold;">@@ -1,11 +1,13 @@</span>
 &lt;script setup lang="ts"&gt;
 import Header from '@/components/Header'
<span style="color: #006700; background-color: #c3ebc1;">+</span><span style="color: #005000; background-color: #c3ebc1;">import Footer from '@/components/Footer'</span>
 &lt;/script&gt;

 &lt;template&gt;
   &lt;div class="container"&gt;
<span style="color: #aa2222; background-color: #f4d0cf;">-</span><span style="color: #8f1313; background-color: #f4d0cf;">    &lt;Header&gt;&lt;/Header&gt;</span>
<span style="color: #006700; background-color: #c3ebc1;">+</span><span style="color: #005000; background-color: #c3ebc1;">    &lt;router-view name="router-view-header"&gt;&lt;/router-view&gt;</span>
     &lt;router-view&gt;&lt;/router-view&gt;
<span style="color: #006700; background-color: #c3ebc1;">+</span><span style="color: #005000; background-color: #c3ebc1;">    &lt;router-view name="router-view-footer"&gt;&lt;/router-view&gt;</span>
   &lt;/div&gt;
 &lt;/template&gt;
</pre>
</div></li>
</ul></li>
<li>另外,我们可以在嵌套的路由里面,也使用命名视图
<ul class="org-ul">
<li><p>
首先创建一个src/components/UsersAlert.vue
</p>
<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #721045;">template</span>&gt;
  &lt;<span style="color: #721045;">div</span> <span style="color: #005e8b;">class</span>=<span style="color: #3548cf;">"alert alert-primary"</span> <span style="color: #005e8b;">role</span>=<span style="color: #3548cf;">"alert"</span>&gt;Warning: Naming view supports nested router&lt;/<span style="color: #721045;">div</span>&gt;
&lt;/<span style="color: #721045;">template</span>&gt;
</pre>
</div></li>
<li><p>
然后在router/index.ts里面更改命令
</p>
<div class="org-src-container">
<pre class="src src-diff">diff --git a/code/ch05/11/src/router/index.ts b/code/ch05/11/src/router/index.ts
index b30434c..fccf435 100644
--- <span style="font-weight: bold;">a/code/ch05/11/src/router/index.ts</span>
+++ <span style="font-weight: bold;">b/code/ch05/11/src/router/index.ts</span>
<span style="background-color: #dfd5cf; font-weight: bold;">@@ -6,6 +6,7 @@</span><span style="background-color: #dfd5cf;"> import UserDetail from '@/views/user/UserDetail'</span>
 import UserEdit from '@/views/user/UserEdit'
 import Header from '@/components/Header'
 import Footer from '@/components/Footer'
<span style="color: #006700; background-color: #c3ebc1;">+</span><span style="color: #005000; background-color: #c3ebc1;">import UsersAlert from '@/components/UsersAlert'</span>

 const routes = [
   {
<span style="background-color: #dfd5cf; font-weight: bold;">@@ -18,9 +19,12 @@</span><span style="background-color: #dfd5cf;"> const routes = [</span>
   },
   {
     path: '/users',
<span style="color: #aa2222; background-color: #f4d0cf;">-</span><span style="color: #8f1313; background-color: #f4d0cf;">    </span><span style="color: #8f1313; background-color: #f3b5a7;">component</span><span style="color: #8f1313; background-color: #f4d0cf;">: Users,</span>
<span style="color: #006700; background-color: #c3ebc1;">+</span><span style="color: #005000; background-color: #c3ebc1;">    </span><span style="color: #005000; background-color: #acd6a5;">components</span><span style="color: #005000; background-color: #c3ebc1;">: </span><span style="color: #005000; background-color: #acd6a5;">{</span><span style="color: #005000; background-color: #acd6a5;">
</span><span style="color: #005000; background-color: #acd6a5;">+</span><span style="color: #005000; background-color: #acd6a5;">      default:</span><span style="color: #005000; background-color: #c3ebc1;"> Users</span><span style="color: #005000; background-color: #acd6a5;">,</span><span style="color: #005000; background-color: #acd6a5;">
</span><span style="color: #005000; background-color: #acd6a5;">+</span><span style="color: #005000; background-color: #acd6a5;">      'router-view-header': Header,</span><span style="color: #005000; background-color: #acd6a5;">
</span><span style="color: #005000; background-color: #acd6a5;">+</span><span style="color: #005000; background-color: #acd6a5;">    }</span><span style="color: #005000; background-color: #c3ebc1;">,</span>
     children: [
<span style="color: #aa2222; background-color: #f4d0cf;">-</span><span style="color: #8f1313; background-color: #f4d0cf;">      { path: '', </span><span style="color: #8f1313; background-color: #f3b5a7;">component</span><span style="color: #8f1313; background-color: #f4d0cf;">: UserStart },</span>
<span style="color: #006700; background-color: #c3ebc1;">+</span><span style="color: #005000; background-color: #c3ebc1;">      { path: '', </span><span style="color: #005000; background-color: #acd6a5;">components</span><span style="color: #005000; background-color: #c3ebc1;">: </span><span style="color: #005000; background-color: #acd6a5;">{ default:</span><span style="color: #005000; background-color: #c3ebc1;"> UserStart</span><span style="color: #005000; background-color: #acd6a5;">, 'users-alert': UsersAlert }</span><span style="color: #005000; background-color: #c3ebc1;"> },</span>
       { path: ':id', component: UserDetail },
       {
         name: 'userEdit',
</pre>
</div></li>
<li><p>
最后我们在嵌套的router-view里面也可以增加命令视图,比如在Users.vue里面更改如下
</p>
<div class="org-src-container">
<pre class="src src-diff">diff --git a/code/ch05/11/src/views/user/Users.vue b/code/ch05/11/src/views/user/Users.vue
index af3710e..f6a7b6a 100644
--- <span style="font-weight: bold;">a/code/ch05/11/src/views/user/Users.vue</span>
+++ <span style="font-weight: bold;">b/code/ch05/11/src/views/user/Users.vue</span>
<span style="background-color: #dfd5cf; font-weight: bold;">@@ -44,6 +44,7 @@</span><span style="background-color: #dfd5cf;"> watch(</span>
       &lt;/div&gt;
     &lt;/div&gt;
     &lt;div class="col-9"&gt;
<span style="color: #006700; background-color: #c3ebc1;">+</span><span style="color: #005000; background-color: #c3ebc1;">      &lt;router-view name="users-alert"&gt;&lt;/router-view&gt;</span>
       &lt;router-view&gt;&lt;/router-view&gt;
     &lt;/div&gt;
   &lt;/div&gt;
</pre>
</div></li>
<li>由于我们在router/index.ts里面只配置了默认路径里面有UsersAlert,所以效果就是只有首页才会显示这个
UsersAlert</li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-org40b1698" class="outline-3">
<h3 id="org40b1698"><span class="section-number-3">5.10.</span> 编程式路由导航</h3>
<div class="outline-text-3" id="text-5-10">
<ul class="org-ul">
<li>编程式路由可以解决一些特殊文件,比如返回上一页
<ul class="org-ul">
<li><p>
我们在UserEdit.vue里面进行如下编辑,就完成了返回上一页的操作
</p>
<div class="org-src-container">
<pre class="src src-diff">diff --git a/code/ch05/12/src/views/user/UserEdit.vue b/code/ch05/12/src/views/user/UserEdit.vue
index 074e8f6..a56c700 100644
--- <span style="font-weight: bold;">a/code/ch05/12/src/views/user/UserEdit.vue</span>
+++ <span style="font-weight: bold;">b/code/ch05/12/src/views/user/UserEdit.vue</span>
<span style="background-color: #dfd5cf; font-weight: bold;">@@ -1,5 +1,10 @@</span>
 &lt;script setup lang="ts"&gt;
<span style="color: #006700; background-color: #c3ebc1;">+</span><span style="color: #005000; background-color: #c3ebc1;">import { useRouter } from 'vue-router'</span>
 const props = defineProps(['id', 'name', 'age', 'level'])
<span style="color: #006700; background-color: #c3ebc1;">+</span><span style="color: #005000; background-color: #c3ebc1;">const router = useRouter()</span>
<span style="color: #006700; background-color: #c3ebc1;">+</span><span style="color: #005000; background-color: #c3ebc1;">const goback = () =&gt; {</span>
<span style="color: #006700; background-color: #c3ebc1;">+</span><span style="color: #005000; background-color: #c3ebc1;">  router.back()</span>
<span style="color: #006700; background-color: #c3ebc1;">+</span><span style="color: #005000; background-color: #c3ebc1;">}</span>
 &lt;/script&gt;

 &lt;template&gt;
<span style="background-color: #dfd5cf; font-weight: bold;">@@ -14,5 +19,7 @@</span><span style="background-color: #dfd5cf;"> const props = defineProps(['id', 'name', 'age', 'level'])</span>
     &lt;p&gt;name: {{ name }}&lt;/p&gt;
     &lt;p&gt;age: {{ age }}&lt;/p&gt;
     &lt;p&gt;level: {{ level }}&lt;/p&gt;
<span style="color: #006700; background-color: #c3ebc1;">+</span>
<span style="color: #006700; background-color: #c3ebc1;">+</span><span style="color: #005000; background-color: #c3ebc1;">    &lt;button class="btn btn-primary" @click="goback"&gt;Go Back&lt;/button&gt;</span>
   &lt;/div&gt;
 &lt;/template&gt;
</pre>
</div></li>
<li>我们可以看到,此功能的关键在于router.back()命令,其做到了回滚到上一个路由</li>
<li><p>
编程式路由还可以替换router-link为button,在button的函数里面做数据配置
</p>
<div class="org-src-container">
<pre class="src src-diff">diff --git a/code/ch05/12/src/views/user/UserDetail.vue b/code/ch05/12/src/views/user/UserDetail.vue
index e33b920..37a11e9 100644
--- <span style="font-weight: bold;">a/code/ch05/12/src/views/user/UserDetail.vue</span>
+++ <span style="font-weight: bold;">b/code/ch05/12/src/views/user/UserDetail.vue</span>
<span style="background-color: #dfd5cf; font-weight: bold;">@@ -1,13 +1,20 @@</span>
<span style="color: #006700; background-color: #c3ebc1;">+</span><span style="color: #005000; background-color: #c3ebc1;">&lt;script setup lang="ts"&gt;</span>
<span style="color: #006700; background-color: #c3ebc1;">+</span><span style="color: #005000; background-color: #c3ebc1;">import { useRouter, useRoute } from 'vue-router'</span>
<span style="color: #006700; background-color: #c3ebc1;">+</span>
<span style="color: #006700; background-color: #c3ebc1;">+</span><span style="color: #005000; background-color: #c3ebc1;">const router = useRouter()</span>
<span style="color: #006700; background-color: #c3ebc1;">+</span><span style="color: #005000; background-color: #c3ebc1;">const route = useRoute()</span>
<span style="color: #006700; background-color: #c3ebc1;">+</span>
<span style="color: #006700; background-color: #c3ebc1;">+</span><span style="color: #005000; background-color: #c3ebc1;">const gotoEdit = () =&gt; {</span>
<span style="color: #006700; background-color: #c3ebc1;">+</span><span style="color: #005000; background-color: #c3ebc1;">  router.push({</span>
<span style="color: #006700; background-color: #c3ebc1;">+</span><span style="color: #005000; background-color: #c3ebc1;">    name: 'userEdit',</span>
<span style="color: #006700; background-color: #c3ebc1;">+</span><span style="color: #005000; background-color: #c3ebc1;">    params: { id: route.params.id },</span>
<span style="color: #006700; background-color: #c3ebc1;">+</span><span style="color: #005000; background-color: #c3ebc1;">    query: { name: 'zhang-san', age: 19 },</span>
<span style="color: #006700; background-color: #c3ebc1;">+</span><span style="color: #005000; background-color: #c3ebc1;">  })</span>
<span style="color: #006700; background-color: #c3ebc1;">+</span><span style="color: #005000; background-color: #c3ebc1;">}</span>
<span style="color: #006700; background-color: #c3ebc1;">+</span><span style="color: #005000; background-color: #c3ebc1;">&lt;/script&gt;</span>
<span style="color: #006700; background-color: #c3ebc1;">+</span>
 &lt;template&gt;
   &lt;div&gt;
     &lt;h1&gt;UserDetail&lt;/h1&gt;
     &lt;p&gt;User ID: {{ $route.params.id }}&lt;/p&gt;
<span style="color: #aa2222; background-color: #f4d0cf;">-</span><span style="color: #8f1313; background-color: #f4d0cf;">    &lt;</span><span style="color: #8f1313; background-color: #f3b5a7;">router-link</span>
<span style="color: #8f1313; background-color: #f3b5a7;">-</span><span style="color: #8f1313; background-color: #f3b5a7;">      :to="{</span><span style="color: #8f1313; background-color: #f3b5a7;">
</span><span style="color: #8f1313; background-color: #f3b5a7;">-</span><span style="color: #8f1313; background-color: #f3b5a7;">        name: 'userEdit',</span><span style="color: #8f1313; background-color: #f3b5a7;">
</span><span style="color: #8f1313; background-color: #f3b5a7;">-</span><span style="color: #8f1313; background-color: #f3b5a7;">        params: { id: $route.params.id },</span><span style="color: #8f1313; background-color: #f3b5a7;">
</span><span style="color: #8f1313; background-color: #f3b5a7;">-</span><span style="color: #8f1313; background-color: #f3b5a7;">        query: { name: 'zhang-san', age: 18 },</span><span style="color: #8f1313; background-color: #f3b5a7;">
</span><span style="color: #8f1313; background-color: #f3b5a7;">-</span><span style="color: #8f1313; background-color: #f3b5a7;">      }"</span><span style="color: #8f1313; background-color: #f3b5a7;">
</span><span style="color: #8f1313; background-color: #f3b5a7;">-</span><span style="color: #8f1313; background-color: #f4d0cf;">      class="btn btn-primary"</span>
<span style="color: #8f1313; background-color: #f3b5a7;">-</span><span style="color: #8f1313; background-color: #f4d0cf;">      &gt;Edit User</span>
<span style="color: #8f1313; background-color: #f3b5a7;">-</span><span style="color: #8f1313; background-color: #f4d0cf;">    &lt;/</span><span style="color: #8f1313; background-color: #f3b5a7;">router-link</span><span style="color: #8f1313; background-color: #f4d0cf;">&gt;</span>
+    &lt;<span style="color: #005000; background-color: #acd6a5;">button</span> class="btn btn-primary" <span style="color: #005000; background-color: #acd6a5;">@click="gotoEdit"</span>&gt;Edit <span style="color: #005000; background-color: #acd6a5;">Current</span> User&lt;/<span style="color: #005000; background-color: #acd6a5;">button</span>&gt;
</pre>
</div></li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-org12ebb3c" class="outline-3">
<h3 id="org12ebb3c"><span class="section-number-3">5.11.</span> 路由过滤筛选</h3>
<div class="outline-text-3" id="text-5-11">
<ul class="org-ul">
<li>我们这一节主要解决url错误了以后的问题,也就是404页面</li>
<li>首先我们创建一个"/404"的path,虽然不会有人直接用这个页面,但是我们还是先做出来,然后再把所有"不匹配的
path"引到这个页面.
<ul class="org-ul">
<li><p>
首先需要创建一个新的vue页面views/NotFound/index.vue
</p>
<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #721045;">script</span> setup <span style="color: #005e8b;">lang</span>=<span style="color: #3548cf;">"ts"</span>&gt;
import { useRouter } from 'vue-router'
const router = useRouter()
const goHome = () =&gt; {
  router.replace('/')
}
&lt;/<span style="color: #721045;">script</span>&gt;

&lt;<span style="color: #721045;">template</span>&gt;
  &lt;<span style="color: #721045;">div</span> <span style="color: #005e8b;">class</span>=<span style="color: #3548cf;">"p-5 mb-4 bg-ligth rounded-3"</span>&gt;
    &lt;<span style="color: #721045;">div</span> <span style="color: #005e8b;">class</span>=<span style="color: #3548cf;">"container-fluid py-5"</span>&gt;
      &lt;<span style="color: #721045;">h1</span> <span style="color: #005e8b;">class</span>=<span style="color: #3548cf;">"display-5 fw-bold"</span>&gt;<span style="font-weight: bold; text-decoration: underline;">Not Found</span>&lt;/<span style="color: #721045;">h1</span>&gt;
      &lt;<span style="color: #721045;">p</span> <span style="color: #005e8b;">class</span>=<span style="color: #3548cf;">"col-md-12 fs-4"</span>&gt;You may lost&lt;/<span style="color: #721045;">p</span>&gt;
      &lt;<span style="color: #721045;">button</span> @click=<span style="color: #3548cf;">"goHome"</span> <span style="color: #005e8b;">class</span>=<span style="color: #3548cf;">"btn btn-primary btn-lg"</span>&gt;Go to HomePage&lt;/<span style="color: #721045;">button</span>&gt;
    &lt;/<span style="color: #721045;">div</span>&gt;
  &lt;/<span style="color: #721045;">div</span>&gt;
&lt;/<span style="color: #721045;">template</span>&gt;
</pre>
</div></li>
<li><p>
其次为这个页面增加一个path('/404')
</p>
<div class="org-src-container">
<pre class="src src-diff">diff --git a/code/ch05/13/src/router/index.ts b/code/ch05/13/src/router/index.ts
index fccf435..1ab17e5 100644
--- <span style="font-weight: bold;">a/code/ch05/13/src/router/index.ts</span>
+++ <span style="font-weight: bold;">b/code/ch05/13/src/router/index.ts</span>
<span style="background-color: #dfd5cf; font-weight: bold;">@@ -6,6 +6,7 @@</span><span style="background-color: #dfd5cf;"> import UserDetail from '@/views/user/UserDetail'</span>
 import UserEdit from '@/views/user/UserEdit'
 import Header from '@/components/Header'
 import Footer from '@/components/Footer'
<span style="color: #006700; background-color: #c3ebc1;">+</span><span style="color: #005000; background-color: #c3ebc1;">import NotFound from '@/views/NotFound'</span>
 import UsersAlert from '@/components/UsersAlert'

 const routes = [
<span style="background-color: #dfd5cf; font-weight: bold;">@@ -39,6 +40,15 @@</span><span style="background-color: #dfd5cf;"> const routes = [</span>
       },
     ],
   },
<span style="color: #006700; background-color: #c3ebc1;">+</span><span style="color: #005000; background-color: #c3ebc1;">  {</span>
<span style="color: #006700; background-color: #c3ebc1;">+</span><span style="color: #005000; background-color: #c3ebc1;">    name: '404',</span>
<span style="color: #006700; background-color: #c3ebc1;">+</span><span style="color: #005000; background-color: #c3ebc1;">    path: '/404',</span>
<span style="color: #006700; background-color: #c3ebc1;">+</span><span style="color: #005000; background-color: #c3ebc1;">    components: {</span>
<span style="color: #006700; background-color: #c3ebc1;">+</span><span style="color: #005000; background-color: #c3ebc1;">      default: NotFound,</span>
<span style="color: #006700; background-color: #c3ebc1;">+</span><span style="color: #005000; background-color: #c3ebc1;">      'router-view-header': Header,</span>
<span style="color: #006700; background-color: #c3ebc1;">+</span><span style="color: #005000; background-color: #c3ebc1;">      'router-view-footer': Footer,</span>
<span style="color: #006700; background-color: #c3ebc1;">+</span><span style="color: #005000; background-color: #c3ebc1;">    },</span>
<span style="color: #006700; background-color: #c3ebc1;">+</span><span style="color: #005000; background-color: #c3ebc1;">  },</span>
 ]
</pre>
</div></li>
</ul></li>
<li>但是"/404"这种path显然是没有人访问的.我们需要的是所有不匹配的path都link到这个页面
<ul class="org-ul">
<li><p>
所以我们下一步操作就是把"一个特殊的path: 所有没有found到的path",都redirect给/404
</p>
<div class="org-src-container">
<pre class="src src-diff">diff --git a/code/ch05/13/src/router/index.ts b/code/ch05/13/src/router/index.ts
index 1ab17e5..8f80418 100644
--- <span style="font-weight: bold;">a/code/ch05/13/src/router/index.ts</span>
+++ <span style="font-weight: bold;">b/code/ch05/13/src/router/index.ts</span>
<span style="background-color: #dfd5cf; font-weight: bold;">@@ -49,6 +49,10 @@</span><span style="background-color: #dfd5cf;"> const routes = [</span>
       'router-view-footer': Footer,
     },
   },
<span style="color: #006700; background-color: #c3ebc1;">+</span><span style="color: #005000; background-color: #c3ebc1;">  {</span>
<span style="color: #006700; background-color: #c3ebc1;">+</span><span style="color: #005000; background-color: #c3ebc1;">    path: '/:notFound(.*)',</span>
<span style="color: #006700; background-color: #c3ebc1;">+</span><span style="color: #005000; background-color: #c3ebc1;">    redirect: '/404',</span>
<span style="color: #006700; background-color: #c3ebc1;">+</span><span style="color: #005000; background-color: #c3ebc1;">  },</span>
 ]
</pre>
</div></li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-org6f23cc2" class="outline-3">
<h3 id="org6f23cc2"><span class="section-number-3">5.12.</span> 路由的异步懒加载</h3>
<div class="outline-text-3" id="text-5-12">
<ul class="org-ul">
<li>Vue可以实现数据的懒加载:
<ul class="org-ul">
<li><p>
实现方法是把import改成const引入,改动如下
</p>
<div class="org-src-container">
<pre class="src src-diff">diff --git a/code/ch05/14/src/router/index.ts b/code/ch05/14/src/router/index.ts
index 8f80418..081101e 100644
--- <span style="font-weight: bold;">a/code/ch05/14/src/router/index.ts</span>
+++ <span style="font-weight: bold;">b/code/ch05/14/src/router/index.ts</span>
<span style="background-color: #dfd5cf; font-weight: bold;">@@ -1,13 +1,13 @@</span>
 import { createRouter, createWebHashHistory } from 'vue-router'
<span style="color: #aa2222; background-color: #f4d0cf;">-</span><span style="color: #8f1313; background-color: #f4d0cf;">import Home from '@/views/Home'</span>
<span style="color: #aa2222; background-color: #f4d0cf;">-</span><span style="color: #8f1313; background-color: #f4d0cf;">import Users from '@/views/user/Users'</span>
<span style="color: #aa2222; background-color: #f4d0cf;">-</span><span style="color: #8f1313; background-color: #f4d0cf;">import UserStart from '@/views/user/UserStart'</span>
<span style="color: #aa2222; background-color: #f4d0cf;">-</span><span style="color: #8f1313; background-color: #f4d0cf;">import UserDetail from '@/views/user/UserDetail'</span>
<span style="color: #aa2222; background-color: #f4d0cf;">-</span><span style="color: #8f1313; background-color: #f4d0cf;">import UserEdit from '@/views/user/UserEdit'</span>
<span style="color: #aa2222; background-color: #f4d0cf;">-</span><span style="color: #8f1313; background-color: #f4d0cf;">import Header from '@/components/Header'</span>
<span style="color: #aa2222; background-color: #f4d0cf;">-</span><span style="color: #8f1313; background-color: #f4d0cf;">import Footer from '@/components/Footer'</span>
<span style="color: #aa2222; background-color: #f4d0cf;">-</span><span style="color: #8f1313; background-color: #f4d0cf;">import NotFound from '@/views/NotFound'</span>
<span style="color: #aa2222; background-color: #f4d0cf;">-</span><span style="color: #8f1313; background-color: #f4d0cf;">import UsersAlert from '@/components/UsersAlert'</span>
<span style="color: #006700; background-color: #c3ebc1;">+</span><span style="color: #005000; background-color: #c3ebc1;">const Home = () =&gt; import('@/views/Home')</span>
<span style="color: #006700; background-color: #c3ebc1;">+</span><span style="color: #005000; background-color: #c3ebc1;">const Users = () =&gt; import('@/views/user/Users')</span>
<span style="color: #006700; background-color: #c3ebc1;">+</span><span style="color: #005000; background-color: #c3ebc1;">const UserStart = () =&gt; import('@/views/user/UserStart')</span>
<span style="color: #006700; background-color: #c3ebc1;">+</span><span style="color: #005000; background-color: #c3ebc1;">const UserDetail = () =&gt; import('@/views/user/UserDetail')</span>
<span style="color: #006700; background-color: #c3ebc1;">+</span><span style="color: #005000; background-color: #c3ebc1;">const UserEdit = () =&gt; import('@/views/user/UserEdit')</span>
<span style="color: #006700; background-color: #c3ebc1;">+</span><span style="color: #005000; background-color: #c3ebc1;">const Header = () =&gt; import('@/components/Header')</span>
<span style="color: #006700; background-color: #c3ebc1;">+</span><span style="color: #005000; background-color: #c3ebc1;">const Footer = () =&gt; import('@/components/Footer')</span>
<span style="color: #006700; background-color: #c3ebc1;">+</span><span style="color: #005000; background-color: #c3ebc1;">const NotFound = () =&gt; import('@/views/NotFound')</span>
+const UsersAlert = () =&gt; import('@/components/UsersAlert')
</pre>
</div></li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-org1c36b9a" class="outline-3">
<h3 id="org1c36b9a"><span class="section-number-3">5.13.</span> 缓存路由组件</h3>
<div class="outline-text-3" id="text-5-13">
<ul class="org-ul">
<li>keep-alive 可以用来缓存组件到内存
<ul class="org-ul">
<li><p>
使用方法如下
</p>
<div class="org-src-container">
<pre class="src src-diff">diff --git a/code/ch05/15/src/App.vue b/code/ch05/15/src/App.vue
index d7e0583..337f033 100644
--- <span style="font-weight: bold;">a/code/ch05/15/src/App.vue</span>
+++ <span style="font-weight: bold;">b/code/ch05/15/src/App.vue</span>
<span style="background-color: #dfd5cf; font-weight: bold;">@@ -6,7 +6,11 @@</span><span style="background-color: #dfd5cf;"> import Footer from '@/components/Footer'</span>
 &lt;template&gt;
   &lt;div class="container"&gt;
     &lt;router-view name="router-view-header"&gt;&lt;/router-view&gt;
<span style="color: #aa2222; background-color: #f4d0cf;">-</span><span style="color: #8f1313; background-color: #f4d0cf;">    &lt;router-view&gt;&lt;/router-view&gt;</span>
<span style="color: #006700; background-color: #c3ebc1;">+</span><span style="color: #005000; background-color: #c3ebc1;">    &lt;router-view </span><span style="color: #005000; background-color: #acd6a5;">v-slot="{ Component, route }"</span><span style="color: #005000; background-color: #c3ebc1;">&gt;</span>
<span style="color: #005000; background-color: #acd6a5;">+</span><span style="color: #005000; background-color: #acd6a5;">      &lt;keep-alive&gt;</span><span style="color: #005000; background-color: #acd6a5;">
</span><span style="color: #005000; background-color: #acd6a5;">+</span><span style="color: #005000; background-color: #acd6a5;">        &lt;component :is="Component" /&gt;</span><span style="color: #005000; background-color: #acd6a5;">
</span><span style="color: #005000; background-color: #acd6a5;">+</span><span style="color: #005000; background-color: #acd6a5;">      &lt;/keep-alive&gt;</span><span style="color: #005000; background-color: #acd6a5;">
</span><span style="color: #005000; background-color: #acd6a5;">+</span><span style="color: #005000; background-color: #c3ebc1;">    &lt;/router-view&gt;</span>
     &lt;router-view name="router-view-footer"&gt;&lt;/router-view&gt;
   &lt;/div&gt;
 &lt;/template&gt;
</pre>
</div></li>
</ul></li>
</ul>
</div>
</div>
</div>
<div id="outline-container-orgf9f6924" class="outline-2">
<h2 id="orgf9f6924"><span class="section-number-2">6.</span> Chapter 06: 数据请求</h2>
<div class="outline-text-2" id="text-6">
</div>
<div id="outline-container-orgc4cef5b" class="outline-3">
<h3 id="orgc4cef5b"><span class="section-number-3">6.1.</span> 数据请求的概念</h3>
<div class="outline-text-3" id="text-6-1">
<ul class="org-ul">
<li>所谓数据请求,其实就是客户端发送request,服务端返回response在过程,现代前端一般都是和HTTP协议进行打交道的.</li>
</ul>
</div>
</div>
<div id="outline-container-orgaefd8a3" class="outline-3">
<h3 id="orgaefd8a3"><span class="section-number-3">6.2.</span> 数据接口</h3>
<div class="outline-text-3" id="text-6-2">
<ul class="org-ul">
<li>所谓接口数就是API</li>
</ul>
</div>
</div>
<div id="outline-container-org3eac27c" class="outline-3">
<h3 id="org3eac27c"><span class="section-number-3">6.3.</span> 接口调试</h3>
<div class="outline-text-3" id="text-6-3">
<ul class="org-ul">
<li>在前端开发中,往往需要模拟json server,由于懂后端,所以我们自己开发接口</li>
</ul>
</div>
</div>
<div id="outline-container-orgb5e58a6" class="outline-3">
<h3 id="orgb5e58a6"><span class="section-number-3">6.4.</span> 原生API请求</h3>
<div class="outline-text-3" id="text-6-4">
</div>
<div id="outline-container-orgcf05f64" class="outline-4">
<h4 id="orgcf05f64"><span class="section-number-4">6.4.1.</span> XMLHttpRequest</h4>
<div class="outline-text-4" id="text-6-4-1">
<ul class="org-ul">
<li>XMLHttpRequest 是一种传统的浏览器 API，用于在网页中执行 HTTP 请求。它是最早实现异步网络请求的方式。</li>
<li>特点:
<ul class="org-ul">
<li>同步和异步支持：支持同步和异步请求（但同步请求在现代浏览器中已不推荐使用）。</li>
<li>事件驱动：通过事件监听 (onreadystatechange) 来处理请求的状态变化。</li>
<li>历史悠久：是一个较老的 API，兼容性很好。</li>
</ul></li>
<li>优点:
<ul class="org-ul">
<li>广泛兼容：支持所有主流浏览器，包括老旧浏览器。</li>
<li>功能全面：支持文件上传、跨域请求（配合 CORS）、进度监控等功能。</li>
</ul></li>
<li>缺点
<ul class="org-ul">
<li>语法复杂：需要手动编写很多代码来处理请求和响应。</li>
<li>不符合现代 Promise 风格：没有 Promise 或异步函数支持，代码可读性较差。</li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-org63e5314" class="outline-4">
<h4 id="org63e5314"><span class="section-number-4">6.4.2.</span> fetch</h4>
<div class="outline-text-4" id="text-6-4-2">
<ul class="org-ul">
<li>fetch 是现代浏览器中提供的原生 API，用于进行 HTTP 请求。它是基于 Promise 的，并且语法更简洁。</li>
<li>特点:
<ul class="org-ul">
<li>基于 Promise：返回一个 Promise 对象，支持异步操作。</li>
<li>符合现代风格：支持 async/await，代码更简洁。</li>
<li>Stream 支持：支持直接操作响应流。</li>
</ul></li>
<li>优点:
<ul class="org-ul">
<li>易用性高：语法简洁，代码可读性更好。</li>
<li>灵活性更强：支持跨域请求、流处理等。</li>
<li>现代化：符合 ES6 标准，适合现代应用开发。</li>
</ul></li>
<li>缺点:
<ul class="org-ul">
<li>兼容性问题：需要 Polyfill 来支持老旧浏览器（如 IE）。</li>
<li>错误处理复杂：不会自动处理 HTTP 状态码错误（例如 404 或 500），需要手动处理。</li>
<li>功能有限：不支持直接监控上传进度（需要借助其他 API）。</li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-org0a6d440" class="outline-4">
<h4 id="org0a6d440"><span class="section-number-4">6.4.3.</span> axios</h4>
<div class="outline-text-4" id="text-6-4-3">
<ul class="org-ul">
<li>axios 是一个基于 Promise 的第三方 HTTP 客户端库，广泛应用于现代 JavaScript 项目。它比 fetch 和 XMLHttpRequest 更强大，提供了许多额外功能。</li>
<li>特点:
<ul class="org-ul">
<li>基于 Promise：类似 fetch，支持 async/await。</li>
<li>浏览器和 Node.js 支持：可以在浏览器和 Node.js 环境中使用。</li>
<li>功能丰富：包括请求拦截器、响应拦截器、取消请求、自动转换 JSON 数据等。</li>
</ul></li>
<li>优点:
<ul class="org-ul">
<li>易用性极高：语法简洁，功能全面，处理请求和响应更加方便。</li>
<li>默认支持 JSON：自动将请求数据序列化为 JSON，并将响应数据反序列化为 JavaScript 对象。</li>
<li>更强的错误处理：可以方便地处理 HTTP 状态码错误。</li>
<li>扩展性强：支持拦截器、配置默认请求头和超时等功能。</li>
</ul></li>
<li>缺点:
<ul class="org-ul">
<li>需要安装依赖：是一个第三方库，需要通过 npm 或 yarn 安装。</li>
<li>体积稍大：相比原生 API，axios 会增加一点包体积。</li>
</ul></li>
</ul>
</div>
</div>
</div>
<div id="outline-container-orgd780913" class="outline-3">
<h3 id="orgd780913"><span class="section-number-3">6.5.</span> axios请求</h3>
<div class="outline-text-3" id="text-6-5">
<ul class="org-ul">
<li>实际开发项目中,不会使用XMLHttpRequest或者fetch,而是直接使用axios</li>
<li>axios本质上是最符合最新ES规范使用Promise实现的原生XHR封装:
<ul class="org-ul">
<li>在服务端它使用原生Node的HTTP模块实现</li>
<li>在客户端则使用XMLHttpRequests实现</li>
</ul></li>
</ul>
</div>
</div>
</div>
<div id="outline-container-org917eab7" class="outline-2">
<h2 id="org917eab7"><span class="section-number-2">7.</span> Chapter 07: 状态管理</h2>
<div class="outline-text-2" id="text-7">
</div>
<div id="outline-container-org79b6b74" class="outline-3">
<h3 id="org79b6b74"><span class="section-number-3">7.1.</span> Pinia例子</h3>
<div class="outline-text-3" id="text-7-1">
<ul class="org-ul">
<li>在最新版本的vite方式创建vue3的project的时候,会自动选择是否引入pinia,如果选择了引入pinia,那么会有如
下配置自动引入:
<ul class="org-ul">
<li><p>
首先是帮我们创建了第一个store: src/stores/counter.ts
</p>
<div class="org-src-container">
<pre class="src src-typescript"><span style="color: #531ab6;">import</span> <span style="color: #000000;">{</span> ref, computed <span style="color: #000000;">}</span> <span style="color: #531ab6;">from</span> <span style="color: #3548cf;">'vue'</span>
<span style="color: #531ab6;">import</span> <span style="color: #000000;">{</span> defineStore <span style="color: #000000;">}</span> <span style="color: #531ab6;">from</span> <span style="color: #3548cf;">'pinia'</span>

<span style="color: #531ab6;">export</span> <span style="color: #531ab6;">const</span> <span style="color: #005e8b;">useCounterStore</span> = <span style="color: #721045;">defineStore</span><span style="color: #000000;">(</span><span style="color: #3548cf;">'counter'</span>, <span style="color: #dd22dd;">()</span> <span style="color: #531ab6;">=&gt;</span> <span style="color: #dd22dd;">{</span>
  <span style="color: #531ab6;">const</span> <span style="color: #005e8b;">count</span> = <span style="color: #721045;">ref</span><span style="color: #008899;">(</span>0<span style="color: #008899;">)</span>
  <span style="color: #531ab6;">const</span> <span style="color: #005e8b;">doubleCount</span> = <span style="color: #721045;">computed</span><span style="color: #008899;">(</span><span style="color: #972500;">()</span> <span style="color: #531ab6;">=&gt;</span> count.value * 2<span style="color: #008899;">)</span>
  <span style="color: #531ab6;">function</span> <span style="color: #721045;">increment</span><span style="color: #008899;">()</span> <span style="color: #008899;">{</span>
    count.value++
  <span style="color: #008899;">}</span>

  <span style="color: #531ab6;">return</span> <span style="color: #008899;">{</span> count, doubleCount, increment <span style="color: #008899;">}</span>
<span style="color: #dd22dd;">}</span><span style="color: #000000;">)</span>
</pre>
</div></li>
<li><p>
然后在main.ts里面自动引入了整个pinia
</p>
<div class="org-src-container">
<pre class="src src-typescript"><span style="color: #531ab6;">import</span> <span style="color: #3548cf;">'./assets/main.css'</span>

<span style="color: #531ab6;">import</span> <span style="color: #000000;">{</span> createApp <span style="color: #000000;">}</span> <span style="color: #531ab6;">from</span> <span style="color: #3548cf;">'vue'</span>
<span style="color: #531ab6;">import</span> <span style="color: #000000;">{</span> createPinia <span style="color: #000000;">}</span> <span style="color: #531ab6;">from</span> <span style="color: #3548cf;">'pinia'</span>

<span style="color: #531ab6;">import</span> App <span style="color: #531ab6;">from</span> <span style="color: #3548cf;">'./App.vue'</span>
<span style="color: #531ab6;">import</span> router <span style="color: #531ab6;">from</span> <span style="color: #3548cf;">'./router'</span>

<span style="color: #531ab6;">const</span> <span style="color: #005e8b;">app</span> = <span style="color: #721045;">createApp</span><span style="color: #000000;">(</span>App<span style="color: #000000;">)</span>

app.<span style="color: #721045;">use</span><span style="color: #000000;">(</span><span style="color: #721045;">createPinia</span><span style="color: #dd22dd;">()</span><span style="color: #000000;">)</span>
app.<span style="color: #721045;">use</span><span style="color: #000000;">(</span>router<span style="color: #000000;">)</span>

app.<span style="color: #721045;">mount</span><span style="color: #000000;">(</span><span style="color: #3548cf;">'#app'</span><span style="color: #000000;">)</span>
</pre>
</div></li>
<li><p>
最后就是我们怎么引入了,我们需要在App.vue里面使用这个store,代码如下
</p>
<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #721045;">script</span> setup <span style="color: #005e8b;">lang</span>=<span style="color: #3548cf;">"ts"</span>&gt;
import { RouterLink, RouterView } from 'vue-router'
import HelloWorld from './components/HelloWorld.vue'
import { useCounterStore } from './stores/counter'
const counterStore = useCounterStore()
&lt;/<span style="color: #721045;">script</span>&gt;

&lt;<span style="color: #721045;">template</span>&gt;
  &lt;<span style="color: #721045;">div</span>&gt;
    &lt;<span style="color: #721045;">p</span>&gt;Current Count: {{ counterStore.count }}&lt;/<span style="color: #721045;">p</span>&gt;
    &lt;<span style="color: #721045;">button</span> @click=<span style="color: #3548cf;">"counterStore.increment"</span>&gt;Add&lt;/<span style="color: #721045;">button</span>&gt;
  &lt;/<span style="color: #721045;">div</span>&gt;
&lt;/<span style="color: #721045;">template</span>&gt;

&lt;<span style="color: #721045;">style</span> scoped&gt;
header {
  line-height: 1.5;
  max-height: 100vh;
}

.logo {
  display: block;
  margin: 0 auto 2rem;
}

nav {
  width: 100%;
  font-size: 12px;
  text-align: center;
  margin-top: 2rem;
}

nav a.router-link-exact-active {
  color: var(--color-text);
}

nav a.router-link-exact-active:hover {
  background-color: transparent;
}

nav a {
  display: inline-block;
  padding: 0 1rem;
  border-left: 1px solid var(--color-border);
}

nav a:first-of-type {
  border: 0;
}

@media (min-width: 1024px) {
  header {
    display: flex;
    place-items: center;
    padding-right: calc(var(--section-gap) / 2);
  }

  .logo {
    margin: 0 2rem 0 0;
  }

  header .wrapper {
    display: flex;
    place-items: flex-start;
    flex-wrap: wrap;
  }

  nav {
    text-align: left;
    margin-left: -1rem;
    font-size: 1rem;

    padding: 1rem 0;
    margin-top: 1rem;
  }
}
&lt;/<span style="color: #721045;">style</span>&gt;
</pre>
</div></li>
</ul></li>
</ul>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="author">Author: harrifeng@outlook.com</p>
<p class="date">Created: 2025-05-28 Wed 16:18</p>
<p class="validation"><a href="https://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
