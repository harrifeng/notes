<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2025-09-26 Fri 10:43 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>ms</title>
<meta name="author" content="harrifeng@outlook.com" />
<meta name="generator" content="Org Mode" />
<link rel="stylesheet" type="text/css" href="src/readtheorg_theme/css/htmlize.css"/>
<link rel="stylesheet" type="text/css" href="src/readtheorg_theme/css/readtheorg.css"/>
<script type="text/javascript" src="src/lib/js/jquery.min.js"></script>
<script type="text/javascript" src="src/lib/js/bootstrap.min.js"></script>
<script type="text/javascript" src="src/lib/js/jquery.stickytableheaders.min.js"></script>
<script type="text/javascript" src="src/readtheorg_theme/js/readtheorg.js"></script>
<script>
  window.MathJax = {
    tex: {
      ams: {
        multlineWidth: '85%'
      },
      tags: 'ams',
      tagSide: 'right',
      tagIndent: '.8em'
    },
    chtml: {
      scale: 1.0,
      displayAlign: 'center',
      displayIndent: '0em'
    },
    svg: {
      scale: 1.0,
      displayAlign: 'center',
      displayIndent: '0em'
    },
    output: {
      font: 'mathjax-modern',
      displayOverflow: 'overflow'
    }
  };
</script>

<script
  id="MathJax-script"
  async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
</script>
</head>
<body>
<div id="content" class="content">
<h1 class="title">ms</h1>
<div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#org27236c0">1. Chapter 01: Introduction to this book</a>
<ul>
<li><a href="#org4732867">1.1. What is statistics and why learn it?</a></li>
<li><a href="#org6bb064f">1.2. Statistics, data science, machine learning, etc.</a>
<ul>
<li><a href="#org7932332">1.2.1. Data science</a></li>
<li><a href="#org2fc0adb">1.2.2. Data mining, analytics, informatics, etc.</a></li>
</ul>
</li>
<li><a href="#org0fc25b6">1.3. Target audience</a></li>
<li><a href="#orgcf3254e">1.4. Prerequisites</a>
<ul>
<li><a href="#orgf216a52">1.4.1. The obvious</a></li>
<li><a href="#org5e836c9">1.4.2. High-school math</a></li>
<li><a href="#orgf9a957f">1.4.3. Calculus and linear algebra</a></li>
<li><a href="#org37583d4">1.4.4. Programming</a></li>
</ul>
</li>
<li><a href="#org102c068">1.5. Exercises</a></li>
<li><a href="#orge67fc79">1.6. Learning from simulated data</a>
<ul>
<li><a href="#orgef1ad48">1.6.1. 现代计算方法:模拟数据学习</a></li>
</ul>
</li>
<li><a href="#org89eca85">1.7. Using the code with this book</a>
<ul>
<li><a href="#org5445815">1.7.1. Which language to use?</a></li>
<li><a href="#org5a153ee">1.7.2. Following along with Python</a></li>
<li><a href="#orgb7384fd">1.7.3. Following along with R</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#orgdedd9e4">2. Chapter 02: What Are (Is?) Data?</a>
<ul>
<li><a href="#org2725356">2.1. Is "data" singular or plural?</a></li>
<li><a href="#org4440674">2.2. Where do data come from, what do they mean?</a></li>
<li><a href="#orgd703b18">2.3. What do data look like?</a></li>
<li><a href="#org7c04ffe">2.4. Limitations of data</a>
<ul>
<li><a href="#orgd5385c4">2.4.1. Data come from imperfect measurements</a></li>
<li><a href="#org680e5d6">2.4.2. Data my contains noise</a></li>
<li><a href="#org18cfa14">2.4.3. Outliers may skew statistics</a></li>
<li><a href="#orgff17c82">2.4.4. What is a measurement unit?</a></li>
<li><a href="#org33c7d52">2.4.5. Conclusion</a></li>
</ul>
</li>
<li><a href="#org390a108">2.5. Accuracy, precision, resolution, range</a>
<ul>
<li><a href="#org7581bd8">2.5.1. Accuracy 准确度</a></li>
<li><a href="#org3ef11a4">2.5.2. Precision 精密度</a></li>
<li><a href="#orgb0df05f">2.5.3. Resolution 分辨率</a></li>
<li><a href="#org7de38b9">2.5.4. Range 量程</a></li>
</ul>
</li>
<li><a href="#org5c56432">2.6. Data types</a>
<ul>
<li><a href="#org9f0c8c5">2.6.1. 数值型数据(Numerical data)</a></li>
<li><a href="#org449f28f">2.6.2. 离散数据(Discrete data)</a></li>
<li><a href="#orgb7f5e66">2.6.3. 区间数据(Interval data)</a></li>
<li><a href="#orgb2e97c7">2.6.4. 比率数据(Ratio data)</a></li>
<li><a href="#orga78a6b5">2.6.5. 分类数据(Categorical data)</a></li>
<li><a href="#orgd9613d2">2.6.6. 名义数据(Nominal data)</a></li>
<li><a href="#orgd00b86f">2.6.7. 有序数据(Ordinal data)</a></li>
<li><a href="#org6ca35db">2.6.8. 数据类型的变化</a></li>
<li><a href="#org7ee929c">2.6.9. 有序数据的数学运算</a></li>
</ul>
</li>
<li><a href="#orgdbdfc92">2.7. From anecdotes to populations</a>
<ul>
<li><a href="#org1052cff">2.7.1. Sample vs. population</a></li>
<li><a href="#orgc403acd">2.7.2. "Big enough" samples</a></li>
<li><a href="#orgdcfb99e">2.7.3. Problems with N=1 studies</a></li>
</ul>
</li>
<li><a href="#orge5c2fbf">2.8. Data management</a></li>
<li><a href="#org1836cf8">2.9. The ethics of making up data</a></li>
</ul>
</li>
<li><a href="#org39d6d17">3. Chapter 03: Visualizing Data</a>
<ul>
<li><a href="#org8e34927">3.1. Why visualize data?</a></li>
<li><a href="#org83b8914">3.2. How to visualize data</a></li>
<li><a href="#orge317f1e">3.3. Bar plots</a>
<ul>
<li><a href="#org8a83a65">3.3.1. Bar plots for grouped data</a></li>
<li><a href="#org6f01308">3.3.2. Error bars</a></li>
</ul>
</li>
<li><a href="#org9a4742c">3.4. Pie charts</a></li>
<li><a href="#orgb5f56b2">3.5. Box plots</a></li>
<li><a href="#org03b78db">3.6. Histograms</a>
<ul>
<li><a href="#org2e6f714">3.6.1. Histogram vs. bar plot</a></li>
<li><a href="#org55d5ed6">3.6.2. Counts vs. proprotions</a></li>
</ul>
</li>
<li><a href="#orgd4ee61f">3.7. Lines vs. bars in a histogram</a></li>
<li><a href="#orga8a2b30">3.8. Violin plots</a></li>
<li><a href="#orgee7c5e7">3.9. Linear vs. logarithmic axis scaling</a></li>
<li><a href="#orgf65b5b0">3.10. Discretizing continuous data</a></li>
<li><a href="#orgdd9b9ef">3.11. Radial plots</a></li>
<li><a href="#org319ba5c">3.12. Color</a>
<ul>
<li><a href="#org3dcac85">3.12.1. 选择哪些颜色?</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#orgf2121c8">4. Chapter 04: Descriptive Statistics</a>
<ul>
<li><a href="#orgcc7e80d">4.1. Descriptive vs. inferential statistics</a></li>
<li><a href="#org5e19c89">4.2. Data distributons</a>
<ul>
<li><a href="#orgdcd6f88">4.2.1. Empirical vs. analytical distributions</a></li>
<li><a href="#org8974c57">4.2.2. The usese of data distributions</a></li>
<li><a href="#org01b1953">4.2.3. Examples of distributions</a></li>
<li><a href="#org1ace472">4.2.4. Quantifying qualitative characteristics</a></li>
</ul>
</li>
<li><a href="#org4c0e084">4.3. Central tendency</a>
<ul>
<li><a href="#orgf6ee169">4.3.1. Mean</a></li>
<li><a href="#orgb746de4">4.3.2. Median</a></li>
<li><a href="#orgbfdec1e">4.3.3. Mode</a></li>
</ul>
</li>
<li><a href="#orgaa4198b">4.4. Measures of dispersion</a>
<ul>
<li><a href="#orgdbe0e62">4.4.1. Variance</a></li>
<li><a href="#org7c2c87c">4.4.2. Standard deviation</a></li>
<li><a href="#org346d43d">4.4.3. Heteroscedasticity and Homoscedasticity</a></li>
<li><a href="#orgf878f7c">4.4.4. Full width at half maximum (FWHM)</a></li>
<li><a href="#org869e77c">4.4.5. Fano factor and CV</a></li>
</ul>
</li>
<li><a href="#orgbac1566">4.5. Interquartile range(IQR)</a></li>
<li><a href="#orgc671d9d">4.6. QQ plots</a></li>
<li><a href="#orgcfd3140">4.7. Statistical "moments"</a>
<ul>
<li><a href="#org3c65348">4.7.1. Unstandardized and standardized moments</a></li>
<li><a href="#orgce62d82">4.7.2. First moment: mean</a></li>
<li><a href="#orgeff9ba1">4.7.3. Second moment: variance</a></li>
<li><a href="#org8a30922">4.7.4. Third moment: skew</a></li>
<li><a href="#orgf997ec3">4.7.5. Fourth moment: kurtosis</a></li>
<li><a href="#orgb821189">4.7.6. What to memorize</a></li>
</ul>
</li>
<li><a href="#org9671336">4.8. Histograms part 2: Number of bins</a>
<ul>
<li><a href="#org1ab8a8f">4.8.1. Other descriptive stats</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#org0662ef6">5. Chapter 05: Simulating Data</a>
<ul>
<li><a href="#orgf2d34e3">5.1. Why simulate data?</a></li>
<li><a href="#org8bb8777">5.2. Random data from distributions</a>
<ul>
<li><a href="#org44e0e5a">5.2.1. Normally distributed random data</a></li>
<li><a href="#org676b14e">5.2.2. Uniformly distributed data</a></li>
<li><a href="#orgf6c1626">5.2.3. Random data from other distributions</a></li>
<li><a href="#org9d4dd24">5.2.4. Random integers</a></li>
</ul>
</li>
<li><a href="#orgea00c64">5.3. Random elements of a set</a></li>
<li><a href="#orgf3ac568">5.4. Random permutations</a></li>
<li><a href="#org065001e">5.5. Reproducing randomness</a></li>
<li><a href="#org9d3df09">5.6. Runningexperiments with random numbers</a>
<ul>
<li><a href="#org64e264b">5.6.1. Experiment: Impact of standard deviation on mean</a></li>
</ul>
</li>
<li><a href="#org6ba04c1">5.7. The amazing world of data-simulations</a></li>
<li><a href="#orgd50e3b6">5.8. Finding publicly available real datasets</a></li>
</ul>
</li>
<li><a href="#org363375a">6. Chapter 06: Transformations</a>
<ul>
<li><a href="#org73eb51c">6.1. Wht, why, and how of data transformations</a>
<ul>
<li><a href="#orgfc2f728">6.1.1. What are data transformations?</a></li>
<li><a href="#orgb3a19e1">6.1.2. Why transform data?</a></li>
<li><a href="#org7d80013">6.1.3. How to transform data?</a></li>
<li><a href="#org61fa519">6.1.4. What kinds of transformations are there?</a></li>
</ul>
</li>
<li><a href="#orgc49c1a2">6.2. Z-score standardization</a>
<ul>
<li><a href="#org4408209">6.2.1. Z-score math</a></li>
<li><a href="#org22db586">6.2.2. Interpretation</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<div id="outline-container-org27236c0" class="outline-2">
<h2 id="org27236c0"><span class="section-number-2">1.</span> Chapter 01: Introduction to this book</h2>
<div class="outline-text-2" id="text-1">
</div>
<div id="outline-container-org4732867" class="outline-3">
<h3 id="org4732867"><span class="section-number-3">1.1.</span> What is statistics and why learn it?</h3>
<div class="outline-text-3" id="text-1-1">
<ul class="org-ul">
<li>统计学是关于在不确定性面前利用数据帮助决策的学科.有时候不确定性很小,你根本不需要统计学.例如:
<ul class="org-ul">
<li>地球和月球哪个更大?回答这个问题绝对不需要统计学.</li>
<li>另一个问题:女性比男性更爱说闲话吗?虽然文化刻板印象提供了答案,但您肯定认识爱闲聊的男性和守口如
瓶的女性.因此,要普遍回答这个问题,我们需要收集数据,并需要对这些数据进行统计分析.</li>
</ul></li>
<li>但"对数据进行统计分析"意味着什么?
<ul class="org-ul">
<li>统计学是一套广泛的算法体系,用于将数值数据转化为少量可解释的数值</li>
<li><p>
这些数值既能描述世界,也能体现我们对解读世界的确信程度(图1.1).
</p>

<div id="orge47f81c" class="figure">
<p><img src="https://raw.githubusercontent.com/harrifeng/image/master/ms/1-1.png" alt="1-1.png" />
</p>
<p><span class="figure-number">Figure 1: </span>ms/1-1.png</p>
</div></li>
</ul></li>
<li>许多统计程序最终都会产生一个"p值",其中p代表概率.p值的精妙解释将在本书后续章节说明,但基本上它表示
你在数据中观察到的效应实际上是 <b>由偶然因素而非真实效应导致的概率</b> :
<ul class="org-ul">
<li>接近零的p值意味着数据中的模式不太可能是偶然现象.因此,p值越小,我们越相信该效应的真实性;</li>
<li>若p值越接近1,我们则判定任何表面效应都只是偶然现象,不太可能被重复观测到.</li>
</ul></li>
<li>统计学在现代人类生活的众多领域都发挥着关键作用:
<ul class="org-ul">
<li>从量子力学到医学再到金融退休规划无不如此.</li>
<li>从亚马逊这样的大型企业到一人规模的小型初创公司,越来越多的企业正在运用数据指导决策和商业策略.</li>
</ul></li>
<li>因此,掌握数据处理,分析,可视化及解读的能力,正对越来越多的职业变得日益重要.</li>
</ul>
</div>
</div>
<div id="outline-container-org6bb064f" class="outline-3">
<h3 id="org6bb064f"><span class="section-number-3">1.2.</span> Statistics, data science, machine learning, etc.</h3>
<div class="outline-text-3" id="text-1-2">
<ul class="org-ul">
<li>统计学,数据科学,机器学习等. 这些术语之间有何区别?它们真的彼此不同吗?</li>
<li>广义而言:并无不同,这些不同术语只是相同流程的重新包装.我们可以达成共识:
<ul class="org-ul">
<li>"数据科学"听起来新奇有趣;</li>
<li>"机器学习"充满未来感和科幻感;</li>
<li>"商业分析"则显得严肃且具有竞争力.</li>
<li>相比之下,"统计学"听起来陈旧,枯燥,数学化且乏味.</li>
</ul></li>
<li>从广义上讲,所有上述术语都共享一个共同目标:
<ul class="org-ul">
<li>以数据为输入,应用某种算法或算法集,</li>
<li>最终提供可解释的数值输出,进而帮助我们做出决策并理解世界.</li>
</ul></li>
<li>但仍存在一些微妙而重要的区别值得关注:
<ul class="org-ul">
<li>统计学:维基百科给出了一个严谨的定义:"一门专注于数据收集,整理,分析,阐释与呈现的学科".本书大
部分内容都符合这一定义.</li>
<li>机器学习:尽管常被互换使用&#x2013;且采用相同的分析方法&#x2013;机器学习与统计学的目标存在细微差异.
<ol class="org-ol">
<li>推论统计学的目标是基于样本数据(sample data)推断总体特征(population inferernce),</li>
<li>而机器学习的目标则是利用数据中的模式来预测结果或进行分类.</li>
</ol></li>
</ul></li>
<li>在许多场景中,统计学与机器学习会使用相同的分析方法和算法,但研究者的关注点有所不同.例如:双方都使用
称为"回归分析"的技术,
<ul class="org-ul">
<li>但统计学家会重点关注各个回归变量的统计显著性及其阐释,</li>
<li>而机器学习专家则会聚焦于模型对数据样本进行分类的准确度.</li>
</ul></li>
<li>若您难以理解这种区别,请不必担心:
<ul class="org-ul">
<li>需要掌握更多统计学与机器学习知识才能透彻理解.我们将在本书后续章节重新讨论这一话题.</li>
<li>关键在于:统计学与机器学习的相似之处远超过它们的差异,且多数分歧仅涉及对最终结果的解读方式,而非
数学原理或代码实现层面的根本分歧.</li>
</ul></li>
</ul>
</div>
<div id="outline-container-org7932332" class="outline-4">
<h4 id="org7932332"><span class="section-number-4">1.2.1.</span> Data science</h4>
<div class="outline-text-4" id="text-1-2-1">
<ul class="org-ul">
<li>关于数据科学是否以及如何区别于统计学,不同学者持有不同观点.</li>
<li>我个人对此没有强烈立场,但数据科学确实更侧重于现代应用领域,并包含传统统计学长期忽略的数据类型,如:
<ul class="org-ul">
<li>图像</li>
<li>时间序列</li>
<li>文本等.</li>
</ul></li>
<li>必须承认,"科学"一词的附加让我有些不适:
<ul class="org-ul">
<li>科学本意为追求认知而探索事物本质,</li>
<li>但数据科学实质上并非研究数据本身的科学,而是关于运用数据辅助决策的学科.即使不理解数据本质,您仍
可利用数据做出更优决策&#x2013;这或许正是"数据工程"术语逐渐流行的原因.</li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-org2fc0adb" class="outline-4">
<h4 id="org2fc0adb"><span class="section-number-4">1.2.2.</span> Data mining, analytics, informatics, etc.</h4>
<div class="outline-text-4" id="text-1-2-2">
<ul class="org-ul">
<li>恕我直言,尽管这些术语体系的创立必然存在合理缘由,且特定领域确实需要比"统计学"更精细的术语来体现细
微差别,但此种程度的术语辨析并非我愿意投入时间深究的范畴.</li>
</ul>
<hr />
<ul class="org-ul">
<li>本文讨论的核心在于:纵然统计学与机器学习并非完全相同的学科,但它们存在足够的重叠领域.</li>
<li>本书所奠定的坚实基础,将足以应对您未来雇主在职位描述中可能使用的任何特定术语.</li>
</ul>
</div>
</div>
</div>
<div id="outline-container-org0fc25b6" class="outline-3">
<h3 id="org0fc25b6"><span class="section-number-3">1.3.</span> Target audience</h3>
<div class="outline-text-3" id="text-1-3">
<ul class="org-ul">
<li>我撰写本书时,始终将自学读者放在心上.
<ul class="org-ul">
<li>也许您在校期间并未意识到自己需要掌握统计学知识,</li>
<li>抑或您虽正在修读大学课程,却对推荐的教材不甚满意.</li>
</ul></li>
<li>的确,许多统计学教科书数学密度过高,令非数学专业的学生望而生畏</li>
<li>或者成书于个人计算机尚未普及和强大的时代,曾为经典却已不合时宜.</li>
<li>我期望本书能成为课堂内外皆有益的学习资源.</li>
<li>现今众多的统计学教材过度侧重数学推演,强烈聚焦于抽象概念而非实际应用.我此言并非批评:
<ul class="org-ul">
<li>数理统计学本身是一个丰富且极具智力挑战的领域,为应用统计学奠定了基石.</li>
<li>然而,对于那些希望将统计学作为理解数据的工具,并依据数据做出决策的学习者而言,纯数学化的统计学论
述往往艰深难懂甚至难以入门.</li>
</ul></li>
<li>本书的目标,是以一种易于理解和掌握的方式呈现应用统计学,着重强调那些与实际操作,具体应用和结果解读
紧密关联的概念</li>
</ul>
</div>
</div>
<div id="outline-container-orgcf3254e" class="outline-3">
<h3 id="orgcf3254e"><span class="section-number-3">1.4.</span> Prerequisites</h3>
<div class="outline-text-3" id="text-1-4">
</div>
<div id="outline-container-orgf216a52" class="outline-4">
<h4 id="orgf216a52"><span class="section-number-4">1.4.1.</span> The obvious</h4>
<div class="outline-text-4" id="text-1-4-1">
<ul class="org-ul">
<li>虽不言自明但仍需强调:
<ul class="org-ul">
<li>学习统计学首先需要强烈的动机.</li>
<li>统计学既非艰深莫测,也非轻而易举.最重要的是保持学习意愿,并愿意为此投入时间与精力.相较之下,以
下各点都属次要.</li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-org5e836c9" class="outline-4">
<h4 id="org5e836c9"><span class="section-number-4">1.4.2.</span> High-school math</h4>
<div class="outline-text-4" id="text-1-4-2">
<ul class="org-ul">
<li>需熟练掌握算术与基础代数知识.若能解答4x²=9这类方程,即具备继续学习所需的代数基础.其他数学概念将在
需要时引入讲解.</li>
<li>本书虽包含公式,方程和算法,但力求以通俗易懂的语言阐释,配以图表说明,并提供Python与R代码示例,方便
您通过模拟和可视化方式理解数学原理.</li>
</ul>
</div>
</div>
<div id="outline-container-orgf9a957f" class="outline-4">
<h4 id="orgf9a957f"><span class="section-number-4">1.4.3.</span> Calculus and linear algebra</h4>
<div class="outline-text-4" id="text-1-4-3">
<ul class="org-ul">
<li>无需基础.需说明的是:
<ul class="org-ul">
<li>统计学作为数学分支,掌握其他数学领域知识固然有助于学习,但本书专注应用统计学而非数理统计学,因此
省略了依赖微积分的证明,侧重直观理解.</li>
<li>书中虽涉及少量微积分与线性代数内容,但已确保即使不理解全部数学符号,也能通过直观方式理解算法与证
明过程.</li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-org37583d4" class="outline-4">
<h4 id="org37583d4"><span class="section-number-4">1.4.4.</span> Programming</h4>
<div class="outline-text-4" id="text-1-4-4">
<ul class="org-ul">
<li>现代应用统计学完全依赖编程&#x2013;此言绝非夸张.若不具备至少基础编码能力,根本无法实施统计操作.</li>
<li>所幸现有成熟稳定的代码库能实现底层技术细节.这意味着您无需成为专业程序员即可轻松应用统计学,但确实
需要具备代码编写能力.</li>
<li>本书采用Python与R语言&#x2013;这两者堪称现代统计学领域最流行的编程语言.我确信它们不会永远占据主导地位;未
来必将出现更高效,更易用,更快速的新语言.</li>
<li>但好消息是:所有编程语言都存在共通性,因此通过Python或R学习统计学将助您在任意其他语言中应用统计知识</li>
<li>换言之,编程学习是值得投入的时间投资而非浪费&#x2013;即使您实践中使用不同语言.况且ChatGPT(或其他先进语言AI)
已能相当准确地将代码转换为SAS,MATLAB,Julia等其他语言.</li>
<li>需要明确:阅读本书无需编程基础.您可跳过所有代码与练习,专注概念与解读部分.但本书的设计理念在于:
<ul class="org-ul">
<li>唯有通过代码实践与练习,方能获得对知识的深层理解.</li>
</ul></li>
<li>亲身体验胜过纸上谈兵&#x2013;这正是我写作与教学的核心哲学.
<ul class="org-ul">
<li>人们通过亲眼观察与亲手实践才能达到最佳学习效果,而非仅让目光掠过文字与公式.</li>
</ul></li>
</ul>
</div>
</div>
</div>
<div id="outline-container-org102c068" class="outline-3">
<h3 id="org102c068"><span class="section-number-3">1.5.</span> Exercises</h3>
<div class="outline-text-3" id="text-1-5">
<ul class="org-ul">
<li>我确信您曾听过这个说法:数学绝非观赏性运动.</li>
<li>若您仅阅读本书而不尝试任何练习,固然能有所收获,我也希望您觉得本书有用.</li>
<li>但若要真正理解统计学,您必须亲手解决统计学问题.</li>
<li>本人设计的练习需投入一定精力与创造力,且必须通过编码完成.</li>
<li>这些练习将为您提供独特机会,通过编程方式探索概念,可视化效果与参数调整:这些体验仅靠阅读难以实现.</li>
<li>本人强烈建议您认真完成这些练习.
<ul class="org-ul">
<li>它们并非填充时间的无效劳作,而是通过实践来巩固,探索和扩展统计学认知的重要途径,其效果是单纯阅读
章节无法企及的.</li>
<li>这些练习同时提供了丰富的代码资源,可供您持续学习并将统计学应用于自身研究数据.</li>
</ul></li>
<li>虽然我会提供全部练习的代码参考答案,但请注意:
<ul class="org-ul">
<li>编程解决方案本无定法.重点在于通过编码探索和理解统计学,而非精确复现我的代码.</li>
</ul></li>
<li>请随时随意查阅参考答案,
<ul class="org-ul">
<li>这绝非作弊行为&#x2013;尤其当您是Python或R语言新手时:若已理解统计学概念但暂受编码语法困扰,参考答案正是
为您铺设的学习阶梯.</li>
<li>这些练习的根本目的是提供学习探索与知识拓展的契机,而非进行量化考核.</li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-orge67fc79" class="outline-3">
<h3 id="orge67fc79"><span class="section-number-3">1.6.</span> Learning from simulated data</h3>
<div class="outline-text-3" id="text-1-6">
<ul class="org-ul">
<li>统计学作为一门方法论科学,传统上主要通过三种方式学习. 每种方式各有特点,但也存在明显局限性.而现代
计算方法特别是模拟数据技术,为统计学教育提供了新的可能.</li>
<li>三种传统学习方式
<ol class="org-ol">
<li>教科书公式导向法: 这种方法侧重于钻研统计学教科书中的方程式,这些教材通常由荣誉退休的统计学教授编
写.部分教授编写教材的目的是向同行展示而非教育学习者.如果您对纯数理统计学感兴趣,这种方法很棒;
但如果您关注现实世界的应用统计学,则可能令人望而生畏</li>
<li>案例脱离实际法: 这种方法通过阅读充满案例的统计学书籍来学习,但这些书籍使用的数据很少向读者公开,
且这些数据的特征或主题与学习者实际可能接触到的任何数据集或应用场景毫无关联</li>
<li>软件菜单操作法: 这种方法通过阅读软件教程书籍来学习哪些菜单选项可以执行哪些分析.如果您已经了解统
计学并且需要学习特定软件的实施细节,这种方法很棒;但如果您还不理解统计学原理,则可能造成困惑和误导</li>
</ol></li>
</ul>
</div>
<div id="outline-container-orgef1ad48" class="outline-4">
<h4 id="orgef1ad48"><span class="section-number-4">1.6.1.</span> 现代计算方法:模拟数据学习</h4>
<div class="outline-text-4" id="text-1-6-1">
<ul class="org-ul">
<li>本书旨在通过模拟具有特定特征的数据集然后对这些数据进行统计分析,提供一种现代的,计算驱动的统计学学习方式</li>
<li>模拟数据的本质与价值:
<ul class="org-ul">
<li>本质上,模拟提供了一种在虚拟环境中试验定制数据集的方法.通过多次迭代运行,操纵数据特征并观察结果,
您可以了解统计分析的行为方式以及对现实场景的预期.第五章开头提供了使用模拟数据的详细动机和优势.</li>
<li>与健身房的类比:这就像在健身房锻炼:器械和自由重量器械奇怪且不自然,但它们能增强力量和耐力,从而帮
助你在现实世界中的行为.同样,您可能认为模拟数据奇怪且不自然,但我相信(希望)模拟让您获得的数学,
概念和实施技能将有助于您在现实世界中的数据分析</li>
</ul></li>
<li>方法论的多样性与包容性:
<ul class="org-ul">
<li>并非每个人都喜欢这种方法,我尊重意见和偏好学习风格的差异.但据我所知,有无数统计学书籍不依赖模拟
数据作为深入探究统计学数学,算法和解释的机制;而至少有一本书严重依赖模拟数据(就是您正在阅读的这本!).</li>
<li>我理解并尊重不同的人有不同的意见和偏好,并且我保证,如果您不喜欢这种教育方法,我不会个人感到被冒犯</li>
</ul></li>
</ul>
</div>
</div>
</div>
<div id="outline-container-org89eca85" class="outline-3">
<h3 id="org89eca85"><span class="section-number-3">1.7.</span> Using the code with this book</h3>
<div class="outline-text-3" id="text-1-7">
<ul class="org-ul">
<li>这本书不包含 Python 或 R 语言的教程.我已尽力确保代码中的注释足够详细,以便初学者能够理解并将代码改
编用于自己的应用.但我确实假设读者具备一些基础的编程知识.如果你理解变量,for循环,函数,导入库以及
基础绘图,那么你就具备了学习本书代码所需的基础.</li>
<li>如果你是完全不熟悉 Python 或 R 的新手,那么我建议你先学习一些编程基础再继续.</li>
</ul>
</div>
<div id="outline-container-org5445815" class="outline-4">
<h4 id="org5445815"><span class="section-number-4">1.7.1.</span> Which language to use?</h4>
<div class="outline-text-4" id="text-1-7-1">
<ul class="org-ul">
<li>我不确定是否值得同时深入钻研 Python 和 R 的代码.最好的做法可能是选择一门语言,然后将你的时间最大限
度地投入那门语言.</li>
<li>你该选择哪门语言?我无法下定论.我的建议是,专注于你所在部门,公司,大学或任何环境中大多数人使用的
那门语言.如果你不知道应该使用哪门语言,那么选择 Python 可能更好,因为它是一门通用编程语言,而 R 的
应用范围更专注于统计学.</li>
<li>请记住,R 和 Python 是使用不同库的不同语言.基于相同数据的统计分析结果在两种语言中应该趋于一致,但
并不保证完全 identical(完全相同),尤其是对于那些依赖复杂数学的高级分析.在一个给定的项目中,最好
坚持使用一种语言</li>
</ul>
</div>
</div>
<div id="outline-container-org5a153ee" class="outline-4">
<h4 id="org5a153ee"><span class="section-number-4">1.7.2.</span> Following along with Python</h4>
<div class="outline-text-4" id="text-1-7-2">
<ul class="org-ul">
<li>其实就是jupyter notebook, 我们的笔记也会主要以jupyter notebook为主</li>
</ul>
</div>
</div>
<div id="outline-container-orgb7384fd" class="outline-4">
<h4 id="orgb7384fd"><span class="section-number-4">1.7.3.</span> Following along with R</h4>
<div class="outline-text-4" id="text-1-7-3">
<ul class="org-ul">
<li>本笔记不涉及R语言</li>
</ul>
</div>
</div>
</div>
</div>
<div id="outline-container-orgdedd9e4" class="outline-2">
<h2 id="orgdedd9e4"><span class="section-number-2">2.</span> Chapter 02: What Are (Is?) Data?</h2>
<div class="outline-text-2" id="text-2">
</div>
<div id="outline-container-org2725356" class="outline-3">
<h3 id="org2725356"><span class="section-number-3">2.1.</span> Is "data" singular or plural?</h3>
<div class="outline-text-3" id="text-2-1">
<ul class="org-ul">
<li>请原谅我对语法用法的小小抱怨;我会尽量简短.</li>
<li>从语法角度看,data 是一个复数名词.Data 表示多个数据点,即多于一条的数据&#x2013;一个可数的数据值集合.</li>
<li>一条数据&#x2013;也就是一个数据点&#x2013;用 datum 表示.
<ul class="org-ul">
<li>Datum 是 data 的单数形式.一个数字是一个 datum;</li>
<li>两个数字是 data.</li>
</ul></li>
<li>因此,像 "this data shows" 或 "the data was uploaded" 这样的表达,其实算是非英语母语者可以被原谅的
语法错误.</li>
<li>正确的语法应该是 "these data show" 和 "the data were uploaded"(或者 "this datum shows" 和
"the datum was uploaded").</li>
<li>但实际上,不知为何&#x2013;令语法较真的统计学家们十分懊恼的是&#x2013;data 成了"既是单数又是复数"的词.</li>
<li>"This data shows" 这种用法在媒体和传播领域被视为可接受的表达.甚至 Reddit 上还有一个子版块叫
"Data is beautiful".</li>
<li>这种用法让我听起来很刺耳,简直像一位百岁女巫用她过长的指甲刮黑板,同时唱着阿金托(Argento)电影
《阴风阵阵》(Suspiria)里那首令人毛骨悚然的小调.</li>
<li>当然,我的语法并不完美,我确信如果用语言学的精密梳子来细查,这本书里一定也会发现一些语法上的小瑕疵.</li>
<li>但我会始终坚持将 data 视作复数名词,将 datum 视作单数名词.</li>
<li>感谢你,亲爱的读者,包容我这一番抱怨.现在,让我们进入一个关于数据更有意义的讨论吧.</li>
</ul>
</div>
</div>
<div id="outline-container-org4440674" class="outline-3">
<h3 id="org4440674"><span class="section-number-3">2.2.</span> Where do data come from, what do they mean?</h3>
<div class="outline-text-3" id="text-2-2">
<ul class="org-ul">
<li>宇宙是一个极其,极其,极其无法想象的复杂之地.</li>
<li>我们甚至并不了解它到底有多复杂&#x2013;事实上,宇宙中大约 95% 是神秘的暗物质和暗能量.</li>
<li>然而,我们是充满好奇的生物.人类长期以来一直试图通过故事,寓言,宗教,哲学,观察和科学来理解并掌控
自己的环境.</li>
<li>科学的方法是:构建测量装置,将某些可观测的物理量转化为一个或一组数字.这些数字就叫作数据.</li>
<li>举个例子:想象你在一家想更好了解顾客的公司工作.</li>
<li>当然,人是极其复杂且多样的.为了帮助你理解顾客,你设计了一种测量装置&#x2013;问卷调查&#x2013;让顾客用数字来回答
关于他们对各种产品或设计的偏好,或者他们愿意为某些产品或服务支付多少钱.这些数字,就是数据.</li>
<li>重要的是要明白:这些数字并不等同于现实;现实要复杂且微妙得多.
<ul class="org-ul">
<li>比如,顾客对某个产品的满意度并不是真的"9分(满分10分)";那是一种主观体验,涉及情感,记忆,期望,
基因等多种因素的交织,还可能受到早餐吃了什么,配偶的压力水平等各种细微因素的影响.</li>
</ul></li>
<li>而这种由生物—心理—社会—情感动态共同作用所产生的满意度,是极其复杂的,要想开始理解它,甚至准确测量它
都可能需要一生的科学研究.</li>
<li>所以,我们会去用某种方式捕捉这种现实的某一部分特征,把它用一个可以存入电子表格的数字表示出来.</li>
<li>这些数字&#x2013;也就是数据&#x2013;并不是真实本身,但它们反映了对现实的测量结果.</li>
<li>数据的来源就在于此:我们开发测量技术,将物理和生物现象转化为可以储存在计算机中的数字.
<ul class="org-ul">
<li>这些测量技术可能非常先进,比如大型强子对撞机,核磁共振成像(MRI)机器,扫描电子显微镜;</li>
<li>也可能很简单,比如问卷调查,体重秤,或者医生对患者疾病严重程度的评分.</li>
</ul></li>
<li>测量设备的质量很重要,因为它直接关系到数据的准确性和精确性(本书 2.5 节会详细讨论这些概念).</li>
<li>但从概念上来看,所有数据的本质是相同的:
<ul class="org-ul">
<li>你在宇宙中测量某个事物</li>
<li>测量产生一个或一串数字(或文字,再转换成数字)</li>
<li>我们称这些数字为数据.</li>
<li>然后,你对这些数据进行统计分析,希望能够更好地理解你正在研究的系统.</li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-orgd703b18" class="outline-3">
<h3 id="orgd703b18"><span class="section-number-3">2.3.</span> What do data look like?</h3>
<div class="outline-text-3" id="text-2-3">
<ul class="org-ul">
<li>为了进行处理和分析,数据会被数字化并存储在计算机中.因此,从根本上说,数据是以一系列存储单元的二进
制状态进行编码的,但我们会用更熟悉的数字和字母来表示和可视化它们.</li>
<li>大多数数据集以表格形式表示,其中行对应数据样本,列对应所测量的特征.换句话说,
<ul class="org-ul">
<li>行代表观测值(observations)</li>
<li>列代表特征(features).</li>
</ul></li>
<li>图 2.2 给出了一个示例数据集:我在写这一章时,记录了我在联合办公空间里下午早些时候喝的咖啡评分.
<ul class="org-ul">
<li><p>
图2-2
</p>

<div id="orgc75cee9" class="figure">
<p><img src="https://raw.githubusercontent.com/harrifeng/image/master/ms/2-2.png" alt="2-2.png" />
</p>
<p><span class="figure-number">Figure 2: </span>ms/2-2.png</p>
</div></li>
<li>在表格中,每一行是一条观测记录,每一列是一个特征.这个例子说明,数据特征可以是类别型(用文本编码
表示),也可以是数值型.</li>
<li>表格中还有一个缺失值(那天是周六,我有点宿醉,所以没去联合办公空间).</li>
</ul></li>
<li>数据也可以是图像的形式(见图 2.3),它们的本质是数字,这些数字会映射为像素的颜色强度.
<ul class="org-ul">
<li><p>
图2-3
</p>

<div id="org626a0ee" class="figure">
<p><img src="https://raw.githubusercontent.com/harrifeng/image/master/ms/2-3.png" alt="2-3.png" />
</p>
<p><span class="figure-number">Figure 3: </span>ms/2-3.png</p>
</div></li>
</ul></li>
<li>有些数据集可能会存储为多维数组,比如三维立方体,而不是二维表格&#x2013;例如彩色图像通常会存储成一个立方体,
其三个维度分别表示宽度,高度和 RGB 颜色通道.</li>
<li>不过,在本书所讨论的统计分析中,我们关心的数据集通常是电子表格的形式:
<ul class="org-ul">
<li>行表示观测值(样本)</li>
<li>列表示特征(测量变量)</li>
</ul></li>
<li><p>
就像图 2.4 那样的结构.
</p>

<div id="orgfb304d4" class="figure">
<p><img src="https://raw.githubusercontent.com/harrifeng/image/master/ms/2-4.png" alt="2-4.png" />
</p>
<p><span class="figure-number">Figure 4: </span>ms/2-4.png</p>
</div></li>
<li>数据可以是数值型的,也可以是文本型的,你在图 2.2 中已经看到过这两种形式.</li>
<li>然而,非数值型数据通常会在分析之前被转换成数字.
<ul class="org-ul">
<li>例如,"Coffee"(咖啡)这一列的数据,可以用 0 表示卡布奇诺,用 1 表示浓缩咖啡,等等.</li>
</ul></li>
<li>需要注意的是,这种把数据类别映射成数字的方法是任意的:为什么不能用 1 表示卡布奇诺,用 2.3 表示浓缩
咖啡呢?</li>
<li>在某些情况下,这种数字映射会影响结果的解释,例如在回归分析中.你将在本书后面学到原因.</li>
<li>目前你只需要知道,文本数据在分析时通常会被转换成数字.</li>
<li>对整个数据集有一个鸟瞰式的整体视图很好,但对于庞大或多维度的数据集来说,这种方法并不适用.</li>
<li>此外,仅仅看着一堆电子表格中的数字并不会自动带来洞察,也不太可能单凭肉眼就从原始数据中看出有意义的
模式.因此,数据可视化是很有必要的,你将在下一章学习到许多数据可视化的方法.</li>
</ul>
</div>
</div>
<div id="outline-container-org7c04ffe" class="outline-3">
<h3 id="org7c04ffe"><span class="section-number-3">2.4.</span> Limitations of data</h3>
<div class="outline-text-3" id="text-2-4">
<ul class="org-ul">
<li>如果数据来自对宇宙的测量,那我们为什么还需要数据处理和统计分析呢?</li>
<li>难道我们不能直接相信原始数据吗?</li>
<li>很遗憾,并不是所有数据都能立即被信任,因此我们需要对数据进行清洗,准备,归一化或转换,并结合统计分析.</li>
<li>下面列出了一些困扰"原始"(未处理)数据的问题,这些问题促使我们在解释数据之前,先对其应用算法和分析方法.</li>
</ul>
</div>
<div id="outline-container-orgd5385c4" class="outline-4">
<h4 id="orgd5385c4"><span class="section-number-4">2.4.1.</span> Data come from imperfect measurements</h4>
<div class="outline-text-4" id="text-2-4-1">
<ul class="org-ul">
<li>数据的质量受限于测量的质量.以下是几个说明这种限制的例子:</li>
</ul>
</div>
<ol class="org-ol">
<li><a id="orgcce4bcb"></a>记忆偏差<br />
<div class="outline-text-5" id="text-2-4-1-1">
<ul class="org-ul">
<li>你让人们回忆 10 年前的购买偏好,并将调查放到网上,收集到数以万计的回答.</li>
<li>但这些数据究竟意味着什么?它们真的反映了人们当时的经济决策吗?</li>
<li>还是其实在测量他们的记忆,或者是他们对过去自我的理想化印象?</li>
</ul>
</div>
</li>
<li><a id="orgede68af"></a>测量环境限制<br />
<div class="outline-text-5" id="text-2-4-1-2">
<ul class="org-ul">
<li>你需要测量发动机内部的温度,但把温度计放进发动机会被融化.</li>
<li>于是你可能会把温度计放在发动机外面,但那样测到的温度其实是发动机温度 + 外界温度 + 热量经过发动机外
壳传递的影响的综合结果.</li>
</ul>
</div>
</li>
<li><a id="org60ddec2"></a>数据与现实不完全吻合<br />
<div class="outline-text-5" id="text-2-4-1-3">
<ul class="org-ul">
<li>2020 年初,新冠病毒在全球传播.当时各国都尝试统计感染人数.</li>
<li>但虽然病毒会让部分人死亡或出现严重健康问题,很多人无症状或症状轻微.</li>
<li>因此,数据呈现的是"报告的确诊病例数",而不是真正的"感染人数".</li>
<li>实际的感染人数比报告病例更重要,但在自测工具普及之前,并且只检测出现症状的人时,这个数字几乎无法准
确测量.</li>
</ul>
</div>
</li>
</ol>
</div>
<div id="outline-container-org680e5d6" class="outline-4">
<h4 id="org680e5d6"><span class="section-number-4">2.4.2.</span> Data my contains noise</h4>
<div class="outline-text-4" id="text-2-4-2">
<ul class="org-ul">
<li>另一个限制是,数据中往往会包含噪声.</li>
<li>"噪声"是一个出乎意料难以精确定义的概念,但一般可以理解为数据中不需要的变化.</li>
<li>有些噪声来源已知,例如:在没有做好屏蔽的电路中,会出现 50/60 Hz 的市电干扰噪声;</li>
<li>有些噪声来自测量设备的故障,例如手机摄像头镜头上有一块油渍,就会降低拍摄图像的质量;</li>
<li>还有一些噪声来自未知或无法量化的因素,例如人的体重取决于基因,年龄,生活方式及其他多种复杂因素的组合.</li>
<li>噪声可以是非系统性的(对所有测量产生大致相同的影响),也可以是系统性的(以某种方式影响测量,从而可能引入偏差).</li>
<li>有些类型的噪声在统计分析中容易被最小化或忽略,而另一些噪声则更具破坏性.</li>
<li>在第 7 章(以及本书的许多其他章节)中,你会学到更多关于识别与处理噪声的方法.</li>
<li>现在,你只需要理解:噪声会给数据引入不需要的变动,从而使数据更难解释
<ul class="org-ul">
<li><p>
参见图 2-5
</p>

<div id="org1a0154d" class="figure">
<p><img src="https://raw.githubusercontent.com/harrifeng/image/master/ms/2-5.png" alt="2-5.png" />
</p>
<p><span class="figure-number">Figure 5: </span>ms/2-5.png</p>
</div></li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-org18cfa14" class="outline-4">
<h4 id="org18cfa14"><span class="section-number-4">2.4.3.</span> Outliers may skew statistics</h4>
<div class="outline-text-4" id="text-2-4-3">
<ul class="org-ul">
<li>数据集中有时会包含相对于其他数据来说异常的少量数据点.</li>
<li><p>
这些数据点被称为离群值(outliers)或非代表性样本(non-representative samples)(见图 2.6).
</p>

<div id="org908f76a" class="figure">
<p><img src="https://raw.githubusercontent.com/harrifeng/image/master/ms/2-6.png" alt="2-6.png" />
</p>
<p><span class="figure-number">Figure 6: </span>ms/2-6.png</p>
</div></li>
<li>离群值可能由多种原因造成,例如测量误差或特殊样本.</li>
<li>离群值对分析结果的影响可能非常大,也可能几乎没有影响&#x2013;这取决于离群值的性质,大小,以及所进行的统计分析类型.</li>
<li>因此,在进行分析之前,通常有必要检查数据中是否存在离群值,并在必要时将其移除.</li>
<li>更多相关内容会在第 7 章中详细讨论.</li>
</ul>
</div>
</div>
<div id="outline-container-orgff17c82" class="outline-4">
<h4 id="orgff17c82"><span class="section-number-4">2.4.4.</span> What is a measurement unit?</h4>
<div class="outline-text-4" id="text-2-4-4">
<ul class="org-ul">
<li>我们使用的大多数计量单位&#x2013;秒,千克,英里,主观评分等等&#x2013;其实都是人为设定,任意创造的.例如:
<ul class="org-ul">
<li>一秒 的定义基于铯-133 原子的能态跃迁频率(但为什么是这个同位素,而不是别的呢?)</li>
<li>一千克 等于一千克(1000 克),而 1 克最初被定义为一立方厘米水的重量(但为什么用立方厘米?为什么选
特定温度下的水?又为什么用十进制?)</li>
<li>一英里 等于 5280 英尺,至于为什么&#x2026; 嗯,你懂我的意思了.</li>
</ul></li>
<li>当然,也有一些计量单位似乎是宇宙通用的,也就是说,无论在宇宙何处,它们都是相同的.</li>
<li>一个例子是光速,物理学家相信光速在宇宙各处都是恒定的.</li>
<li>所以,如果你必须向一个外星人解释地球上的交通情况,说我们开车的速度是 8.946989587×10⁻⁸ c(c 代表光速)
会比说60 英里/小时更好&#x2013;毕竟"英里"和"小时"都是不具普适性的任意单位.</li>
<li>当然,这些人类自创的单位本身没有错,它们方便,易用,并能让我们有效沟通.</li>
<li><p>
我想表达的只是:这些不具有普遍意义,带有文化色彩的测量单位,只是把真实的宇宙与数据集中的数值隔开了
又一层.
</p>
<pre class="example" id="orga180268">
Non-universal, cultural measurement units are just one more step in between the actual universe
and the numerical values in our datasets.
</pre></li>
</ul>
</div>
</div>
<div id="outline-container-org33c7d52" class="outline-4">
<h4 id="org33c7d52"><span class="section-number-4">2.4.5.</span> Conclusion</h4>
<div class="outline-text-4" id="text-2-4-5">
<ul class="org-ul">
<li>虽然我们喜欢认为数据直接来自那些我们想要理解的宇宙中的事物,但事实并非如此.</li>
<li>实际上,数据来自测量设备.
<ul class="org-ul">
<li>如果测量设备不精确,存在噪声或有缺陷,那么数据将会很难甚至无法正确解读.</li>
<li>如果我们没能理解宇宙与数据之间的区别,就可能得出具有误导性甚至完全错误的结论.</li>
</ul></li>
</ul>
</div>
</div>
</div>
<div id="outline-container-org390a108" class="outline-3">
<h3 id="org390a108"><span class="section-number-3">2.5.</span> Accuracy, precision, resolution, range</h3>
<div class="outline-text-3" id="text-2-5">
<ul class="org-ul">
<li>测量设备的质量可以通过多种方式进行量化.在本节中,你将学习到本节标题所列四个术语的定义及其区别.</li>
</ul>
</div>
<div id="outline-container-org7581bd8" class="outline-4">
<h4 id="org7581bd8"><span class="section-number-4">2.5.1.</span> Accuracy 准确度</h4>
<div class="outline-text-4" id="text-2-5-1">
<ul class="org-ul">
<li>指的是测量数据相对于其所测量特征的正确程度</li>
<li>例如,一个廉价制造的心率监测仪报告你的心跳是每分钟80次,而你的实际心率是50 bpm(准确度低).相比之下,
更高质量的心率监测仪报告你的心率为52 bpm(准确度更高,尽管仍不完美).</li>
</ul>
</div>
</div>
<div id="outline-container-org3ef11a4" class="outline-4">
<h4 id="org3ef11a4"><span class="section-number-4">2.5.2.</span> Precision 精密度</h4>
<div class="outline-text-4" id="text-2-5-2">
<ul class="org-ul">
<li>是设备在重复测量中提供相同数据值的能力</li>
<li>例如,想象一下你在一个数字体重秤上上下下称了五次.你的体重在如此短的时间内不会波动,但测量值却是
72.4,73.1,70.4,73.2和72.1公斤.这个秤的精密度低.</li>
<li>相反,一个精密度更高的秤可能会显示72.4,72.5,72.4,72.2和72.3公斤(轻微的波动可能来自秤上姿势和体
重分布的变化).</li>
</ul>
</div>
</div>
<div id="outline-container-orgb0df05f" class="outline-4">
<h4 id="orgb0df05f"><span class="section-number-4">2.5.3.</span> Resolution 分辨率</h4>
<div class="outline-text-4" id="text-2-5-3">
<ul class="org-ul">
<li>指的是连续两次测量之间的数值差距</li>
<li>例如,厨房烤箱中一个低分辨率的温度传感器报告的温度精确到25°C(例如,200°,225°,250°),而分辨率更
高的烤箱则报告精确到1°C的温度.在信号处理和时间序列分析中,分辨率被称为采样率或离散化率;在数字图像
处理中,分辨率由像素数量决定.</li>
</ul>
</div>
</div>
<div id="outline-container-org7de38b9" class="outline-4">
<h4 id="org7de38b9"><span class="section-number-4">2.5.4.</span> Range 量程</h4>
<div class="outline-text-4" id="text-2-5-4">
<ul class="org-ul">
<li>是传感器能够测量的最小值和最大值</li>
<li>例如,你放在嘴里,用来判断能否说服父母让你请假在家打游戏或躺一整天的体温计,其量程可能是35°C至42°C.
让这种测量设备报告低至-100°C或高达300°C的温度是没有意义的.</li>
</ul>
<hr />
<ul class="org-ul">
<li>准确度和量程很少被混淆,因为这些都是日常生活中使用的概念.</li>
<li>然而,精密度和分辨率则更常被混淆,请务必理解它们之间的区别,因为你肯定想成为那个纠正别人错误的"讨厌
鬼",而不是那个被纠正的尴尬者.</li>
<li>图2.7展示了一系列常用于说明这些概念的靶心图.
<ul class="org-ul">
<li><p>
如图
</p>

<div id="org350ac15" class="figure">
<p><img src="https://raw.githubusercontent.com/harrifeng/image/master/ms/2-7.png" alt="2-7.png" />
</p>
<p><span class="figure-number">Figure 7: </span>ms/2-7.png</p>
</div></li>
<li>一个理想的测量设备只会将点打在靶心中心.</li>
<li>最下面一排的靶心图缺少的描述文字为:
<ol class="org-ol">
<li>A⬇️R⬆️P⬆️</li>
<li>A⬇️R⬆️P⬇️</li>
<li>A⬆️R⬇️P⬇️</li>
</ol></li>
</ul></li>
<li>毋庸置疑,准确度,分辨率和精密度都应该被最大化.但这并不总是可能:
<ul class="org-ul">
<li>部分是由于技术限制</li>
<li>部分是由于你试图测量的数据特性.例如,心理学家使用自我报告问卷来评估人格风格,但人们可能无法非常
准确地洞察自身能力(例如,65%的美国人认为自己比50%的人口更聪明).</li>
</ul></li>
<li>低精密度和低分辨率可以通过重复测量和取平均值来克服,例如称重五次然后取平均值作为你的"真实"体重.</li>
<li>低准确度则很成问题,因为它可能引入系统性偏差,从而导致误解.</li>
</ul>
</div>
</div>
</div>
<div id="outline-container-org5c56432" class="outline-3">
<h3 id="org5c56432"><span class="section-number-3">2.6.</span> Data types</h3>
<div class="outline-text-3" id="text-2-6">
<ul class="org-ul">
<li>因为本书涉猎了coding部分,所以我们需要区别如下两个概念:
<ul class="org-ul">
<li>data type in computer science</li>
<li>data type in statistics</li>
</ul></li>
<li>在计算机科学中,数据类型指的是数据存储的格式(例如:int,string,float,bool).数据类型会影响变量
可以进行的操作种类,以及这些变量在计算机内存中所占用的存储空间大小.</li>
<li>在统计学中,数据类型是指根据数据的性质,将数据归纳到的某个类别.数据类型的类别会影响可以对数据应用
的可视化方式以及统计分析方法.</li>
<li>人们已经区分出了许多不同的数据类型.总体上,数据可以分为数值型或分类型(有时也称为标签型).在这两
个大类中,还可以进一步细分.
<ul class="org-ul">
<li><p>
图 2.8 提供了一个概览.
</p>

<div id="orga722812" class="figure">
<p><img src="https://raw.githubusercontent.com/harrifeng/image/master/ms/2-8.png" alt="2-8.png" />
</p>
<p><span class="figure-number">Figure 8: </span>ms/2-8.png</p>
</div></li>
</ul></li>
<li>我们下面挨个来介绍下图2-8中的各种数据类型</li>
</ul>
</div>
<div id="outline-container-org9f0c8c5" class="outline-4">
<h4 id="org9f0c8c5"><span class="section-number-4">2.6.1.</span> 数值型数据(Numerical data)</h4>
<div class="outline-text-4" id="text-2-6-1">
<ul class="org-ul">
<li>由数字组成.但并不仅仅是"看起来是数字"就能算数值型,因为分类数据(categorical data)有时也会用数字
表示.</li>
<li>数值型数据的定义特征在于:数据值与它所反映的现实世界数量之间有有意义的联系.
<ul class="org-ul">
<li>例如,如果你有 47 个苹果,那么"47"与一个实际存在的物理数量密切相关.</li>
<li>反之,如果我们规定 BMW=1,Mercedes=2,Honda=3,那么"1"和 BMW 之间并没有内在意义上的映射关系;我本
可以给 BMW 指定成任何一个数字(或者根本不用数字).</li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-org449f28f" class="outline-4">
<h4 id="org449f28f"><span class="section-number-4">2.6.2.</span> 离散数据(Discrete data)</h4>
<div class="outline-text-4" id="text-2-6-2">
<ul class="org-ul">
<li>离散数据反映的是可数的事物,通常用整数来表示.</li>
<li>例如,一个城市的人口就是可数的,并且一定是整数
<ul class="org-ul">
<li>新西兰惠灵顿市的人口可能是 422,000 人,</li>
<li>但不会是 422,000.2 人.</li>
</ul></li>
<li>这意味着数据的精度限制在整数范围内,而这个限制来自数据本身,而不是来自测量工具.</li>
<li>这就引出了**区间数据(Interval data)**的概念(因为Interval data的精度由工具决定).</li>
</ul>
</div>
</div>
<div id="outline-container-orgb7f5e66" class="outline-4">
<h4 id="orgb7f5e66"><span class="section-number-4">2.6.3.</span> 区间数据(Interval data)</h4>
<div class="outline-text-4" id="text-2-6-3">
<ul class="org-ul">
<li>区间数据是具有有意义的间隔(interval)且精度由测量工具决定的数值数据.</li>
<li>所谓"测量精度由工具限制",是指数据本身没有精度限制,而是测量设备决定了我们能测得多精确.</li>
<li>举例来说,如果室外温度是 24 °C,一个更精确的温度计可能读出 24.43 °C,更精确的甚至可能读到
24.4323492184 °C,依此类推.</li>
<li>测量精度取决于仪器和应用场景(比如在实验室监控化学反应需要远高于测量一个城市的平均室温的精度).</li>
<li>需要注意的是,0 °C 并不表示"没有温度";它依然是一个具体的温度值,–24 °C 也是如此.</li>
<li>"零点"的意义在统计数据类型中非常重要,它直接决定了区间数据与比率数据(Ratio data)的区别.</li>
<li>为什么"0"的含义很重要?:
<ul class="org-ul">
<li>这是因为"0"的含义决定了我们能对数据做什么数学运算.</li>
</ul></li>
<li>我们可以对区间数据做加法和减法,但不能做乘法或除法.
<ul class="org-ul">
<li>例如:20 °C 比 10 °C 高 10 °C,但不能说它是"两倍热".这是因为 0 °C 的物理意义是:在标准大气压下,
纯水冻结时原子所具有的某个动能水平.</li>
<li>原子完全可以有两倍的动能,但 2×0 °C 依然是 0 °C,这个运算在物理意义上不成立.</li>
<li>另一个例子:–10 °C 的动能翻倍显然不会得到 –20 °C.</li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-orgb2e97c7" class="outline-4">
<h4 id="orgb2e97c7"><span class="section-number-4">2.6.4.</span> 比率数据(Ratio data)</h4>
<div class="outline-text-4" id="text-2-6-4">
<ul class="org-ul">
<li>比率数据是具有有意义零点的区间数据,因此我们可以对它进行乘法和除法.
<ul class="org-ul">
<li>例如身高:一个 10 米高的建筑确实是一个 5 米高建筑的两倍高,而 0 米 代表完全没有高度.</li>
</ul></li>
<li>比率数据既可以相加,也可以相乘.</li>
<li>比率数据通常不能取负值&#x2013;没有"负高度",就像一条线不能有"负长度",气球也不能有"负体积".</li>
<li>不过在一些情境中,为了方便,我们会用负数表示相反方向的概念,例如:"负高度"可能用来表示地下建筑;"负货币"表示负债.</li>
</ul>
</div>
</div>
<div id="outline-container-orga78a6b5" class="outline-4">
<h4 id="orga78a6b5"><span class="section-number-4">2.6.5.</span> 分类数据(Categorical data)</h4>
<div class="outline-text-4" id="text-2-6-5">
<ul class="org-ul">
<li>也叫 标记数据(labeled data).</li>
<li>这类数据由不同的类别构成,而这些类别之间可能在许多方面存在差异.
<ul class="org-ul">
<li>例如,"高中"与"大学"是变量"教育水平"的两个类别,但它们之间的差异不仅仅是一个学位名称的不同,还可
能涉及教育,学术,社会,文化,经济等多方面的差别.</li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-orgd9613d2" class="outline-4">
<h4 id="orgd9613d2"><span class="section-number-4">2.6.6.</span> 名义数据(Nominal data)</h4>
<div class="outline-text-4" id="text-2-6-6">
<ul class="org-ul">
<li>名义数据是离散的,不可排序的类别.</li>
<li>这意味着我们可以给不同的类别分配数字,但这种映射是任意的,数字与类别之间没有内在联系,数字彼此之间
也没有关系.
<ul class="org-ul">
<li>比如,我们做一个问卷调查,让人们填写他们最近看过的电影类型.类型可能包括:科幻片(sci-fi),浪漫
喜剧(romcom),纪录片(documentary),动作片(action),剧情片(drama)等.</li>
<li>我们可以设置映射:科幻片 = 1,浪漫喜剧 = 2.但这种数字分配与电影类型本身没有任何关系,我完全可以
把浪漫喜剧设为 1,把科幻片设为 2.</li>
</ul></li>
<li>这种编号不能拿来做数学运算:两个"科幻片"并不等于一个"浪漫喜剧",浪漫喜剧也不是科幻片的"两倍类型".</li>
</ul>
</div>
</div>
<div id="outline-container-orgd00b86f" class="outline-4">
<h4 id="orgd00b86f"><span class="section-number-4">2.6.7.</span> 有序数据(Ordinal data)</h4>
<div class="outline-text-4" id="text-2-6-7">
<ul class="org-ul">
<li>有序数据是可以按某种指标排序的离散数据.以"教育水平"为例:
<ul class="org-ul">
<li>可能的取值包括初中,高中,本科,硕士,博士.</li>
<li>这些类别是离散的,并且可以排序:本科高于高中,硕士高于本科.</li>
<li>我们也可以给它们分配数字:初中 = 1,高中 = 2,本科 = 3,硕士 = 4,博士 = 5.</li>
</ul></li>
<li>但是,类别间的差距以及分配的数字并不是等距的:高中和本科的差别并不像本科和硕士的差别那样在数量上相
等.两个高中学历的人也不会"等于"一个硕士学位.</li>
</ul>
</div>
</div>
<div id="outline-container-org6ca35db" class="outline-4">
<h4 id="org6ca35db"><span class="section-number-4">2.6.8.</span> 数据类型的变化</h4>
<div class="outline-text-4" id="text-2-6-8">
<ul class="org-ul">
<li>通过改变收集数据的方式,我们有时可以将数据类型从名义数据变为有序数据.
<ul class="org-ul">
<li>比如刚才的电影类型例子,如果我们让受访者按喜好顺序排列电影类型(比如某人最喜欢科幻片,其次动作片
其次纪录片),那么这些数据就可以排序,也能分配有意义的数字,就成了有序数据,而不是名义数据.</li>
</ul></li>
<li>在下一章你会看到,区间数据和比率数据通常会被转化成离散数据用来绘制直方图.</li>
</ul>
</div>
</div>
<div id="outline-container-org7ee929c" class="outline-4">
<h4 id="org7ee929c"><span class="section-number-4">2.6.9.</span> 有序数据的数学运算</h4>
<div class="outline-text-4" id="text-2-6-9">
<ul class="org-ul">
<li>理论上,我们不能对有序数据进行算术运算(原因同上),不过在实践中,很多地方都会这么做.</li>
<li>虽然解释上会有问题,但这种方法足够常见,以至于我们习惯接受它.举个例子:
<ul class="org-ul">
<li>我希望你喜欢读这本书,如果你喜欢,也希望你在购买网站给它评分.评分可能是 1,2,3,4 或 5 星.</li>
</ul></li>
<li>但问题是:
<ul class="org-ul">
<li>1 星和 2 星的差异,和 4 星与 5 星的差异是一样的吗?</li>
<li>4 星是否正好是 2 星的两倍好?</li>
<li>两个低分能不能相加变成一个高分?</li>
</ul></li>
<li>答案都是 不成立.评分是有序数据,而不是数值数据.因此,它不应该被加总或平均.</li>
<li>然而,现实中每个有评分的网站都会显示平均分,消费者也会用这些平均分来做购买决策.</li>
<li>这是严重的统计学违规行为并会造成严重后果吗?不是.</li>
<li>平均分确实有参考价值,我们也没必要在每一种数据类型都严格套用规则.</li>
</ul>
</div>
<ol class="org-ol">
<li><a id="orgbf4cf3b"></a>从纯统计到应用统计<br />
<div class="outline-text-5" id="text-2-6-9-1">
<ul class="org-ul">
<li>这个例子虽小,却深刻反映出统计的现实:
<ul class="org-ul">
<li>统计学中充满了假设,要求和规则,有些必须遵守,有些则可以在一定条件下弯曲,甚至打破.</li>
<li>纯统计(pure statistics) 是算法开发和严格数学证明所必需的;</li>
<li>应用统计(applied statistics) 则允许我们在复杂,混乱的现实世界中运用统计方法.</li>
</ul></li>
<li>现实世界很混乱,如果一味死守规则,我们可能寸步难行.</li>
<li>我希望在读完本书后,你能理解 什么时候,为什么可以稍微弯曲规则,甚至在某些假设不成立的情况下继续分析</li>
</ul>
</div>
</li>
</ol>
</div>
</div>
<div id="outline-container-orgdbdfc92" class="outline-3">
<h3 id="orgdbdfc92"><span class="section-number-3">2.7.</span> From anecdotes to populations</h3>
<div class="outline-text-3" id="text-2-7">
<ul class="org-ul">
<li>你可能知道,datum 指的是一个单独的数据点,而 data 指的是多个数据点.</li>
<li>但是,数据还有更细致的层次划分,这些划分会影响你能对数据进行的统计分析类型&#x2013;以及你能得出的结论类型
我会先列出并简要定义这些层次,然后再进行更深入的讨论.</li>
<li>在此之前,先让我来定义一下样本量(sample size):它指的是一个数据集中观测值的数量.
<ul class="org-ul">
<li>例如,如果你调查了 1000 个人,询问他们的生活幸福感和咖啡消费情况,那么你的样本量就是 1000.</li>
</ul></li>
<li>不要把样本量(sample size)和数据点总数(total number of data points)混淆:在这个例子中,总数据点数是
2000(1000 个人分别给出关于幸福感和咖啡的回答),由 1000 个样本和两个特征组成.</li>
<li>样本量通常用大写字母 N(有时用小写 n)表示,所以在这个例子中,N = 1000.</li>
</ul>
</div>
<ol class="org-ol">
<li><a id="org9afff66"></a>推测或理论(Speculation or theory, N = 0)<br />
<div class="outline-text-5" id="text-2-7-0-1">
<ul class="org-ul">
<li>开发新的想法,假设和理论,即使一个数据点都没有,也是可以完成的.虽然这对科学发展至关重要,但这种非
实证研究与统计学教材并不直接相关.</li>
</ul>
</div>
</li>
<li><a id="org3649a2b"></a>轶事(Anecdote, N = 1)<br />
<div class="outline-text-5" id="text-2-7-0-2">
<ul class="org-ul">
<li>轶事是关于一个人所发生事情的故事.</li>
</ul>
</div>
</li>
<li><a id="orgdec9cc7"></a>病例报告(Case report, N = 1)<br />
<div class="outline-text-5" id="text-2-7-0-3">
<ul class="org-ul">
<li>病例报告本质上是一种在医学背景下的轶事,通常是对某位患有罕见病症患者的诊断或治疗的描述.病例报告有
时可能包含多个患者(即 N &gt; 1),但样本量仍然很小.</li>
</ul>
</div>
</li>
<li><a id="org01e6d37"></a>样本(Sample)<br />
<div class="outline-text-5" id="text-2-7-0-4">
<ul class="org-ul">
<li>在前文中我定义了样本量(sample size).样本指的是你进行测量并收集数据的个体集合.例如,如果你想知道
狐獴的体重,不可能测量所有曾经存在过的狐獴;相反,你会测量其中的一部分&#x2013;这部分就是样本.</li>
</ul>
</div>
</li>
<li><a id="org7f9d193"></a>预研 / 试点研究(Pilot study,小样本 N)<br />
<div class="outline-text-5" id="text-2-7-0-5">
<ul class="org-ul">
<li>"试点研究"并不是关于驾驶飞机的飞行员的研究项目.它的真正含义是:
<ul class="org-ul">
<li>使用太小而不足以进行严格统计分析的样本量进行的研究,</li>
<li>但样本量又大到足以判断设备和实验过程 <b>是否可行</b></li>
</ul></li>
<li>试点研究(也叫"探索性研究"或"概念验证研究")的作用包括:
<ul class="org-ul">
<li>在正式收集全量数据前,有机会调整实验方案;</li>
<li>向资助机构证明研究团队有能力完成更大型的研究计划.</li>
</ul></li>
</ul>
</div>
</li>
<li><a id="org960db79"></a>小规模 vs. 大规模研究(Small-scale vs. large-scale studies)<br />
<div class="outline-text-5" id="text-2-7-0-6">
<ul class="org-ul">
<li>这两个术语有一定模糊性,因为并没有一个明确的样本量界定何为"小"或"大";它取决于多个因素,例如效:
<ul class="org-ul">
<li>应量大小</li>
<li>数据获取难度</li>
<li>以及该研究领域的常见样本量.</li>
</ul></li>

<li>大规模研究的主要优势是:
<ul class="org-ul">
<li>具有更高的统计效力以控制混杂因素;</li>
<li>能够识别更小的效应量;</li>
<li>结果更容易推广到更广泛的人群.</li>
</ul></li>
</ul>
</div>
</li>
<li><a id="org56a5915"></a>观察性研究(Observational study)<br />
<div class="outline-text-5" id="text-2-7-0-7">
<ul class="org-ul">
<li>这个术语有点容易误导&#x2013;数据都是"观察"得到的,那么是不是所有有数据的研究都是观察性研究?
<ul class="org-ul">
<li>其实不然.观察性研究是指在没有任何实验性操控的情况下收集数据,即没有引入干预或控制.</li>
<li>例如:研究男性或女性在 1 月 vs. 6 月加入健身房的倾向.</li>
</ul></li>
<li>与之相对的,是实验性研究(experimental study),即研究人员会操控变量进行干预.</li>
</ul>
</div>
</li>
<li><a id="orga62baa5"></a>便利样本(Convenience sample)<br />
<div class="outline-text-5" id="text-2-7-0-8">
<ul class="org-ul">
<li>便利样本是指研究人员几乎不费力气就获取到的样本.比如只调查你的朋友和家人,就是一种便利样本.</li>
<li>便利抽样的结果往往缺乏普遍性,因为这个易获取的群体可能与更广泛的人群存在差异.尽量避免这种采样方式,
除非是在试点研究阶段,它才是可接受的.</li>
</ul>
</div>
</li>
<li><a id="orge06843f"></a>总体(Population)<br />
<div class="outline-text-5" id="text-2-7-0-9">
<ul class="org-ul">
<li>总体是指你想要了解的所有对象的集合.在很多情况下,总体是不可能被完全测量的,例如宇宙中所有的恒星.
这也是为何我们用样本来进行分析的原因.</li>
</ul>
</div>
</li>
</ol>
<div id="outline-container-org1052cff" class="outline-4">
<h4 id="org1052cff"><span class="section-number-4">2.7.1.</span> Sample vs. population</h4>
<div class="outline-text-4" id="text-2-7-1">
<ul class="org-ul">
<li>虽然个体的情况可能很有趣,但大多数研究的目标是理解总体.
<ul class="org-ul">
<li>举例来说,一个生产小工具的公司,并不想只把小工具卖给一个人,而是希望卖给很多人;</li>
<li>心理学家想要理解人们的思维,情感和行为,而不仅仅是理解某一个人;</li>
<li>肿瘤科医生的目标是治愈所有人的所有癌症,而不是只为某一个人治好某一种癌症.</li>
</ul></li>
<li>有些总体很小,可以全部测量.例如:
<ul class="org-ul">
<li>如果我们对某家公司某个部门里所有员工的薪资感兴趣;</li>
<li>或者我们想知道一个动物园里所有狮子的年龄&#x2013;这些都是总体,而且我们可以测量总体中每一个成员.</li>
</ul></li>
<li>但是,很多总体是无法被完整测量的.比如,
<ul class="org-ul">
<li>如果我们想知道全体意大利人的平均身高,维基百科上有人声称,意大利人大约有 1.4 亿人.要找到每一个意
大利人并测量他们的身高,显然不可行.</li>
<li>因此,我们会选择一个较小数量的意大利人&#x2013;比如几百人&#x2013;来测量他们的身高,这就是样本.</li>
</ul></li>
<li>抽样的核心目的是:我们希望把结论推广到整个总体.
<ul class="org-ul">
<li>仔细想想这里的逻辑:我们想知道所有意大利人的身高,</li>
<li>但我们只测量了 100 个意大利人,</li>
<li>我们并不是真的只关心这 100 个具体的人,而是想根据样本,对整个意大利人群做出科学的结论.</li>
<li>换句话说,我们希望能从样本推广到总体.</li>
</ul></li>
<li>但是,这个逻辑站得住吗?
<ul class="org-ul">
<li>我们真的能根据样本对总体做出结论吗?</li>
<li>答案是有条件的"可以".</li>
</ul></li>
<li>是的,我们可以推广,但前提是满足特定条件,即样本必须是
<ul class="org-ul">
<li>随机的(random)</li>
<li>具有代表性(representative)</li>
<li>且样本量足够大(sufficiently large)</li>
</ul></li>
<li>我将在第 9 章详细讨论这个问题,但因为从样本推广到总体极其重要,所以我希望现在就把这个概念种在你的脑
海里&#x2013;它正是统计学的核心所在.</li>
</ul>
</div>
</div>
<div id="outline-container-orgc403acd" class="outline-4">
<h4 id="orgc403acd"><span class="section-number-4">2.7.2.</span> "Big enough" samples</h4>
<div class="outline-text-4" id="text-2-7-2">
<ul class="org-ul">
<li>多大的样本量才足够让我们将样本推论至总体呢?</li>
<li>这是一个非常重要的问题,但遗憾的是,无法给出一个通用的答案.</li>
<li>我真希望能像这样轻松下结论:"N = 30 就是一个足够大的样本量".</li>
<li>但现实是,合适的样本量取决于多个因素,包括:
<ul class="org-ul">
<li>效应量(effect size);</li>
<li>样本与总体的变异程度(variability);</li>
<li>样本特征与总体特征的匹配程度;</li>
<li>样本是如何收集的.</li>
</ul></li>
<li>除此之外,还有一些实际因素会影响样本量:
<ul class="org-ul">
<li>某些类型的病人群体十分稀少或难以接触;</li>
<li>有些研究成本高且受预算限制;</li>
<li>有些研究耗时长,而研究人员可能是迫于论文答辩压力的博士生,需要尽快完成工作.</li>
</ul></li>
<li>你将在第 17 章学到更多有关估算合理样本量的知识;目前你只需记住这样一个关键点:
<ul class="org-ul">
<li>样本量越大,通常越好("更好"意味着统计结果中出现偶然偏差的风险更小,结论更容易推广到抽样来源的总
体);</li>
<li>但现实中,非常大的样本量并不总是可行的.</li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-orgdcfb99e" class="outline-4">
<h4 id="orgdcfb99e"><span class="section-number-4">2.7.3.</span> Problems with N=1 studies</h4>
<div class="outline-text-4" id="text-2-7-3">
<ul class="org-ul">
<li>案例研究和轶事(anecdote)可以成为很精彩的故事,但在解读时必须格外谨慎,尤其当研究目标是为了理解总
体时.</li>
<li>我并不是说 N = 1 的报告不应该存在&#x2013;它们可能很有趣,也能激发灵感.</li>
<li>有些人甚至可能仅仅基于一个轶事或一个临床病例报告,就发展出完整的研究方向.但是,真正带有严格统计分
析并且具有可推广性的研究,往往发生在大规模研究中.</li>
<li>为什么 N = 1 的研究难以解读呢?
<ul class="org-ul">
<li>主要限制在于,这种观察结果很可能缺乏代表性.</li>
</ul></li>
<li>事实上,这类案例之所以被报道,是因为它不寻常,否则就不会引起关注.</li>
<li>这就像新闻总是报道那些重大,罕见的事件,而不会去报道某个普通人度过了和几百万人一模一样的平凡一天.</li>
<li>这意味着,在 N = 1 的研究中,几乎不可能进行统计推断,也很难将结论推广到总体.</li>
<li>另一方面,拥有大样本量也并不能保证就能获得完美的统计推断和可推广性.依然可能出现的问题包括:
<ul class="org-ul">
<li>抽样变异(sampling variability)</li>
<li>噪声或离群值(noise / outliers)</li>
<li>实验设计缺陷</li>
<li>统计方法使用错误等等.</li>
</ul></li>
<li>关键结论是:
<ul class="org-ul">
<li><p>
案例报告和轶事无法推广到总体;而大规模研究才有可能具备推广性.
</p>
<pre class="example" id="org876660d">
Case reports and anecdotes cannot be generalized, whereas larger-scale studies proffer the
possibility of generalizability.
</pre></li>
</ul></li>
</ul>
</div>
</div>
</div>
<div id="outline-container-orge5c2fbf" class="outline-3">
<h3 id="orge5c2fbf"><span class="section-number-3">2.8.</span> Data management</h3>
<div class="outline-text-3" id="text-2-8">
<ul class="org-ul">
<li>数据管理(Data management) 指的是一种用于记录,存储,和归档数据的系统.</li>
<li>根据数据的性质,合理的数据管理可能包括安全限制或匿名化处理.</li>
<li>数据管理的范围还包括你用来处理,可视化,和分析数据的代码.</li>
<li>数据管理的重要性在于,格式整齐,结构清晰的数据更容易使用和共享.</li>
<li>良好的数据管理还能帮助你预防问题,并方便在需要时共享数据.</li>
<li>我们在这个美丽的地球上时间有限,而恰当的数据管理能让我们把更多时间花在有趣且有洞察力的分析上,而不
是被缺乏文档,格式混乱的数据搞得焦头烂额.</li>
<li>好消息是,数据管理并不复杂,只要提前投入一些精力,就能确保高质量的数据.
<ul class="org-ul">
<li>要管理好数据,你需要一个计划.</li>
</ul></li>
<li>数据管理计划(Data Management Plan,DMP)需要针对每个数据集和实验方案进行定制化设计,因此我无法提供
一个通用的"一招通"的方案.</li>
<li>所以,在正式收集数据集之前,请先设计或调整一份数据管理计划,
<ul class="org-ul">
<li>记录你的命名规则,组织方式,数据与代码文件的存储方法,</li>
<li>并考虑你将在代码中如何识别和导入数据文件.</li>
</ul></li>
<li>最后,一个良好的数据管理计划必须包含数据备份.备份的方法取决于数据的性质和大小,但最重要的规则是:
<ul class="org-ul">
<li>务必保留多份数据副本.</li>
</ul></li>
<li>一个可靠的备份方案可能包括:
<ul class="org-ul">
<li>一份数据存在办公室里的外接硬盘上;</li>
<li>一份数据存在笔记本电脑里;</li>
<li>另一份数据放在云存储中.</li>
</ul></li>
<li>许多研究机构和大型公司都有内部的数据归档系统.</li>
<li>但需要注意,某些敏感数据(如医疗或财务信息)可能被禁止存储在非安全地点,因此在备份时一定要遵守相应
法律与政策要求.</li>
</ul>
</div>
</div>
<div id="outline-container-org1836cf8" class="outline-3">
<h3 id="org1836cf8"><span class="section-number-3">2.9.</span> The ethics of making up data</h3>
<div class="outline-text-3" id="text-2-9">
<ul class="org-ul">
<li>听起来很简单,对吧?"不要捏造数据."&#x2013;好像一句话就能结束讨论.</li>
<li>但这里需要一些细微区分.捏造数据本身并不是有问题的.
<ul class="org-ul">
<li>事实上,我为这本书创造了大量的虚拟数据,</li>
<li>在你用这本书学习时,我也会鼓励你创造大量的虚拟数据.</li>
<li>我在其他书籍,在线课程以及线下教学中,同样经常使用虚拟数据.</li>
</ul></li>
<li>有些人会用"生成数据(generating data)"或"模拟数据(simulating data)"这样的说法,但归根到底,这和
"捏造假数据"是同一回事.</li>
<li>生成虚拟数据是有价值的
<ul class="org-ul">
<li>模拟数据是学习统计的无价方法.</li>
<li>通过创造并使用虚拟数据,你可以在统计分析方面建立信心和直觉,这些是仅使用真实数据往往难以获得的.</li>
</ul></li>
<li>我会在第 5 章详细解释和论证这一点,但提前说结论:
<ul class="org-ul">
<li>数据创造过程使你能够控制效应量,噪声特征,数据分布形状,样本量等关键因素;</li>
<li>而这些因素在真实数据中往往无法人为操控,却对理解统计原理至关重要.</li>
</ul></li>
<li>将虚拟数据冒充真实数据是极其有害的
<ul class="org-ul">
<li>当人们讨论"捏造数据的伦理"时,一般指的是这一种情况.</li>
<li>问题不在于"假数据"本身,而在于把假数据当成真数据来表现和使用.</li>
</ul></li>
<li>我们可以区分两种不诚信行为:
<ul class="org-ul">
<li>捏造数据(faking data):凭空编造整组数据集;</li>
<li>篡改数据(manipulating data):为了得到特定结果,故意修改真实数据集.</li>
</ul></li>
<li>这两种行为在伦理上没有区别:都不要做.</li>
<li>如果你被发现将假数据冒充为真数据,可能会失去工作,失去声誉;</li>
<li>如果你与他人合作,他们也可能受到牵连.</li>
<li>如果数据在现实世界中有直接影响(例如制造工厂的安全数据),</li>
<li>那么捏造或篡改这些数据可能会直接危及他人的生命安全.</li>
<li>即使你没有被发现,你也不想背负那种长期撒谎带来的压力,焦虑与恐惧.我们生活在这个复杂多变的世界中,
已经有足够多的社会,经济,健康和气候压力,不要再给自己加上"假数据"这个烦恼来源.</li>
<li>犯错与造假是两回事
<ul class="org-ul">
<li>每个人都会犯错&#x2013;这是人之常情.</li>
<li>错误(mistake)与操纵(manipulation)的区别是:诚实的错误是无意的,而捏造或篡改数据是有意的.</li>
<li>如果你意识到自己犯了错,那就承认,诚恳道歉,改正它,从中学习,然后继续前进.</li>
</ul></li>

<li>总结起来:
<ul class="org-ul">
<li>捏造数据(虚拟数据)是极佳的方式,可以帮助你深入理解数据可视化,描述统计与推断统计,分析局限性,
以及数据特征(如样本量,方差,离群值,分布)对结果的影响.</li>
<li>虚拟数据同样非常适合用来向学生,同事和客户展示假设性的数据模式.</li>
</ul></li>
<li>问题在于:当假数据或被篡改的数据被当作真实数据呈现时,就会引发严重的伦理问题.</li>
<li>所以,必须明确说明数据是假的(可以用更温和的术语,如"模拟的(simulated)""生成的(generated)""假设
的(hypothetical)"或"理论的(theorized)").不要留下任何可能让人误解数据真实性的空间.</li>
<li>更成熟,诚实的讨论
<ul class="org-ul">
<li>在教材里写一句"不要做有伦理争议的事"很容易,但现实世界从来不是黑白分明的.</li>
<li>在数据采集,筛选,清洗,以及选择分析方法和参数的过程中,我们会做出无数决策;</li>
<li>你可能会在无意识状态下,为了得到某个更可能"理想"的结果,而在分析流程中引入微妙的偏差.</li>
</ul></li>
<li>一些严苛的统计学"纯粹派"可能会反对这种说法,
<ul class="org-ul">
<li>他们会建议整个数据处理与分析流程在数据收集前就全部固定,</li>
<li>并且只有在收集到全新数据集的情况下才能做任何调整.</li>
</ul></li>
<li>我对这种理想化想法并不反感&#x2013;预先设定的分析流程确实是每位数据科学家值得追求的目标.</li>
<li>但是我更愿意面对现实:
<ul class="org-ul">
<li>人类在不断开发更先进的方法来测量生物与物理世界;</li>
<li>数据集越来越庞大且更复杂;</li>
<li>在拿到数据之前,最佳的分析方式可能根本无法完全预知;</li>
<li>科学需要不断改进与保持灵活性.</li>
</ul></li>
<li>现实是:
<ul class="org-ul">
<li>统计分析往往是迭代进行的,每一次迭代都会改进和优化分析流程.</li>
<li>这种迭代可能让我们发现一些细微而有价值的数据模式,但也会带来引入偏差,影响结果的风险.</li>
</ul></li>
<li>在保持分析灵活性的同时减少偏差,是有原则可循的&#x2013;你会在第 18 章学到更多.</li>
<li>我想表达的是:尽管"绝对化"的数据伦理立场听起来权威且容易写下,但面对现代数据分析的现实,成熟而细腻
的讨论才更有意义.</li>
</ul>
</div>
</div>
</div>
<div id="outline-container-org39d6d17" class="outline-2">
<h2 id="org39d6d17"><span class="section-number-2">3.</span> Chapter 03: Visualizing Data</h2>
<div class="outline-text-2" id="text-3">
</div>
<div id="outline-container-org8e34927" class="outline-3">
<h3 id="org8e34927"><span class="section-number-3">3.1.</span> Why visualize data?</h3>
<div class="outline-text-3" id="text-3-1">
<ul class="org-ul">
<li>我非常热爱数据的可视化.
<ul class="org-ul">
<li>不仅仅是我&#x2013;任何处理数据的人都会同意,数据可视化是理解和传达数据最重要的方式之一.</li>
</ul></li>
<li>你应该进行数据可视化,有几个重要原因:
<ul class="org-ul">
<li>可视化能够帮助你发现单看数字或标签可能很难甚至不可能察觉的模式.</li>
<li>大脑是一个惊人的模式识别机器,而我们人类本质上是视觉型的生物.事实上,我们大脑大约三分之一的区域
专注于视觉处理,并且还有更多的大脑区域与视觉密切相关,例如由视觉引导的运动.因此,把数据呈现成一
种大自然塑造我们大脑去处理的形式,符合我们的天性.</li>
<li>查看可视化数据可以发现离群值,错误,或其他可能引入伪影(artifacts)或对分析造成负面影响的问题.</li>
<li>使用图表展示数据,可以帮助非专业人士理解分析中的重要结论.换句话说,良好的数据可视化能帮助你塑造
数据故事(data narrative),并将这个故事传递给别人.</li>
<li>数据是美的,而美的事物值得我们细细品味.</li>
</ul></li>
<li><p>
为了说明可视化在理解数据(以及更广泛地说,理解数学)方面的重要性,请看看以下这个方程:
</p>
\begin{equation}
\left(x^{2} + y^{2} - 1\right)^{3} - x^{2} y^{3}  = 0 \tag{3.1}
\end{equation}</li>
</ul>
</div>
</div>
<div id="outline-container-org83b8914" class="outline-3">
<h3 id="org83b8914"><span class="section-number-3">3.2.</span> How to visualize data</h3>
<div class="outline-text-3" id="text-3-2">
<ul class="org-ul">
<li>数据可视化之所以是一项技能&#x2013;甚至说是一门艺术&#x2013;是因为有些数据具有内在特性,可以直接决定它们该如何被
可视化.
<ul class="org-ul">
<li>例如,不同邮政编码区域的人口数可以在地图上用颜色来表示;</li>
<li>而另外一些数据,并不天然地对应某种特定的可视化类型.</li>
</ul></li>
<li>所以,我们必须决定,对于不同的数据集,该使用哪些可视化方式,以及是否应该使用特定的方式.这并不是一
个简单的任务,尤其是在处理大型多变量数据集时会更具挑战性.</li>
<li>对于小数据集,你可以直接查看全部数据.
<ul class="org-ul">
<li>举个例子,我曾记录了一周内每天晚上开始吃晚餐的时间.</li>
<li><p>
图 3.1 在电子表格中展示了这些数据.
</p>

<div id="org0ece05b" class="figure">
<p><img src="https://raw.githubusercontent.com/harrifeng/image/master/ms/3-1.png" alt="3-1.png" />
</p>
<p><span class="figure-number">Figure 9: </span>ms/3-1.png</p>
</div></li>
<li>这实际上就是整个数据集,所以数据的可视化,就只是看一眼这些数字那么简单.</li>
</ul></li>
<li>然而,大多数数据集(我甚至敢说&#x2013;所有你在本书,其他书/课程以及现实世界中遇到的数据集)都比这个例子庞
大得多:可能包含几百,几千,甚至几百万行数据,以及几十到上百个数据列.</li>
<li>在这种情况下,重要的模式仅靠肉眼浏览原始数字是很难,甚至根本不可能看出来的.</li>
<li>关键在于:查看原始数据虽然有用,也能提供一些信息,但是,图形化的数据表达往往更有洞察力,更美观,也
更容易解释.</li>
<li>在本章的接下来的部分,你将学习最常见的数据可视化方式&#x2013;它们长什么样,怎么解读,以及可以用于哪种类型的数据.</li>
<li>在整本书中,你也会看到大量数据可视化的实例.</li>
</ul>
</div>
</div>
<div id="outline-container-orge317f1e" class="outline-3">
<h3 id="orge317f1e"><span class="section-number-3">3.3.</span> Bar plots</h3>
<div class="outline-text-3" id="text-3-3">
<ul class="org-ul">
<li>让我们先看一个例子.假设我们进行了一项调查,向人们询问他们从哪里获取新闻¹.他们可以选择的答案是:
<ul class="org-ul">
<li>电视(TV)</li>
<li>报纸(newspaper)</li>
<li>互联网(Internet)</li>
<li>或口口相传(word of mouth).</li>
</ul></li>
<li>我们计算选择每一种新闻来源的参与者所占的百分比.
<ul class="org-ul">
<li><p>
图 3.3 展示了这一调查结果,并用**条形图(bar plot)**进行可视化.
</p>

<div id="org3075608" class="figure">
<p><img src="https://raw.githubusercontent.com/harrifeng/image/master/ms/3-3.png" alt="3-3.png" />
</p>
<p><span class="figure-number">Figure 10: </span>ms/3-3.png</p>
</div></li>
<li>横轴(x 轴)上的刻度对应于各类新闻来源,</li>
<li>纵轴(y 轴)&#x2013;也就是每个柱子的高度&#x2013;对应选择这一新闻来源的人的百分比.</li>
</ul></li>
<li>请注意:
<ul class="org-ul">
<li>x 轴表示的是分类变量(categorical variable);</li>
<li>y 轴表示的是连续的数值型变量(continuous numerical variable).</li>
</ul></li>
<li>条形图适用于名义数据(nominal data).</li>
<li>学习直方图(histogram)时一定要记住这一点,因为条形图(bar plot)和直方图(histogram)一开始看上去可能
很相似,但使用场景不同.</li>
<li>另外要注意,这些柱子的百分比相加并不等于 100%,因为参与者可能会从多个来源获取新闻.这点会在后面学习
饼图(pie chart)以及直方图百分比归一化时做对比.</li>
<li>一些关于用条形图可视化数据的补充(更通用的)说明:
<ul class="org-ul">
<li>坐标轴必须有标签,明确告诉读者所展示的内容;</li>
<li>每个刻度(坐标轴上的小刻线)都有对应的标签,尤其是 x 轴;</li>
<li>标签可以旋转以适应较长的文字,或出于美观的考虑;</li>
<li>x 轴上的刻度距离相等,让图形看起来整齐美观;</li>
<li>x 轴上类别的顺序是任意的.例如,"报纸" 并不一定非要排在"互联网"左边;类别可以按多种方式排序,如按
新闻来源发展历史的先后,或按其受欢迎程度(即按 y 轴数值排序).这都是我们人为的选择,而不是数据本
身固有的属性;</li>
<li>y 轴的范围应当与数据范围匹配(想象一下,如果 y 轴画成 -500% 到 +6000%的区间会多荒谬).</li>
<li>有些数据是天然有界的(如身高不可能为负),有些则没有固定边界.</li>
<li>坐标轴范围一般略微超过数据范围,即在最小值的下方和最大值的上方略微延伸;</li>
<li>标题要简短且信息充足;</li>
</ul></li>
<li>图中没有颜色.本书的实体版采用灰度印刷以降低印刷成本.如果你绘制的图表会有人打印成纸质版,尽量避免
使用颜色;</li>
<li>但如果你的图表只会在电子设备上查看,或确定会彩色打印,那么颜色可以使图表更美观,也更易于区分图形元
素(参见 3.12 节).</li>
<li>使用python创建一个条形图(Bar Plot)非常简单
<ul class="org-ul">
<li><p>
下面的代码就能创建图3-4的例子
</p>
<div class="org-src-container">
<pre class="src src-python"><span style="color: #531ab6;">import</span> matplotlib.pyplot <span style="color: #531ab6;">as</span> plt

<span style="color: #005e8b;">Y</span> = <span style="color: #000000;">[</span>1, 4, 3, 9<span style="color: #000000;">]</span>  <span style="color: #7f0000;"># </span><span style="color: #7f0000;">bar heights</span>
<span style="color: #005e8b;">X</span> = <span style="color: #000000;">[</span>0, 1, 3, 4<span style="color: #000000;">]</span>  <span style="color: #7f0000;"># </span><span style="color: #7f0000;">bar locations</span>

plt.figure<span style="color: #000000;">(</span>figsize=<span style="color: #dd22dd;">(</span>5, 2.5<span style="color: #dd22dd;">)</span><span style="color: #000000;">)</span>
plt.bar<span style="color: #000000;">(</span>X, Y, color=<span style="color: #3548cf;">"k"</span><span style="color: #000000;">)</span>
plt.xlabel<span style="color: #000000;">(</span><span style="color: #3548cf;">"X"</span><span style="color: #000000;">)</span>
plt.ylabel<span style="color: #000000;">(</span><span style="color: #3548cf;">"Y"</span><span style="color: #000000;">)</span>
plt.savefig<span style="color: #000000;">(</span><span style="color: #3548cf;">"vis_barplot_basic.png"</span><span style="color: #000000;">)</span>
plt.show<span style="color: #000000;">()</span>
</pre>
</div></li>

<li><p>
图3-4
</p>

<div id="org05f04e6" class="figure">
<p><img src="https://raw.githubusercontent.com/harrifeng/image/master/ms/3-4.png" alt="3-4.png" />
</p>
<p><span class="figure-number">Figure 11: </span>ms/3-4.png</p>
</div></li>
</ul></li>
</ul>
</div>
<div id="outline-container-org8a83a65" class="outline-4">
<h4 id="org8a83a65"><span class="section-number-4">3.3.1.</span> Bar plots for grouped data</h4>
<div class="outline-text-4" id="text-3-3-1">
<ul class="org-ul">
<li>我们继续使用之前的"新闻来源调查"例子.现在假设我们调查了两组人:
<ul class="org-ul">
<li>千禧一代(millennials)</li>
<li>婴儿潮一代(boomers).</li>
</ul></li>
<li>于是,我们就可以根据年轻人和年长者来对回答结果进行区分.</li>
<li>那么,应该如何可视化这些数据呢?其实有两种方式来对条形图进行分组:
<ul class="org-ul">
<li>按年龄组分组</li>
<li>按新闻来源分组</li>
</ul></li>
<li>图 3.5 展示了这两种方式.
<ul class="org-ul">
<li>如图</li>
<li>重要的是:两幅图的数据完全相同,但结果的解读是不同的.</li>
<li>我将在下一段讨论这两幅图的不同之处;</li>
</ul></li>
<li>在阅读之前,请先仔细观察这张图,思考一下每种分组方式在讲述怎样的故事(narrative).</li>
<li>在图 3.5 的 A 面板(panel A)中,叙事的重点是年龄组之间的差异.例如,你可以清楚地看到:
<ul class="org-ul">
<li>千禧一代相比婴儿潮一代,从互联网获取新闻的比例更高;</li>
<li>而婴儿潮一代从电视获取新闻的比例更高³.</li>
</ul></li>
<li>在 B 面板(panel B)中,叙事的重点则是每个年龄组内部的新闻获取方式.例如,你可以看到:
<ul class="org-ul">
<li>千禧一代从口口相传获取新闻的比例高于从报纸获取新闻的比例.</li>
<li>这一信息在 A 面板中同样存在,但不太显眼.</li>
</ul></li>
<li>关键是:两种可视化方式都不是"对"或"错".你需要根据研究问题,研究目的,以及你想传达给受众的发现,来
选择数据分组的方式.</li>
<li>我在这里不会给出绘制分组条形图(grouped bar plot)的代码,因为这是本章末尾的一个练习.</li>
<li>不过我会从概念上解释一下分组条形图是如何从一个数字矩阵创建出来的.
<ul class="org-ul">
<li>在 Python 中,plt.bar() 会按照行(row)进行分组,</li>
<li>同一行(row)中的列(column)会显示为相邻的柱形,</li>
<li>不同行(row)之间会在 x 轴上用空白分隔.</li>
<li>因此,如果想用另一种方式分组,就需要转置(transpose)这个数据矩阵,以交换行和列</li>
<li><p>
如图3-6
</p>

<div id="org8daee44" class="figure">
<p><img src="https://raw.githubusercontent.com/harrifeng/image/master/ms/3-6.png" alt="3-6.png" />
</p>
<p><span class="figure-number">Figure 12: </span>ms/3-6.png</p>
</div></li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-org6f01308" class="outline-4">
<h4 id="org6f01308"><span class="section-number-4">3.3.2.</span> Error bars</h4>
<div class="outline-text-4" id="text-3-3-2">
<ul class="org-ul">
<li>误差线(Error bars) 是条形图的一种自然扩展.</li>
<li>误差线图(error bar plot)看起来像普通的条形图,只不过&#x2013;它带有误差线.</li>
<li>误差线是在每个柱子的中心位置画出的竖直线,它的顶部和底部通常会有水平的小刻度线(hash marks),以便你看清误差线的两端位置.
<ul class="org-ul">
<li><p>
参见图 3.7 示例.
</p>

<div id="orgffffe76" class="figure">
<p><img src="https://raw.githubusercontent.com/harrifeng/image/master/ms/3-7.png" alt="3-7.png" />
</p>
<p><span class="figure-number">Figure 13: </span>ms/3-7.png</p>
</div></li>
</ul></li>
<li>误差线可以表示多种不同的统计量,例如:
<ul class="org-ul">
<li>标准差(standard deviation)</li>
<li>标准误(standard error)</li>
<li>置信区间(confidence interval)</li>
</ul></li>
<li>从一个角度来看,任何由误差线表示的统计量都会与数据的变异性有关;</li>
<li>但从另一个角度来看,不同的统计量会导致不同的解读&#x2013;这意味着误差线图可能会让人感到困惑或被误解.</li>
<li>解决办法很简单:务必明确说明误差线代表的数据特性.</li>
<li>误差线是通过数学公式计算得出的,而数学公式并不总是受到现实的约束.举个例子:
<ul class="org-ul">
<li>假设图 3.7 中的柱子代表不同地理区域内建筑物的高度.如果 "类别 0" 和 "类别 1" 的误差线向下延伸到负
数,这在物理上毫无意义(建筑物高度不可能为负),但却可能是公式计算的结果.</li>
</ul></li>
<li>关键结论:
<ul class="org-ul">
<li>误差线确实有用,可以提供信息,</li>
<li>但如果没有明确解释,它们同样会引起困惑.</li>
</ul></li>
</ul>
</div>
</div>
</div>
<div id="outline-container-org9a4742c" class="outline-3">
<h3 id="org9a4742c"><span class="section-number-3">3.4.</span> Pie charts</h3>
<div class="outline-text-3" id="text-3-4">
<ul class="org-ul">
<li>饼图(Pie chart) 看起来像一个被切成楔形块的圆&#x2013;换句话说,就像一个派(pie).</li>
<li>饼图中的每一块对应数据中的一个类别,它所占的面积与该类别占整体的百分比成比例.</li>
<li>"占整体的百分比" 是判断什么时候该使用饼图的关键.只有当数据可以转换成总和为 100% 的百分比时,饼图才
是可解释的.
<ul class="org-ul">
<li>例如,上一节中展示新闻来源类别的条形图,不能用饼图表示,因为这些类别的百分比相加超过了 100%.</li>
<li>但是,如果修改调查问卷,数据就可能适合用饼图:假设调查中有一个单一问题,问人们大部分新闻是从哪里
获得的.这时,每位受访者只能选择一个答案,那么,各类新闻来源的百分比加起来就会正好等于 100%.</li>
</ul></li>
<li><p>
图 3.8 展示了一个饼图的示例.
</p>

<div id="orgb296d6a" class="figure">
<p><img src="https://raw.githubusercontent.com/harrifeng/image/master/ms/3-8.png" alt="3-8.png" />
</p>
<p><span class="figure-number">Figure 14: </span>ms/3-8.png</p>
</div></li>
<li>饼图适用于分类数据(categorical data),这些数据可以是有序的(ordinal)或无序的(nominal).</li>
<li>使用饼图的主要限制是:数据必须可以转换为占整体百分比.</li>
</ul>
</div>
</div>
<div id="outline-container-orgb5f56b2" class="outline-3">
<h3 id="orgb5f56b2"><span class="section-number-3">3.5.</span> Box plots</h3>
<div class="outline-text-3" id="text-3-5">
<ul class="org-ul">
<li>箱线图(Box plots),传统上也叫箱形-须状图(box-and-whiskers plots),和条形图有些相似:
<ul class="org-ul">
<li>它们的 x 轴 也是用于显示分类数据,</li>
<li>而 y 轴 用于显示连续数据.</li>
</ul></li>
<li>不过,与条形图只展示数据的一个特征(平均值)不同,箱线图能够展示更多与数据分布相关的特征,从而帮助
更好地解释数据.</li>
<li>图 3.9 展示了我模拟的随机数据所绘制的一个箱线图.图中的字母对应了下面要介绍的重要组成部分(其中一些
术语你可能是第一次看到,我会在下一章更详细解释):
<ul class="org-ul">
<li><p>
如图
</p>

<div id="orgb211dc6" class="figure">
<p><img src="https://raw.githubusercontent.com/harrifeng/image/master/ms/3-9.png" alt="3-9.png" />
</p>
<p><span class="figure-number">Figure 15: </span>ms/3-9.png</p>
</div></li>
<li>a) 中间的横线表示数据的中位数(median).中位数将数据一分为二:50% 的数据值小于中位数,50% 的数据
值大于中位数.</li>
<li>b) 箱体的下边界表示数据的第 25 百分位(下四分位数).换句话说,25% 的数据值小于箱体的下边缘.</li>
<li>c) 同 b,但对应第 75 百分位(上四分位数).换句话说,25% 的数据值大于箱体的上边缘.</li>
<li>综合来看:箱体包围了数据集中间的 50% 数值,25% 的数据在箱体下方,25% 的数据在箱体上方.箱体所代表
的中间 50% 数据范围叫做 四分位距(IQR: interquartile range).</li>
<li>d) "非极端最小值":下方的水平短线是最小的数据值,但它不算离群点或异常极值.</li>
<li>e) 同 d,但对应非极端最大值.</li>
<li>f) 离群值(outliers):非常大,非常小或不具代表性的数据值.离群值的精确定义和合理处理方式并不总是
简单的,你将在 第 4 章 和 第 7 章 学到更多.</li>
</ul></li>
<li>箱线图的用途:
<ul class="org-ul">
<li>箱线图非常有用,因为它能反映数据的分布形态,并帮助识别离群值或潜在问题数据.</li>
<li>它还可以帮助比较分类变量之间的差异模式.</li>
</ul></li>
<li>例如,图 3.10 展示了两个类别的箱线图.假设这些数据表示同一职业在不同国家的月薪:
<ul class="org-ul">
<li>虽然两个国家的薪资中位数相同,但国家 A 的薪资分布更宽,</li>
<li>这可能意味着薪资增长的潜力更大.</li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-org03b78db" class="outline-3">
<h3 id="org03b78db"><span class="section-number-3">3.6.</span> Histograms</h3>
<div class="outline-text-3" id="text-3-6">
<ul class="org-ul">
<li>直方图(Histogram) 乍一看和 条形图(Bar plot) 很像,但它们在几个重要方面有明显区别.最重要的区别是:
<ul class="org-ul">
<li>条形图 用于分类数据(categorical data);</li>
<li>直方图 用于数值型数据(numerical data).</li>
</ul></li>
<li><p>
让我们先从一个小整数数据集的简单例子开始:
</p>
<pre class="example" id="orgbd21125">
X = [1, 2, 2, 3, 3, 4, 5, 5, 5, 5, 6, 7, 7, 7, 8, 8, 9]
</pre></li>
<li>在这个数据集中:
<ul class="org-ul">
<li>有一个 "1"</li>
<li>有两个 "2"</li>
<li>有两个 "3"</li>
<li>以此类推.</li>
</ul></li>
<li>直方图就是将 x 轴表示的数值元素 与 y 轴表示的出现次数进行可视化.
<ul class="org-ul">
<li><p>
见图 3.11
</p>

<div id="org7edb7b0" class="figure">
<p><img src="https://raw.githubusercontent.com/harrifeng/image/master/ms/3-11.png" alt="3-11.png" />
</p>
<p><span class="figure-number">Figure 16: </span>ms/3-11.png</p>
</div></li>
<li>请花点时间观察一下x 轴的刻度位置和标签.它们出现的位置是不是和你预期的不一样?</li>
<li>我猜你的答案是 "是的,不一样" &#x2013; 你可能希望刻度正好位于柱子的中间(参考图 3.7 或 3.3).其实,这
种刻度位置的呈现方式对应的是条形图,而不是直方图.</li>
</ul></li>
<li>这是一个细微但非常重要的区别,理解并区分它对于正确解读和绘制直方图至关重要.
<ul class="org-ul">
<li><p>
现在,请看图 3.12.
</p>

<div id="orgebf4d94" class="figure">
<p><img src="https://raw.githubusercontent.com/harrifeng/image/master/ms/3-12.png" alt="3-12.png" />
</p>
<p><span class="figure-number">Figure 17: </span>ms/3-12.png</p>
</div></li>
<li>你会注意到:柱子的高度与图 3.11 完全相同;但刻度线却位于每个柱子的中心位置,也就是你原本可能会预
期的位置.</li>
</ul></li>
<li>在解释这两幅图的区别之前,我们先来看看混淆从哪里产生的:
<ul class="org-ul">
<li>你看到数据后,自然而然会想到去数一数每个数值(1,2,3&#x2026;&#x2026;)各出现了多少次,</li>
<li>然后预期直方图会直接显示这些计数值.</li>
<li>实际上,你这是在期待直方图变成条形图的呈现方式.但是,直方图并不是这样工作的.</li>
</ul></li>
<li>直方图通过定义数值边界,然后计算落在这些边界之间的数据值数量来工作.
<ul class="org-ul">
<li>图 3.11 和图 3.12 看起来不同,是因为我使用了不同的分箱(binning)边界.</li>
<li><p>
图 3.13 展示了这两组边界.(图3.11的间距是0.9,所以导致中心一直在变. 但是图3.12的间距是1.0,所以中心
一直不变)
</p>

<div id="org2bf3465" class="figure">
<p><img src="https://raw.githubusercontent.com/harrifeng/image/master/ms/3-13.png" alt="3-13.png" />
</p>
<p><span class="figure-number">Figure 18: </span>ms/3-13.png</p>
</div></li>
<li>因此,当你查看数据集 X 时,你是数了有多少个 1;</li>
<li>但图 3.11 中的直方图是通过计算 1 到 1.9 之间的数值个数,1.9 到 2.8 之间的数值个数,依此类推绘制出来的.</li>
</ul></li>
<li>图 3.11 和图 3.12 的另一个不同点是:
<ul class="org-ul">
<li>前者的 x 轴刻度 位于 边界 上,</li>
<li>而后者的 x 轴刻度 位于 区间中点 上.</li>
</ul></li>
<li>这种差异在可视化多个直方图时非常重要,你很快就会学到原因.</li>
<li>我知道这个讨论可能有点让人困惑,但如果你花时间理解它,那么关于直方图的其他内容都会变得清晰易懂.这
是非常值得的,因为许多数据分析,假设和解释都是建立在直方图形状的基础上的.</li>
<li>并不是所有数据集都只包含少量整数(所以不适用于条形图).假设我们有更多的数据,而且精度更高呢?例如,
<ul class="org-ul">
<li>想象一个包含 500 只巴比伦獴 长度的数据集.</li>
<li>如果我们以 毫米 为精度来测量,那么数据集中很可能 没有任何两个完全相同的数值.因此,我们不能像处理
整数数据集那样,直接用条形图来绘制.</li>
<li><p>
我们唯一的办法,就是定义边界,然后统计数据点落在每个边界之间的数量,也就是直方图的做法.你可以在
图 3.14 中看到这种情况.
</p>

<div id="org5d67ab5" class="figure">
<p><img src="https://raw.githubusercontent.com/harrifeng/image/master/ms/3-14.png" alt="3-14.png" />
</p>
<p><span class="figure-number">Figure 19: </span>ms/3-14.png</p>
</div></li>
</ul></li>
<li>仅仅通过观察直方图,我们是无法知道这些獴的精确长度的,只能知道在每个柱状条对应的边界区间内,有多少个数据点.
<ul class="org-ul">
<li>这意味着我们在可视化过程中丢失了部分信息,不过这种信息损失被可解释性的提升所平衡.</li>
<li>事实上,数据可视化往往会涉及一定的信息损失,而数据可视化的艺术就在于知道应该牺牲哪些信息,以及牺
牲多少信息,才能换取更强的可解释性和模式发现能力.</li>
</ul></li>
<li>那么,为什么我选择了这些边界,而不是其他的边界呢?
<ul class="org-ul">
<li>我本可以添加更多的分箱(也就是增加更多的柱形条),这样可以减少信息损失.</li>
<li>确实,直方图使用的分箱数越多,保留的信息就越多.</li>
<li>当然,分箱数量的选择带有一定的任意性,这一点我稍后还会讨论.</li>
</ul></li>

<li>不过,咱们先达成一个共识:
<ul class="org-ul">
<li>分箱太少 → 信息损失太大</li>
<li>分箱太多 → 可能过于复杂,也不易解读</li>
</ul></li>
<li><p>
看看图 3.15,你会发现它展示了同一组数据,在分箱数量少与分箱数量多的情况下,直方图的不同表现.
</p>

<div id="org54753f8" class="figure">
<p><img src="https://raw.githubusercontent.com/harrifeng/image/master/ms/3-15.png" alt="3-15.png" />
</p>
<p><span class="figure-number">Figure 20: </span>ms/3-15.png</p>
</div></li>
<li>显然,有一些极端的分箱数量选项并不太有用,但这仍然留下了一个很宽的可接受分箱范围.那么,该如何选择合适的分箱数量呢?
<ul class="org-ul">
<li>有几种指南可以用于计算分箱数量,这些指南是基于数据集的某些特征来确定的,你会在下一章中学习到,因
此我们会在后面回到这个话题.</li>
</ul></li>
<li>目前而言,根据视觉检查随意选择一个分箱数量是可以的.在很多数据集中,30–40 个分箱效果往往不错(在图
3.14 中,我使用了 30 个分箱).</li>
<li>Distribution tails: 你必须掌握的一个术语是:在用直方图表示分布时,分布的两端被称为 "尾部(tails)":
<ul class="org-ul">
<li>左边的尾部称为 "左尾(left tail)"</li>
<li>右边的尾部称为 "右尾(right tail)"</li>
<li>见图 3.16</li>
</ul></li>
<li>如果数据包含负值和正值,那么它们也可能分别被称为:
<ul class="org-ul">
<li>负尾(negative tail)- 负值</li>
<li>正尾(positive tail)- 正值</li>
</ul></li>
<li>这些术语(指"尾部")其实是比较宽泛的,因为对于所有分布类型和所有分析方法来说,并不存在一个精确统一
的边界来严格区分分布的尾部(tail)与分布主体(body).
<ul class="org-ul">
<li>有时,尾部是通过定性描述来界定的;</li>
<li>而在另一些情况下,尾部会被精确地定义,</li>
</ul></li>
<li>比如使用:
<ul class="org-ul">
<li>占整个分布面积一定百分比的区域</li>
<li>或者一个特定的数值边界</li>
</ul></li>
</ul>
</div>
<div id="outline-container-org2e6f714" class="outline-4">
<h4 id="org2e6f714"><span class="section-number-4">3.6.1.</span> Histogram vs. bar plot</h4>
<div class="outline-text-4" id="text-3-6-1">
<ul class="org-ul">
<li>条形图(bar plot)和直方图(histogram)的关键区别在于:
<ul class="org-ul">
<li>条形图 的 x 轴 上是类别(categories)</li>
<li>直方图 的 x 轴 上是数值区间(numerical ranges)</li>
</ul></li>
<li>要判断你看到的是条形图还是直方图,可以问自己这样一个问题:x 轴上的柱子能否互换位置?</li>
<li>回想一下我们在"新闻来源研究"(news sources study)和"獴(mongoose)研究"中的例子:
<ul class="org-ul">
<li>在条形图中,比如 Internet(互联网) 这一栏并不一定要放在 Newspaper(报纸) 这一栏的右边,如果把它
们互换位置,图表的意义依然不变.</li>
<li>但在直方图中,柱子的位置是不能乱换的,比如 40–41 cm 这一组(bin)必须在 41–42 cm 这一组的左边,互
换顺序会让图失去原本意义.</li>
</ul></li>
<li>在直方图中,你不能随意改变分组(bin)的顺序,否则会破坏图表的可解释性.</li>
<li>这种区别并不 trivial(不是无关紧要的):
<ul class="org-ul">
<li>直方图的形状可以用来判断数据是否来自某种特定分布,以及某些统计方法是否可以应用于该数据.</li>
<li>分布都是是具有某种图形的(比如正太分布像一个钟,钟的最高点在平均值那里),所以只有直方图能表示正态分
布,而能把中间最高值随意调换的条形图显然不行</li>
</ul></li>
<li>为了避免遗漏,我再强调一次这个重要的观点:
<ul class="org-ul">
<li>直方图:x 轴的顺序有意义,因为它反映了数据内在的性质,这些数据被"分组"(bin)时是根据连续的数值边
界划分的.</li>
<li>条形图:x 轴的顺序可以改变,虽然某些排序可能会让解释更方便,但排序本身是由数据分析者决定的,而不
是由数据的内在性质来决定的.</li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-org55d5ed6" class="outline-4">
<h4 id="org55d5ed6"><span class="section-number-4">3.6.2.</span> Counts vs. proprotions</h4>
<div class="outline-text-4" id="text-3-6-2">
<ul class="org-ul">
<li>到目前为止,我展示的直方图(histogram)和条形图(bar plot)的 y 轴 都表示原始计数(raw counts).</li>
<li>原始计数的优点是:
<ul class="org-ul">
<li>你可以清楚地看到每个分组(bin)中确切的样本数量.</li>
</ul></li>
<li>但原始计数也有缺点,特别是在比较 <b>样本量不同</b> 的数据集时.
<ul class="org-ul">
<li>一种替代方法是将计数转换为比例(proportion)或百分比(percentage).</li>
<li><p>
比如 图 3.17 显示了同一份数据:
</p>

<div id="orgc6d1b98" class="figure">
<p><img src="https://raw.githubusercontent.com/harrifeng/image/master/ms/3-17.png" alt="3-17.png" />
</p>
<p><span class="figure-number">Figure 21: </span>ms/3-17.png</p>
</div></li>
<li>左侧是原始计数形式</li>
<li>右侧是转换为比例后的形式</li>
</ul></li>
<li>需要注意的是:
<ul class="org-ul">
<li>在转换为比例后,分布的形状以及柱子的相对高度并没有变化</li>
<li>唯一不同的是 y 轴上的数值</li>
</ul></li>
<li>这两种方式没有哪一种绝对更好,只是提供了不同的信息表达方式. <b>但是,如果不同样本数比较的话,就必须得用比例显示的形式</b></li>
<li><p>
图 3.18 对比了计数和比例的优缺点,以及何时更适合使用哪种方式.
</p>

<div id="orge5d377d" class="figure">
<p><img src="https://raw.githubusercontent.com/harrifeng/image/master/ms/3-18.png" alt="3-18.png" />
</p>
<p><span class="figure-number">Figure 22: </span>ms/3-18.png</p>
</div></li>
<li>如何将计数转换为比例?
<ul class="org-ul">
<li>公式很简单:将每个分箱(bin)的值除以所有分箱值的总和,即:</li>
<li>如果要将比例转换为百分比:只要将比例乘以 100,然后在数字后加上 % 符号即可</li>
</ul></li>
<li>比例化(Normalization) 在直方图中的优势示例:以獴(mongoose)的体长为例,假设我们要比较非洲獴与亚
洲獴:
<ul class="org-ul">
<li>我去毛里求斯(Mauritius)测量了 100 只獴的体长</li>
<li>你去了爪哇(Java)并测量了 500 只獴的体长(好吧,我承认我在旅途中没有你努力 😅)</li>
<li><p>
图 3.19 显示了来自这两个岛屿的体长直方图:
</p>

<div id="orgf21d15d" class="figure">
<p><img src="https://raw.githubusercontent.com/harrifeng/image/master/ms/3-19.png" alt="3-19.png" />
</p>
<p><span class="figure-number">Figure 23: </span>ms/3-19.png</p>
</div></li>
</ul></li>
<li>在原始计数直方图中,由于样本量差别很大,柱子的高度也必然不同,因此不能直接比较两张图的高度</li>
<li>但如果我们的研究问题是"非洲獴和亚洲獴,谁更长",那么我们并不关心 y 轴的绝对数值,通过将两张直方图归
一化为百分比,我们就可以定量地比较它们的分布形状与柱子高度.</li>
<li>如果要统计比较这两个分布,可以使用 t 检验(t-test) 或 KL 检验(Kullback–Leibler test),但这超出当前讨论范围.</li>
</ul>
</div>
</div>
</div>
<div id="outline-container-orgd4ee61f" class="outline-3">
<h3 id="orgd4ee61f"><span class="section-number-3">3.7.</span> Lines vs. bars in a histogram</h3>
<div class="outline-text-3" id="text-3-7">
<ul class="org-ul">
<li>直方图使用的是条形而不是线条,因为所有落在某一范围(区间)内的数据点都归入同一个"箱子"(bin)中;</li>
<li>对数据进行离散化处理时会导致一定的信息损失,我们将无法知道如果改变分界点数据会呈现什么样的形态.这
意味着你应该使用条形(或者点,或者其他任何离散的标记),并在相邻条形之间使用竖直的间隔.</li>
<li>为什么不适合用线连接各个"箱子"呢?
<ul class="org-ul">
<li>问题在于,线条暗示了各点之间的平滑过渡,就好像你知道在改变分界点后数据会呈现的形状(见图 3.20).</li>
<li>一方面,如果样本量很大,分布又比较平滑,那么这种隐含的平滑过渡假设通常是合理的.</li>
<li>但另一方面,我们应尽量保持准确性,只有在收益超过代价时才允许牺牲准确性.</li>
</ul></li>
<li>话虽如此,也确实存在一些情况,使用线条能够实现柱形图无法达到的解释效果和视觉美感.你将在练习 5 中对
此进行探索.</li>
<li>结论是:
<ul class="org-ul">
<li>直方图用柱形展示最为准确,</li>
<li>但在解释性上的收益大于可能造成的"离散化之间平滑连续"这种错误印象的风险时,也可以使用线条.值得庆
幸的是,直方图中的柱形(bin)越多,线条就越能准确地反映直方图的形状</li>
</ul></li>
<li><b>Lines in bar plots</b> 很显然,在条形图(bar plot, 不是histogram)中使用线条是完全不合适的.
<ul class="org-ul">
<li>回到"新闻来源"的例子:在"互联网"和"口耳相传"之间画一条线,这意味着什么呢?</li>
<li>在这些类别之间想象一个插值数据点是没有意义的,尤其是考虑到这些类别的排序本身是任意的.</li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-orga8a2b30" class="outline-3">
<h3 id="orga8a2b30"><span class="section-number-3">3.8.</span> Violin plots</h3>
<div class="outline-text-3" id="text-3-8">
<ul class="org-ul">
<li>使用线条而不是柱形的一个优势是,它让你能够将数据以"小提琴图"的形式可视化,而小提琴图既优秀又美观.</li>
<li>小提琴图的制作方法是:用线条绘制直方图,并交换 x 轴与 y 轴的位置(见图 3.21).</li>
<li>你经常会看到直方图沿垂直方向镜像,从而形成小提琴图的对称外观.如果你有两个数据集,你可以创建一个非
对称的小提琴图,让每个数据集占据图形的一侧(图 3.21D).在第 7 个练习中你将学习如何绘制这种图.</li>
<li>另一种小提琴图:
<ul class="org-ul">
<li>当两个数据集包含相关且取值范围相当的数据时,非对称小提琴图是合适的.
<ul class="org-ul">
<li>例如,可以想象一个非对称小提琴图,用于展示成年男性和女性的身高.在这种情况下,数据特征是相同的
(身高),并且两个群体(男性和女性)的数据范围相当.</li>
<li>反例则是将"年薪(单位:美元/年)"和"身高(单位:英尺)"放在同一个非对称小提琴图中.这两个特征完
全不同,且数值范围差别巨大,这么做只会造成混乱.</li>
</ul></li>
</ul></li>
<li>最后补充一点:在图 3.21 中对应于每个单独数据值的点,沿 x 轴增加一些微小的随机偏移有助于可视化;否则
这些点会彼此重叠.
<ul class="org-ul">
<li>这里要解释一下,在上图C中, 如果不进行"x轴微小的随机偏移",那么这些点就会全部在x轴位0,的这条垂直竖线
上面紧密的排列,并且很大概率会重叠.</li>
<li>换个句话说,如果我们以一个矩形来从上到下的框起来这些点,就能得到直方图里面的数量(这也是为什么中间的
点密集,而边缘的点稀少的原因)</li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-orgee7c5e7" class="outline-3">
<h3 id="orgee7c5e7"><span class="section-number-3">3.9.</span> Linear vs. logarithmic axis scaling</h3>
<div class="outline-text-3" id="text-3-9">
<ul class="org-ul">
<li>许多图表的 y 轴可以采用线性刻度(linear scaling)或对数刻度(logarithmic scaling)显示.
<ul class="org-ul">
<li><p>
图 3.22 展示了相同的数据在线性刻度(A 面板)与对数刻度(B,C 面板)下的效果.
</p>

<div id="orga94084f" class="figure">
<p><img src="https://raw.githubusercontent.com/harrifeng/image/master/ms/3-22.png" alt="3-22.png" />
</p>
<p><span class="figure-number">Figure 24: </span>ms/3-22.png</p>
</div></li>
<li>B 和 C 面板的曲线和刻度缩放完全相同,但 y 轴的刻度标签格式不同.</li>
</ul></li>
<li>线性刻度与对数刻度的区别,本质区别在于 y 轴刻度之间的间距:
<ul class="org-ul">
<li>在线性刻度中,刻度的间距是按照加法来的;例如,在图 3.22A 中,每个 y 轴刻度是在前一个刻度的基础上
加 2000;</li>
<li>在对数刻度中,刻度的间距是按照乘法来的.而在图 3.22B-C 中,每个刻度是在前一个刻度的基础上 乘以10.</li>
</ul></li>
<li>这种差异的结果是:较大的数据值会在图中显得被压缩.</li>
<li>当然,数据的数值本身没变,只是可视化方式不同.</li>
<li>什么时候应该使用对数刻度而不是线性刻度?
<ul class="org-ul">
<li>当数据表现出指数增长或衰减时(如人口动态,细菌生长,股票增长,辐射衰减等),采用对数刻度可以让数
据特征更清晰.</li>
<li>在生物学和物理学中,对数刻度的应用尤其广泛.</li>
</ul></li>
<li>但需要注意的是:
<ul class="org-ul">
<li>大多数没有科学背景的人更容易理解线性刻度的图表.因此,如果希望图表对更多人来说易于理解,除非有充
分理由,否则最好使用线性刻度.</li>
</ul></li>
<li>关于对数刻度的几点补充说明
<ul class="org-ul">
<li>图 3.22 中 y 轴刻度是 10 的倍数,但在某些场景下其他倍数可能更适用,例如倍增(刻度为 2,4,8,16,
32&#x2026;&#x2026;).</li>
<li>对数刻度通常只能用于正值数据,因为乘以零以及某些数据变换下的负数会导致数学上的问题.</li>
<li>对数刻度也可以用在 x 轴;如果 x,y 两个轴都是对数刻度,这种图称为 "双对数图(log-log plot)".</li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-orgf65b5b0" class="outline-3">
<h3 id="orgf65b5b0"><span class="section-number-3">3.10.</span> Discretizing continuous data</h3>
<div class="outline-text-3" id="text-3-10">
<ul class="org-ul">
<li>将连续数据离散化有它的"阴暗面".我会在这里简单介绍这个问题,因为它与直方图相关.稍后在本书中我还会
继续讨论这个话题,
<ul class="org-ul">
<li>因为离散化在决定是否使用方差分析(ANOVA)或回归分析,以及在回归分析中进行数据可视化时,都是一个需
要考虑的因素.</li>
</ul></li>
<li>开头先看图 3.23A,它形象地展示了直方图是如何生成的:
<ul class="org-ul">
<li><p>
如图
</p>

<div id="orgc242a29" class="figure">
<p><img src="https://raw.githubusercontent.com/harrifeng/image/master/ms/3-23.png" alt="3-23.png" />
</p>
<p><span class="figure-number">Figure 25: </span>ms/3-23.png</p>
</div></li>
<li>左图:数据值的范围被分成等大小的区间(bin);</li>
<li>右图:统计落在每个区间内的数据点数量,由此画出直方图.</li>
<li>现在想象一下,只用两个区间来画直方图.这称为 <b>二值化(binarizing</b> 数据,因为数据从连续型被转换成
了两类(见 图 3.23B).</li>
</ul></li>
<li>虽然在每个区间内,许多数据值确实比较接近,但也会出现另一些情况:跨区间的两个数据点可能比区间内的某
些点更接近.
<ul class="org-ul">
<li>例如:方块(square)和上三角形(up-facing triangle)的数值很接近,但因为刚好落在不同的区间,它们
被分到不同的直方图柱里;</li>
<li>而方块和菱形(diamond)之间数值差距更大,却因为落在同一区间而出现在同一个柱子里(上,下三角形的情
况也是一样).</li>
</ul></li>
<li>因此,二值化数据的风险在于:
<ul class="org-ul">
<li>有些属于不同类别(bin)的数据点,实际上比同一类别中的数据更接近.</li>
<li>这违反了在解读直方图时的一个不成文假设&#x2013;即假设同一区间内的数据是足够同质化的,从而可以用一根柱子
去表示它们.</li>
</ul></li>
<li>你可能会觉得这种情况有点极端,甚至不现实&#x2013;毕竟,谁会用只有两个区间的直方图呢?
<ul class="org-ul">
<li>但这并非只是理论探讨;在实际中对连续数据进行二值化是很常见的,比如通过 <b>中位数拆分(median split</b>
来将数据分成两类.</li>
</ul></li>
<li>结论:
<ul class="org-ul">
<li>离散化连续数据有时是合理的,也能简化数据分析,</li>
<li>但必须谨慎执行,并充分考虑这种离散化对分析结果可能造成的影响.</li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-orgdd9b9ef" class="outline-3">
<h3 id="orgdd9b9ef"><span class="section-number-3">3.11.</span> Radial plots</h3>
<div class="outline-text-3" id="text-3-11">
<ul class="org-ul">
<li>雷达图&#x2013;也称为极坐标图(polar plots)或蜘蛛图(spider plots)&#x2013;是一种用来可视化循环性或周期性数据的
方法.</li>
<li>"循环性"意味着这些数据会不断地首尾相接,比如一天的 24 小时,一周的 7 天.</li>
<li>要创建一个雷达图,首先将数据类别等距地分布在一个圆周上,然后径向轴(从圆心出发的距离)表示数据的大
小,相当于柱状图中的 y 轴高度.</li>
<li>图 3.24 显示了一个极坐标图的例子,
<ul class="org-ul">
<li><p>
如图
</p>

<div id="org813fc48" class="figure">
<p><img src="https://raw.githubusercontent.com/harrifeng/image/master/ms/3-24.png" alt="3-24.png" />
</p>
<p><span class="figure-number">Figure 26: </span>ms/3-24.png</p>
</div></li>
<li>内容是某一年各月的平均温度.这显然是一个合理使用雷达图的例子,因为数据序列的末尾(12 月)自然衔接
到数据序列的开头(1 月).</li>
</ul></li>
<li>雷达图不应用于非循环数据.</li>
<li>此外,雷达图不能用于包含负值的数据,因为从原点的距离是非负数.</li>
<li>图 3.25 展示了一个不恰当使用雷达图的例子:
<ul class="org-ul">
<li><p>
如图
</p>

<div id="org1e7cb59" class="figure">
<p><img src="https://raw.githubusercontent.com/harrifeng/image/master/ms/3-25.png" alt="3-25.png" />
</p>
<p><span class="figure-number">Figure 27: </span>ms/3-25.png</p>
</div></li>
<li>圆周轴上是电影类型(类别),径向轴显示我对这些类型的喜好程度(1 到 10 分).</li>
</ul></li>
<li>雷达图不应用于非循环数据的原因有几个:
<ul class="org-ul">
<li>第一个原因,和为什么在柱状图的类别型 x 轴上使用折线图是不合适的一样:
<ol class="org-ol">
<li>折线会给人一种印象&#x2013;在"浪漫喜剧(Romcom)"和"恐怖片(Horror)"之间存在某个插值数据点,而这其实是
没有意义的.(当然,一部电影可能同时包含浪漫喜剧和恐怖元素,但类别数据并不能像数值数据那样进行数学计算和插值.)</li>
<li>这可以和图 3.24 进行对比:在 9 月和 10 月之间的插值是有意义的,比如9 月第三周的预计最高温度可能是 18°C.</li>
</ol></li>
<li>第二个原因,这些类别本身并不是循环的,就如同柱状图中类别的排序是任意的
<ol class="org-ol">
<li>在数据中没有任何内在逻辑要求我们必须"循环"地从"浪漫喜剧"到"动漫",再回到"浪漫喜剧".类别间并不
存在这样的必然衔接性或周期性.</li>
<li>相比之下,图 3.24 中月份的顺序是自然且周期性的,这是数据的内在属性.</li>
</ol></li>
</ul></li>
<li>尽管有上述理由,在你数据科学的旅途中,仍会遇到很多不恰当的雷达图.</li>
<li>正如我之前所写的,人类文明要担心的事情已经够多了,所以我们可以原谅这种统计礼仪上的"小违例".</li>
<li>但是,请不要自己继续这种不当使用雷达图的坏习惯.</li>
</ul>
</div>
</div>
<div id="outline-container-org319ba5c" class="outline-3">
<h3 id="org319ba5c"><span class="section-number-3">3.12.</span> Color</h3>
<div class="outline-text-3" id="text-3-12">
<ul class="org-ul">
<li>颜色在图形可视化中是一种简单而强大&#x2013;但也具有潜在风险&#x2013;的方式,可以让你的可视化更有吸引力,更具信息性.</li>
<li><b>Adding color is simple</b> 在 Python 或 R 中添加颜色非常简单,比如:
<ul class="org-ul">
<li>指定调色板(palette)直接指定绘图对象的颜色(你可以通过快速的网页搜索找到各种调色板的可视化列表)</li>
<li>在大多数 matplotlib 函数中,颜色通过三位参数指定:color=(R,G,B),其中 R,G,B 是 0~1 之间的浮点数.
在本书的代码中,你会看到我几乎总是让这三个值相等,从而生成灰度线条.</li>
</ul></li>

<li><b>Color is powerful</b> 在大脑中,有几个机制在意识之前就会对颜色产生反应:
<ul class="org-ul">
<li><b>上丘(superior colliculus)</b> 是视网膜信号到达的第一批神经目标之一,它会对颜色变化作出反应,并能
直接控制眼睛转向某个颜色的区域.</li>
<li>大脑中还有专门区域负责处理颜色.</li>
<li>换句话说,我们的大脑就是天生会关注意力到颜色,所以给图表加颜色能自动触发注意力机制.</li>
</ul></li>
<li>另外,颜色还可以为图表增加一维信息.例如:
<ul class="org-ul">
<li>热力图(heat maps):用于展示多维数据(如相关性矩阵)</li>
<li>区分同一坐标轴上的多条线</li>
</ul></li>
<li><b>Color is risky</b> 添加颜色的两个风险:
<ul class="org-ul">
<li>你无法控制观众看到的实际颜色质量</li>
<li>如果在现场演示中投屏,色彩可能会被投影仪或屏幕失真,如果放到网上,观众可能在小手机屏幕或强光环境中
观看,颜色效果会打折,即便在同一屏幕,也不能保证每个人看到的颜色相同</li>
</ul></li>
<li>色盲约占男性的 8%,女性的 0.5%(据 Google 搜索)很多人难以区分红色或绿色的细微色差</li>
<li><b>注意</b> 我并不是要劝你不要用颜色,颜色是很棒的可视化增强手段,应该在可能的情况下多用.但建议&#x2013;颜色最
好是一个辅助特征,而不是唯一依赖的信息.
<ul class="org-ul">
<li>例如,可以让颜色在亮度或线型上有冗余:浅绿色实线 vs 深红色虚线,即便在灰度条件下也能区分,因为亮
度和线型不同.</li>
</ul></li>
</ul>
</div>
<div id="outline-container-org3dcac85" class="outline-4">
<h4 id="org3dcac85"><span class="section-number-4">3.12.1.</span> 选择哪些颜色?</h4>
<div class="outline-text-4" id="text-3-12-1">
<ul class="org-ul">
<li>颜色理论和数据可视化中的配色选择是一个有争议的话题&#x2013;一些"数据可视化纯粹主义者"会对哪些颜色或调色板
能用/不能用发表强烈意见.</li>
<li>"Jet colormap"就是一个经典争议例子(网上搜索 Should I use the jet colormap? 就能看到很多讨论).</li>
<li>我对此没有强烈观点,也不打算卷入长期的争论.颜色与人类视觉感知相关的理论和实验非常多,如果这个话题
你感兴趣,非常支持你去深入研究;否则,你可以直接用 Python 或 R 自带的调色板,也可以去一些调色网站找
颜色.</li>
<li>我自己常用的两个网站是:
<ul class="org-ul">
<li>colorhunt.co</li>
<li>color.adobe.com</li>
</ul></li>
</ul>
</div>
</div>
</div>
</div>
<div id="outline-container-orgf2121c8" class="outline-2">
<h2 id="orgf2121c8"><span class="section-number-2">4.</span> Chapter 04: Descriptive Statistics</h2>
<div class="outline-text-2" id="text-4">
</div>
<div id="outline-container-orgcc7e80d" class="outline-3">
<h3 id="orgcc7e80d"><span class="section-number-3">4.1.</span> Descriptive vs. inferential statistics</h3>
<div class="outline-text-3" id="text-4-1">
<ul class="org-ul">
<li>让人略感无奈的是,"statistics"(统计)这个词是个多义词 &#x2013; 在不同的语境下,它的含义并不完全相同.这
里我想将它分成两种主要的区别:
<ul class="org-ul">
<li>描述性统计(Descriptive statistics): 用来刻画某个数据集特征的数字.你会在本章学习很多描述性统计
量;你可能已经听过一些术语,比如均值(mean),中位数(median),方差(variance),偏度(skew),
谱(spectrum)和协方差(covariance).</li>
<li>推断性统计(Inferential statistics): 一类算法,用于对一个或多个样本数据集进行检验,以判断这些样
本的描述性统计量是否很可能可以推广到其他数据集.你会在本书后续章节(但不是本章)学习推断性统计;
你可能已听过一些术语,比如F 值(F-value),t 值(t-value),方差分析(ANOVA)以及回归(regression).</li>
</ul></li>
<li>为什么这个区别很重要呢?
<ul class="org-ul">
<li>在描述性统计中,我们不关心样本数据与其母体(总体)之间的关系,也不关心是否可以从一个样本推广到其
它样本或总体;我们也不会去比较两个数据集的特征差异.描述性统计的目的,仅仅是获得某一个特定数据集
的数值化表示.</li>
<li>推断性统计恰好相反,它完全是关于:如何使用一个特定的数据集,来了解这个样本所来自的总体特征.换句
话说,推断性统计是利用我们已有的数据去对未知数据作出推测</li>
</ul></li>

<li>举个例子:假设我们测量了一组男性和一组女性的身高,发现男性的平均身高是 178 cm,女性是 171 cm.
<ul class="org-ul">
<li>这就是两个样本的描述性统计,并且在这两个样本中,男性平均比女性高正好 7 cm &#x2013; 这是确凿的,没有概率
和不确定性的问题.</li>
<li>但是,我们能否推断 "男性在总体上比女性高 7 cm",即包括那些没有被测量到的男性和女性呢?这是描述性
统计无法回答的问题.要想回答,我们需要使用推断性统计,而答案会取决于样本是如何收集的,样本大小,
以及每组内部的方差等因素.</li>
</ul></li>
<li>我希望这个区别已经很清晰了.本章完全聚焦于描述性统计,接下来的几个章节也是如此.你会在第 8 章开始学
习推断性统计.</li>
<li>因为大多数人提到"statistics"(统计)时,想到的其实是推断性统计,所以:
<ul class="org-ul">
<li>我会在提到描述性统计时加上限定词"descriptive"(描述性),</li>
<li>而当我直接写 statistics 时,则是指推断性统计.</li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-org5e19c89" class="outline-3">
<h3 id="org5e19c89"><span class="section-number-3">4.2.</span> Data distributons</h3>
<div class="outline-text-3" id="text-4-2">
<ul class="org-ul">
<li>让我们先来想一想一个实验.假设我找到 300 个人,并且向每个人提出同样的问题:
<ul class="org-ul">
<li>"你在 YouTube 上看过几次《江南 Style》音乐视频?"</li>
</ul></li>
<li>关于这些数据,有两个重要的观察点:
<ul class="org-ul">
<li>首先,观看视频的次数并不一定是整数;你可以在中途停下来,那么你可以报告说你看了 0.5 次 的江南
Style 视频.</li>
<li>其次,零是有意义的数值:看了 0 次意味着完全没有看过这个视频.</li>
</ul></li>
<li>这也意味着,看 10 次确实是看 5 次的两倍.而且,不可能出现看 -2 次 这样的情况.因此,这类数据的类型
是 Ratio(比率数据)- 参见本书第 49 页表 2.8</li>
<li>回到数据分布问题:我们该如何可视化这些数据呢?
<ul class="org-ul">
<li><p>
一种方法是,直接绘制一个包含两列的表格&#x2013;第一列是参与者 ID,第二列是观看次数&#x2013;每个受访者占一行(见
图 4.1).但是,这并不是一种好的可视化方法,而且对于大型数据集来说也不适用.
</p>

<div id="org6271113" class="figure">
<p><img src="https://raw.githubusercontent.com/harrifeng/image/master/ms/4-1.png" alt="4-1.png" />
</p>
<p><span class="figure-number">Figure 28: </span>ms/4-1.png</p>
</div></li>
<li><p>
另一种方法是,画一张图,把调查对象放在横轴(x 轴),观看次数放在纵轴(y 轴)(见图 4.2A).这种方
法比单纯的数字表格好一些,但它是可视化这些数据的最佳方式吗?
</p>

<div id="org71ca3ac" class="figure">
<p><img src="https://raw.githubusercontent.com/harrifeng/image/master/ms/4-2.png" alt="4-2.png" />
</p>
<p><span class="figure-number">Figure 29: </span>ms/4-2.png</p>
</div></li>
</ul></li>
<li>其实并不是,因为在横轴上,数据的排序是没有意义的&#x2013;我们并不认为相邻的样本之间有必然关系(前提是我们
是从总体中随机抽样的).</li>
<li>你可能已经在想:**直方图(histogram)**可能是更好的可视化方法.
<ul class="org-ul">
<li>我同意. 图 4.2B 展示了这个数据的直方图(我们后面会看到直方图不是完全好过当前的scatter plot,只不过
是各有千秋)</li>
</ul></li>
<li>正如我在上一章说过的,直方图是一种有损可视化&#x2013;它会损失一部分信息.不过,我们所损失的信息,往往会被
它在理解数据分布特征方面的优势所弥补.</li>
<li>在直方图中最明显的特征是向下的斜率;这既不是一个高斯分布,也不是对称分布:绝大多数受访者看过该视频
的次数很少,而随着观看次数的增加,人数稳定减少.</li>
<li>不过,这种减少并非完全单调;在数字 18 附近,人数有一个小上升:也就是说,比周围区间更多的人看过该视
频大约 18 次.</li>
<li>至于这种"凸起"是否会在另一组样本中重现,是另一个问题;关键是,这种特征在原始数据表格中完全看不出来.</li>
<li>另一方面,图 4.2A 的散点图显示,在大约 35 次 的位置,有一个明显的高值,可能是一个离群点.虽然这个点
在直方图中也存在,但它对应的柱高只有 1,不仔细看很容易被忽略(也许你直到刚才才注意到它!).</li>
<li>结论是:
<ul class="org-ul">
<li>没有哪一种可视化能够同时呈现数据的所有特征;在理解特定数据特性时,有些图比其它图更有效.</li>
<li>即便是简单的数据集,查看多种可视化形式也能帮助你更全面地理解数据.</li>
</ul></li>
<li>通过这些定性观察,我们发现了仅凭数字表格很难甚至无法看出的数据特征.在本章后面,你将学习如何将这些
"定性观察"量化为数据.</li>
<li>这里有两个重要的概念:
<ul class="org-ul">
<li>我们用两种方法(散点图和直方图)可视化了数据&#x2013;每种方法揭示了数据的不同特征;</li>
<li>我们观察了直方图的形状,这为我们提供了关于数据分布的定性信息.</li>
</ul></li>
<li>因为我们关注的是分布,所以无论是用 <b>总数(count)还是换算成比例(proportion)</b> 来绘图都没关系&#x2013;这种
转换不会改变分布的形状,也不会影响你将在本章学习的描述性统计特征.</li>
</ul>
</div>
<div id="outline-container-orgdcd6f88" class="outline-4">
<h4 id="orgdcd6f88"><span class="section-number-4">4.2.1.</span> Empirical vs. analytical distributions</h4>
<div class="outline-text-4" id="text-4-2-1">
<ul class="org-ul">
<li>数据分布来自两种来源之一:测量得到的数据,或数学公式.它们也分别被称为
<ul class="org-ul">
<li>经验分布(empirical distribution)</li>
<li>解析分布(analytical distribution).</li>
</ul></li>
<li>经验分布会生成类似你在图 4.2B 中看到的直方图.
<ul class="org-ul">
<li><p>
图4-2
</p>

<div id="org41ed9cf" class="figure">
<p><img src="https://raw.githubusercontent.com/harrifeng/image/master/ms/4-2.png" alt="4-2.png" />
</p>
<p><span class="figure-number">Figure 30: </span>ms/4-2.png</p>
</div></li>
<li>之所以叫"经验分布",是因为它基于经验数据(empirical data),也就是从现实世界测量获得的数据(虽然
在我们的例子中,这些数据是虚构的,但它们模拟了真实世界中的情况).</li>
</ul></li>
<li>另外,即使从同一个总体(population)中抽样,每个数据集的经验分布也会有所不同.
<ul class="org-ul">
<li>换句话说,如果我们的实验是随机抽样,那么每次抽样得到的新数据集都会生成不同的直方图,</li>
</ul></li>
<li>当然,我们会期望它们的整体形状是相似的.</li>
<li>图 4.3 展示了这个概念:
<ul class="org-ul">
<li><p>
图4-3
</p>

<div id="org511759f" class="figure">
<p><img src="https://raw.githubusercontent.com/harrifeng/image/master/ms/4-3.png" alt="4-3.png" />
</p>
<p><span class="figure-number">Figure 31: </span>ms/4-3.png</p>
</div></li>
<li>为了绘制这两个直方图,我用计算机的随机数生成器随机抽样.</li>
<li>由于随机抽样的缘故,这两个直方图并不完全相同,但我相信你会同意它们的整体定性特征是相似的.</li>
</ul></li>
<li>我在前一章解释过,尽管直方图应该用条形来绘制(因为它们通过分箱 binning 创建),但当分箱的精度足够高
并且折线有助于理解时,也可以用线条来表示.</li>
<li>你可以想象,当样本量越来越大&#x2013;趋近于无限大,且分箱尺寸越来越小&#x2013;趋近于无限小的时候,用条形和用折线
就没有区别了.</li>
<li>这就引出了 解析分布(analytical distribution):
<ul class="org-ul">
<li>它并不是通过对测量数据进行分箱得到的,而是通过计算一个数学公式得到的.</li>
<li><p>
例如,考虑一个公式:
</p>
\begin{equation}
f(x) = \frac{1}{\sigma \sqrt{2\pi}} e^{-\frac{x^2}{2\sigma^2}} \tag{4.1}
\end{equation}</li>

<li>这个公式叫做高斯函数(Gaussian function),也称为正态函数(normal function).暂时不用担心它是什
么意思,它从哪里来,或者公式中的参数 σ 代表什么;你会在本书的后续内容中更多地学习高斯公式的概念.</li>
<li><p>
目前关键是要理解:它是变量 x 的一个数学函数,它不是从经验数据计算出来的,我们可以直接计算这个公式
并画出类似图 4.4 的曲线.
</p>

<div id="org16d8ea5" class="figure">
<p><img src="https://raw.githubusercontent.com/harrifeng/image/master/ms/4-4.png" alt="4-4.png" />
</p>
<p><span class="figure-number">Figure 32: </span>ms/4-4.png</p>
</div></li>
</ul></li>
<li>解析分布的 y 轴可以按不同方式归一化,这会影响它的含义.</li>
<li>在很多情况下,分布会被归一化为概率,即分布在所有取值上的总和等于 1(对于连续分布,这就是从 −∞ 到 +∞
的积分等于 1).</li>
<li>这意味着什么呢?
<ul class="org-ul">
<li>这意味着解析分布告诉我们某些数值范围出现的概率.</li>
<li>例如,在高斯分布中,数值越接近 x = 0,出现的概率越大;而越远离 0,则概率越小. (注意y值最高在x轴
为0的时候)</li>
</ul></li>
<li>在统计学中有无数种解析分布;你会在本章的后续部分看到几个例子,在本书的其余部分,你可能会学习到大约
六种常用的解析分布.</li>
</ul>
</div>
</div>
<div id="outline-container-org8974c57" class="outline-4">
<h4 id="org8974c57"><span class="section-number-4">4.2.2.</span> The usese of data distributions</h4>
<div class="outline-text-4" id="text-4-2-2">
<ul class="org-ul">
<li>数据分布(data distribution)有多种应用,包括:
<ul class="org-ul">
<li>他们提供了数据的可视化概览和定性的(qualitative)概览 &#x2013; 它们可以让我们直观地了解数据的特征.</li>
<li>统计分析过程通常基于关于总体分布的假设 &#x2013; 样本是从这个总体中抽取的,因此理解分布有助于判断哪种统
计方法适合某个数据集.</li>
<li>统计推断(Statistical inference) ,即判断一个样本统计量是否只是偶然产生的,是通过将 <b>观测到的统计值</b>
与 <b>如果结果确实只是随机产生</b> 时所期望的统计分布进行比较来实现的.</li>
<li>计算机模拟 &#x2013; 在生物学,物理学和计算机科学中,很多模拟是基于从某种分布中进行采样的.例如,能生成
音乐,文本和人脸的生成式 AI 模型,就是通过从特定分布中随机采样实现的.</li>
<li>统计建模 &#x2013; 在统计建模中,我们会检查 <b>残差(residuals)</b> 的分布(即实际观测值与模型预测值之间的差
异)来评估模型的质量.</li>
<li>分布假设是统计学基本定律的基础 &#x2013; 比如大数定律和中心极限定理.因此,理解分布有助于你掌握统计学的
核心概念.</li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-org01b1953" class="outline-4">
<h4 id="org01b1953"><span class="section-number-4">4.2.3.</span> Examples of distributions</h4>
<div class="outline-text-4" id="text-4-2-3">
<ul class="org-ul">
<li>你将在本书后面学习各种不同的分布,但我希望现在先让你感受一下几种解析分布(analytical distributions)
的样子.</li>
<li>图 4.5 展示了四种分布及其部分参数.
<ul class="org-ul">
<li><p>
图4-5
</p>

<div id="org04fb8f3" class="figure">
<p><img src="https://raw.githubusercontent.com/harrifeng/image/master/ms/4-5.png" alt="4-5.png" />
</p>
<p><span class="figure-number">Figure 33: </span>ms/4-5.png</p>
</div></li>
<li>请暂时不要担心这些不同分布的含义,来源,用途,或者"df"是什么意思&#x2013;我保证这些内容会在本书后续逐渐
变得清晰.</li>
<li>现在,请专注于这些分布的定性特征(qualitative features).</li>
</ul></li>
<li>我会在图下方提供一些总体评论,但在阅读之前,希望你先根据图上的信息自己做一些观察.以下是我对这些分
布的定性观察:
<ul class="org-ul">
<li>有些分布的定义域包括正数和负数,而有些分布只适用于正数.</li>
<li>大多数分布在一个"波峰"两侧逐渐趋近于 0.</li>
<li>有些分布是对称的,而有些分布在"波峰"一侧比另一侧更快地下降到 0.</li>
<li>有些参数值对分布的形状影响较小,而另一些参数值则可能导致分布形状发生定性的巨大变化.</li>
</ul></li>
<li>接下来看看一些 <b>经验分布(empirical distributions)</b> 的例子.
<ul class="org-ul">
<li>经验分布可能比解析分布更加多样,因为它们基于测量获得的数据&#x2013;而在实际测量中,样本量有限或者设备问
题可能会产生外形异常的分布.</li>
<li><p>
图 4.6 中的数据是通过随机数生成的,但它们包含了真实数据中可能出现的特征.
</p>

<div id="orgb744c2b" class="figure">
<p><img src="https://raw.githubusercontent.com/harrifeng/image/master/ms/4-6.png" alt="4-6.png" />
</p>
<p><span class="figure-number">Figure 34: </span>ms/4-6.png</p>
</div></li>
</ul></li>
<li>与解析分布的例子一样,我希望你在阅读我的评论之前,先自己观察这些直方图并作出定性判断.</li>
<li>这是我的观察:
<ul class="org-ul">
<li>面板 A(Panel A):这个分布看起来有点像正态分布,但它是线性下降而不是非线性下降,并且不会降到零.
一个分布下降到零的速率被称为峰度(kurtosis),你将在本章后面学习如何量化和解释峰度.</li>
<li>面板 B(Panel B):这是从均匀分布(uniform distribution)中抽样得到的数据,这意味着在下限和上限之
间(此处是 0 到 1),每个值出现的概率相同.它看起来好像某些值比其他值更常见,但其实这是一种由抽样
变异性造成的假象.</li>
<li>面板 C(Panel C):这是一个幂律分布(power-law distribution),其中事件出现的次数与事件大小成反比.
幂律分布被认为是无尺度(scale-free)结构的证据.很多有趣的物理和生物系统都呈现这种分布形状,例如
地震震级和大脑活动.在分布的右尾部有一个小"突起",这是我模拟设备问题的尝试&#x2013;当较大的数据值被设备
截断并统一为一个最大值时,就会出现这种情况.这种现象是数据中的一个伪影(artifact),需要进行处理,
并且研究人员必须具备相关领域的知识来判断是否以及如何处理它.</li>
<li>面板 D(Panel D):有些分布会有多个波峰,意味着数值分布中存在多个高概率的聚集区.这个例子有两个峰,
因此叫做双峰分布(bimodal);更一般地,有多个峰的分布叫做多峰分布(multimodal).如果分布只有一个
峰,则称为单峰分布(unimodal).</li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-org1ace472" class="outline-4">
<h4 id="org1ace472"><span class="section-number-4">4.2.4.</span> Quantifying qualitative characteristics</h4>
<div class="outline-text-4" id="text-4-2-4">
<ul class="org-ul">
<li>在进入本章其他内容之前,再看一个分布的例子:
<ul class="org-ul">
<li><p>
请观察图 4.7 中的三个解析分布(analytical distributions),试着比较它们的不同之处和相同之处.
</p>

<div id="orgc70895c" class="figure">
<p><img src="https://raw.githubusercontent.com/harrifeng/image/master/ms/4-7.png" alt="4-7.png" />
</p>
<p><span class="figure-number">Figure 35: </span>ms/4-7.png</p>
</div></li>
<li>首先,你会发现,这三个分布的形状大致相同:它们都围绕着单个峰值呈对称分布,并且在两侧逐渐趋向于
零(事实上,它们都是高斯分布).</li>
<li>其中,有两个分布在相同的 x 轴位置达到峰值,而第三个则向左平移.</li>
<li>在那两个峰值位置相同的分布中,其中一个比另一个更宽("更胖").</li>
</ul></li>
<li>这些都是关于分布集中趋势(central tendency)和离散程度(dispersion)的定性观察.</li>
<li>定性观察很重要,但我们还需要通过赋予这些特征数值来量化这些特性.</li>
</ul>
</div>
</div>
</div>
<div id="outline-container-org4c0e084" class="outline-3">
<h3 id="org4c0e084"><span class="section-number-3">4.3.</span> Central tendency</h3>
<div class="outline-text-3" id="text-4-3">
<ul class="org-ul">
<li>集中趋势(Central tendency)是一个统称,一般指数据集中"典型的"或最有可能出现的值(见图 4.8).</li>
<li>集中趋势是最重要的描述性统计量之一,并且经常用于推论统计中.事实上,许多数据集仅使用集中趋势就能进
行描述.</li>
<li>根据数据的类型和分布特性,有多种方法可以量化数据集的集中趋势.Wikipedia 上列出了 18 种衡量集中趋势
的方法.其中最常见的三种是:
<ul class="org-ul">
<li>均值(mean)</li>
<li>中位数(median)</li>
<li>众数(mode).</li>
</ul></li>
<li>在接下来的内容中,均值(又称算术平均数或平均数)占据最大篇幅,因为它是最重要且应用最广泛的集中趋势
度量方法.</li>
</ul>
</div>
<div id="outline-container-orgf6ee169" class="outline-4">
<h4 id="orgf6ee169"><span class="section-number-4">4.3.1.</span> Mean</h4>
<div class="outline-text-4" id="text-4-3-1">
<ul class="org-ul">
<li>要计算均值(mean),只需将所有数据值相加,然后除以数据值的数量.
<ul class="org-ul">
<li><p>
公式如下:
</p>
\begin{equation}
\overline{x} = n^{-1} \sum_{i=1}^{n} x_i
\end{equation}</li>
</ul></li>
<li>在讲公式之前,我想花点时间解释一下数学符号的含义,以确保你能理解它:
<ul class="org-ul">
<li>x 表示我们关心的变量;</li>
<li>上面加横线的 \(\overline{x}\) 是表示"x 的平均值"的常用符号.</li>
<li>在正式的统计学符号中: \(\mu\) 或者 $&mu; x$表示 总体均值(population mean), $\overline{x}$表示样本
均值(sample mean);</li>
<li>在其他情况下,你也可能会看到 μ 被用于任何一组数字的平均值,而不论它们来自总体还是样本.</li>
<li>n 表示样本数量,因此 1/n 就是除以样本大小(原文中的 n⁻¹ 是指数文错误,实际是 1/n 的意思).</li>
<li>Σ(求和符号) 表示将变量 x 的所有取值相加.</li>
</ul></li>
<li>计算以下数据集的均值:[2,1,3,2,2]步骤:
<ul class="org-ul">
<li>将所有数相加(2+1+3+2+2=10)</li>
<li>除以数据个数(5) → (10 2 5 = 2),所以均值= 2</li>
</ul></li>
<li><p>
均值可以在直方图中用一条竖线表示(见图 4.9).
</p>

<div id="org937cbf9" class="figure">
<p><img src="https://raw.githubusercontent.com/harrifeng/image/master/ms/4-9.png" alt="4-9.png" />
</p>
<p><span class="figure-number">Figure 36: </span>ms/4-9.png</p>
</div></li>
<li>注意事项:
<ul class="org-ul">
<li>均值可以针对任何数值型数据集计算,但并不是所有情况下它都有直观的解释意义.</li>
<li>均值作为数据集的描述性统计量,只有在数据分布 <b>(1) 大致对称</b> ,*(2) 单峰(unimodal)*时才是有用的.</li>
</ul></li>
<li>为什么是这样?(先自己想一想):
<ul class="org-ul">
<li><p>
例 1(图 4.10 左):
</p>

<div id="org348a535" class="figure">
<p><img src="https://raw.githubusercontent.com/harrifeng/image/master/ms/4-10.png" alt="4-10.png" />
</p>
<p><span class="figure-number">Figure 37: </span>ms/4-10.png</p>
</div></li>
<li>该分布符合幂律分布(power-law),值越大出现的概率越小.</li>
<li>在这种情况下,均值并不能反映数据的集中位置,也不能代表典型值,因此没太大意义.</li>
<li>这种分布有时叫无尺度分布(scale-free),因为它没有明确的特征尺度或数值.</li>
<li>例 2(图 4.10 右):</li>
<li>数据呈现双峰分布(bimodal),恰好左右对称,所以均值位于两个峰的正中间.</li>
<li>但实际上,很少有数据落在均值附近,因此它并不能很好代表"中心位置".</li>
</ul></li>
<li>结论:
<ul class="org-ul">
<li>虽然均值计算简单,可以用于任何数值型数据集,</li>
<li>但只有当分布是单峰且大致对称时,均值才是集中趋势的直观体现.</li>
</ul></li>
<li>关于均值的补充说明:
<ul class="org-ul">
<li>均值不一定是数据中实际存在的值.例如,1,3,4 的均值是 2.67,这既不是中位数,也不是众数(后面会学
到).</li>
<li>均值适用于区间数据(interval data)或比率数据(ratio data)在某些情况下也可以对其他数据类型求均值
<ol class="org-ol">
<li>例如,上一章提到的"产品评分"可以计算均值.</li>
<li>但有时解释会很奇怪,比如美国平均每个家庭有 1.9 个孩子(那是不是说第二个孩子缺了 10%?😂).</li>
<li>对 <b>名义数据(nominal data)</b> 求均值几乎没有意义:若你把巧克力冰淇淋标为 1,香草为 2,草莓为
3,那么"(巧克力 + 香草)÷ 2 = 草莓"显然是无意义的.</li>
</ol></li>
<li>均值不等于期望值(expected value)在某些假设条件下它们可能相等,但并不总是一样的.如果你还不熟悉
期望值,先不用担心,这将在第 8 章详细讲.这里提到它只是为了避免你混淆概念.</li>
<li>均值对极端值(outliers)非常敏感样本量越小,这个问题越严重.你将在练习 6 中具体看到.</li>
<li>即使分布大致对称且单峰,当方差较小时,均值对集中趋势的描述才更有意义.这会引出一个相关的描述性统
计量&#x2013;变异系数(coefficient of variation),后面会学到.</li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-orgb746de4" class="outline-4">
<h4 id="orgb746de4"><span class="section-number-4">4.3.2.</span> Median</h4>
<div class="outline-text-4" id="text-4-3-2">
<ul class="org-ul">
<li>中位数(median)是能够把数据集分成两等份的数据值.</li>
<li>想象一下,将数据从最小(最负)排到最大(最正),那么中位数就是恰好位于中间的那个数.
<ul class="org-ul">
<li>换句话说,50% 的数据小于中位数,50% 的数据大于中位数.</li>
</ul></li>
<li>目前并没有统一公认的中位数符号,有时人们会写成 med(x),但最常见的方式就是直接写成 <b>"数据的中位数(the
median of the data)"</b>.
<ul class="org-ul">
<li><p>
计算中位数的公式如下:
</p>
\begin{equation}
med(x) = \tilde{x}_i, \quad i = \frac{n+1}{2} \tag{4.4}
\end{equation}</li>
<li>~{x} 表示排好序的数据;</li>
<li>i 表示中间那个值的索引(下面会解释公式中的 "+1").</li>
</ul></li>
<li>我们找个例子练个手,
<ul class="org-ul">
<li><p>
比如下面的数据集
</p>
<pre class="example" id="org4b0f788">
x=[0,1,1,2,2]
</pre></li>
<li>计算步骤:
<ol class="org-ol">
<li>将数据排序(这里本身已排好序);</li>
<li>取中间的那个值.</li>
<li>中间的那个值是 1(已加粗).</li>
</ol></li>
<li>在这个例子中,(n=5),</li>
<li>公式中的索引 (i=(5+1)/2=3),意思是"排序后第 3 个值"就是中位数.在该中位数左边有 2 个数更小,右边
有 2 个数更大.</li>
<li>该数据集的均值(mean)是 2,这个数字并不在数据中.</li>
</ul></li>

<li>我们再找个数据集练手
<ul class="org-ul">
<li><p>
数据集:
</p>
<pre class="example" id="org7d5f5b4">
y=[10,0,4,1,−2,7]
</pre></li>
<li><p>
排序后:
</p>
<pre class="example" id="orgc168c1b">
y=[−2,0,1,4,7,10]
</pre></li>
<li>这里数据个数是偶数,因此没有单个值能完美分割数据集.那怎么办呢?会有两个中位数吗?还是根本就没有
中位数?</li>
<li>答案是:中位数为 2.5.它是中间两个数字 1 和 4 的平均数:(1+4)/2=2.5</li>
<li>虽然 2.5 不在原始数据集中,但它能将数据分成两半,因此满足中位数的定义.</li>
<li>当然,有无数个值都能将数据分成两半(例如 1.000001,π,3.999999&#x2026;),但是通过明确规定偶数个数据时取
中间两个值的平均数,就保证了中位数对于给定数据集是唯一的.</li>
</ul></li>
<li>结论:
<ul class="org-ul">
<li>如果数据集元素个数是奇数,中位数就是排序后最中间的那个值;</li>
<li>如果数据集元素个数是偶数,中位数就是中间两个值的平均数.</li>
</ul></li>
<li><p>
图 4.11 展示了一个分布的例子,其中中位数和均值几乎相同.实际上,在对称分布中,中位数和均值是相等或
非常接近的.
</p>

<div id="org202de7a" class="figure">
<p><img src="https://raw.githubusercontent.com/harrifeng/image/master/ms/4-11.png" alt="4-11.png" />
</p>
<p><span class="figure-number">Figure 38: </span>ms/4-11.png</p>
</div></li>
<li>中位数是否总是适用于所有数值型数据集?
<ul class="org-ul">
<li><p>
让我们回到图 4.10,不过这次不仅标出均值,也标出中位数(见图 4.12).
</p>

<div id="org2a59074" class="figure">
<p><img src="https://raw.githubusercontent.com/harrifeng/image/master/ms/4-12.png" alt="4-12.png" />
</p>
<p><span class="figure-number">Figure 39: </span>ms/4-12.png</p>
</div></li>
</ul></li>
<li>请先观察图形并自己得出一些结论.作者的评论
<ul class="org-ul">
<li>左侧面板展示了一个隐含但重要的区别:你之前学到,均值不能代表该数据集的典型取值;而中位数能做到&#x2013;
它准确地把数据分为两半.</li>
<li>但问题是,人们通常把中位数当成分布的中心位置来理解,如果没有看到分布形状,就容易以为中位数就是"最
典型值",这可能会产生误导.</li>
<li>右侧面板的情况类似:中位数虽然把数据切成了两半,但它并不比均值更能代表典型值.</li>
</ul></li>
<li>总结:
<ul class="org-ul">
<li>均值和中位数还有很多重要的特性需要了解,尤其是在样本量和离群值(outliers)方面的表现差异.</li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-orgbfdec1e" class="outline-4">
<h4 id="orgbfdec1e"><span class="section-number-4">4.3.3.</span> Mode</h4>
<div class="outline-text-4" id="text-4-3-3">
<ul class="org-ul">
<li>先补充一点关于术语的说明:
<ul class="org-ul">
<li>作为一种集中趋势的度量,众数(mode)和描述分布峰数量的单峰(unimodal),双峰(bimodal),多峰
(multimodal)等词不是同一个概念.</li>
<li>这两个概念容易混淆,需要注意区分.</li>
</ul></li>
<li>众数是数据集中出现次数最多的值.
<ul class="org-ul">
<li>计算众数的方法很简单:只需统计每个唯一取值的出现次数,</li>
<li>出现次数最多的那个值就是众数(modal value).</li>
</ul></li>
<li>众数最适合用于分类数据(categorical data).事实上,它是唯一适合名义数据(nominal data) 的集中趋势
度量,例如电影类型,冰淇淋口味等.</li>
<li>对于数值型数据,如果数据是离散的(整数或分箱后的值),也可以计算众数,但通常均值会更合适.因为对于
任意精度的连续数据,出现完全相同数值的几率几乎为零.举个例子:
<ul class="org-ul">
<li>假设用精度达到 微克(microgram,一百万分之一克) 的秤来测量企鹅的体重,那么两只企鹅测得的重量完全相同(精确到微克)的概率几乎不可能发生.</li>
</ul></li>
<li>例 1:
<ul class="org-ul">
<li>计算下面整数数据集的众数:[10,0,5,1,5,7]</li>
<li>众数是 5,因为它出现了两次,而其他数值只出现一次.</li>
</ul></li>
<li>例 2
<ul class="org-ul">
<li>数据集:[0,0,1,1,2,7]</li>
<li>这个数据集有两个众数:0 和 1.它们的出现频率相同,并且比其他值出现得更频繁.</li>
</ul></li>
<li>需要注意:
<ul class="org-ul">
<li>均值和中位数对于一个数值型数据集来说是唯一的;但众数可能有多个.</li>
</ul></li>
<li>拥有多个众数并不一定难以解读.例如:
<ul class="org-ul">
<li><p>
图 4.13(示意图)展示了某个虚拟数据集的洗衣日(laundry day)分布:周三 和 周日 出现频率最高.
</p>

<div id="orgddc2932" class="figure">
<p><img src="https://raw.githubusercontent.com/harrifeng/image/master/ms/4-13.png" alt="4-13.png" />
</p>
<p><span class="figure-number">Figure 40: </span>ms/4-13.png</p>
</div></li>
<li>解释很简单:人们最可能在周三和周日洗衣服.</li>
</ul></li>
<li>另一方面,对这类数据集计算均值是毫无意义的:"平均洗衣日"大约在周四半天,显然没有任何现实上的解释价值.</li>
<li>可视化上,众数对应于柱状图中最高的柱子.</li>
</ul>
</div>
</div>
</div>
<div id="outline-container-orgaa4198b" class="outline-3">
<h3 id="orgaa4198b"><span class="section-number-3">4.4.</span> Measures of dispersion</h3>
<div class="outline-text-3" id="text-4-4">
<ul class="org-ul">
<li>离散程度(dispersion)指的是一个分布的宽度.
<ul class="org-ul">
<li><p>
举个例子:想象两种收入分布情况&#x2013;(见图 4.14).
</p>

<div id="org8f0ba36" class="figure">
<p><img src="https://raw.githubusercontent.com/harrifeng/image/master/ms/4-14.png" alt="4-14.png" />
</p>
<p><span class="figure-number">Figure 41: </span>ms/4-14.png</p>
</div></li>
<li>数据集 A:1000 位拥有相同职位,在同一行业工作的人的工资分布(比如某连锁餐厅的所有经理的工资);</li>
<li>数据集 B:1000 位来自任何岗位,任何行业的人的工资分布</li>
<li>在餐厅经理这个群体中,工资不会完全相同,但会相对接近;</li>
<li>而在随机抽取的全行业人员中,工资分布会涵盖收入水平的低端和高端.</li>
<li>我在这里创建了均值相同,但离散程度不同的两个数据集.</li>
<li>衡量数据集离散程度的方法有很多,在本节我会一一介绍.不过,我希望图 4.14 先能帮你直观理解这个概念.</li>
</ul></li>
</ul>
</div>
<div id="outline-container-orgdbe0e62" class="outline-4">
<h4 id="orgdbe0e62"><span class="section-number-4">4.4.1.</span> Variance</h4>
<div class="outline-text-4" id="text-4-4-1">
<ul class="org-ul">
<li>总体方差的符号是 σ²,样本方差的符号是 s².</li>
<li>有时你还会看到记作 σ²ₓ 或 var(x),表示变量
<ul class="org-ul">
<li><p>
方差的公式见方程(4.5).
</p>
\begin{equation}
s^2 = \frac{1}{n-1} \sum_{i=1}^{n} (x_i - \overline{x})^2 \tag{4.5}
\end{equation}</li>
<li>用文字解释公式:计算方差的步骤:
<ol class="org-ol">
<li>从每个数据值中减去该数据的均值;</li>
<li>对差值平方;</li>
<li>把所有平方后的差值加总;</li>
<li>再除以样本大小减 1(n - 1).</li>
</ol></li>
<li>换句话说,方差就是数据与均值的偏差平方的平均值.</li>
<li>可能你对公式中某些部分有疑问,我会在后面逐一解释.但先来看几个例子.</li>
</ul></li>
<li>例 1
<ul class="org-ul">
<li>数据集:P=[8,0,4,1,−2,7]</li>
<li>均值是 3.</li>
<li>方差计算结果是 16.</li>
</ul></li>
<li>例 2
<ul class="org-ul">
<li>数据集:Q=[2,3,4,3,4,4]</li>
<li>方差是 2/3.</li>
</ul></li>
<li>这两个结果意味着什么呢?
<ul class="org-ul">
<li>var(P) 比 var(Q) 大 24 倍,说明 P 的数据更分散;</li>
<li><p>
从图 4.15 的可视化中,你能直观看到 P 的数据比 Q 更分布分散.
</p>

<div id="org750cf84" class="figure">
<p><img src="https://raw.githubusercontent.com/harrifeng/image/master/ms/4-15.png" alt="4-15.png" />
</p>
<p><span class="figure-number">Figure 42: </span>ms/4-15.png</p>
</div></li>
<li>它看起来有 24 倍那么分散吗?可能并没有,但这是因为方差涉及平方操作,数值差异会被放大.</li>
</ul></li>
<li>方差可用于任何数值型或有序型(ordinal)数据.</li>
<li>你可能会觉得,既然方差公式里用到均值,那只有在均值有意义的分布下它才有用.
<ul class="org-ul">
<li>但事实上,即使数据分布不是单峰或对称的,方差也能提供有价值的比较指标&#x2013;尤其是在分布形状相似的不同
数据集之间比较时.</li>
</ul></li>
<li>关于方差公式(方程 4.5)的几个重要问题</li>
<li><b>为什么要"中心化"(mean-center)?</b>
<ul class="org-ul">
<li>我们希望方差反映数据内部的离散程度,而不是受数据整体位置的影响.比如,以下两个数据集的方差都相同(4/5):
<ol class="org-ol">
<li>[d1 =[1,2,3,3,2,1]]</li>
<li>[d2 =[101,102,103,103,102,101]]</li>
</ol></li>
<li>它们的均值不同,但"分散程度"一样,通过中心化可以得出相同的方差.</li>
</ul></li>

<li><b>为什么要平方差值?</b>
<ul class="org-ul">
<li>平方的作用是给每个差值一个正数的"距离"度量.</li>
<li><p>
如果不平方(直接求和),对于任何经过均值中心化的数据集,差值的总和恒为 0.例如:
</p>
\begin{equation}
\frac{1}{5} \sum_{i=1}^{n} (x_i - 2)
= \frac{-1 + 0 + 1 + 1 + 0 - 1}{5}
= 0 \notag
\end{equation}</li>
<li>如果不平方,结果永远是零,起不到衡量离散程度的作用.</li>
</ul></li>
<li><b>为什么不用绝对值代替平方?</b>
<ul class="org-ul">
<li><p>
实际上是可以的,这种方法叫平均绝对偏差(MAD, mean absolute difference):
</p>
\begin{equation}
MAD = \frac{1}{n-1} \sum_{i=1}^{n} \left| x_i - \overline{x} \right| \tag{4.8}
\end{equation}</li>
<li>它的优点是不太受离群值影响,在机器学习和优化算法中也有应用.</li>
</ul></li>
<li>为什么统计学中更多用方差而不是 MAD?</li>
<li>方差相比 MAD 有很多数学和统计学上的优势:
<ul class="org-ul">
<li>更强调大的偏差,有助于发现离群值(异常值),适用于如金融风险评估等领域;</li>
<li>连续且可微分,便于数学优化;</li>
<li>与欧几里得距离密切相关,有良好的几何解释;</li>
<li>是分布的二阶矩(second moment)(后面章节会讲统计矩的概念);</li>
<li>与最重要的 <b>最小二乘法(least squares)</b> 拟合算法紧密相关.</li>
</ul></li>
<li><b>为什么分母是 n-1 而不是 n?</b>
<ul class="org-ul">
<li>这是很多人困惑的点.</li>
<li>首先,我们必须通过样本大小来缩放方差,否则数据量增加,方差会无意义地增大.</li>
<li>当计算的是**总体方差(σ²)时,可以除以 (n);</li>
<li>当计算的是样本方差(s²)**时,需要除以 (n−1).原因是:已知样本均值后,数据集中最后一个值是可以被
确定的,所以数据的**自由度(degrees of freedom)**是 (n−1) 而不是 (n).</li>
</ul></li>
<li>举个例子:
<ul class="org-ul">
<li>公平的 6 面骰子,1~6 的均值是 3.5;</li>
<li>如果掷 4 次骰子,已知均值是 3,且前三次是 1,2,4,那么第四次的值一定是 5.</li>
<li>即,一旦样本均值确定了,数据中只有 (n−1) 个值可以自由变化.因此,除以 n-1 就是为了正确归一化样本方差.</li>
</ul></li>
<li>补充:
<ul class="org-ul">
<li>方差对于只有一个数据值的样本是未定义的(n=1 时自由度为零),</li>
<li>但均值在 n=1 的情况下是可以定义的.</li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-org7c2c87c" class="outline-4">
<h4 id="org7c2c87c"><span class="section-number-4">4.4.2.</span> Standard deviation</h4>
<div class="outline-text-4" id="text-4-4-2">
<ul class="org-ul">
<li>从数学上说,本节的核心内容很简单:标准差就是方差的平方根.</li>
<li>换句话说,如果方差是 \(s^2\), 那么标准差就是 \(s\)</li>
<li><p>
有时标准差也会写成 std(x) 或 STD.
</p>
\begin{equation}
s = \sqrt{\frac{1}{n-1} \sum_{i=1}^{n} (x_i - \overline{x})^2} \tag{4.9}
\end{equation}</li>
<li>那么问题来了:既然标准差只是方差的平方根,为什么我们还要区分这两个概念?(或者反过来说:既然方差只
是标准差的平方,为什么不只用一个呢?)</li>
<li>实际上,这两者在数学和概念上密切相关&#x2013;它们都反映了数据围绕均值的离散程度.区别在于解释性:
<ul class="org-ul">
<li>标准差的单位与原始数据相同,因此通常更容易解释;</li>
<li>方差的单位是原单位的平方,这在直观理解上更困难.</li>
</ul></li>
<li>例如:
<ul class="org-ul">
<li>如果测量的是身高(单位:英尺),那么标准差的单位也是英尺,容易理解;</li>
<li>但方差的单位是平方英尺(feet²),在概念上就不太直观.</li>
<li>在实际统计中,有些场景会用方差,有些会用标准差;</li>
</ul></li>
<li>在后续的学习中(包括本书后面的章节),你会遇到各种使用二者的情况.</li>
<li>举个例子:
<ul class="org-ul">
<li>一种常见的数据归一化方法叫 z-score 标准化(z-scoring),它将数据转换为以标准差为单位的形式;</li>
<li>回归分析等统计结果也可以转换为标准差单位,以方便解释和比较.</li>
</ul></li>
<li>当前你只需要记住两点:
<ul class="org-ul">
<li>标准差和方差通过平方/平方根关系互相关联;</li>
<li>在不同情境中,会因为解释性或数学计算便利性的原因,选择用其中一个而不是另一个.</li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-org346d43d" class="outline-4">
<h4 id="org346d43d"><span class="section-number-4">4.4.3.</span> Heteroscedasticity and Homoscedasticity</h4>
<div class="outline-text-4" id="text-4-4-3">
<ul class="org-ul">
<li>同方差性(homoscedasticity) 指的是一个变量在所有取值上都具有相同的方差
<ul class="org-ul">
<li><p>
(见图 4.16A).
</p>

<div id="org4e627a3" class="figure">
<p><img src="https://raw.githubusercontent.com/harrifeng/image/master/ms/4-16.png" alt="4-16.png" />
</p>
<p><span class="figure-number">Figure 43: </span>ms/4-16.png</p>
</div></li>
</ul></li>
<li>它的相反概念是异方差性(heteroscedasticity),意思是某个变量的方差会随变量取值的变化而变化.
<ul class="org-ul">
<li>例如,图 4.16B 展示了一个方差随 x 轴数值增加而增大的例子.</li>
</ul></li>
<li>比这两个词稍微没那么有趣,但同样准确的术语是:
<ul class="org-ul">
<li>方差齐性(homogeneity of variance)</li>
<li>方差异质性(heterogeneity of variance)</li>
</ul></li>
<li>异方差性的重要性:它在许多分析(如相关性分析,回归分析)中非常关键.</li>
<li>当数据存在异方差性时:
<ul class="org-ul">
<li>相关系数的解释性会下降;</li>
<li>回归系数的标准误可能被放大;</li>
<li>显著性检验的结果可能不可靠.</li>
</ul></li>
<li>现实中的例子财富与消费支出是一个经典案例:随着财富增加,消费支出的波动性也会增加;
<ul class="org-ul">
<li>低收入家庭的支出水平相对接近,因为支出的下限由基本生活需求(食品,房租等)决定,而且大额消费的可
能性有限;</li>
<li>高收入家庭可支配收入更多,因此既能购买低价物品,也会购买高价商品,比如昂贵的电子产品,家电,汽车
度假等.</li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-orgf878f7c" class="outline-4">
<h4 id="orgf878f7c"><span class="section-number-4">4.4.4.</span> Full width at half maximum (FWHM)</h4>
<div class="outline-text-4" id="text-4-4-4">
<ul class="org-ul">
<li>FWHM 是衡量高斯函数(Gaussian function)宽度的一种方法.</li>
<li>它既可以通过解析方法(analytically)计算,也可以通过经验方法(empirically)计算,并且对于任何近似高
斯形状的分布都是有意义的.</li>
<li>"Full Width at Half Maximum" 这个短语全称很长(直译:半最大值处的全宽),它到底是什么意思呢?
<ul class="org-ul">
<li>想象一个高斯函数,经过归一化处理之后峰值为 1(或 100%),两边逐渐下降至 0.</li>
<li>这意味着在峰值两侧,会各有一个数据点对应的高度为 0.5(或 50%) &#x2013; 这就是 half maximum(半最大值).</li>
<li>在 x 轴上,这两个半最大值点之间的距离,就是 FWHM.</li>
<li><p>
图 4.17 给出了这个概念的示意图.
</p>

<div id="org03100fc" class="figure">
<p><img src="https://raw.githubusercontent.com/harrifeng/image/master/ms/4-17.png" alt="4-17.png" />
</p>
<p><span class="figure-number">Figure 44: </span>ms/4-17.png</p>
</div></li>
</ul></li>
<li>对于精确的高斯函数,FWHM 可以通过解析公式直接计算.
<ul class="org-ul">
<li><p>
高斯函数
</p>
\begin{equation}
g(x) = \exp\left( \frac{-x^2}{2\sigma^2} \right) \tag{4.10}
\end{equation}</li>
<li><p>
高斯函数的FWHM
</p>
\begin{equation}
FWHM\left( g(x) \right) = 2\sigma \sqrt{2 \ln 2} \tag{4.11}
\end{equation}</li>
</ul></li>
<li>但对于经验分布(empirical distribution),FWHM 不能直接得到.在这种情况下,你可以使用一个算法从数据
分布中求得 FWHM.我会在练习 10中解释这个算法;</li>
</ul>
</div>
</div>
<div id="outline-container-org869e77c" class="outline-4">
<h4 id="org869e77c"><span class="section-number-4">4.4.5.</span> Fano factor and CV</h4>
<div class="outline-text-4" id="text-4-4-5">
<ul class="org-ul">
<li>我在本章前面提到过,即使是对称的单峰分布,均值的可解释性也在一定程度上取决于方差:
<ul class="org-ul">
<li>对于近似正态分布来说,方差越小,数据值就越集中在均值附近.</li>
</ul></li>
<li>Fano因子(Fano factor: FF)和 变异系数(Coefficient of Variation: CV)就是用于刻画这种"均值与方差关系"
的指标.
<ul class="org-ul">
<li>它们的公式很相似</li>
<li><p>
FF公式
</p>
\begin{equation}
FF = \frac{s^2}{\overline{x}} \tag{4.12}
\end{equation}</li>
<li><p>
CV公式
</p>
\begin{equation}
CV = \frac{s}{\overline{x}} \tag{4.13}
\end{equation}</li>
</ul></li>
<li>这两个量只在均值为正的数据集(通常是数值严格为正的数据集)中才有意义.原因很容易理解:
<ul class="org-ul">
<li>看分母部分,如果数据值围绕 0 对称分布,那么均值为 0 或接近 0;</li>
<li>这样一来,FF 或 CV 的值可能会无法定义,会趋向于 ±∞,甚至可能为负数;这些情况都没有实际解释意义.</li>
</ul></li>
<li>解释:
<ul class="org-ul">
<li>当 FF 或 CV 趋近于 0 时,说明方差相对均值非常小,数据很集中;</li>
<li>当 FF 或 CV 变大时,说明分散程度远大于均值(见图 4.18);</li>
</ul></li>
<li>因此,Fano 因子和 CV 可以视为信噪比的倒数测度(inverted signal-to-noise ratio).</li>
<li>它们在计算科学领域(物理学,生物学,神经科学等)有广泛应用.</li>
<li>主要区别:
<ul class="org-ul">
<li>Fano 因子在计算中使用方差,因此保留数据的单位;</li>
<li>CV 在计算中使用标准差,因此是无单位的比值.</li>
</ul></li>
<li>例子:假设你测量计算机运行一个算法所需的时间(单位:毫秒 ms):
<ul class="org-ul">
<li>Fano 因子的单位是 \(\frac{{ms}^2}{ms}=ms\)</li>
<li>CV 的单位是\(\frac{ms}{ms}=1\)</li>
</ul></li>
</ul>
</div>
</div>
</div>
<div id="outline-container-orgbac1566" class="outline-3">
<h3 id="orgbac1566"><span class="section-number-3">4.5.</span> Interquartile range(IQR)</h3>
<div class="outline-text-3" id="text-4-5">
<ul class="org-ul">
<li>IQR 是另一种衡量数据集 离散程度 的方法,我在 第 3.5 节(箱线图部分)中曾简要介绍过它.</li>
<li>IQR 表示数据中 第 25% 分位数 和 第 75% 分位数 之间的数值距离
<ul class="org-ul">
<li><p>
(见图 4.19,该图来自前一章).
</p>

<div id="org32c1b75" class="figure">
<p><img src="https://raw.githubusercontent.com/harrifeng/image/master/ms/4-19.png" alt="4-19.png" />
</p>
<p><span class="figure-number">Figure 45: </span>ms/4-19.png</p>
</div></li>
<li>具体来说,IQR 的计算步骤如下
<ol class="org-ol">
<li>计算数据的 中位数,记作 第二四分位数(Q2).</li>
<li>取出所有 小于 Q2 的数据(在直方图中位于中位数左侧的数据),然后计算它们的中位数,记作 第一四分
位数(Q1).</li>
<li>取出所有 大于 Q2 的数据(直方图中位于中位数右侧的数据),然后计算它们的中位数,记作 第三四分位
数(Q3).</li>
<li>用 Q3 - Q1 的结果,就是 IQR.</li>
</ol></li>
<li><p>
具体步骤如(见图 4.20):
</p>

<div id="org83908f8" class="figure">
<p><img src="https://raw.githubusercontent.com/harrifeng/image/master/ms/4-20.png" alt="4-20.png" />
</p>
<p><span class="figure-number">Figure 46: </span>ms/4-20.png</p>
</div></li>
<li>(题外话:我觉得"四分位数 1-3"的命名不太直观,因为"四分位数"指的是数据区段,而中位数是这些区段的
边界 &#x2013; 事实上,四个区段有五条边界.我更倾向于使用"p25","p50","p75"这样的叫法,其中 p 表示 "百
分位数".不过,一旦术语习惯被确立,很难再去改变.就像莎士比亚说的:"不论名字叫什么,玫瑰依然是玫瑰.")</li>
</ul></li>
<li>IQR 的解释:
<ul class="org-ul">
<li>较小的 IQR 表示数据分布比较集中;</li>
<li>较大的 IQR 表示数据分布比较分散.</li>
</ul></li>
<li>IQR 具有和数据相同的 单位,因此在数据集内部解释很方便,但在跨数据集比较时,如果单位不同,就不太容易
直接比较.</li>
<li>IQR 是一种 非参数的变异性度量方法,因为它是基于 中位数 而不是 均值.正因如此,IQR 对 异常值(outliers)
不敏感.</li>
</ul>
</div>
</div>
<div id="outline-container-orgc671d9d" class="outline-3">
<h3 id="orgc671d9d"><span class="section-number-3">4.6.</span> QQ plots</h3>
<div class="outline-text-3" id="text-4-6">
<ul class="org-ul">
<li>QQ 图最棒的地方就是它的名字&#x2013;把它说出口的感觉就很好玩.除此之外嘛&#x2026;&#x2026;嗯,我们只能说,QQ 图需要有一定
经验才能用得很顺手.</li>
<li>第一个 "Q" 代表 quantile(分位数),这个词指的是把数据分成等大小的区间(比如 IQR 就是把数据分成四个
分位数).</li>
<li>第二个 "Q" 也是 quantile.因此,QQ 图的全称就是 quantile-quantile plot(分位数对分位数图).</li>
<li>QQ 图用来展示如下两者之间的关系.
<ul class="org-ul">
<li>一个经验数据分布</li>
<li>一个理论高斯(正态)分布</li>
</ul></li>
<li>它的目的是 定性地 评估一个给定分布是否看起来像高斯分布.因此,QQ 图常被用于判断数据是否适合统计方法
(比如 ANOVA 方差分析,回归分析),以及用来发现数据集中可能存在的问题.</li>
<li>用一个例子来引入 QQ 图
<ul class="org-ul">
<li>假设我给你两个数据集,并且问你:这些数据是不是来自于一个正态分布的总体?你会怎么判断呢?</li>
<li>当然,你会先画出这些数据的 直方图(如果这不是你想到的,也没关系,就假装这是你的主意 😄).</li>
<li>为了帮助你判断这些分布是否 "像" 高斯分布,你可能会在直方图上叠加一个已经归一化的理论高斯曲线.</li>
<li><p>
在 图 4.21 中,
</p>

<div id="orgcd07b9d" class="figure">
<p><img src="https://raw.githubusercontent.com/harrifeng/image/master/ms/4-21.png" alt="4-21.png" />
</p>
<p><span class="figure-number">Figure 47: </span>ms/4-21.png</p>
</div></li>
<li>你可以看到:
<ol class="org-ol">
<li>面板 A 中的直方图看上去很像理论高斯分布</li>
<li>而面板 B 则明显不同具体来说,在面板 B 中,直方图左侧的概率值陡然下降,而不是平滑地收尾;而右尾
部的概率值比高斯分布的要大.</li>
</ol></li>
</ul></li>
<li>QQ 图的思路
<ul class="org-ul">
<li>QQ 图的想法是提供一种更有效的图形方式,把 "观测到的分布" 与 "理论高斯分布" 作比较.</li>
<li>在图 4.21A 和 4.21B 中,我们有两条曲线:
<ol class="org-ol">
<li>一条是经验数据的直方图曲线</li>
<li>一条是理论高斯分布曲线</li>
</ol></li>
<li>QQ 图会把这两条曲线的信息组合到一张图中:</li>
</ul></li>
<li>在 QQ 图中:
<ul class="org-ul">
<li>x 轴 是理论高斯分布的分位数</li>
<li>y 轴 是样本数据的分位数</li>
<li>如果数据确实来自一个完全的高斯过程,那么数据点会全部落在对角线(y = x)上.</li>
<li>相反,如果数据不是高斯分布,数据点就会明显偏离对角线.</li>
</ul></li>
<li>看一个例子
<ul class="org-ul">
<li>在图 4.21 的左列:数据是从正态分布中采样得到的(对应面板 A 的直方图)所以在 QQ 图(面板 C)中,
我们预期数据点会落在对角线上当然,由于采样变异和一些噪声,它们不会完全在对角线上,但会很接近</li>
<li>在图 4.21 的右列:数据来自一个幂分布(对应面板 B 的直方图)它显然不是高斯分布在对应的 QQ 图(面板
D)中,我们看到数据点明显没有落在对角线上,而且这些偏离不是由随机噪声造成的,而是有系统性差异这就
是明显的 "数据不服从正态分布" 的信号.</li>
</ul></li>
<li>如何解读偏离现在说到难点:如何精确解读这些偏离?</li>
<li>举个例子:
<ul class="org-ul">
<li>在图 4.21D 中,假设我们画一条垂直线穿过 x = 3,它会在大约 y = 6 的地方与数据点相交.这表示:在右
尾部,数据比高斯分布的预期更大(右尾 "拉长" 了).</li>
<li>再画一条垂直线穿过 x = -3,它会在大约 y = 0 的地方与数据交点&#x2013;这说明数据的最小值比高斯分布的预期
更大.实际上,这组数据的最小值都大于零,即数据没有比正态分布中心更小的值.</li>
</ul></li>
<li>总结:
<ul class="org-ul">
<li>我希望上面的解释有帮助.不过正如我一开始说的,QQ 图需要一定练习才能熟练使用.</li>
<li>一般来说,我们通常不需要去深究 QQ 图每个区域的复杂含义&#x2013;主要是判断 数据是否大致沿对角线分布:
<ol class="org-ol">
<li>接近对角线 → 数据可能符合正态分布</li>
<li>远离对角线 → 数据可能不符合正态分布</li>
</ol></li>
<li>理解 QQ 图的构建机制,需要掌握 概率函数,这部分会在第 8 章详细介绍.</li>
<li>目前,你只需要理解:QQ 图是在比较 实际数据(y 轴) 与 理论正态分布(x 轴) 的分位数关系.</li>
</ul></li>
<li>最后补充一句:
<ul class="org-ul">
<li>QQ 图中 x 轴上的理论分布不一定必须是正态分布&#x2013;只是因为正态分布在统计学上的重要性,我们大多数情况
下都会用它,但理论上可以用任何分布来做 QQ 图.</li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-orgcfd3140" class="outline-3">
<h3 id="orgcfd3140"><span class="section-number-3">4.7.</span> Statistical "moments"</h3>
<div class="outline-text-3" id="text-4-7">
<ul class="org-ul">
<li>统计学中的 "矩(moments)" 是用来描述分布形状的一组数值.</li>
<li>每个分布都有第一矩,第二矩,第三矩,依此类推.</li>
<li>在实际应用中,最常用的是 前两个矩,而超过第四矩的情况很少被报告.</li>
<li>事实上,你已经知道第一矩和第二矩了&#x2013;它们就是我们平时说的 均值(mean) 和 方差(variance).</li>
<li>因此,我想你会觉得,把这些特征推广到"矩"的概念既直观,又能带来一些新的认知.</li>
</ul>
</div>
<div id="outline-container-org3c65348" class="outline-4">
<h4 id="org3c65348"><span class="section-number-4">4.7.1.</span> Unstandardized and standardized moments</h4>
<div class="outline-text-4" id="text-4-7-1">
<ul class="org-ul">
<li>我把这一部分内容按前四阶矩的顺序分成了几个小节,不过在讨论每个矩的具体细节和解释之前,我想先给你展
示两条公式和一张表,用于提供一个整体的概览.</li>
<li>我们先来看 "非标准化"矩(unstandardized moments) 的通用公式.
<ul class="org-ul">
<li><p>
对于数据集 X其 第 k 阶矩(kth moment) 定义如下:
</p>
\begin{equation}
m_k = \frac{1}{N} \sum_{i=1}^{N} (X_i - \overline{X})^{k} \tag{4.14}
\end{equation}</li>
<li>其中,N 是样本的规模(数量),</li>
<li>i 用来索引数据集中每一个样本点.</li>
<li>你可以看到,所有统计矩 都可以由同一个公式定义,只是求和之前的差值会被提升到更高次幂.我将在接下来
的小节中讨论这个特点的重要意义.</li>
<li>除以 N 的作用,是为了防止样本数量较大的数据集在数值上"天然"拥有更大的矩值</li>
<li>然而,即使如此,数据的量纲(单位)仍会影响 $m_k$的值.例如,同一组数据如果用 毫米 和 米 两种单位
来表示,得到的 \(m_k\) 数值会不同.</li>
<li>正因如此,非标准化矩(unstandardized moments) 的数值往往不容易直接解释&#x2013;更无法在量纲不同的数据集
之间比较.</li>
</ul></li>
<li>为了解决这个问题,我们通常会用 标准差(standard deviation) 的 k 次幂 对矩进行 归一化.
<ul class="org-ul">
<li><p>
这一归一化步骤能够去除数据的量纲影响.
</p>
\begin{equation}
m_k = \frac{1}{N\sigma^k} \sum_{i=1}^{N} (X_i - \overline{X})^{k}
\end{equation}</li>
<li>上面的公式assume标准差 \(\sigma\) 已知,在实践当中,通常以s(也就是sample的标准差)来预估全体(population)
的标准差 \(\sigma\).</li>
<li>同时注意, <b>这里不同k用的标准差的不同次方</b>, k=1的时候是标准差,k=2的时候就是方差,k=3的时候是标准差
的三次方</li>
<li><p>
图 4.22 给出了前四阶矩的概览,它们的统计学术语,以及各自的公式.请在阅读本节剩余内容时,参考这张
表来理解
</p>

<div id="org1ab9c70" class="figure">
<p><img src="https://raw.githubusercontent.com/harrifeng/image/master/ms/4-22.png" alt="4-22.png" />
</p>
<p><span class="figure-number">Figure 48: </span>ms/4-22.png</p>
</div></li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-orgce62d82" class="outline-4">
<h4 id="orgce62d82"><span class="section-number-4">4.7.2.</span> First moment: mean</h4>
<div class="outline-text-4" id="text-4-7-2">
<ul class="org-ul">
<li>一个分布的第一阶矩就是均值(mean)&#x2013;也就是平均值.</li>
<li>这来自于在公式 4.14 中取 k=1的情况</li>
<li>不过,当 (k=1) 时,实际上我们会得到 \(m_1 = 0\) ,这个显然的结果,而这个结果与数据的均值无关.因为,从
形式上来说,每个分布的第一阶矩都是 0.</li>
<li><p>
正因为如此,在实际处理中,我们会去掉均值中心化项(mean-centering term),并重新定义第一阶矩为:
</p>
\begin{equation}
m_1 =\frac{1}{N} \sum_{i=1}^{N} X_i \tag{4.16}
\end{equation}</li>
<li>当然,你一定一眼就认出来了&#x2013;这正是均值的公式.</li>
<li>你也知道,它的意义就是分布的集中趋势(central tendency):</li>
<li>它是数据的质心(center of mass),也是直方图平衡时的支点位置.</li>
</ul>
</div>
</div>
<div id="outline-container-orgeff9ba1" class="outline-4">
<h4 id="orgeff9ba1"><span class="section-number-4">4.7.3.</span> Second moment: variance</h4>
<div class="outline-text-4" id="text-4-7-3">
<ul class="org-ul">
<li>你其实也已经知道了分布的第二阶矩:那就是方差(variance),它表示数据围绕均值的离散程度.</li>
<li>当你把公式 4.15 在 k=2与公式 4.5 进行比较时,你会发现,它们是一样的.
<ul class="org-ul">
<li>既然第二阶矩就是方差,那么很容易看出,标准化的第二阶矩 恒等于 1&#x2013;因为它是方差除以方差的结果.</li>
<li>因此,在实际应用中,我们使用的通常是非标准化的第二阶矩.</li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-org8a30922" class="outline-4">
<h4 id="org8a30922"><span class="section-number-4">4.7.4.</span> Third moment: skew</h4>
<div class="outline-text-4" id="text-4-7-4">
<ul class="org-ul">
<li>分布的第三阶统计矩叫做 "偏"(skew),而分布中偏的程度称为 "偏度"(skewness).</li>
<li>偏度与均值两侧方差分布的不对称性有关.</li>
<li>第三阶矩通常使用标准化公式来计算,它不会像前面的一些情况那样,在所有数据集里都得到相同的固定值.
<ul class="org-ul">
<li>一个 <b>纯高斯分布(正态分布)</b> 的偏度为 0,这是合理的,因为高斯分布是完全对称的.</li>
<li><p>
图4-23
</p>

<div id="orgd8c347f" class="figure">
<p><img src="https://raw.githubusercontent.com/harrifeng/image/master/ms/4-23.png" alt="4-23.png" />
</p>
<p><span class="figure-number">Figure 49: </span>ms/4-23.png</p>
</div></li>
<li>在直方图中,如果一个分布被拉向均值左侧,我们称之为负偏(left-skew,也叫左偏)(见图 4.23A);</li>
<li>而如果分布被拉向均值右侧,则称为正偏(right-skew,也叫右偏)(见图 4.23B).</li>
</ul></li>
<li>为什么第三阶矩能够反映分布的倾斜程度呢?</li>
<li>考虑一下:均值中心化,用 \((X_i - \overline{X})\) 后,均值左边的数据是负数,均值右边的数据是正数.
<ul class="org-ul">
<li>如果将数值提升到偶数次幂,负数会变成正数: \((-3)^2=9\) 和 \(3^2=9\) 一样</li>
<li>但如果将数值提升到奇数次幂,符号会被保留: \((-2)^3=-8\) 和 \(2^3=8\) 则不一样</li>
</ul></li>
<li>因此,如果均值左边出现的极端值比右边多,那么均值中心化后的立方值的平均就会是负数,偏度也就为负.</li>
<li>同理,如果右边的极端值更多,则偏度为正.</li>
<li>所以,偏度的大小与符号,本质上是由分布在均值左右的不对称性(left-right asymmetry)决定的.</li>
</ul>
</div>
</div>
<div id="outline-container-orgf997ec3" class="outline-4">
<h4 id="orgf997ec3"><span class="section-number-4">4.7.5.</span> Fourth moment: kurtosis</h4>
<div class="outline-text-4" id="text-4-7-5">
<ul class="org-ul">
<li>第四阶矩称为 峰度(kurtosis),通常计算并报告的是它的标准化版本.
<ul class="org-ul">
<li><p>
在继续阅读下文之前,不妨先试着通过 图 4.24 中的分布推测一下峰度的含义.
</p>

<div id="org2b3a9d7" class="figure">
<p><img src="https://raw.githubusercontent.com/harrifeng/image/master/ms/4-24.png" alt="4-24.png" />
</p>
<p><span class="figure-number">Figure 50: </span>ms/4-24.png</p>
</div></li>
<li>在那张图中,三个分布的均值是相同的,但有一个分布的尾部比另一个分布更快地收敛到零.</li>
<li>峰度用来衡量的就是这种差异.</li>
</ul></li>
<li>峰度的解释:
<ul class="org-ul">
<li>峰度衡量的是分布尾部的"肥胖程度"(fatness of the tails).</li>
<li>判断峰度时要问的问题是:这个分布的尾部,比纯高斯分布(图 4.24 中的灰色实线)更快还是更慢地趋近于零?</li>
</ul></li>
<li>纯高斯分布的峰度是 3,因此报告峰度时,人们往往会用 计算值减去 3,得到所谓的 "过度峰度"(excess
kurtosis).具体来说:
<ul class="org-ul">
<li>正的过度峰度(或者未修正值 &gt; 3)意味着分布的尾部比高斯分布更陡峭地趋向于零: 尾部是 "瘦" 的(thin tails);</li>
<li>负的过度峰度(或者未修正值 &lt; 3)意味着尾部比高斯分布收敛得更慢: 尾部是 "肥" 的(fat tails).</li>
</ul></li>
<li>常见误区
<ul class="org-ul">
<li>从 公式 4.14 看,你可能会以为峰度就是方差的平方,但事实并非如此.</li>
<li>原因是 k 次幂在求和符号内部,而不是外部.这与"方差并不是均值的平方"同理.</li>
<li>实际上,峰度和方差是彼此独立的,你可以改变其中一个而不改变另一个.</li>
</ul></li>
<li>峰度的应用特点
<ul class="org-ul">
<li>因为偏离均值的差异会被提升到 四次幂,峰度对极端值(outliers)非常敏感.</li>
<li>这使得峰度成为衡量数据中极端事件的一个有效工具.</li>
</ul></li>

<li>例如:
<ul class="org-ul">
<li>在 金融数据 中,峰度被用于评估风险(极端波动的可能性);</li>
<li>在 多变量数据分析 中,峰度可用于通过 独立成分分析(Independent Components Analysis, ICA) 区分信
号和噪声.</li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-orgb821189" class="outline-4">
<h4 id="orgb821189"><span class="section-number-4">4.7.6.</span> What to memorize</h4>
<div class="outline-text-4" id="text-4-7-6">
<ul class="org-ul">
<li>关于统计矩,其实还有很多有趣的细节可以深入探讨.</li>
<li>但是,在应用统计中要学的东西实在太多&#x2013;而我们的时间又太有限.
<ul class="org-ul">
<li><p>
图 4.26 展示了我关于"统计矩"应该记住哪些重点内容的建议
</p>

<div id="orga3cfd01" class="figure">
<p><img src="https://raw.githubusercontent.com/harrifeng/image/master/ms/4-26.png" alt="4-26.png" />
</p>
<p><span class="figure-number">Figure 51: </span>ms/4-26.png</p>
</div></li>
</ul></li>
</ul>
</div>
</div>
</div>
<div id="outline-container-org9671336" class="outline-3">
<h3 id="org9671336"><span class="section-number-3">4.8.</span> Histograms part 2: Number of bins</h3>
<div class="outline-text-3" id="text-4-8">
<ul class="org-ul">
<li>现在,你已经积累了一些绘制和使用直方图的经验,我们可以回到之前提到过的一个问题:绘制直方图时应该使
用多少个箱(bins).(这实际上等同于箱子的宽度问题,因为箱子的数量决定了箱子的宽度,反之亦然.)</li>
<li>我之前曾定性地说过,箱子太少或太多都不利于解释数据;而在本节中,我会向你介绍几种常用的确定直方图箱
数的指南.(人们有时称它们为"规则",但科学家可不是那种盲目信任权威的人,所以我们更愿意把它们看作建
议.)</li>
<li>先定义变量关系
<ul class="org-ul">
<li><p>
我们从分箱数量(变量 k)与分箱宽度(变量 w)的关系开始:
</p>
\begin{equation}
k = \left\lceil \frac{\max(x) - \min(x)}{w} \right\rceil \tag{4.17}
\end{equation}</li>
<li>公式里的不完整括号表示上取整函数(ceiling function),即向上舍入到下一个更大的整数.</li>
</ul></li>

<li>三种常用的方法
<ul class="org-ul">
<li><p>
确定分箱数量的方法有很多,这里我会重点介绍三种常见方法(见图 4.27,稍后会详细说明):
</p>

<div id="orgd2b5c20" class="figure">
<p><img src="https://raw.githubusercontent.com/harrifeng/image/master/ms/4-27.png" alt="4-27.png" />
</p>
<p><span class="figure-number">Figure 52: </span>ms/4-27.png</p>
</div></li>
</ul></li>
<li>任意指定法(Arbitrary)
<ul class="org-ul">
<li>简单地把分箱数设为 40(或任何你觉得合适的数).</li>
<li>方法简单直观,容易重复;</li>
<li>当样本量在几百或更多时,这个方法通常表现不错.</li>
</ul></li>
<li>Sturges 规则
<ul class="org-ul">
<li>根据数据量计算箱数的公式化方法;</li>
<li>箱的数量会随数据量变化.</li>
</ul></li>
<li>Freedman-Diaconis 规则(简称 FD 或 F-D)
<ul class="org-ul">
<li>不直接计算箱数,而是先算箱宽 w,再计算箱数 k同时考虑了样本量 和 数据的变异性;</li>
<li>很多人认为 FD 规则是最好的.</li>
</ul></li>
<li>注意:
<ul class="org-ul">
<li>Arbitrary 和 Sturges 规则直接确定的是 (k)(分箱数);</li>
<li>FD 规则确定的是 (w)(箱宽),然后再计算 (k).</li>
</ul></li>
<li>实际中怎么用
<ul class="org-ul">
<li>在实际工作中,你不需要自己去实现这些规则.</li>
<li><p>
Python自动帮你计算,比如:
</p>
<div class="org-src-container">
<pre class="src src-python">plt.hist<span style="color: #000000;">(</span>data, bins=<span style="color: #3548cf;">'fd'</span><span style="color: #000000;">)</span>
</pre>
</div></li>
<li><p>
R也能自动帮你计算,比如
</p>
<pre class="example" id="orgd6ab230">
hist(data, breaks='FD')
</pre></li>
</ul></li>
<li>关于可变箱宽
<ul class="org-ul">
<li>目前介绍的方法都是统一箱宽的情况.</li>
<li><p>
理论上,可以让箱宽随数据分布情况变化(可变箱宽),这样看起来很漂亮(见图 4.28),但实际上并不好:
</p>

<div id="org0394066" class="figure">
<p><img src="https://raw.githubusercontent.com/harrifeng/image/master/ms/4-28.png" alt="4-28.png" />
</p>
<p><span class="figure-number">Figure 53: </span>ms/4-28.png</p>
</div></li>
<li>可变箱宽的直方图更难解释</li>
<li>在数据集之间进行直方图的比较会比较困难</li>
</ul></li>
</ul>
</div>
<div id="outline-container-org1ab8a8f" class="outline-4">
<h4 id="org1ab8a8f"><span class="section-number-4">4.8.1.</span> Other descriptive stats</h4>
<div class="outline-text-4" id="text-4-8-1">
<ul class="org-ul">
<li>本章绝不是对所有描述性统计量的穷尽列举.
<ul class="org-ul">
<li>生物和物理观测数据可以用分布特征(如赫斯特指数 Hurst exponent)来刻画;</li>
<li>时间序列数据有谱特性和自相关等特征;</li>
<li>多变量数据集包含协方差;</li>
<li>数据矩阵可以用秩(rank),条件数(condition number),**奇异值谱(singular value spectrum)**等量来描述,等等.</li>
</ul></li>
<li>本章没有介绍的那些描述性统计量,往往是特定学科领域专用的.</li>
<li>好消息是,那些不太常用的描述性统计量,都是基于本章讲过的概念和方法扩展出来的.</li>
</ul>
</div>
</div>
</div>
</div>
<div id="outline-container-org0662ef6" class="outline-2">
<h2 id="org0662ef6"><span class="section-number-2">5.</span> Chapter 05: Simulating Data</h2>
<div class="outline-text-2" id="text-5">
</div>
<div id="outline-container-orgf2d34e3" class="outline-3">
<h3 id="orgf2d34e3"><span class="section-number-3">5.1.</span> Why simulate data?</h3>
<div class="outline-text-3" id="text-5-1">
<ul class="org-ul">
<li>为什么在学习统计学时要使用模拟数据(simulated data)?</li>
<li>来数数它的好处吧:</li>
<li><b>Validate ana</b> 验证分析方法
<ul class="org-ul">
<li>现有的统计分析方法种类繁多,而且每种方法都有可能影响结果的参数.</li>
<li>通过模拟数据,你可以把统计检验的结果与数据中已知的"真实模式"进行比较.</li>
<li>这种基准测试(benchmarking)能帮助你评估分析方法的有效性,尤其是在模拟数据具有与真实数据相似特征
时,效果更佳.</li>
</ul></li>
<li><b>Understand advantages and limitations of analysis methods</b> 理解分析方法的优缺点
<ul class="org-ul">
<li>模拟数据允许你调整效应量和噪声特征,这是在真实数据中几乎无法做到的.</li>
<li>这可以让你理解分析方法在什么边界条件下会失效或不再产生有意义,准确的结果.</li>
</ul></li>
<li><b>Understand how analysis methods work</b> 理解分析方法的工作原理
<ul class="org-ul">
<li>要理解一种统计分析方法,阅读解释和公式当然有帮助.</li>
<li>但如果能配合使用模拟数据,你的理解会变得更深入和直观.</li>
</ul></li>
<li><b>Understand your  data better H</b> 更好地理解真实数据
<ul class="org-ul">
<li>模拟数据的一个重要目标是创建与真实数据具有相似特征的虚拟数据集.</li>
<li>因此,制作模拟数据的过程能帮助你分析并解释真实数据.</li>
</ul></li>
<li><b>Think more carefully and critially about data</b> 更加仔细,批判性地思考数据
<ul class="org-ul">
<li>现代统计软件让几乎所有人都可以只靠复制粘贴几行代码就完成一次分析.</li>
<li>但如果你想从初学者晋升为专家型数据建模师,就需要对数据有深刻的理解:知道该从数据中期待什么,如何
处理数据,如何选择合适的分析方法,以及如何可视化和解释结果.</li>
<li>专家型数据分析师通常是主动去理解数据,而初学者往往是被动的,只会胡乱把算法套到数据上,然后看看哪
个"有效".</li>
<li>使用模拟数据测试模型,可以帮助你建立直觉,知道在什么类型的数据和什么分布下,哪些统计分析方法更可
能成功.</li>
</ul></li>
<li><b>Computational statistics</b> 计算统计学(Computational Statistics)
<ul class="org-ul">
<li>有一类统计方法,叫做 计算统计学 或 经验统计学,它们依赖于模拟,抽样或打乱数据来计算统计显著性.</li>
<li>这些方法包括:
<ol class="org-ol">
<li>自助法(bootstrapping)</li>
<li>置信区间(confidence intervals)</li>
<li>置换检验(permutation testing)</li>
<li>统计检验效能估计(power estimation)</li>
</ol></li>
<li>后面的章节你会学到这些方法.</li>
<li>重点是,当数据违反了参数统计(parametric statistics)的前提假设时,模拟数据有时是必需的.</li>
</ul></li>
<li><b>Improve thinking skills</b> 提升思维能力
<ul class="org-ul">
<li>精确且合理地模拟数据需要批判性思维,战略规划,适应能力和创造性.</li>
<li>因此,模拟数据的过程是锻炼你宏观思维能力,同时兼顾细节的好机会.</li>
</ul></li>
<li><b>Improve programming skills</b> 提升编程技能
<ul class="org-ul">
<li>模拟数据需要用代码来生成,因此学会模拟数据会提升你的编程能力.</li>
</ul></li>
<li><b>Convenience</b> 方便快捷
<ul class="org-ul">
<li>模拟数据让你可以尝试新的统计算法,而无需做实验或花费数小时在网上寻找数据集.</li>
<li>更不用担心找到的数据文档不足,或者需要大量清理与格式转换.</li>
</ul></li>
<li><b>Fun!</b> 有趣!
<ul class="org-ul">
<li>如果你从来没试过模拟数据,那么你会发现它其实挺好玩~ 我想你会喜欢的.</li>
</ul></li>
<li>伦理提醒
<ul class="org-ul">
<li>模拟数据是很棒且完全合乎伦理的事情.</li>
<li>但如果有意误导你的受众,让他们误以为虚构数据是真实的&#x2013;无论是直接声称数据真实,还是没有说明数据是假的&#x2013;都是不道德的行为.</li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-org8bb8777" class="outline-3">
<h3 id="org8bb8777"><span class="section-number-3">5.2.</span> Random data from distributions</h3>
<div class="outline-text-3" id="text-5-2">
<ul class="org-ul">
<li>在上一章中,我介绍了分布,并用根据数据绘制的直方图来说明.核心思想是:
<ul class="org-ul">
<li>你从一个具有未知分布的数据集开始,通过绘制直方图来直观地观察和计算描述性统计量,以发现该分布的特性.</li>
</ul></li>
<li>而模拟数据则反过来了:
<ul class="org-ul">
<li><p>
你不是从数据开始,而是从分布开始(见图 5.1).
</p>

<div id="org17c237d" class="figure">
<p><img src="https://raw.githubusercontent.com/harrifeng/image/master/ms/5-1.png" alt="5-1.png" />
</p>
<p><span class="figure-number">Figure 54: </span>ms/5-1.png</p>
</div></li>
<li>你可以先选择分布的形状和描述性统计特征,然后生成符合这些特征的随机数据.</li>
</ul></li>
<li>这种方法为理解和探索统计提供了强大的工具,这也是我认为学习如何模拟数据应该成为统计训练核心内容的原因.</li>
<li>本节的目的就是向你展示如何从多种分布中生成随机数据.这里介绍的所有概念和公式都会在本章末的练习中实现.</li>
</ul>
</div>
<div id="outline-container-org44e0e5a" class="outline-4">
<h4 id="org44e0e5a"><span class="section-number-4">5.2.1.</span> Normally distributed random data</h4>
<div class="outline-text-4" id="text-5-2-1">
<ul class="org-ul">
<li>你已经很熟悉正态分布(Normal 或 Gaussian 分布)数据了.
<ul class="org-ul">
<li><p>
从数学表示法来看,从正态分布中抽取数据的写法如下:
</p>
\begin{equation}
X \sim \mathcal{N}(\mu, \sigma^2) \tag{5.1}
\end{equation}</li>
<li>这个公式表示,数据集 X 来自一个均值为 μ,方差为 σ² 的正态分布 N.</li>
<li>请注意,这里使用的是波浪号 ∼ 而不是等号,它的含义是"服从某种分布".</li>
</ul></li>
<li>公式 (5.1) 并不能告诉你数据集的全部信息,比如:数据点的数量,可能的异常值,偏度(skew),峰度(kurtosis)
等.不过,除非另有说明,否则你可以假设这些特征在数学上与理论正态分布一致.</li>
<li>在其他书籍或课程中,你可能会看到用标准差而不是方差来表示分布,
<ul class="org-ul">
<li><p>
例如:
</p>
\begin{equation}
X \sim \mathcal{N}(\mu, \sigma) \notag
\end{equation}</li>
<li>这种写法比较少见,因此当你看到第二个参数时,通常假设它表示的是方差.</li>
</ul></li>
<li>当 μ = 0 并且 σ² = 1 时,我们称其为标准正态分布.
<ul class="org-ul">
<li><p>
图 5.2 展示了四个不同参数的正态分布数据集示例.
</p>

<div id="org5bac7ee" class="figure">
<p><img src="https://raw.githubusercontent.com/harrifeng/image/master/ms/5-2.png" alt="5-2.png" />
</p>
<p><span class="figure-number">Figure 55: </span>ms/5-2.png</p>
</div></li>
<li>这些分布是我使用 NumPy 的 random 模块生成随机数据并绘制直方图得到的</li>
<li>图中的标题标明了我在生成数据时设定的均值和方差(也就是 \(\mu, \sigma\), 他们作为np.random.normal()的
参数),以及我从实际随机数据中计算得到的均值和方差(也就是 \(\overline{X}, std(X)\) ), 它们是从生成出
来的随机样本,算出来的</li>
<li>为什么我计算出来的经验统计量和在 Python 函数参数中指定的值不完全一致呢?</li>
<li>这是因为抽样变异性(sampling variability).这也是我们需要推断统计学(ferential statistics)的主要
原因之一.你将在本章的练习中进一步探索这种差异,而我会在第 8 章和第 9 章中更详细地讨论这个问题.</li>
</ul></li>
<li>目前你只需要知道,抽样变异性意味着:
<ul class="org-ul">
<li>随机抽取的数据特征不可能完全等于总体分布的特征参数.</li>
</ul></li>
<li>举个极端的例子:
<ul class="org-ul">
<li>假设你从一个均值为 0 的正态分布中随机抽取一个数,它可能是 0.42.而此时 N=1 的数据集的平均值显然不
是零.</li>
</ul></li>
<li><b>Shifting and stretching(平移与拉伸)</b> 在模拟数据时,我会把均值(mean)和标准差(standard deviation)
这两个参数理解为"平移"和"拉伸".</li>
<li>这些并不是正式的统计学术语,但我觉得用它们来理解操纵前两个统计矩(mean 和 standard deviation)对分
布产生的影响很有帮助:
<ul class="org-ul">
<li>均值 会将分布整体向左或向右平移,而不会改变它的形状;</li>
<li>标准差 则会让分布"拉伸"或"压缩",而不会改变它的中心位置.</li>
</ul></li>
<li>在 NumPy 中,这两个概念分别被称为 location(位置,即平移) 和 scaling(缩放,即拉伸).</li>
<li>我相信还有更多人会用不同的词来描述它们.理想情况下,我们应该用一套统一的术语,但我很怀疑全球的统计
学家们会在这些术语上达成一致&#x2013;毕竟,友好的分歧也是科学进步的重要推动力.</li>
</ul>
</div>
</div>
<div id="outline-container-org676b14e" class="outline-4">
<h4 id="org676b14e"><span class="section-number-4">5.2.2.</span> Uniformly distributed data</h4>
<div class="outline-text-4" id="text-5-2-2">
<ul class="org-ul">
<li><p>
从均匀分布中随机抽取数据的数学表达式如下:
</p>
\begin{equation}
X \sim \mathcal{N}(a, b) \tag{5.2}
\end{equation}</li>
<li>你可能会觉得它和公式 5.1(正态分布的表达)很像,但这里的两个参数并不是均值和方差,也不是其他统计矩.
<ul class="org-ul">
<li>这里,a 和 b 是分布的下限和上限.常见的默认参数是 a = 0 和 b = 1,</li>
<li><p>
也就是说,生成在 0 到 1 之间均匀分布的随机数(见图 5.3).
</p>

<div id="orgeb1ff0f" class="figure">
<p><img src="https://raw.githubusercontent.com/harrifeng/image/master/ms/5-3.png" alt="5-3.png" />
</p>
<p><span class="figure-number">Figure 56: </span>ms/5-3.png</p>
</div></li>
<li>其中 U(0,1) 被称为 <b>标准均匀分布</b>.</li>
</ul></li>
<li>事实证明,任何均匀分布都可以通过对标准均匀分布进行 <b>平移</b> 和 <b>缩放</b> 得到.
<ul class="org-ul">
<li><p>
例如,来看公式 5-3和5-4
</p>
\begin{equation}
X \sim \mathcall{U}(0, 1) \tag{5.3}
\end{equation}</li>
<li><p>
5-4中数据集 Y 的上下界是多少:
</p>
\begin{equation}
Y = 2\pi X - \pi \tag{5.4}
\end{equation}</li>
</ul></li>
<li>思路是:
<ul class="org-ul">
<li><p>
用边界 [0, 1] 代替 X.在上面的例子里:
</p>
\begin{equation}
2\pi [0, 1] - \pi = [0, 2\pi] - \pi = [-\pi, \pi]  \notag
\end{equation}</li>
<li>换句话说,我们创建了一个随机数在 [-π, π] 区间内均匀分布的数据集,可以用来模拟相位角.这类数据在
<b>信号处理</b>,*计算几何* 和 <b>复分析</b> 中都会用到.</li>
</ul></li>

<li>更一般情况,如果要创建一个任意上下界 a 和 b(假设 a &lt; b)的均匀分布,
<ul class="org-ul">
<li><p>
可以从标准均匀分布开始,应用以下公式:
</p>
\begin{equation}
Y = a + (b-a)U \tag{5.5}
\end{equation}</li>
<li><p>
以及如下公式
</p>
\begin{equation}
U \sim \mathcal{U}(0,1) \tag{5.6}
\end{equation}</li>
<li><p>
图 5.4 给出了一些示例.
</p>

<div id="org94f3de5" class="figure">
<p><img src="https://raw.githubusercontent.com/harrifeng/image/master/ms/5-4.png" alt="5-4.png" />
</p>
<p><span class="figure-number">Figure 57: </span>ms/5-4.png</p>
</div></li>
<li>对于均匀分布而言,经验边界(从数据计算的最小值和最大值)和指定边界通常会比正态分布的均值,标准差匹配
得更接近.不过,由于有限样本的抽样变异,经验边界可能不会与设定的 a 和 b 完全一致.下一章你会学习的
<b>min-max scaling(最小-最大缩放)</b> 方法,可以确保完美匹配.</li>
</ul></li>
<li>公式 5.2 并没有直接给出分布的均值或方差.如果你想创建一个 <b>均匀分布且已知均值和方差</b> 的数据集,该怎么
办呢?
<ul class="org-ul">
<li><p>
来看均匀分布已知上下界 a 和 b 条件下的期望均值公式
</p>
\begin{equation}
\mu = \frac{a + b}{2}  \tag{5.7}
\end{equation}</li>
<li><p>
和方差公式:
</p>
\begin{equation}
\sigma^2 = \frac{(a - b)^2}{12}  \tag{5.8}
\end{equation}</li>
<li>- 公式 5.7 很直观:如果数值在 a 和 b 之间均匀分布,那么平均值就是边界的平均数.</li>
<li>公式 5.8 看起来奇怪:为什么是边界之差的平方除以 12?其实它们来自期望值和统计矩的定义,通过微积分和代
数推导得出.我们会在第 8 章详细解释,你会在练习 2 中用数据验证这些公式的正确性.</li>
</ul></li>
<li>假设你要创建一个均匀分布并且它有 <b>指定的均值和标准差</b> ,
<ul class="org-ul">
<li><p>
你需要的就是公式 5.9:
</p>
\begin{equation}
Y = \mu + \sqrt{3}\,\sigma\, (2U - 1) \tag{5.9}
\end{equation}</li>
<li><p>
公式5-10
</p>
\begin{equation}
U \sim \mathcal{U}(0, 1) \tag{5.10}
\end{equation}</li>
<li>(2U - 1) 把标准均匀分布平移/缩放到以 0 为中心,边界是 [-1, 1]</li>
<li>乘上 \((\sqrt{3}\sigma)\) 拉伸到边界为 [-√3σ, √3σ]</li>
<li>再加上均值 μ,把分布平移到指定中心</li>
</ul></li>
<li>公式 5.9 可以通过在公式 5.7 和 5.8 中解出 a 和 b(并转化为标准差公式),再代入公式 5.5 得到.</li>
</ul>
</div>
</div>
<div id="outline-container-orgf6c1626" class="outline-4">
<h4 id="orgf6c1626"><span class="section-number-4">5.2.3.</span> Random data from other distributions</h4>
<div class="outline-text-4" id="text-5-2-3">
<ul class="org-ul">
<li>有无数种分布可以用来生成随机数据。</li>
<li>下面我会给出几个例子，但总体来说，如果你想创建一种 <b>不是正态分布或均匀分布</b> 的数据集，有两种方法可
以实现：
<ul class="org-ul">
<li>找到一个 Python 或 R 的函数，它可以直接生成你需要的分布的随机数；</li>
<li>从正态分布或均匀分布出发，通过某种数学变换得到。</li>
</ul></li>
<li><b>第一种方法示例</b> :
<ul class="org-ul">
<li><p>
使用 Python 函数 `np.random.weibull` 可以从威布尔分布生成随机数据（见图 5.5）。
</p>

<div id="org299efa4" class="figure">
<p><img src="https://raw.githubusercontent.com/harrifeng/image/master/ms/5-5.png" alt="5-5.png" />
</p>
<p><span class="figure-number">Figure 58: </span>ms/5-5.png</p>
</div></li>
<li>我不会深入介绍威布尔分布的性质、定义或应用，因为本书并不使用这种分布。</li>
<li>这里的重点是演示如何使用一个 Python 函数来生成某个特定分布的随机数。</li>
</ul></li>
<li><b>第二种方法示例</b>
<ul class="org-ul">
<li>将服从正态分布或均匀分布的数列，经过一定的数学变换，得到新的分布。</li>
<li>之前的例子：通过对标准均匀分布进行拉伸和平移，得到范围为 <b><b>[−π, π]</b></b> 的均匀分布。</li>
<li>另一个例子是 *对数正态分布（log-normal distribution）*。  对数正态分布是通过将服从正态分布的随机
数，传递给自然指数函数（natural exponential function）来生成的。</li>
<li><p>
公式5-11如下：
</p>
\begin{equation}
Y = \exp(X\sigma + \mu) \tag{5.11}
\end{equation}</li>
<li><p>
公式5-12如下:
</p>
\begin{equation}
  X \sim \mathcal{N}(0,1) \tag{5.12}
\end{equation}</li>
<li><p>
图 5.6 展示了一个对数正态分布的例子
</p>

<div id="orgf30a37f" class="figure">
<p><img src="https://raw.githubusercontent.com/harrifeng/image/master/ms/5-6.png" alt="5-6.png" />
</p>
<p><span class="figure-number">Figure 59: </span>ms/5-6.png</p>
</div></li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-org9d4dd24" class="outline-4">
<h4 id="org9d4dd24"><span class="section-number-4">5.2.4.</span> Random integers</h4>
<div class="outline-text-4" id="text-5-2-4">
<ul class="org-ul">
<li>随机整数有着无数的应用场景，从算法，到电子游戏中的随机事件，再到密码学。</li>
<li>在本书中，我们将经常使用随机整数作为索引，从数据集中进行选择，并模拟带标签的数据。</li>
<li>你可以在 Python 中使用 NumPy 的 random.randint 函数生成均匀分布的整数数据集
<ul class="org-ul">
<li>这个函数的用法与生成均匀分布数据类似——你需要指定一个下界、一个上界，以及样本大小，函数会返回符合
这些参数的数据集。</li>
<li><p>
需要注意的是,上界是不包含的.例如,代码:
</p>
<div class="org-src-container">
<pre class="src src-python"><span style="color: #531ab6;">import</span> numpy <span style="color: #531ab6;">as</span> np

<span style="color: #8f0075;">print</span><span style="color: #000000;">(</span>np.random.randint<span style="color: #dd22dd;">(</span>1, 5<span style="color: #dd22dd;">)</span><span style="color: #000000;">)</span>

<span style="color: #7f0000;"># </span><span style="color: #7f0000;">&lt;====================OUTPUT====================&gt;</span>
<span style="color: #7f0000;"># </span><span style="color: #7f0000;">2</span>
</pre>
</div></li>
<li>会随机返回一个整数,取自集合 (1, 2, 3, 4).</li>
<li>该函数生成的整数是均匀分布的.</li>
<li><p>
如果你想生成具有其他分布的整数数据,可以先生成对应分布的非整数数据,然后将结果四舍五入为最近的整数.
</p>
<div class="org-src-container">
<pre class="src src-python"><span style="color: #531ab6;">import</span> numpy <span style="color: #531ab6;">as</span> np

<span style="color: #7f0000;"># </span><span style="color: #7f0000;">&#35774;&#23450;&#27491;&#24577;&#20998;&#24067;&#30340;&#21442;&#25968;:&#22343;&#20540;(mean)&#20026; 50,&#26631;&#20934;&#24046;(std)&#20026; 15</span>
<span style="color: #005e8b;">mean</span> = 50
<span style="color: #005e8b;">std</span> = 15
<span style="color: #005e8b;">size</span> = 10  <span style="color: #7f0000;"># </span><span style="color: #7f0000;">&#29983;&#25104;10&#20010;&#25968;</span>

<span style="color: #7f0000;"># </span><span style="color: #7f0000;">1. &#29983;&#25104;&#27491;&#24577;&#20998;&#24067;&#30340;&#28014;&#28857;&#25968;</span>
<span style="color: #005e8b;">normal_floats</span> = np.random.normal<span style="color: #000000;">(</span>mean, std, size<span style="color: #000000;">)</span>
<span style="color: #8f0075;">print</span><span style="color: #000000;">(</span><span style="color: #3548cf;">"&#27491;&#24577;&#20998;&#24067;&#28014;&#28857;&#25968;:"</span>, normal_floats<span style="color: #000000;">)</span>

<span style="color: #7f0000;"># </span><span style="color: #7f0000;">2. &#23558;&#28014;&#28857;&#25968;&#22235;&#33293;&#20116;&#20837;&#21040;&#26368;&#36817;&#30340;&#25972;&#25968;</span>
<span style="color: #005e8b;">normal_ints</span> = np.<span style="color: #8f0075;">round</span><span style="color: #000000;">(</span>normal_floats<span style="color: #000000;">)</span>.astype<span style="color: #000000;">(</span><span style="color: #8f0075;">int</span><span style="color: #000000;">)</span>  <span style="color: #7f0000;"># </span><span style="color: #7f0000;">&#20351;&#29992;.astype(int)&#30830;&#20445;&#36716;&#25442;&#20026;&#25972;&#25968;&#31867;&#22411;</span>
<span style="color: #8f0075;">print</span><span style="color: #000000;">(</span><span style="color: #3548cf;">"&#27491;&#24577;&#20998;&#24067;&#25972;&#25968;:"</span>, normal_ints<span style="color: #000000;">)</span>

<span style="color: #7f0000;"># </span><span style="color: #7f0000;">&lt;====================OUTPUT====================&gt;</span>
<span style="color: #7f0000;"># </span><span style="color: #7f0000;">&#27491;&#24577;&#20998;&#24067;&#28014;&#28857;&#25968;: [32.31366131 34.02574255 85.55818388 26.68463221 42.301085 56.959998 49.00103983 57.95171271 68.3780933  58.05922764]</span>
<span style="color: #7f0000;"># </span><span style="color: #7f0000;">&#27491;&#24577;&#20998;&#24067;&#25972;&#25968;: [32 34 86 27 42 57 49 58 68 58]</span>
</pre>
</div></li>
<li><p>
我再通过下面的例子再理解下np.random.normal这个函数,其返回值真的是随机从正态分布里面取的数值,没有
顺序
</p>
<div class="org-src-container">
<pre class="src src-python"><span style="color: #531ab6;">import</span> matplotlib.pyplot <span style="color: #531ab6;">as</span> plt
<span style="color: #531ab6;">import</span> numpy <span style="color: #531ab6;">as</span> np

<span style="color: #7f0000;"># </span><span style="color: #7f0000;">&#29983;&#25104;10000&#20010;&#22343;&#20540;&#20026;100,&#26631;&#20934;&#24046;&#20026;20&#30340;&#38543;&#26426;&#25968;</span>
<span style="color: #005e8b;">large_sample</span> = np.random.normal<span style="color: #000000;">(</span>100, 20, 10000<span style="color: #000000;">)</span>


<span style="color: #7f0000;"># </span><span style="color: #7f0000;">&#27880;&#24847;&#36825;&#20010;&#20989;&#25968;plt.hist&#35774;&#32622;&#20102;bin&#20026;50&#20043;&#21518;,&#20250;&#33258;&#21160;&#21435;&#36825;&#20010;large_sample&#30340;10000&#20010;&#25968;&#32452;&#37324;&#38754;&#21435;&#21462;,&#20998;&#25104;&#20116;</span>
<span style="color: #7f0000;"># </span><span style="color: #7f0000;">&#21313;&#20221;,&#27599;&#20221;&#21306;&#38388;&#37324;&#38754;&#26377;&#22810;&#23569;&#20010;&#20250;&#33258;&#21160;&#35745;&#31639;,&#24212;&#35813;&#26469;&#35828;mean&#25152;&#22312;&#30340;&#20221;&#37324;&#38754;&#30340;&#25968;&#37327;&#26368;&#22810;&#36825;&#20063;&#24847;&#21619;&#30528;large_sample</span>
<span style="color: #7f0000;"># </span><span style="color: #7f0000;">&#21482;&#26159;&#19968;&#20010;&#22823;&#25968;&#32452;&#32780;&#24050;,&#19981;&#26159;&#35828;large_sample&#30340;&#31532;5000&#20010;&#25968;&#25454;&#26368;&#22823;&#30340;</span>
plt.hist<span style="color: #000000;">(</span>large_sample, bins=50, edgecolor=<span style="color: #3548cf;">"black"</span>, alpha=0.7<span style="color: #000000;">)</span>
plt.title<span style="color: #000000;">(</span><span style="color: #3548cf;">"(&#956;=100, &#963;=20)"</span><span style="color: #000000;">)</span>
plt.xlabel<span style="color: #000000;">(</span><span style="color: #3548cf;">"value"</span><span style="color: #000000;">)</span>
plt.ylabel<span style="color: #000000;">(</span><span style="color: #3548cf;">"freq"</span><span style="color: #000000;">)</span>
plt.grid<span style="color: #000000;">(</span><span style="color: #0000b0;">True</span><span style="color: #000000;">)</span>
plt.show<span style="color: #000000;">()</span>
</pre>
</div></li>
</ul></li>
</ul>
</div>
</div>
</div>
<div id="outline-container-orgea00c64" class="outline-3">
<h3 id="orgea00c64"><span class="section-number-3">5.3.</span> Random elements of a set</h3>
<div class="outline-text-3" id="text-5-3">
<ul class="org-ul">
<li>在本节中，我将向你展示如何从一个已有的数据集中随机选择数据。
<ul class="org-ul">
<li>例如，假设你想从集合 (1, 2, 3, 6, 7, 8) 中随机选择一个元素。</li>
<li>随机从集合中选择元素有很多应用，包括在基于置换的统计和自助法（bootstrapping）中基于真实数据创建替
代数据集。你会在本书的后续章节学到这些技术，但我想让你先知道，你将在这里学到的方法在现代计算统计
中有重要应用。</li>
<li><p>
我们先从集合的随机选择开始吧。来看下面的 Python 代码，并猜猜第二行可能会输出什么：
</p>
<div class="org-src-container">
<pre class="src src-python"><span style="color: #005e8b;">s</span> = <span style="color: #000000;">[</span>1, 2, np.pi, 10<span style="color: #000000;">]</span>
np.random.choice<span style="color: #000000;">(</span>s, 1<span style="color: #000000;">)</span>
</pre>
</div></li>
<li>我第一次运行这段代码时，得到的结果是 2。</li>
<li>接着我再次运行，结果变成了 10。如果你一遍又一遍运行，你会发现结果是不可预测的——不过它一定会是列表
中的一个数字，而且只返回一个数字，因为第二个参数指定了要返回的元素数量。</li>
</ul></li>

<li>顺便说一下，Python 的 choice 和 R 的 sample 函数可以从任何集合（列表、元组或向量）中随机选择元素，
而不仅限于数字。
<ul class="org-ul">
<li><p>
例如，以下代码会从列表 t 中随机选取一个元素：
</p>
<div class="org-src-container">
<pre class="src src-python"><span style="color: #005e8b;">t</span> = <span style="color: #000000;">[</span><span style="color: #3548cf;">"a"</span>, <span style="color: #3548cf;">"b"</span>, <span style="color: #3548cf;">"hello"</span><span style="color: #000000;">]</span>
np.random.choice<span style="color: #000000;">(</span>t, 1<span style="color: #000000;">)</span>
</pre>
</div></li>
</ul></li>
<li>我们回到之前的数字例子：如果我们把第二个参数设置为 4 会怎样呢？
<ul class="org-ul">
<li>列表中只有 4 个元素，所以你可能会期待函数返回全部 4 个元素，或许是一个随机的顺序。</li>

<li><p>
来看我运行的结果：
</p>
<div class="org-src-container">
<pre class="src src-python">np.random.choice<span style="color: #000000;">(</span>s, 4<span style="color: #000000;">)</span>
<span style="color: #7f0000;"># </span><span style="color: #7f0000;">&lt;====================OUTPUT====================&gt;</span>
<span style="color: #7f0000;"># </span><span style="color: #7f0000;">array([10, 1, 1, 3.14159])</span>
</pre>
</div></li>
<li>这里发生了什么？为什么数字 2 不见了，而数字 1 出现了两次？</li>
<li>这涉及到随机采样中的一个重要参数 —— replacement（是否放回）。
<ol class="org-ol">
<li>有放回采样：每次选中的元素在下次采样前都会被放回集合中，因此可能会多次选中同一个元素。</li>
<li>无放回采样：每次选中一个元素后，就会从集合中移除它，直到不再参与后续采样。</li>
</ol></li>
<li><p>
这个区别在图 5.7 中进行了说明。
</p>

<div id="org805b766" class="figure">
<p><img src="https://raw.githubusercontent.com/harrifeng/image/master/ms/5-7.png" alt="5-7.png" />
</p>
<p><span class="figure-number">Figure 60: </span>ms/5-7.png</p>
</div></li>
</ul></li>
<li>这个区别并不简单：
<ul class="org-ul">
<li>有放回采样意味着你可以生成比原始数据集更大的新数据集，因为某些元素可能会被重复采样。这也意味着，
当你从一个 N 元素的数据集中随机采样 N 次时，得到的新数据集的描述性统计量可能与原来的数据集不同。
你已经在上面的例子中看到这一点：数字 1 被选中了两次，而数字 2 没被选中。</li>
<li><p>
如果是无放回采样，那么新数据集会与原数据集的元素完全相同，不同的地方只是元素的排列顺序可能会改变。
事实上，无放回的随机采样就是 <b>随机排列（permutation）</b> 的一种机制，这也是你将在下一节学习的内容。
</p>
<pre class="example" id="orgf823bbd">
Random sampling without replacement is a mechanism of random permutations
</pre></li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-orgf3ac568" class="outline-3">
<h3 id="orgf3ac568"><span class="section-number-3">5.4.</span> Random permutations</h3>
<div class="outline-text-3" id="text-5-4">
<ul class="org-ul">
<li><b>置换（Permuting）或洗牌（shuffling）</b> 是一种随机化列表或数组中元素顺序的方法，
<ul class="org-ul">
<li>它不会改变这些元素的值，也不会像上一节一样做子采样（subsampling）或过采样（oversampling）。</li>
<li><p>
这里有一个简单的代码示例：
</p>
<div class="org-src-container">
<pre class="src src-python"><span style="color: #531ab6;">import</span> numpy <span style="color: #531ab6;">as</span> np
<span style="color: #005e8b;">l</span> = np.arange<span style="color: #000000;">(</span>5<span style="color: #000000;">)</span>
<span style="color: #8f0075;">print</span><span style="color: #000000;">(</span>l<span style="color: #000000;">)</span>
<span style="color: #8f0075;">print</span><span style="color: #000000;">(</span>np.random.permutation<span style="color: #dd22dd;">(</span>l<span style="color: #dd22dd;">)</span><span style="color: #000000;">)</span>

<span style="color: #7f0000;"># </span><span style="color: #7f0000;">&lt;====================OUTPUT====================&gt;</span>
<span style="color: #7f0000;"># </span><span style="color: #7f0000;">[0 1 2 3 4]</span>
<span style="color: #7f0000;"># </span><span style="color: #7f0000;">[4 0 1 2 3]</span>
</pre>
</div></li>
</ul></li>
<li>置换的一个应用是随机重新排序（re-sort）顺序型数据。
<ul class="org-ul">
<li><p>
例如，我们生成一个从 -3 到 +3 的整数序列，然后将它们立方，接着随机重新排序：
</p>
<div class="org-src-container">
<pre class="src src-python"><span style="color: #531ab6;">import</span> numpy <span style="color: #531ab6;">as</span> np

<span style="color: #005e8b;">theData</span> = np.arange<span style="color: #000000;">(</span>-3, 4<span style="color: #000000;">)</span> ** 3
<span style="color: #005e8b;">newIdx</span> = np.random.permutation<span style="color: #000000;">(</span><span style="color: #8f0075;">len</span><span style="color: #dd22dd;">(</span>theData<span style="color: #dd22dd;">)</span><span style="color: #000000;">)</span>
<span style="color: #005e8b;">shufData</span> = theData<span style="color: #000000;">[</span>newIdx<span style="color: #000000;">]</span>
<span style="color: #8f0075;">print</span><span style="color: #000000;">(</span>theData<span style="color: #000000;">)</span>
<span style="color: #8f0075;">print</span><span style="color: #000000;">(</span>newIdx<span style="color: #000000;">)</span>
<span style="color: #8f0075;">print</span><span style="color: #000000;">(</span>shufData<span style="color: #000000;">)</span>

<span style="color: #7f0000;"># </span><span style="color: #7f0000;">&lt;====================OUTPUT====================&gt;</span>
<span style="color: #7f0000;"># </span><span style="color: #7f0000;">[-27  -8  -1   0   1   8  27] # &#21407;&#25968;&#25454;</span>
<span style="color: #7f0000;"># </span><span style="color: #7f0000;">[3 0 1 4 2 6 5]               # &#38543;&#26426;&#32034;&#24341;&#65288;newIdx&#65289;</span>
<span style="color: #7f0000;"># </span><span style="color: #7f0000;">[  0 -27  -8   1  -1  27   8] # &#37325;&#26032;&#25490;&#24207;&#21518;&#30340;&#25968;&#25454;</span>
</pre>
</div></li>
<li>这里变量 newIdx 包含整数 0 到 6（在 R 中是 1 到 7），它们是变量 theData 的索引位置。</li>
<li>请注意：数字 -27 是 theData 的第一个元素，但在 shufData 中它变成了第 6 个元素（Python 中索引 0 对
应 -27）。</li>
<li>你一定要理解 数据值 和 数据索引 之间的区别，这是一个重要的概念。</li>
<li>置换后的索引（变量 newIdx）本身并不是数据，而是用来创建一个替代数据集（surrogate dataset）的工具。</li>
</ul></li>
<li>置换的一个应用是随机化配对数据样本。
<ul class="org-ul">
<li>比如，假设我们有一个包含 50 个人的身高和体重的数据集。你会预期这两项特征是相关的。</li>
<li>但如果我们随机置换了身高（只改变顺序），却没有置换体重，那么你还会期望这两个变量有很强的相关性吗？</li>
<li>答案当然是 不会，因为身高与体重之间的映射关系已经被随机化了。</li>
<li>因此，如果我们在洗牌数据（shuffled data）中计算相关性，就可以测量纯粹由随机机会造成的相关性。</li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-org065001e" class="outline-3">
<h3 id="org065001e"><span class="section-number-3">5.5.</span> Reproducing randomness</h3>
<div class="outline-text-3" id="text-5-5">
<ul class="org-ul">
<li>每次调用一个随机化函数时，你都会得到一组不同的数字。
<ul class="org-ul">
<li>这当然是合理的 —— 如果每次调用函数返回的数字都是相同的，那它就不算随机了，对吧？</li>
</ul></li>
<li>不过，其实有很好的理由去让随机结果可重复。
<ul class="org-ul">
<li>例如，如果能够复现完全一样的随机序列，就可以保证别人能够精确地重复你的研究结果。</li>
</ul></li>
<li>我们先来演示一下，反复生成随机数会得到不同的结果。
<ul class="org-ul">
<li><p>
如果你有一个 Python 或 R 会话在运行，请试试下面的代码：
</p>
<div class="org-src-container">
<pre class="src src-python"><span style="color: #531ab6;">import</span> numpy <span style="color: #531ab6;">as</span> np

<span style="color: #005e8b;">ret</span> = np.random.randn<span style="color: #000000;">(</span>3, 3<span style="color: #000000;">)</span>
<span style="color: #8f0075;">print</span><span style="color: #000000;">(</span><span style="color: #3548cf;">"""|ret|=&gt;"""</span>, ret<span style="color: #000000;">)</span>
<span style="color: #8f0075;">print</span><span style="color: #000000;">(</span><span style="color: #3548cf;">"""|ret|=&gt;"""</span>, ret<span style="color: #000000;">)</span>

<span style="color: #7f0000;"># </span><span style="color: #7f0000;">&lt;====================OUTPUT====================&gt;</span>
<span style="color: #7f0000;"># </span><span style="color: #7f0000;">|ret|=&gt; [[ 0.01056085  2.03669496 -1.37248536]</span>
<span style="color: #7f0000;">#  </span><span style="color: #7f0000;">[ 0.25169481  0.96166009 -0.40347195]</span>
<span style="color: #7f0000;">#  </span><span style="color: #7f0000;">[ 0.12881357 -0.81958542  0.59849039]]</span>
<span style="color: #7f0000;"># </span><span style="color: #7f0000;">|ret|=&gt; [[ 0.01056085  2.03669496 -1.37248536]</span>
<span style="color: #7f0000;">#  </span><span style="color: #7f0000;">[ 0.25169481  0.96166009 -0.40347195]</span>
<span style="color: #7f0000;">#  </span><span style="color: #7f0000;">[ 0.12881357 -0.81958542  0.59849039]]</span>
</pre>
</div></li>
<li>这会生成一个 3×3 的矩阵，其中的数字是从正态分布中随机抽取的。</li>
<li>连续运行几次，你会发现这个矩阵的内容每次都与上一次不同，虽然代码并没有改变。</li>
</ul></li>

<li>接下来试一下这个：
<ul class="org-ul">
<li><p>
代码如下
</p>
<div class="org-src-container">
<pre class="src src-python"><span style="color: #531ab6;">import</span> numpy <span style="color: #531ab6;">as</span> np

<span style="color: #005e8b;">rs</span> = np.random.RandomState<span style="color: #000000;">(</span>17<span style="color: #000000;">)</span>
<span style="color: #005e8b;">ret</span> = rs.randn<span style="color: #000000;">(</span>3, 3<span style="color: #000000;">)</span>
<span style="color: #8f0075;">print</span><span style="color: #000000;">(</span><span style="color: #3548cf;">"""|ret|=&gt;"""</span>, ret<span style="color: #000000;">)</span>
<span style="color: #8f0075;">print</span><span style="color: #000000;">(</span><span style="color: #3548cf;">"""|ret|=&gt;"""</span>, ret<span style="color: #000000;">)</span>

<span style="color: #7f0000;"># </span><span style="color: #7f0000;">&lt;====================OUTPUT====================&gt;</span>
<span style="color: #7f0000;"># </span><span style="color: #7f0000;">|ret|=&gt; [[ 0.27626589 -1.85462808  0.62390111]</span>
<span style="color: #7f0000;">#  </span><span style="color: #7f0000;">[ 1.14531129  1.03719047  1.88663893]</span>
<span style="color: #7f0000;">#  </span><span style="color: #7f0000;">[-0.11169829 -0.36210134  0.14867505]]</span>
<span style="color: #7f0000;"># </span><span style="color: #7f0000;">|ret|=&gt; [[ 0.27626589 -1.85462808  0.62390111]</span>
<span style="color: #7f0000;">#  </span><span style="color: #7f0000;">[ 1.14531129  1.03719047  1.88663893]</span>
<span style="color: #7f0000;">#  </span><span style="color: #7f0000;">[-0.11169829 -0.36210134  0.14867505]]</span>
</pre>
</div></li>
<li>我非常确定，你会得到与我上面打印出的完全相同的结果。</li>
<li>我为什么如此确定？因为 Python 的 RandomState 函数会初始化一个随机数种子（seed），有了这个种子，所
有随机数就会按照同样的序列生成。</li>
<li>正因为如此，带种子的随机数（seeded random numbers）被称为伪随机数（pseudorandom numbers）或伪随机
数序列。</li>
</ul></li>
<li>需要注意的是，种子只能在你使用了rs时保证可重复性。</li>
<li>如果你创建了rs(定义了一个随机种子)却不使用，如果随后直接调用 np.random.randn(但是没有使用rs)，它依
然会生成新的、不可预测的随机数集。</li>
<li>随机数设定种子的主要优势是：
<ul class="org-ul">
<li>它能让你在任何电脑、任何时间精确复现某一个结果。</li>
<li>如果我在本书中每次生成随机数时都设置了随机种子，那么你将能够精确地重现我的每一个结果和图形 —— 不
仅是定性上的，连具体的数值都能相同。</li>
</ul></li>
<li>那么，我们是不是应该一直设置种子呢？
<ul class="org-ul">
<li>你可能会觉得这是学习的最佳方式，因为这样可以精确复现书中的每一个结果和模拟。这种观点是有一定道理
的，我也理解这种想法。</li>
<li>但是，我并不认为在学习统计时总是设定随机种子是一种好方法。原因是：
<ol class="org-ol">
<li>在统计学（以及更广泛的经验科学）中，一个重要的课程是数据样本总是包含多种变异性与噪声，并且重复
同样的实验可能会得到不同的结果。</li>
<li>了解某些结果或算法对这种变异性的鲁棒性，是非常重要的。</li>
<li>如果只从一个特定的例子来学习，反而可能会有风险，因为那个结果可能只是某一个随机样本的“偶然产物”，
并不能反映普遍规律。</li>
</ol></li>
</ul></li>
<li>在经验科学中也是如此，这就是为什么大样本量和实验重复对科学进步如此关键的原因。</li>
<li>基于这些原因，我在书中选择不使用随机种子。不过，知道种子是怎么工作的非常重要，</li>
<li>当然，你可以不赞同我的理由，并在你的学习、研究、应用和教学中自由使用随机种子。</li>
</ul>
</div>
</div>
<div id="outline-container-org9d3df09" class="outline-3">
<h3 id="org9d3df09"><span class="section-number-3">5.6.</span> Runningexperiments with random numbers</h3>
<div class="outline-text-3" id="text-5-6">
<ul class="org-ul">
<li>使用模拟数据来理解统计方法的主要途径之一，就是进行实验。在本节中，我会先说明这个观点的理由，然后解
释如何用随机数据进行实验。</li>
<li>我们先来问一个基础问题：实验的意义是什么？
<ul class="org-ul">
<li>当你想了解某件你目前还不了解的事情时，你就会进行实验。</li>
</ul></li>
<li>科学实验的过程一般是：
<ul class="org-ul">
<li>先提出一个研究问题，</li>
<li>然后将其转化为假设，根据假设设计实验，收集数据，</li>
<li>最后对这些经验数据进行处理和分析。</li>
</ul></li>
<li>用模拟数据进行的统计实验与此类似：
<ul class="org-ul">
<li>你希望理解某种当前还不太理解的分析方法。那么你会先提出一个研究问题（例如：“一个变量的标准差如何影
响它与另一个变量的相关性？”），</li>
<li>接着设计实验（例如，决定如何改变标准差和相关性的强度），然后编写代码来运行实验并可视化结果，</li>
<li>最后分析和解释这些发现，从而加深你对统计的认识。</li>
</ul></li>
<li>重要的是，通过使用虚拟数据进行统计实验，所获得的洞察力往往超过单纯观察公式或代码所能得到的。
<ul class="org-ul">
<li>例如，你可能会好奇，在方差分析（ANOVA）中的交互项显著性检验时，方差不均衡会产生怎样的影响。</li>
<li>当然，你可以去问一位资深的统计教授，但他可能会回答：“嗯，这不是理想情况，但除非方差差异特别夸张，
否则 ANOVA 往往还是比较稳健。”</li>
<li>如果你只是盯着 ANOVA 的公式看，可能很难获得深入理解（如果不信，你可以翻到第 14 章试试，看你是否能
仅凭公式回答这个问题）。</li>
<li>我建议你设计、编写并运行一个实验，在其中系统地操纵一个 ANOVA 单元的方差，同时保持其他单元的方差不
变。这样，你就会得到一个能被可视化、能被理解，并且能够向别人解释的答案。</li>
</ul></li>

<li>正如我在本章开头写的，
<ul class="org-ul">
<li>使用随机虚拟数据进行实验的优势在于，你可以完全控制数据的特性，并以现实实验中几乎不可能的方式进行
操控。</li>
<li>它的主要缺点是，要模拟真实数据的特性——也就是制造一个数据“拼贴”（datapastiche）——有时会很困难，甚
至不可能。</li>
</ul></li>
<li>另一方面，用模拟数据进行实验的目的——至少在本书中——是帮助你理解统计方法，而不是取代真实的经验实验。</li>
</ul>
</div>
<div id="outline-container-org64e264b" class="outline-4">
<h4 id="org64e264b"><span class="section-number-4">5.6.1.</span> Experiment: Impact of standard deviation on mean</h4>
<div class="outline-text-4" id="text-5-6-1">
<ul class="org-ul">
<li>为了让这个概念更具体，我们来运行一个实验。本实验的目标是：
<ul class="org-ul">
<li>确定标准差对正态分布数据的均值估计的影响。</li>
</ul></li>
<li>事情是这样的：从理论上讲，标准差对均值没有影响，因为标准差的定义是围绕均值的离散程度；它不会偏移均
值本身，至少在正态分布的情况下是如此。</li>
<li>但理论并不总是等同于实践，尤其是在样本量较小且存在噪声时。所以，我们将运行一个实验，帮助我们理解标
准差对均值的影响。</li>
<li>既然关键问题是关于标准差，那么 *它就是我们要操控的变量*。</li>
<li>其它变量——例如预期均值、样本大小、分布形状——也可以被操控，但为了简洁和直接，我们将在这里 <b>保持它们固定不变</b> 。</li>
<li>具体做法如下：
<ul class="org-ul">
<li>我创建了一个包含 100 个随机数的数据集，这些数据来自于一个期望总体均值为 0、标准差为 0.01 的正态分布。</li>
<li>该数据集的经验均值（empirical mean）为 0.0453——不完全是零，但很接近。</li>
<li>然后，我又创建了一个样本量相同、期望总体均值相同，但标准差为 5 的数据集。这个数据集的经验均值是
0.6231——比零远得多！</li>
</ul></li>
<li>这只是两个随机样本。实验的核心思想是：重复数据生成与分析的过程（在这里，分析就是计算均值），并在此
过程中系统地改变标准差。</li>
<li>在代码实现中，这个过程是用一个 for 循环完成的：
<ul class="org-ul">
<li>在循环的每一次迭代中，我都会创建一个新的数据集（保持相同的预期均值和样本大小），</li>
<li>但标准差不同。标准差的取值范围从 0.01 到 10，共有 40 个不同的数值。</li>
<li>每一次迭代中，我都会计算经验均值(empirical mean)并将其存储到一个向量中，然后绘制经验均值随标准差
变化的图像。</li>
<li><p>
在阅读下面的文字之前，请先花几分钟看看 图 5.8，并试着去观察、总结标准差与均值估计之间的关系。
</p>

<div id="org0128bf7" class="figure">
<p><img src="https://raw.githubusercontent.com/harrifeng/image/master/ms/5-8.png" alt="5-8.png" />
</p>
<p><span class="figure-number">Figure 61: </span>ms/5-8.png</p>
</div></li>
</ul></li>
<li>你对这些结果感到惊讶吗？所有这些数据都来自均值为零的理论分布，
<ul class="org-ul">
<li>那么我们又是如何得到像 大于 1 或小于 -1 这样极端的经验均值的呢？</li>
</ul></li>
<li>这种差异来源于抽样的随机性和随机噪声。
<ul class="org-ul">
<li>在真实数据中，这是一个严重的问题，也是我们需要推断统计（inferential statistics）的主要原因之一。</li>
</ul></li>

<li>还有两个额外的观察结果：
<ul class="org-ul">
<li>随着标准差的增加，经验均值离零的距离变得更大。这看起来符合直觉，但数学（以及生活中的很多事情）中
的直觉并不总是正确的。</li>
<li>经验均值既可能大于预期均值，也可能小于它，这表明标准差引入的是一种非系统性偏差（non-systematic bias），
而不是始终朝一个方向偏移的系统性偏差（systematic bias）。在对数正态分布中，你会在练习 10中看到，
这种系统性偏差是可能发生的。</li>
</ul></li>
<li>我对这个实验的结果很感兴趣，所以我设计了一个后续实验，来探究样本量（sample size）对标准差与均值估计
关系的影响。为运行这个实验，我修改了代码，生成了两个数据集：
<ul class="org-ul">
<li>一个样本量为 100</li>
<li>一个样本量为 10,000</li>
</ul></li>
<li>除此之外，其他参数保持完全相同。
<ul class="org-ul">
<li><p>
实验结果见图 5.9。
</p>

<div id="org3bb0e00" class="figure">
<p><img src="https://raw.githubusercontent.com/harrifeng/image/master/ms/5-9.png" alt="5-9.png" />
</p>
<p><span class="figure-number">Figure 62: </span>ms/5-9.png</p>
</div></li>
<li>那么，你对这些结果有什么观察呢？</li>
</ul></li>
<li><b>A myriad of possible experiments</b> 稍加思考，你会意识到，即便是这样一个小小的实验，也可以变得非常复
杂、非常精细。例如，你可以进一步 系统地更改：
<ul class="org-ul">
<li>预期均值（expected mean）</li>
<li>样本量（不仅是两个样本量，而是更多不同规模的样本，覆盖更广范围）</li>
<li>数据分布类型（例如：正态分布、均匀分布、对数正态分布、幂律分布等）</li>
<li>你还可以改变衡量的方式，例如计算经验均值与预期均值之间的距离。</li>
</ul></li>
<li>在本节里，我只是对结果做了定性的解释；我们还可以用统计分析方法，对结果进行定量比较，并在不同数据分
布间进行对照。</li>
<li>我们还可以重复整个实验多次，量化每个标准差值下经验均值的波动程度。</li>
<li>这些只是我在写这一段时想到的一些点子，也许你还有更多方法来扩展这个实验。</li>
<li>不过，我还是要提醒你：
<ul class="org-ul">
<li>保持实验简单、专注非常重要。</li>
<li>实验越复杂，越难解释结果（这对模拟实验和真实世界的实验都成立）。</li>
</ul></li>
<li>本节的主要目的，是向你介绍一种思路：
<ul class="org-ul">
<li>在模拟数据中进行实验时，通过系统地操控一个因素，同时保持其他因素不变，可以探索统计关系。</li>
</ul></li>
<li>我希望你觉得这一节有用。
<ul class="org-ul">
<li>我对统计学的大量理解都来自于亲自运行数据模拟实验，也希望你在实践中有类似的收获</li>
</ul></li>
</ul>
</div>
</div>
</div>
<div id="outline-container-org6ba04c1" class="outline-3">
<h3 id="org6ba04c1"><span class="section-number-3">5.7.</span> The amazing world of data-simulations</h3>
<div class="outline-text-3" id="text-5-7">
<ul class="org-ul">
<li>在本章中，我介绍的只是模拟数据方法的一小部分，实际上还有更多方式可以进行数据模拟。
<ul class="org-ul">
<li>例如，研究人员会模拟时间序列信号、金融数据、气候与天气模式、图像、生物与物理过程、交通流量……这样
的例子不胜枚举。</li>
</ul></li>
<li>生成式深度学习模型在制造虚拟数据方面正在取得令人惊叹的（在某些情况下甚至令人恐惧的）进展，
<ul class="org-ul">
<li>例如生成完全不存在的人的照片，</li>
<li>以及所谓的“深度伪造”视频——这些视频看似展示了知名人士在做或者说一些他们从未做过或说过的事情。</li>
</ul></li>
<li>本章介绍的方法已经足够支撑本书的内容（当然在后续章节我还会引入一些新的数据生成方法）。其他的数据生
成技术往往具有特定的领域性，
<ul class="org-ul">
<li>比如如果你想学习如何模拟气候数据，那你需要参加计算气候科学相关的课程。</li>
</ul></li>
<li>好消息是，几乎所有的数据生成方法都建立在你在本章学到的原理之上，包括：
<ul class="org-ul">
<li>从某种分布中随机抽取数字</li>
<li>对数据进行拉伸或平移（stretch &amp; shift）</li>
<li>施加非线性变换</li>
<li>随机打乱已有数据</li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-orgd50e3b6" class="outline-3">
<h3 id="orgd50e3b6"><span class="section-number-3">5.8.</span> Finding publicly available real datasets</h3>
<div class="outline-text-3" id="text-5-8">
<ul class="org-ul">
<li>现在,公开可获取的数据量正在不断增加,你可以将这些数据用于教育,科研以及商业目的.</li>
<li>但请注意,世界上并不存在所谓的 "唯一数据集"(The Data);网上存在着数不清的数据集,它们具有不同的特
征,样本量和质量.</li>
<li>同样地,也不存在存放所有数据的单一仓库.实际上,许多数据仓库是特定于某个学科领域的.</li>
<li>这意味着,如果你想寻找某种特定类型的数据集,首先你需要明确自己想要的数据类型,然后在互联网上使用相
关关键词进行搜索.
<ul class="org-ul">
<li>一些数据仓库是免费且开放的,你只需点击链接即可下载数据;</li>
<li>另外一些仓库虽然免费,但需要你注册并提供一些个人信息;</li>
<li>还有一些数据会发布在个人网站或像 GitHub 这样的代码仓库上.</li>
<li>有些数据集无法直接在网上找到,只能通过向研究报告的作者个人请求来获得.</li>
</ul></li>
<li>目前没有通用标准来规定数据该如何开放,也没有统一的数据格式;如果你想在网上获取数据,你需要做好耐心
与持续尝试的准备.</li>
<li>在这里,我提到两个非常受欢迎的获取数据的网站:
<ul class="org-ul">
<li>UCI 机器学习数据仓库(UCI Machine Learning Repository)</li>
<li>Kaggle</li>
</ul></li>
<li>在本书中,我会多次使用 UCI 数据仓库中的数据集.</li>
<li>需要注意的是:能下载数据并不意味着数据一定有用.
<ul class="org-ul">
<li>很多数据集很遗憾且令人沮丧地&#x2013;不完整,缺乏文档,甚至已损坏.</li>
<li>这并不是理想状态,但却是现实,你必须做好心理准备.</li>
</ul></li>
<li>好消息是,较受欢迎的数据仓库中的数据通常更有可能是高质量,可用的.</li>
<li>虽然本书主要关注的是模拟数据,但我也有不少练习和示例使用真实数据&#x2013;这些通常作为每一章最后的练习出现。</li>
</ul>
</div>
</div>
</div>
<div id="outline-container-org363375a" class="outline-2">
<h2 id="org363375a"><span class="section-number-2">6.</span> Chapter 06: Transformations</h2>
<div class="outline-text-2" id="text-6">
</div>
<div id="outline-container-org73eb51c" class="outline-3">
<h3 id="org73eb51c"><span class="section-number-3">6.1.</span> Wht, why, and how of data transformations</h3>
<div class="outline-text-3" id="text-6-1">
</div>
<div id="outline-container-orgfc2f728" class="outline-4">
<h4 id="orgfc2f728"><span class="section-number-4">6.1.1.</span> What are data transformations?</h4>
<div class="outline-text-4" id="text-6-1-1">
<ul class="org-ul">
<li>数据变换(Data transformation)指的是对数据应用某种数学运算,或者一系列运算.
<ul class="org-ul">
<li><p>
举一个简单的例子,下面这个数据集及其变换版本:
</p>
<pre class="example" id="org68bd365">
X = [1, 3, 4, 6, 7]
X* = [0, 2, 3, 5, 6]
</pre></li>
<li>这里从 X 得到 X* 所用的变换,就是将所有值都减去 1.</li>
<li>我并没有声称这是一个有趣或复杂的变换,但它确实是一个有效的数据变换.</li>
</ul></li>
<li>很多数据变换都很简单,可以用一个或几个数学或算法表达式来表示.</li>
<li>当然,简单并不是数据变换的本质,因为也有非常复杂的变换,这些变换需要用非常严密的数学技术文档来描述
并且可能需要高性能计算机花费数小时甚至数天才能完成.</li>
<li>不过,这些复杂的变换往往是特定学科和特定数据才会用到的;而相对简单的变换在很多场景中都具有普遍的用途.</li>
</ul>
</div>
</div>
<div id="outline-container-orgb3a19e1" class="outline-4">
<h4 id="orgb3a19e1"><span class="section-number-4">6.1.2.</span> Why transform data?</h4>
<div class="outline-text-4" id="text-6-1-2">
<ul class="org-ul">
<li>数据转换的原因有很多,但它们都源于同一个核心动机:
<ul class="org-ul">
<li>解决(或者至少缓解)数据中的问题.</li>
</ul></li>
<li>下面介绍的是一个并不完整的,可以通过数据转换改善的问题列表:
<ul class="org-ul">
<li><b>不同尺度的数据集需要比较,但它们的量纲不一致(例如距离和质量)</b> .使用标准化(z-scoring)或最小
-最大缩放(min-max scaling)等转换方法,可以将数据放入相同的数值范围,从而实现直接比较.</li>
<li><b>数据的分布并非正态(normal distribution)</b> 但统计分析要求数据服从正态分布, 一些转换方法,如对数
变换(log),平方根变换(square root)和 Fisher-z 变换,可以将非高斯分布(non-Gaussian)转换成高
斯分布(Gaussian).</li>
<li>与上一个问题相关:*有些分析要求数据必须位于特定的数值范围内* .例如,一些图像处理技术期望数据位于
[0,1] 范围,而原始图像数据通常是介于 0 到 255 之间的整数.</li>
<li><b>数据中存在极端值(outliers),会对结果产生负面影响</b> 通过转换可以减少甚至消除这些极端值的影响.对
数变换,平方根变换以及秩转换(tied rank transform)在这种情况下都很有用.</li>
<li><b>数据尺度上的统计参数难以解释,而通过转换可以让其更易于理解</b> 这种情况在回归分析(详见第 15 章)中
很常见.Z-scoring 是一种常用的转换方法,只要有一定的统计训练(包括读完本章节的你!)就能轻松使用.</li>
<li><b>有时数据的转换并非出于统计原因,例如为了便于数字存储或传输</b></li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-org7d80013" class="outline-4">
<h4 id="org7d80013"><span class="section-number-4">6.1.3.</span> How to transform data?</h4>
<div class="outline-text-4" id="text-6-1-3">
<ul class="org-ul">
<li>正如我之前所写,数据转换就是对数据应用某种数学运算或算法.不过这只是一个抽象的说法,下面我会把它具
体化.</li>
<li><b>调用 Python 或 R 函数</b>
像 numpy 和 scipy.stats 这样的 Python 库,以及 R 的基础函数和诸如 caret 的库,都提供了实现大多数常
用数据转换的方法.在使用这些库提供的函数时,要注意不同函数在实现的直观程度和文档的可读性方面可能有
所不同.</li>
<li><b>下载别人编写的函数</b>
互联网上充满了人们发布的代码,例如在 GitHub 或个人网站上.不过,在使用非专业开发者编写的代码时请务
必小心.代码出现在 GitHub 并不意味着它一定是正确的.在使用前务必仔细检查代码,并通过模拟数据来验证
其准确性.</li>
<li><b>自己写代码</b>
本书中有许多练习会引导你从零开始编写数据转换,分析和算法.很多情况下,这些算法在 numpy,scipy 或 R
等库中已经实现了.但自己编写数据转换代码在学习上有很高的教育价值,并且在实际应用中可能在可用性或速
度方面有优势.另外,有些数据转换是现有库中没有实现的,这时就需要你自己编写.</li>
<li>无论代码来自哪里,请记住,并不是所有转换都适合所有数据集.</li>
<li>大多数转换对数据类型和数值范围有一定的假设(例如你不能对负数取平方根).</li>
<li>有些假设可能并不明显,除非你查看具体的公式,或者花时间去理解这些方法(比如通过阅读本章节!).</li>
<li>运行一些代码来转换数据是很容易的,但知道什么时候用哪种转换,以及如何解释结果,则需要统计学训练与批
判性思维.永远不要对数据应用你不理解或无法合理解释的转换方法.</li>
</ul>
</div>
</div>
<div id="outline-container-org61fa519" class="outline-4">
<h4 id="org61fa519"><span class="section-number-4">6.1.4.</span> What kinds of transformations are there?</h4>
<div class="outline-text-4" id="text-6-1-4">
<ul class="org-ul">
<li>目前并没有一个被广泛认可的数据转换分类体系,而我也不喜欢人为强加的分类体系,因为它们往往会错误地表
现分类之间的区别和联系.</li>
<li>不过,把数据转换按照一些共同点和差异进行分组,有时还是有帮助的.例如:
<ul class="org-ul">
<li>有 <b>线性(linear)和非线性(nonlinear)</b> 转换;</li>
<li>有 <b>有损(lossy)和无损(lossless)</b> 转换("有损"指的是在应用转换后会丢失部分信息);</li>
<li>有 *迭代(iterative)和非迭代(non-iterative) * 转换("迭代"指的是算法的某些步骤会重复执行,直到
满足某个条件为止).</li>
</ul></li>
<li>本章的目标是帮助你全面理解各种数据转换,它们的特性,以及它们的影响.</li>
<li>我希望在读完本章之后,你能掌握应用数据转换所需的工具;在读完本书之后,你能具备在实践中做出何时以及
如何进行数据转换的明智决策的知识.</li>
</ul>
</div>
</div>
</div>
<div id="outline-container-orgc49c1a2" class="outline-3">
<h3 id="orgc49c1a2"><span class="section-number-3">6.2.</span> Z-score standardization</h3>
<div class="outline-text-3" id="text-6-2">
<ul class="org-ul">
<li>Z-标准化(Z-scoring) 可能是整个统计学中最常见,也最重要的转换方法之一.</li>
<li>我们先从一个 Z-scoring 能解决的问题开始.
<ul class="org-ul">
<li>假设我们想知道,一个人在给定身高的情况下,体重算多还是少.</li>
<li>这里的问题是,身高和体重的单位完全不同:身高用厘米(或者英寸,甚至光年&#x2013;为了方便我们用厘米),而
体重用千克.</li>
<li>这两个量纲没有直接可比性,比如说"177 厘米比 70 千克大"就完全没有意义.</li>
</ul></li>
<li>解决办法是:把思路从绝对值转变为相对值.
<ul class="org-ul">
<li>一方面,177 厘米是一个有意义,可解释的测量值,但我们也可以这样看:在亚美尼亚成年男性人群中,177
厘米比平均身高高出 5.5 厘米;而 70 千克则比平均体重轻了 4.6 千克.</li>
<li>因此,如果我们假设此人是一位亚美尼亚成年男性,我们可以说,他的身高高于平均水平,但体重低于平均水平.</li>
<li><p>
图 6.1 说明了这一概念:
</p>

<div id="org429032c" class="figure">
<p><img src="https://raw.githubusercontent.com/harrifeng/image/master/ms/6-1.png" alt="6-1.png" />
</p>
<p><span class="figure-number">Figure 63: </span>ms/6-1.png</p>
</div></li>
<li>面板 A1−2 显示了该个体的身高和体重数据.由于量纲完全不同,我们无法直接比较它们.</li>
<li>面板 B1−2 显示了同一个人的数据,叠加到其他成年亚美尼亚男性的样本直方图上.虽然量纲仍然不可比,但
你可以看到,这个人的数据可以被理解为相对于分布的某个位置.</li>
<li>面板 C1−2 显示了将数据标准化为 z-score(Z 分数) 后的结果.此时,个体的数据被重新编码为距离平均值
多少个标准差.例如,此人的身高大约比平均值高 1.5 个标准差,而体重则比平均值轻 1 个标准差.</li>
</ul></li>
<li>这种将单位转化成"相对值"的好处是,我们现在可以直接比较身高和体重:相对于亚美尼亚成年男性的人群分布,
这个人既高又轻.</li>
</ul>
</div>
<div id="outline-container-org4408209" class="outline-4">
<h4 id="org4408209"><span class="section-number-4">6.2.1.</span> Z-score math</h4>
<div class="outline-text-4" id="text-6-2-1">
<ul class="org-ul">
<li>Z评分的数学很简单,但它背后隐藏的假设可能在数据违反这些假设时导致解释上的困难</li>
<li>在标题为"Hard and soft assumptions"的小节中,我将描述一些 Z 评分的局限性和潜在尴尬特征;在此之前,
我希望你思考一些在应用和解释 Z 评分时可能出现的问题.</li>

<li>Z 评分涉及两个简单的变换:
<ol class="org-ol">
<li><b>平移数据(去均值)</b>:
<ul class="org-ul">
<li>将数据按它的均值平移,使变换后的数据平均值为 \(\overline{x}=0\) .这称为 <b>均值中心化</b> 或 <b>去均值</b>.</li>
<li>具体做法是从每个数据点中减去该特征的均值.</li>
</ul></li>
<li><b>按标准差缩放数据</b>:
<ul class="org-ul">
<li>缩放数据,使得变换后数据的标准差为 s = 1.</li>
<li>具体做法是将每个数据点除以数据集的标准差.</li>
</ul></li>
</ol></li>
<li><p>
公式如下
</p>
\begin{equation}
z_i = \frac{x_i - \bar{x}}{s} \tag{6.1}
\end{equation}</li>
<li>这会变换每个数据点 <b>i</b>.</li>
<li>注意,这里的均值和标准差是来自整个数据集(sample)的.
<ul class="org-ul">
<li>如果知道总体特征或可以假设总体特征,则应使用: \(\frac{x_i - \mu}{\sigma}\)</li>
<li>换句话说就是使用population的均值和方差</li>
</ul></li>
<li>下面我们通过一个示例来说明:
<ul class="org-ul">
<li>X = [ 1, 4, -5, 2, 1 ]</li>
<li>数据均值 \(( \overline{x} \approx 0.6 )\)</li>
<li>标准差 \(( s \approx 3.36 )\)</li>
<li>Z 变换后: \(X_z \approx [ 0.12, 1.01, -1.66, 0.41, 0.12 ]\)</li>
</ul></li>
<li>这里我使用了 ≈ 符号,因为我截断了数值.Z 变换后的数字通常不太"好看"成整数.虽然 Z 变换算法很简单,但不
太适合手工实现(坦白说:我用 Python 得到上述数值).</li>
<li>下面的图标中对比了"原始的均值方差"和"转换后的均值和方差"
<ul class="org-ul">
<li><p>
图标如下
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-right" />

<col  class="org-right" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">&#xa0;</th>
<th scope="col" class="org-right">Original</th>
<th scope="col" class="org-right">z-transformed</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">Mean</td>
<td class="org-right">0.6</td>
<td class="org-right">0.00</td>
</tr>

<tr>
<td class="org-left">stdev</td>
<td class="org-right">3.36</td>
<td class="org-right">1.00</td>
</tr>
</tbody>
</table></li>
<li>Z 变换后数据的均值和标准差按定义总是 0 和 1。(顺便提一下，Z 变换后数据的方差也是 1，因为 \(1^2=1\)</li>
<li>Z 变换不会改变分布的形状，因此不会改变偏度（skew）或峰度（kurtosis）。我稍后会展示相关示例，但这
一点从公式上应该已经很明显了。</li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-org22db586" class="outline-4">
<h4 id="org22db586"><span class="section-number-4">6.2.2.</span> Interpretation</h4>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="author">Author: harrifeng@outlook.com</p>
<p class="date">Created: 2025-09-26 Fri 10:43</p>
<p class="validation"><a href="https://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
