<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2025-06-11 Wed 14:36 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>cid</title>
<meta name="author" content="harrifeng@outlook.com" />
<meta name="generator" content="Org Mode" />
<link rel="stylesheet" type="text/css" href="src/readtheorg_theme/css/htmlize.css"/>
<link rel="stylesheet" type="text/css" href="src/readtheorg_theme/css/readtheorg.css"/>
<script type="text/javascript" src="src/lib/js/jquery.min.js"></script>
<script type="text/javascript" src="src/lib/js/bootstrap.min.js"></script>
<script type="text/javascript" src="src/lib/js/jquery.stickytableheaders.min.js"></script>
<script type="text/javascript" src="src/readtheorg_theme/js/readtheorg.js"></script>
</head>
<body>
<div id="content" class="content">
<h1 class="title">cid</h1>
<div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#org76fc7ef">1. Chapter 01: Cascade, specificity, and inheritance</a>
<ul>
<li><a href="#orgfb10720">1.1. The cascade</a>
<ul>
<li><a href="#org918924d">1.1.1. Stylesheet origin</a></li>
<li><a href="#org2a4fcfc">1.1.2. Inline styles</a></li>
<li><a href="#org4b6f874">1.1.3. Selector specificity</a></li>
<li><a href="#org0e0997a">1.1.4. Source order</a></li>
</ul>
</li>
<li><a href="#orgdb0917e">1.2. Inheritance</a></li>
<li><a href="#org4a4abc9">1.3. Special values</a>
<ul>
<li><a href="#org686c51f">1.3.1. The inherit keyword</a></li>
<li><a href="#org6ae8725">1.3.2. The initial keyword</a></li>
<li><a href="#org641e79a">1.3.3. The unset keyword</a></li>
<li><a href="#org78c1fef">1.3.4. The revert keyword</a></li>
</ul>
</li>
<li><a href="#org450ba56">1.4. Shorthand properties</a>
<ul>
<li><a href="#org8835fb1">1.4.1. Beware shorthands silently overriding other styles</a></li>
<li><a href="#org0b68295">1.4.2. Remember the order of shorthand values</a></li>
</ul>
</li>
<li><a href="#orgc104b37">1.5. Progressive enhancement</a>
<ul>
<li><a href="#orgbd759c6">1.5.1. Using the cascade for progressive enhancement</a></li>
<li><a href="#org9a288ae">1.5.2. Progressively enhancing selectors</a></li>
<li><a href="#org8eaf001">1.5.3. Feature queries using @supports()</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<div id="outline-container-org76fc7ef" class="outline-2">
<h2 id="org76fc7ef"><span class="section-number-2">1.</span> Chapter 01: Cascade, specificity, and inheritance</h2>
<div class="outline-text-2" id="text-1">
<ul class="org-ul">
<li>CSS不同于软件开发世界中的诸多事物:
<ul class="org-ul">
<li>它并非传统意义上的编程语言，却需要抽象思维</li>
<li>它不完全是设计工具却需要创造力</li>
<li>它提供看似简单的声明式语法，但如果你参与过大型项目，就会明白它能演变成难以控制的复杂体系</li>
</ul></li>
<li>当你需要学习传统编程中的某项操作时,通常能明确该搜索什么（例如"如何在数组中查找x类型的元素?"）</li>
<li>但使用CSS时，问题往往难以提炼成单一提问。即便能够提炼，答案也常是"视情况而定",实现目标的最佳方式往
往取决于你的特定约束条件，以及你希望如何精确处理各种边界情况</li>
<li>为了能够更好的学习,我们首先来总结一下常见的术语:
<ul class="org-ul">
<li><p>
下面这行css代码叫做declaration,一行declaration包含一个property(也就是下面的color)和一个value(也就是下面的black)
</p>
<div class="org-src-container">
<pre class="src src-css"><span style="color: #531ab6;">clolor</span>: <span style="color: #ffffff; background-color: #000000;">black</span>
</pre>
</div></li>
<li><p>
多个declaration包含在一个{}里面,就叫做declaration block,下例中的{}就是一个declaration block
</p>
<div class="org-src-container">
<pre class="src src-css"><span style="color: #721045;">body</span> <span style="color: #000000;">{</span>
    <span style="color: #531ab6;">color</span>: <span style="color: #ffffff; background-color: #000000;">black</span>;
    <span style="color: #531ab6;">font-family</span>: Helvetica;
<span style="color: #000000;">}</span>
</pre>
</div></li>
<li>每个declaration block前面还必须有一个selector,这个selector用来表示"后面的declaration block"将应用
于页面上的哪些元素.上例中的body,就是一个selector,它表示后面的declaration block会被应用于body</li>
<li>上面的selector和它后面的declaration block联合起来,叫一个ruleset.</li>
<li>ruleset的同义词是rule.但是这个名字很少使用.rule的复数形式rules用来泛指更多样式的组合</li>
<li>at-rules是指以'@'开头的语言结构,比如@import</li>
</ul></li>
<li>第一部分从CSS最根本的原理讲起:
<ul class="org-ul">
<li>层叠（cascade）</li>
<li>盒模型（box model）</li>
<li>多样的单位体系</li>
</ul></li>
<li>多数开发者都听说过层叠和盒模型的概念，他们了解像素单位，或许也听过“应该用em单位替代像素”的建议。但事
实是，这些主题蕴含的知识远不止于此——对它们的浅显理解只能让你走这么远。</li>
<li>若想真正精通CSS，你必须首先深入掌握这些基础原理，并且是透彻地掌握</li>
<li>本书的目标是巩固读者的css知识体系和根基,所以我们会从基础原理讲起,回顾核心概念后,我们会对每个核心概念进行深入讨论</li>
</ul>
</div>
<div id="outline-container-orgfb10720" class="outline-3">
<h3 id="orgfb10720"><span class="section-number-3">1.1.</span> The cascade</h3>
<div class="outline-text-3" id="text-1-1">
<ul class="org-ul">
<li>本质上来说,css的核心就是用来声明rules(前面讲过,rules是泛指不同样式): 也就是,在不同条件下触发特定的样式效果:
<ul class="org-ul">
<li>当一个class被加到这个element的时候,应用这个style</li>
<li>当elementX是elementY的child的时候,应用那个style</li>
<li>浏览器会解析这些规则,并且确定各个规则的适用位置,最终通过渲染引擎将样式呈现到页面上</li>
</ul></li>
<li>​虽然在小规模示例中,CSS规则的解析过程通常清晰明了,但随着样式表规模扩大或应用页面增多，代码复杂度可能迅速攀升.</li>
<li>CSS往往提供多种途径实现相同效果——而根据所选方案的不同,当HTML结构变更或样式应用于不同页面时,结果可能截然不同</li>
<li>CSS开发的核心挑战，在于编写具备可预测性的规则.</li>
<li>实现(编写具备可预测性的规则)这一目标的首要步骤，是确切理解浏览器如何解析CSS规则:
<ul class="org-ul">
<li>每个规则本身可能简单明了，但当两条规则对同一元素的样式提供冲突信息时会发生什么?</li>
<li>你可能会发现某条规则未按预期生效——因为另一条规则与其产生了冲突.</li>
<li>要准确预测规则行为，必须深入理解层叠机制（cascade）</li>
</ul></li>
<li>我们通过例子来展示下CSS ruleset的冲突如何解决
<ul class="org-ul">
<li><p>
下面是我们的html的例子,其中&lt;style&gt;和&lt;/style&gt;就是css需要写入的地方
</p>
<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #531ab6;">!doctype</span> html&gt;
&lt;<span style="color: #721045;">head</span>&gt;
  &lt;<span style="color: #721045;">meta</span> <span style="color: #005e8b;">charset</span>=<span style="color: #3548cf;">"utf-8"</span> /&gt;
  &lt;<span style="color: #721045;">style</span>&gt;
    /* styles added in subsequent listings */
  &lt;/<span style="color: #721045;">style</span>&gt;
&lt;/<span style="color: #721045;">head</span>&gt;
&lt;<span style="color: #721045;">body</span>&gt;
  &lt;<span style="color: #721045;">header</span> <span style="color: #005e8b;">class</span>=<span style="color: #3548cf;">"page-header"</span>&gt;
    &lt;<span style="color: #721045;">h1</span> <span style="color: #005e8b;">id</span>=<span style="color: #3548cf;">"page-title"</span> <span style="color: #005e8b;">class</span>=<span style="color: #3548cf;">"title"</span>&gt;<span style="font-weight: bold; text-decoration: underline;">Wombat Coffee Roasters</span>&lt;/<span style="color: #721045;">h1</span>&gt;
    &lt;<span style="color: #721045;">nav</span>&gt;
      &lt;<span style="color: #721045;">ul</span> <span style="color: #005e8b;">id</span>=<span style="color: #3548cf;">"main-nav"</span> <span style="color: #005e8b;">class</span>=<span style="color: #3548cf;">"nav"</span>&gt;
        &lt;<span style="color: #721045;">li</span>&gt;&lt;<span style="color: #721045;">a</span> <span style="color: #005e8b;">href</span>=<span style="color: #3548cf;">"/"</span>&gt;Home&lt;/<span style="color: #721045;">a</span>&gt;&lt;/<span style="color: #721045;">li</span>&gt;
        &lt;<span style="color: #721045;">li</span>&gt;&lt;<span style="color: #721045;">a</span> <span style="color: #005e8b;">href</span>=<span style="color: #3548cf;">"/coffees"</span>&gt;Coffees&lt;/<span style="color: #721045;">a</span>&gt;&lt;/<span style="color: #721045;">li</span>&gt;
        &lt;<span style="color: #721045;">li</span>&gt;&lt;<span style="color: #721045;">a</span> <span style="color: #005e8b;">href</span>=<span style="color: #3548cf;">"/brewers"</span>&gt;Brewers&lt;/<span style="color: #721045;">a</span>&gt;&lt;/<span style="color: #721045;">li</span>&gt;
        &lt;<span style="color: #721045;">li</span>&gt;&lt;<span style="color: #721045;">a</span> <span style="color: #005e8b;">href</span>=<span style="color: #3548cf;">"/specials"</span> <span style="color: #005e8b;">class</span>=<span style="color: #3548cf;">"featured"</span>&gt;Specials&lt;/<span style="color: #721045;">a</span>&gt;&lt;/<span style="color: #721045;">li</span>&gt;
      &lt;/<span style="color: #721045;">ul</span>&gt;
    &lt;/<span style="color: #721045;">nav</span>&gt;
  &lt;/<span style="color: #721045;">header</span>&gt;
&lt;/<span style="color: #721045;">body</span>&gt;
</pre>
</div></li>
<li>我们的css需要修饰三个地方:
<ol class="org-ol">
<li>Wombat Coffe Roasters这个h1的title,class为title</li>
<li>class为nav的一系列navigation link</li>
<li>class为featured的navigation link(特殊的那个link)</li>
</ol></li>
<li><p>
我们先看一个ruleset冲突的例子,我们分别使用了tag, id selector和class selector三种方式来命中了我们的title
</p>
<div class="org-src-container">
<pre class="src src-css"><span style="color: #721045;">h1</span> <span style="color: #000000;">{</span>
  <span style="color: #531ab6;">font-family</span>: serif;
<span style="color: #000000;">}</span>

<span style="color: #721045;">#page-title</span> <span style="color: #000000;">{</span>
  <span style="color: #531ab6;">font-family</span>: sans-serif;
<span style="color: #000000;">}</span>

<span style="color: #721045;">.title</span> <span style="color: #000000;">{</span>
  <span style="color: #531ab6;">font-family</span>: monospace;
<span style="color: #000000;">}</span>
</pre>
</div></li>
<li>title不可能有三种字体,那么上面的代码运行后的结果是什么呢?答案是ID selector赢了,我们的title使用了
sans serif字体</li>
<li>这就是所谓的cascade的例子:在多个ruleset相互冲突的时候,决定哪个ruleset起作用.</li>
</ul></li>
<li>下面我们解析层叠规则。当声明冲突时，层叠会按 <b>以下顺序</b> 通过六个标准来判断多个冲突ruleset的优先级。
一旦某种标准解决了优先级问题,就退出,否则就继续使用下一个标准进行解决. 我们将逐一深入探讨这六个标准:
<ol class="org-ol">
<li>样式表来源(Stylesheet origin)——样式来自何处。你的样式会与浏览器的默认样式共同应用</li>
<li>内联样式(Inline style)——声明是通过HTML的style属性还是CSS选择器应用到元素上</li>
<li>层（Layer）​——样式可以定义在不同的层中，每层有不同的优先级</li>
<li>选择器特异性(Selector specificity)2——哪些选择器会优先于其他选择器</li>
<li>作用域邻近性(Scope proximity)——样式是否限定在DOM的某一部分</li>
<li>​源码顺序(Source order)——样式在样式表中声明的顺序</li>
</ol></li>
<li>注意,上面的六个标准可能会被!important所影响,我们后面会详细介绍</li>
<li>上面的例子技术使用了Selector specificty来进行解决的: ID selector的优先级更高</li>
<li>第3-Layer和第5-Scope proximity都是新加入到CSS的能够提供更加精确的层叠,我们会在第8,第9章详细介绍他们</li>
<li>接下来我们来介绍剩下的四个</li>
</ul>
</div>
<div id="outline-container-org918924d" class="outline-4">
<h4 id="org918924d"><span class="section-number-4">1.1.1.</span> Stylesheet origin</h4>
<div class="outline-text-4" id="text-1-1-1">
<ul class="org-ul">
<li>实时上,有三种stylesheet的来源,分别是:
<ul class="org-ul">
<li>author style,是在源代码添加的style,优先级最高</li>
<li>user-style,是在特定的浏览器插件或个别几种浏览器里面才能定义的style,很少被使用,优先级中等</li>
<li>user-agent style,是浏览器默认的style,优先级最低</li>
</ul></li>
<li>用户代理样式（user-agent styles）在不同浏览器中略有差异，但通常实现的功能相同:
<ul class="org-ul">
<li>标题（&lt;h1&gt; 到 &lt;h6&gt;）和段落（&lt;p&gt;）会被赋予上下外边距(margin)</li>
<li>列表（&lt;ol&gt; 和 &lt;ul&gt;）会被赋予左内边距(padding)</li>
<li>链接颜色和默认字体大小也会被设置</li>
</ul></li>
<li>用户代理样式(user-agent styles)设置的通常是您期望的默认效果,因此不会产生完全出乎意料的行为.不同现代
浏览器的最新版本中，这些样式往往保持高度一致.</li>
<li>若对某些属性的默认效果不满意，只需在自定义样式表中覆盖这些值即可
<ul class="org-ul">
<li><p>
图1-4就是user-agent style的设置
</p>

<div id="orge06828a" class="figure">
<p><img src="https://raw.githubusercontent.com/harrifeng/image/master/cid/1-4.png" alt="1-4.png" />
</p>
<p><span class="figure-number">Figure 1: </span>cid/1-4.png</p>
</div></li>
<li><p>
我们想对1-4进行一些改动,具体的改动后,效果
</p>

<div id="orge88f168" class="figure">
<p><img src="https://raw.githubusercontent.com/harrifeng/image/master/cid/1-5.png" alt="1-5.png" />
</p>
<p><span class="figure-number">Figure 2: </span>cid/1-5.png</p>
</div></li>
<li><p>
具体的改动代码如下
</p>
<div class="org-src-container">
<pre class="src src-css"><span style="color: #721045;">h1</span> <span style="color: #000000;">{</span>
  <span style="color: #531ab6;">color</span>: <span style="color: #ffffff; background-color: #2f4f4f;">#2f4f4f</span>;
  <span style="color: #531ab6;">margin-bottom</span>: 10px; <span style="color: #7f0000;">/*</span><span style="color: #7f0000;">Reduce the margins</span><span style="color: #7f0000;">*/</span>
<span style="color: #000000;">}</span>

<span style="color: #721045;">#main-nav</span> <span style="color: #000000;">{</span>
  <span style="color: #531ab6;">margin-top</span>: 10px; <span style="color: #7f0000;">/*</span><span style="color: #7f0000;">Reduce the margins</span><span style="color: #7f0000;">*/</span>
  <span style="color: #531ab6;">list-style</span>: none; <span style="color: #7f0000;">/*</span><span style="color: #7f0000;">Remove user-agent list styles</span><span style="color: #7f0000;">*/</span>
  <span style="color: #531ab6;">padding-left</span>: 0; <span style="color: #7f0000;">/*</span><span style="color: #7f0000;">Remove user-agent list styles</span><span style="color: #7f0000;">*/</span>
<span style="color: #000000;">}</span>

<span style="color: #7f0000;">/* </span><span style="color: #7f0000;">Makes list items appear side by side rather than stacked</span><span style="color: #7f0000;"> */</span>
<span style="color: #721045;">#main-nav li</span> <span style="color: #000000;">{</span>
  <span style="color: #531ab6;">display</span>: inline-block;
<span style="color: #000000;">}</span>

<span style="color: #7f0000;">/* </span><span style="color: #7f0000;">Provide a button-like appearance for the naavigational links</span><span style="color: #7f0000;"> */</span>
<span style="color: #721045;">#main-nav a</span> <span style="color: #000000;">{</span>
  <span style="color: #531ab6;">color</span>: <span style="color: #000000; background-color: #ffffff;">white</span>;
  <span style="color: #531ab6;">backgroun-color</span>: <span style="color: #ffffff; background-color: #13a4a5;">#13a4a5</span>;
  <span style="color: #531ab6;">padding</span>: 5px;
  <span style="color: #531ab6;">border-radius</span>: 2px;
  <span style="color: #531ab6;">text-decoration</span>: none;
<span style="color: #000000;">}</span>
</pre>
</div></li>
<li>注意,上面的代码使用了ID selector,这个不是最佳实践,我们后面会详细介绍</li>
</ul></li>
</ul>
</div>
<ol class="org-ol">
<li><a id="org3ebc319"></a>Important Declarations<br />
<div class="outline-text-5" id="text-1-1-1-1">
<ul class="org-ul">
<li>style origin rules有一个例外,那就是一旦一个declaration被标记为imporatnt(使用!important),那么这个declaration
就会被所有的normal style优先级都要高(但是imporatnt origin的order和普通origin的order是相反的!).把
important考虑进来之后,所有的优先级从高到低如下:
<ol class="org-ol">
<li>Important user-agent</li>
<li>Important user</li>
<li>Important author</li>
<li>Normal author</li>
<li>Normal user</li>
<li>Normal user-agent</li>
</ol></li>
</ul>
</div>
</li>
</ol>
</div>
<div id="outline-container-org2a4fcfc" class="outline-4">
<h4 id="org2a4fcfc"><span class="section-number-4">1.1.2.</span> Inline styles</h4>
<div class="outline-text-4" id="text-1-1-2">
<ul class="org-ul">
<li>当冲突声明无法通过来源（origin）解决时,浏览器会检查它们是否通过内联样式（inline styles）添加到元素:
<ul class="org-ul">
<li><p>
通过HTML的style属性应用的样式声明仅作用于当前元素，且会覆盖外部样式表或&lt;style&gt;标签中的声明,比如我
们想把最后一个Specials给给成桔色背景,那么我们可以直接在目标元素内更改
</p>
<div class="org-src-container">
<pre class="src src-diff">diff --git a/code/ch01/1-4.html b/code/ch01/1-4.html
index e0f6bd3..078f82b 100644
--- <span style="font-weight: bold;">a/code/ch01/1-4.html</span>
+++ <span style="font-weight: bold;">b/code/ch01/1-4.html</span>
<span style="background-color: #dfd5cf; font-weight: bold;">@@ -36,7 +36,7 @@</span>
         &lt;li&gt;&lt;a href="/"&gt;Home&lt;/a&gt;&lt;/li&gt;
         &lt;li&gt;&lt;a href="/coffees"&gt;Coffees&lt;/a&gt;&lt;/li&gt;
         &lt;li&gt;&lt;a href="/brewers"&gt;Brewers&lt;/a&gt;&lt;/li&gt;
<span style="color: #aa2222; background-color: #f4d0cf;">-</span><span style="color: #8f1313; background-color: #f4d0cf;">        &lt;li&gt;&lt;a href="/specials" class="featured"&gt;Specials&lt;/a&gt;&lt;/li&gt;</span>
<span style="color: #006700; background-color: #c3ebc1;">+</span><span style="color: #005000; background-color: #c3ebc1;">        &lt;li&gt;&lt;a href="/specials" class="featured" </span><span style="color: #005000; background-color: #acd6a5;">style="background-color: orange;"</span><span style="color: #005000; background-color: #c3ebc1;">&gt;Specials&lt;/a&gt;&lt;/li&gt;</span>
       &lt;/ul&gt;
     &lt;/nav&gt;
   &lt;/header&gt;
</pre>
</div></li>
<li>内联样式无需选择器，因其直接绑定目标元素。</li>
</ul></li>
<li>inline style的特点如下:
<ul class="org-ul">
<li>优先级排序​：内联样式 &gt; 作者样式（外部/内部） &gt; 用户代理样式（浏览器默认）</li>
<li>特殊性计算​：内联样式的特殊性权重为1,0,0,0，高于ID选择器的0,1,0,0</li>
<li>应用场景​：适合局部覆盖，但滥用会降低可维护性</li>
</ul></li>
<li>若需在stylesheet中覆盖内联声明,必须为声明添加!important以提升其优先级来源.若内联样式本身已被标记为
!important,则无法被任何规则覆盖.建议优先通过stylesheet(而非inline style)实现此类覆盖</li>
</ul>
</div>
</div>
<div id="outline-container-org4b6f874" class="outline-4">
<h4 id="org4b6f874"><span class="section-number-4">1.1.3.</span> Selector specificity</h4>
<div class="outline-text-4" id="text-1-1-3">
<ul class="org-ul">
<li>selector specificity是一个不易察觉但是却是非常重要的CSS特性,因为:
<ul class="org-ul">
<li>在stylesheet origin判断里面,其实冲突较少:绝大部分的style都是你通过author origin添加的</li>
<li>但是如果不理解selector specificity,那么几乎肯定会在处理冲突的时候犯错误</li>
</ul></li>
<li>不同的selector首先自己就有优先级:
<ul class="org-ul">
<li>单个ID selector比任意数目的class selector的优先级都高</li>
<li>单个class selector比任意数目的tag selector的优先级都高</li>
<li><p>
下面这例子中优先级是从低到高书写的.
</p>
<div class="org-src-container">
<pre class="src src-css"><span style="color: #721045;">html body header h1</span> <span style="color: #000000;">{</span>
  <span style="color: #531ab6;">color</span>: <span style="color: #ffffff; background-color: #0000ff;">blue</span>;
<span style="color: #000000;">}</span>

<span style="color: #721045;">body header.page-header h1</span> <span style="color: #000000;">{</span>
  <span style="color: #531ab6;">color</span>: <span style="color: #000000; background-color: #ffa500;">orange</span>;
<span style="color: #000000;">}</span>

<span style="color: #721045;">.page-header .title</span> <span style="color: #000000;">{</span>
  <span style="color: #531ab6;">color</span>: <span style="color: #ffffff; background-color: #008000;">green</span>;
<span style="color: #000000;">}</span>

<span style="color: #721045;">#page-title</span> <span style="color: #000000;">{</span>
  <span style="color: #531ab6;">color</span>: <span style="color: #ffffff; background-color: #ff0000;">red</span>;
<span style="color: #000000;">}</span>
</pre>
</div></li>
<li><p>
我们会发现如果存在高优先级的就比较出结果,那么如果高优先级的数目一样怎么办呢?答案是比较下一级别的
优先级,为此我们还创建出一个Notation列表来比较优先级.上面例子的优先级使用列表列出如下(高优先级数
目多直接获胜,否则比较下一级)
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-right" />

<col  class="org-right" />

<col  class="org-right" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Selector</th>
<th scope="col" class="org-right">ID</th>
<th scope="col" class="org-right">Class</th>
<th scope="col" class="org-right">Tag</th>
<th scope="col" class="org-left">Notation</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">html body heaer h1</td>
<td class="org-right">0</td>
<td class="org-right">0</td>
<td class="org-right">4</td>
<td class="org-left">0,0,4</td>
</tr>

<tr>
<td class="org-left">body header.page-header h1</td>
<td class="org-right">0</td>
<td class="org-right">1</td>
<td class="org-right">3</td>
<td class="org-left">0,1,3</td>
</tr>

<tr>
<td class="org-left">.page-header .title</td>
<td class="org-right">0</td>
<td class="org-right">2</td>
<td class="org-right">0</td>
<td class="org-left">0,2,0</td>
</tr>

<tr>
<td class="org-left">#page-title</td>
<td class="org-right">1</td>
<td class="org-right">0</td>
<td class="org-right">0</td>
<td class="org-left">1,0,0</td>
</tr>
</tbody>
</table></li>
</ul></li>
<li>由于inline style非常常用,上面的notion有时候还会在最前面加上第1个数字,整体变成四位:
<ul class="org-ul">
<li>如果是inline style,第一位就是1,其也就拥有最高的优先级,比所有selector都高</li>
<li>如果不是inline style,第一位就是0</li>
</ul></li>
<li>知道了优先级之后,我们发现:
<ul class="org-ul">
<li><p>
直接使用 .featured这个class selector是无法成功设置orange背景的,因为selector #main-nav是ID selector
</p>
<div class="org-src-container">
<pre class="src src-html">&lt;<span style="color: #531ab6;">!doctype</span> html&gt;
&lt;<span style="color: #721045;">head</span>&gt;
  &lt;<span style="color: #721045;">meta</span> <span style="color: #005e8b;">charset</span>=<span style="color: #3548cf;">"utf-8"</span> /&gt;
  &lt;<span style="color: #721045;">style</span>&gt;
    h1 {
      color: #2f4f4f;
      margin-bottom: 10px;
    }

    #main-nav {
      margin-top: 10px;
      list-style: none;
      padding-left: 0;
    }

    #main-nav li {
      display: inline-block;
    }

    #main-nav a {
      color: white;
      background-color: #13a4a4;
      padding: 5px;
      border-radius: 2px;
      text-decoration: none;
    }

    .featured {
      background-color: orange;
    }
  &lt;/<span style="color: #721045;">style</span>&gt;
&lt;/<span style="color: #721045;">head</span>&gt;
&lt;<span style="color: #721045;">body</span>&gt;
  &lt;<span style="color: #721045;">header</span> <span style="color: #005e8b;">class</span>=<span style="color: #3548cf;">"page-header"</span>&gt;
    &lt;<span style="color: #721045;">h1</span> <span style="color: #005e8b;">id</span>=<span style="color: #3548cf;">"page-title"</span> <span style="color: #005e8b;">class</span>=<span style="color: #3548cf;">"title"</span>&gt;<span style="font-weight: bold; text-decoration: underline;">Wombat Coffee Roasters</span>&lt;/<span style="color: #721045;">h1</span>&gt;
    &lt;<span style="color: #721045;">nav</span>&gt;
      &lt;<span style="color: #721045;">ul</span> <span style="color: #005e8b;">id</span>=<span style="color: #3548cf;">"main-nav"</span> <span style="color: #005e8b;">class</span>=<span style="color: #3548cf;">"nav"</span>&gt;
        &lt;<span style="color: #721045;">li</span>&gt;&lt;<span style="color: #721045;">a</span> <span style="color: #005e8b;">href</span>=<span style="color: #3548cf;">"/"</span>&gt;Home&lt;/<span style="color: #721045;">a</span>&gt;&lt;/<span style="color: #721045;">li</span>&gt;
        &lt;<span style="color: #721045;">li</span>&gt;&lt;<span style="color: #721045;">a</span> <span style="color: #005e8b;">href</span>=<span style="color: #3548cf;">"/coffees"</span>&gt;Coffees&lt;/<span style="color: #721045;">a</span>&gt;&lt;/<span style="color: #721045;">li</span>&gt;
        &lt;<span style="color: #721045;">li</span>&gt;&lt;<span style="color: #721045;">a</span> <span style="color: #005e8b;">href</span>=<span style="color: #3548cf;">"/brewers"</span>&gt;Brewers&lt;/<span style="color: #721045;">a</span>&gt;&lt;/<span style="color: #721045;">li</span>&gt;
        &lt;<span style="color: #721045;">li</span>&gt;&lt;<span style="color: #721045;">a</span> <span style="color: #005e8b;">href</span>=<span style="color: #3548cf;">"/specials"</span> <span style="color: #005e8b;">class</span>=<span style="color: #3548cf;">"featured"</span>&gt;Specials&lt;/<span style="color: #721045;">a</span>&gt;&lt;/<span style="color: #721045;">li</span>&gt;
      &lt;/<span style="color: #721045;">ul</span>&gt;
    &lt;/<span style="color: #721045;">nav</span>&gt;
  &lt;/<span style="color: #721045;">header</span>&gt;
&lt;/<span style="color: #721045;">body</span>&gt;
</pre>
</div></li>
<li><p>
一个快速但是不太推荐的做法,是在orange后面加!important,这样能做到我们想要的效果,但是不是最佳实践:
因为加一个!important还不是问题,问题是每个declaration都加了important之后,大家还是比较老的优先级.这
个!important只能用一次!
</p>
<div class="org-src-container">
<pre class="src src-diff">diff --git a/code/ch01/1-7.html b/code/ch01/1-7.html
index a4e88fe..7344b9d 100644
--- <span style="font-weight: bold;">a/code/ch01/1-7.html</span>
+++ <span style="font-weight: bold;">b/code/ch01/1-7.html</span>
<span style="background-color: #dfd5cf; font-weight: bold;">@@ -26,7 +26,7 @@</span>
     }

     .featured {
<span style="color: #aa2222; background-color: #f4d0cf;">-</span><span style="color: #8f1313; background-color: #f4d0cf;">      background-color: orange;</span>
<span style="color: #006700; background-color: #c3ebc1;">+</span><span style="color: #005000; background-color: #c3ebc1;">      background-color: orange </span><span style="color: #005000; background-color: #acd6a5;">!important</span><span style="color: #005000; background-color: #c3ebc1;">;</span>
     }
   &lt;/style&gt;
 &lt;/head&gt;
</pre>
</div></li>
</ul></li>
<li>不能使用!important,那么我们可以从两个思路来更改我们的代码,达到使用orange作为背景的目的:
<ul class="org-ul">
<li><p>
第一个思路就是提升我们自己selector的优先级
</p>
<div class="org-src-container">
<pre class="src src-diff">diff --git a/code/ch01/1-8.html b/code/ch01/1-8.html
index 7344b9d..38aa9ae 100644
--- <span style="font-weight: bold;">a/code/ch01/1-8.html</span>
+++ <span style="font-weight: bold;">b/code/ch01/1-8.html</span>
<span style="background-color: #dfd5cf; font-weight: bold;">@@ -25,8 +25,8 @@</span>
       text-decoration: none;
     }

<span style="color: #aa2222; background-color: #f4d0cf;">-</span><span style="color: #8f1313; background-color: #f4d0cf;">    .featured {</span>
<span style="color: #aa2222; background-color: #f4d0cf;">-</span><span style="color: #8f1313; background-color: #f4d0cf;">      background-color: orange </span><span style="color: #8f1313; background-color: #f3b5a7;">!important</span><span style="color: #8f1313; background-color: #f4d0cf;">;</span>
<span style="color: #006700; background-color: #c3ebc1;">+</span><span style="color: #005000; background-color: #c3ebc1;">    </span><span style="color: #005000; background-color: #acd6a5;">#main-nav</span><span style="color: #005000; background-color: #c3ebc1;"> .featured {</span>
<span style="color: #006700; background-color: #c3ebc1;">+</span><span style="color: #005000; background-color: #c3ebc1;">      background-color: orange;</span>
     }
   &lt;/style&gt;
 &lt;/head&gt;
</pre>
</div></li>
<li><p>
第二个思路就是降低印象我们的selector的优先级,比如不要使用ID来做selector,把第一个#main-nav的selector
去掉,改为使用class+tag,而我们的selector是两个class,那么我们的selector获胜
</p>
<div class="org-src-container">
<pre class="src src-diff">diff --git a/code/ch01/1-9.html b/code/ch01/1-9.html
index 7344b9d..12c92d8 100644
--- <span style="font-weight: bold;">a/code/ch01/1-9.html</span>
+++ <span style="font-weight: bold;">b/code/ch01/1-9.html</span>
<span style="background-color: #dfd5cf; font-weight: bold;">@@ -7,17 +7,17 @@</span>
       margin-bottom: 10px;
     }

<span style="color: #aa2222; background-color: #f4d0cf;">-</span><span style="color: #8f1313; background-color: #f4d0cf;">    </span><span style="color: #8f1313; background-color: #f3b5a7;">#main-</span><span style="color: #8f1313; background-color: #f4d0cf;">nav {</span>
<span style="color: #006700; background-color: #c3ebc1;">+</span><span style="color: #005000; background-color: #c3ebc1;">    </span><span style="color: #005000; background-color: #acd6a5;">.</span><span style="color: #005000; background-color: #c3ebc1;">nav {</span>
       margin-top: 10px;
       list-style: none;
       padding-left: 0;
     }

<span style="color: #aa2222; background-color: #f4d0cf;">-</span><span style="color: #8f1313; background-color: #f4d0cf;">    </span><span style="color: #8f1313; background-color: #f3b5a7;">#main-</span><span style="color: #8f1313; background-color: #f4d0cf;">nav li {</span>
<span style="color: #006700; background-color: #c3ebc1;">+</span><span style="color: #005000; background-color: #c3ebc1;">    </span><span style="color: #005000; background-color: #acd6a5;">.</span><span style="color: #005000; background-color: #c3ebc1;">nav li {</span>
       display: inline-block;
     }

<span style="color: #aa2222; background-color: #f4d0cf;">-</span><span style="color: #8f1313; background-color: #f4d0cf;">    </span><span style="color: #8f1313; background-color: #f3b5a7;">#main-</span><span style="color: #8f1313; background-color: #f4d0cf;">nav a {</span>
<span style="color: #006700; background-color: #c3ebc1;">+</span><span style="color: #005000; background-color: #c3ebc1;">    </span><span style="color: #005000; background-color: #acd6a5;">.</span><span style="color: #005000; background-color: #c3ebc1;">nav a {</span>
       color: white;
       background-color: #13a4a4;
       padding: 5px;
<span style="background-color: #dfd5cf; font-weight: bold;">@@ -25,8 +25,8 @@</span>
       text-decoration: none;
     }

<span style="color: #aa2222; background-color: #f4d0cf;">-</span><span style="color: #8f1313; background-color: #f4d0cf;">    .featured {</span>
<span style="color: #aa2222; background-color: #f4d0cf;">-</span><span style="color: #8f1313; background-color: #f4d0cf;">      background-color: orange </span><span style="color: #8f1313; background-color: #f3b5a7;">!important</span><span style="color: #8f1313; background-color: #f4d0cf;">;</span>
<span style="color: #006700; background-color: #c3ebc1;">+</span><span style="color: #005000; background-color: #c3ebc1;">    .</span><span style="color: #005000; background-color: #acd6a5;">nav .</span><span style="color: #005000; background-color: #c3ebc1;">featured {</span>
<span style="color: #006700; background-color: #c3ebc1;">+</span><span style="color: #005000; background-color: #c3ebc1;">      background-color: orange;</span>
     }
   &lt;/style&gt;
 &lt;/head&gt;
</pre>
</div></li>
</ul></li>
<li>我们发现selector specificity就像是军备竞赛,所以我们的最佳实践就是让selector specificity的优先级尽可
能的低,这样才能在后期进行override</li>
</ul>
</div>
</div>
<div id="outline-container-org0e0997a" class="outline-4">
<h4 id="org0e0997a"><span class="section-number-4">1.1.4.</span> Source order</h4>
<div class="outline-text-4" id="text-1-1-4">
<ul class="org-ul">
<li>最后一步解决冲突的办法就是source order了,简单点说,所有的标准都相同的情况下,在代码中的位置越往后,优
先级越高(因为后面的配置会override前面配置)</li>
<li>当你开始学习CSS的时候,你可能听说CSS代码中的selector需要有一定顺序,那就是因为源代码的顺序会影响层叠</li>
<li>我们使用link的style(a:link, a:visited,a:hover, a:active)来做介绍,这也是最经典的例子:
<ul class="org-ul">
<li><p>
我们先看看错误的例子.这个例子由于顺序错误,导致两个错误:悬停在未访问链接的时候还是蓝色(而不是红色),
以及悬停在已访问链接上时候,链接依然是紫色,而不是红色
</p>
<div class="org-src-container">
<pre class="src src-css"><span style="color: #7f0000;">/* </span><span style="color: #7f0000;">&#38169;&#35823;&#39034;&#24207;&#31034;&#20363;</span><span style="color: #7f0000;"> */</span>
<span style="color: #721045;">a:hover</span> <span style="color: #000000;">{</span>
  <span style="color: #531ab6;">color</span>: <span style="color: #ffffff; background-color: #ff0000;">red</span>; <span style="color: #7f0000;">/* </span><span style="color: #7f0000;">&#40736;&#26631;&#24748;&#20572;&#26102;&#21464;&#32418;</span><span style="color: #7f0000;"> */</span>
<span style="color: #000000;">}</span>

<span style="color: #721045;">a:link</span> <span style="color: #000000;">{</span>
  <span style="color: #531ab6;">color</span>: <span style="color: #ffffff; background-color: #0000ff;">blue</span>; <span style="color: #7f0000;">/* </span><span style="color: #7f0000;">&#26410;&#35775;&#38382;&#26102;&#34013;&#33394;</span><span style="color: #7f0000;"> */</span>
<span style="color: #000000;">}</span>

<span style="color: #721045;">a:visited</span> <span style="color: #000000;">{</span>
  <span style="color: #531ab6;">color</span>: <span style="color: #ffffff; background-color: #800080;">purple</span>; <span style="color: #7f0000;">/* </span><span style="color: #7f0000;">&#24050;&#35775;&#38382;&#26102;&#32043;&#33394;</span><span style="color: #7f0000;"> */</span>
<span style="color: #000000;">}</span>

<span style="color: #721045;">a:active</span> <span style="color: #000000;">{</span>
  <span style="color: #531ab6;">color</span>: <span style="color: #ffffff; background-color: #008000;">green</span>; <span style="color: #7f0000;">/* </span><span style="color: #7f0000;">&#28857;&#20987;&#30636;&#38388;&#21464;&#32511;</span><span style="color: #7f0000;"> */</span>
<span style="color: #000000;">}</span>
</pre>
</div></li>
<li><p>
更改之后的版本如下.这才是正确的版本. 正确版本的selector的顺序必须是:link,:visted,:hover,:active
(一个容易记的方法:LoVe/HAte)
</p>
<div class="org-src-container">
<pre class="src src-css"><span style="color: #7f0000;">/* </span><span style="color: #7f0000;">&#27491;&#30830;&#39034;&#24207;&#31034;&#20363; (LVHA)</span><span style="color: #7f0000;"> */</span>
<span style="color: #721045;">a:link</span> <span style="color: #000000;">{</span>
  <span style="color: #531ab6;">color</span>: <span style="color: #ffffff; background-color: #0000ff;">blue</span>; <span style="color: #7f0000;">/* </span><span style="color: #7f0000;">&#26410;&#35775;&#38382;&#26102;&#34013;&#33394;</span><span style="color: #7f0000;"> */</span>
<span style="color: #000000;">}</span>

<span style="color: #721045;">a:visited</span> <span style="color: #000000;">{</span>
  <span style="color: #531ab6;">color</span>: <span style="color: #ffffff; background-color: #800080;">purple</span>; <span style="color: #7f0000;">/* </span><span style="color: #7f0000;">&#24050;&#35775;&#38382;&#26102;&#32043;&#33394;</span><span style="color: #7f0000;"> */</span>
<span style="color: #000000;">}</span>

<span style="color: #721045;">a:hover</span> <span style="color: #000000;">{</span>
  <span style="color: #531ab6;">color</span>: <span style="color: #ffffff; background-color: #ff0000;">red</span>; <span style="color: #7f0000;">/* </span><span style="color: #7f0000;">&#40736;&#26631;&#24748;&#20572;&#26102;&#21464;&#32418;</span><span style="color: #7f0000;"> */</span>
<span style="color: #000000;">}</span>

<span style="color: #721045;">a:active</span> <span style="color: #000000;">{</span>
  <span style="color: #531ab6;">color</span>: <span style="color: #ffffff; background-color: #008000;">green</span>; <span style="color: #7f0000;">/* </span><span style="color: #7f0000;">&#28857;&#20987;&#30636;&#38388;&#21464;&#32511;</span><span style="color: #7f0000;"> */</span>
<span style="color: #000000;">}</span>
</pre>
</div></li>
</ul></li>
<li>总体上来说层叠(cascade)是比较容易处理的,我们只需要记住两个最佳实践即可:
<ul class="org-ul">
<li>不要使用ID selector</li>
<li>不要使用!important</li>
</ul></li>
</ul>
</div>
</div>
</div>
<div id="outline-container-orgdb0917e" class="outline-3">
<h3 id="orgdb0917e"><span class="section-number-3">1.2.</span> Inheritance</h3>
</div>
<div id="outline-container-org4a4abc9" class="outline-3">
<h3 id="org4a4abc9"><span class="section-number-3">1.3.</span> Special values</h3>
<div class="outline-text-3" id="text-1-3">
</div>
<div id="outline-container-org686c51f" class="outline-4">
<h4 id="org686c51f"><span class="section-number-4">1.3.1.</span> The inherit keyword</h4>
</div>
<div id="outline-container-org6ae8725" class="outline-4">
<h4 id="org6ae8725"><span class="section-number-4">1.3.2.</span> The initial keyword</h4>
</div>
<div id="outline-container-org641e79a" class="outline-4">
<h4 id="org641e79a"><span class="section-number-4">1.3.3.</span> The unset keyword</h4>
</div>
<div id="outline-container-org78c1fef" class="outline-4">
<h4 id="org78c1fef"><span class="section-number-4">1.3.4.</span> The revert keyword</h4>
</div>
</div>
<div id="outline-container-org450ba56" class="outline-3">
<h3 id="org450ba56"><span class="section-number-3">1.4.</span> Shorthand properties</h3>
<div class="outline-text-3" id="text-1-4">
</div>
<div id="outline-container-org8835fb1" class="outline-4">
<h4 id="org8835fb1"><span class="section-number-4">1.4.1.</span> Beware shorthands silently overriding other styles</h4>
</div>
<div id="outline-container-org0b68295" class="outline-4">
<h4 id="org0b68295"><span class="section-number-4">1.4.2.</span> Remember the order of shorthand values</h4>
</div>
</div>
<div id="outline-container-orgc104b37" class="outline-3">
<h3 id="orgc104b37"><span class="section-number-3">1.5.</span> Progressive enhancement</h3>
<div class="outline-text-3" id="text-1-5">
</div>
<div id="outline-container-orgbd759c6" class="outline-4">
<h4 id="orgbd759c6"><span class="section-number-4">1.5.1.</span> Using the cascade for progressive enhancement</h4>
</div>
<div id="outline-container-org9a288ae" class="outline-4">
<h4 id="org9a288ae"><span class="section-number-4">1.5.2.</span> Progressively enhancing selectors</h4>
</div>
<div id="outline-container-org8eaf001" class="outline-4">
<h4 id="org8eaf001"><span class="section-number-4">1.5.3.</span> Feature queries using @supports()</h4>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="author">Author: harrifeng@outlook.com</p>
<p class="date">Created: 2025-06-11 Wed 14:36</p>
<p class="validation"><a href="https://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
