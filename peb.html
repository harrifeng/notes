<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2025-07-02 Wed 17:15 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>peb</title>
<meta name="author" content="harrifeng@outlook.com" />
<meta name="generator" content="Org Mode" />
<link rel="stylesheet" type="text/css" href="src/readtheorg_theme/css/htmlize.css"/>
<link rel="stylesheet" type="text/css" href="src/readtheorg_theme/css/readtheorg.css"/>
<script type="text/javascript" src="src/lib/js/jquery.min.js"></script>
<script type="text/javascript" src="src/lib/js/bootstrap.min.js"></script>
<script type="text/javascript" src="src/lib/js/jquery.stickytableheaders.min.js"></script>
<script type="text/javascript" src="src/readtheorg_theme/js/readtheorg.js"></script>
<script>
  window.MathJax = {
    tex: {
      ams: {
        multlineWidth: '85%'
      },
      tags: 'ams',
      tagSide: 'right',
      tagIndent: '.8em'
    },
    chtml: {
      scale: 1.0,
      displayAlign: 'center',
      displayIndent: '0em'
    },
    svg: {
      scale: 1.0,
      displayAlign: 'center',
      displayIndent: '0em'
    },
    output: {
      font: 'mathjax-modern',
      displayOverflow: 'overflow'
    }
  };
</script>

<script
  id="MathJax-script"
  async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
</script>
</head>
<body>
<div id="content" class="content">
<h1 class="title">peb</h1>
<div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#org00496fe">1. Chapter 1: Combinatorics</a>
<ul>
<li><a href="#org919fb29">1.1. Factorials</a></li>
<li><a href="#orgc073ef7">1.2. Permutations</a>
<ul>
<li><a href="#orga08504a">1.2.1. One object</a></li>
<li><a href="#org13b6d94">1.2.2. Two objects</a></li>
<li><a href="#org0d46738">1.2.3. Three objects</a></li>
</ul>
</li>
<li><a href="#org478345a">1.3. Ordered sets, repetitions allowed</a></li>
<li><a href="#orga449942">1.4. Ordered sets, repetitions not allowed</a></li>
<li><a href="#orgf2d7aa0">1.5. Unordered sets, repetitions not allowed</a>
<ul>
<li><a href="#org4335403">1.5.1. Example(Two chosen from five)</a></li>
<li><a href="#org83894b4">1.5.2. First solution</a></li>
<li><a href="#orgb36a985">1.5.3. Second solution:</a></li>
<li><a href="#org102671d">1.5.4. Examle(Three different titles)</a></li>
<li><a href="#orgc544de9">1.5.5. First solution</a></li>
<li><a href="#org265caf3">1.5.6. Second solution</a></li>
<li><a href="#org9ce5b24">1.5.7. Third solution</a></li>
</ul>
</li>
<li><a href="#org3a5ce82">1.6. What we know so far</a></li>
<li><a href="#orga74fe76">1.7. Unordered sets, repetitions allowed</a>
<ul>
<li><a href="#org6bf6158">1.7.1. Example 1(n=4 chosen from N = 3)</a></li>
<li><a href="#org01d6f49">1.7.2. Example 2(n=3 chosen fron N = 4)</a></li>
<li><a href="#orgae4ddb9">1.7.3. Example 3(n=5 chosen fron N = 3)</a></li>
<li><a href="#org5247b10">1.7.4. Example(Dividing the monery)</a></li>
<li><a href="#org3f4a5a1">1.7.5. Solution</a></li>
<li><a href="#orgca815c1">1.7.6. Example(Reproducing \(N^n\) )</a></li>
<li><a href="#org8e5b795">1.7.7. Solution</a></li>
</ul>
</li>
<li><a href="#org92497f3">1.8. Binomial coefficients</a></li>
</ul>
</li>
<li><a href="#org3cd9fd7">2. Chapter 2: Probability</a>
<ul>
<li><a href="#org0a9319c">2.1. Definition of probability</a>
<ul>
<li><a href="#org44ebfbc">2.1.1. The importance of the words "on average"</a></li>
</ul>
</li>
<li><a href="#org684141d">2.2. The rules of probability</a>
<ul>
<li><a href="#org271bdff">2.2.1. AND: The "intersection" probability, P(A and B)</a></li>
<li><a href="#orgba1645b">2.2.2. Example(Balls in a box)</a></li>
<li><a href="#orgf82f437">2.2.3. OR: The "union" probability, P(A or B)</a></li>
<li><a href="#org4bfaf1c">2.2.4. (In)dependence and (non)exclusiveness</a></li>
<li><a href="#org70109ab">2.2.5. Conditional probability</a></li>
</ul>
</li>
<li><a href="#orgbf31963">2.3. Examples</a>
<ul>
<li><a href="#orgc3596cb">2.3.1. The art of "not"</a></li>
<li><a href="#org2b1e6cc">2.3.2. Example(At least one 6)</a></li>
<li><a href="#orgd3950d9">2.3.3. Solution</a></li>
<li><a href="#orgecacc31">2.3.4. Picking seats</a></li>
<li><a href="#org0051ece">2.3.5. Example 1(Middle in the middle)</a></li>
<li><a href="#org714e7ff">2.3.6. 解法一:所有 \(3! = 6\) 种可能的排列顺序如下:</a></li>
<li><a href="#orgc8e270b">2.3.7. 解法二:随机分配人员到座位时,可先安排中等身高者.</a></li>
<li><a href="#org084cb2d">2.3.8. 解法三:若先安排最高者(标记为 1):</a></li>
<li><a href="#org1f40119">2.3.9. 数学表述</a></li>
<li><a href="#org95e3671">2.3.10. 直观方法(推荐):</a></li>
<li><a href="#org6daebfe">2.3.11. Example 2(Order of height in a line)</a></li>
<li><a href="#org59864dd">2.3.12. 解法一:排列计数法</a></li>
<li><a href="#org0649861">2.3.13. 解法二:条件概率法</a></li>
<li><a href="#org14c39c2">2.3.14. 公式推导:条件概率的扩展形式</a></li>
<li><a href="#org0e48a9f">2.3.15. Example 3 (Order of height in a circle)</a></li>
<li><a href="#org7b55404">2.3.16. 解法一:排列计数法</a></li>
<li><a href="#orge328342">2.3.17. 解法二:条件概率分解法</a></li>
<li><a href="#orga7a9647">2.3.18. Example 4(Three girls and three boys)</a></li>
<li><a href="#org77ce988">2.3.19. 解法一:排列计数法</a></li>
<li><a href="#org12d2862">2.3.20. 解法二:顺序概率法(女生优先入座)</a></li>
<li><a href="#orge5d9b81">2.3.21. 解法三:组合选择法</a></li>
<li><a href="#org4fc5e47">2.3.22. Socks in a drawer</a></li>
<li><a href="#org5e992c5">2.3.23. Example 1 (Two blue and two red)</a></li>
<li><a href="#org1c2cc35">2.3.24. 解法一</a></li>
<li><a href="#org1c7ef68">2.3.25. 解法二</a></li>
<li><a href="#org5ec6943">2.3.26. Example 2(Four blue and two red)</a></li>
<li><a href="#org46ea276">2.3.27. 解法一:组合计数法</a></li>
<li><a href="#orgf976a4c">2.3.28. 解法二:条件概率法</a></li>
<li><a href="#org1711788">2.3.29. Coins and dice</a></li>
<li><a href="#org1d37a92">2.3.30. Example 1(One of each number)</a></li>
<li><a href="#org66bb820">2.3.31. 解法一:排列计数法</a></li>
<li><a href="#orge2af954">2.3.32. 解法二:序贯概率乘法原理**</a></li>
<li><a href="#org09b4d4c">2.3.33. Example 2(Three pairs)</a></li>
<li><a href="#org92d21be">2.3.34. 解法:有序样本空间计数法</a></li>
<li><a href="#orgcb59295">2.3.35. Example 3(Five coin flips)</a></li>
<li><a href="#orgf58d3b5">2.3.36. 解法:有序样本空间计数法**</a></li>
<li><a href="#orgaf031b6">2.3.37. Cards</a></li>
<li><a href="#orgdc3f314">2.3.38. Example 1(Royal flush from seven cards)</a></li>
<li><a href="#orgd223345">2.3.39. 解法:组合计数法**</a></li>
<li><a href="#org01ab693">2.3.40. Example 2 (Suit full hourse)</a></li>
<li><a href="#org6954700">2.3.41. Solution</a></li>
<li><a href="#org8053c6f">2.3.42. 真正的满堂红</a></li>
<li><a href="#org926fc5c">2.3.43. Example 3 (Only two suits)</a></li>
<li><a href="#org1846db6">2.3.44. 解法一:</a></li>
<li><a href="#orgd490f95">2.3.45. 解法二</a></li>
</ul>
</li>
<li><a href="#org907d7ad">2.4. Four classic problems</a>
<ul>
<li><a href="#org9fd88d4">2.4.1. The Birthday Problem</a></li>
<li><a href="#org0e44c95">2.4.2. The Game-Show Problem</a></li>
<li><a href="#org1a97fe6">2.4.3. The Prosecutor's Fallacy</a></li>
<li><a href="#orgfa5c54d">2.4.4. The Boy/Girl Problem</a></li>
</ul>
</li>
<li><a href="#org1d27f50">2.5. Bayes' theorem</a>
<ul>
<li><a href="#org4454e0c">2.5.1. Example(False positive)</a></li>
<li><a href="#org775cab3">2.5.2. First Solution</a></li>
<li><a href="#org5a5bfaa">2.5.3. Second Solution</a></li>
</ul>
</li>
<li><a href="#org12f2ea5">2.6. Stirling's formula</a>
<ul>
<li><a href="#orgab50ca6">2.6.1. Exampe(50 out of 100)</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<div id="outline-container-org00496fe" class="outline-2">
<h2 id="org00496fe"><span class="section-number-2">1.</span> Chapter 1: Combinatorics</h2>
<div class="outline-text-2" id="text-1">
</div>
<div id="outline-container-org919fb29" class="outline-3">
<h3 id="org919fb29"><span class="section-number-3">1.1.</span> Factorials</h3>
<div class="outline-text-3" id="text-1-1">
<ul class="org-ul">
<li>每当我们遇到一个正整数N,那么我们通常会考虑1到N的乘积,这个乘积就是"N factorial", 用数学表示就是"N!"</li>
<li>当N增长的时候,N!就会增长的非常的快,比如10!=3,628,800, 20!=2.43*10^18</li>
<li>我们需要从原理上面认定0!=1,虽然0!没有意义,但是需要这个定义存在</li>
<li><p>
我们首先把整章要讲的重点的四个部分,使用图标来表示出来,大家可以在看的同时,不停的回来看这张图
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">&#xa0;</th>
<th scope="col" class="org-left">with_replacement</th>
<th scope="col" class="org-left">without_replacement</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">order_matters</td>
<td class="org-left">1-3:Ordered sets, repetitions allowed</td>
<td class="org-left">1-4:Ordered sets, repetitions not allowed(1-2:Permutation)</td>
</tr>

<tr>
<td class="org-left">order_does_not_matters</td>
<td class="org-left">1-6:Unordered sets, repetitions allowed</td>
<td class="org-left">1-5:Unordered sets, repetitions not allowed</td>
</tr>
</tbody>
</table></li>
</ul>
</div>
</div>
<div id="outline-container-orgc073ef7" class="outline-3">
<h3 id="orgc073ef7"><span class="section-number-3">1.2.</span> Permutations</h3>
<div class="outline-text-3" id="text-1-2">
<ul class="org-ul">
<li>permutaion是用来order一系列object的方法.比如我们有三个人Alice,Bob,Carol,那么下面每一列都是一种permutation(一共六种):
<ul class="org-ul">
<li>Alice,Bob,Carol</li>
<li>Alice,Carol,Bob</li>
<li>Bob,Alice,Carol</li>
<li>Bob,Carol,Alice</li>
<li>Carol,Alice,Bob</li>
<li>Carol,Bob,Alice</li>
</ul></li>
<li>我们下面会详细介绍如何count permutation</li>
</ul>
</div>
<div id="outline-container-orga08504a" class="outline-4">
<h4 id="orga08504a"><span class="section-number-4">1.2.1.</span> One object</h4>
<div class="outline-text-4" id="text-1-2-1">
<ul class="org-ul">
<li>如果我们只有一个object,那么显然只有一种方式来order它.</li>
<li>如果我们使用 \(P_N\) 来代表N个object所拥有的permutation的数量,那么 \(P_1 = 1\)</li>
</ul>
</div>
</div>
<div id="outline-container-org13b6d94" class="outline-4">
<h4 id="org13b6d94"><span class="section-number-4">1.2.2.</span> Two objects</h4>
<div class="outline-text-4" id="text-1-2-2">
<ul class="org-ul">
<li>两个对象后,稍微复杂了一点,但是也只是一点,比如如果我们使用1,2来代表两个object,那么我们可以把这两个object order如下:
<ul class="org-ul">
<li>12</li>
<li>21</li>
</ul></li>
<li>那么我们就有 \(P_2 = 2\)</li>
</ul>
</div>
</div>
<div id="outline-container-org0d46738" class="outline-4">
<h4 id="org0d46738"><span class="section-number-4">1.2.3.</span> Three objects</h4>
<div class="outline-text-4" id="text-1-2-3">
<ul class="org-ul">
<li>三个对象之后,情形就复杂了,我们使用1,2,3来代表三个object,那么order的方式有六种,换句话说就是 \(P_3=6\) :
<ul class="org-ul">
<li>123,132</li>
<li>213,231</li>
<li>312,321</li>
</ul></li>
<li>注意,我们这里把六个oder分成了三组,每组的特点是最开头的数字一样.我们后面会看到,这样group的便利性</li>
</ul>
</div>
<ol class="org-ol">
<li><a id="orgb380771"></a>Four objects<br />
<div class="outline-text-5" id="text-1-2-3-1">
<ul class="org-ul">
<li>一旦有四个对象,那么列举起来就费事了很多,但是我们借鉴三个对象时候的方法,把列举分成四组(每组的开头字
符是一样的),那么我们就得到了最终的24个permutation
<ul class="org-ul">
<li>1234,1243,1324,1342,1432,1423</li>
<li>2134,2143,2314,2341,2431,2413</li>
<li>3214,3241,3124,3142,3412,3421</li>
<li>4231,4213,4321,4312,4132,4123</li>
</ul></li>
<li>我们以最后一行为例,如果我们把4去掉,那么剩下的231,213,321,312,132,123其实就是一个3 objects的
permutation的全部数据.其他三行去掉最开始一个数字也是相同效果</li>
</ul>
</div>
</li>
<li><a id="org85be5a8"></a>Five objects<br />
<div class="outline-text-5" id="text-1-2-3-2">
<ul class="org-ul">
<li>我们一旦理解了上面的做法,那么显然我们只需要在1,2,3,4,5后面每个都添加上上诉24个permutation,那么最终
的结果就是 \(P_5 = 120\)</li>
<li><p>
最终我们就可以得到N个object的排列数目,等于N的阶乘
</p>
\begin{equation}
  P_N = N! \tag{1.3}
\end{equation}</li>
</ul>
</div>
</li>
<li><a id="org2f9c72d"></a>Question<br />
<div class="outline-text-5" id="text-1-2-3-3">
<ul class="org-ul">
<li>一共有九个客人,同时有九个位置.这九个位置分为两组,A组5个座位,B组4个座位,请问一共有多少种方法来把座
位分配给客人</li>
</ul>
</div>
</li>
<li><a id="orge1e2d57"></a>Solution<br />
<div class="outline-text-5" id="text-1-2-3-4">
<ul class="org-ul">
<li>有五种方式把一个人放到A组的位置,所以有5!种方式把五个人放到A组的位置</li>
<li>有四种方式把一个人放到B组的位置,所以有4!种方式把五个人放到B组的位置</li>
<li><p>
所以总共有2880种方式分配位置:
</p>
\begin{equation}
5! \times 4! = 2880 \notag
\end{equation}</li>
</ul>
</div>
</li>
</ol>
</div>
</div>
<div id="outline-container-org478345a" class="outline-3">
<h3 id="org478345a"><span class="section-number-3">1.3.</span> Ordered sets, repetitions allowed</h3>
<div class="outline-text-3" id="text-1-3">
<ul class="org-ul">
<li>所谓ordered set,repetitions allowed是指这么一类实验
<ul class="org-ul">
<li>假设我们有一个盒子,里面有五个标记为A,B,C,D,E的球</li>
<li>我们伸手去拿一个球,并且写下球商的字母</li>
<li>然后我们把球放回盒子里,摇晃一下(放回去说明是允许重复的),</li>
<li>然后在拿第二个球(可能和第一个球相同,说明顺序很重要),并将这个字母写在第一个字母旁边</li>
<li>这样重复N次,得到的就是我们想要的ordered set,repetitions allowed</li>
</ul></li>
<li>如果N为2,那么整个过程,我们也可以用下面的步骤来做,效果是一样的:
<ul class="org-ul">
<li>我们想象有两个盒子(一个左边盒子,一个右边盒子)</li>
<li>每个盒子都有一组相同的,标记为A,B,C,D,E的球</li>
<li>我们从每个盒子中去一个球.</li>
</ul></li>
<li>上面两种说法都有如下的三个关键点:
<ul class="org-ul">
<li>identical trails</li>
<li>with replacement</li>
<li>repetitions allowed</li>
</ul></li>
<li>想要做到identical trails,你需要把你选到的球放回去(也就是with replacement).这意味着未来抽出的球可能
和之前已经抽出的球重复(repetitions allowed). 这样一句话就把前面三个特点给总结了</li>
<li>当然,对于骰子和硬币这样的食物而言,trail本身就是天然的identical的,这意味着重复是自动允许的,因此,我们
不需要特别的讨论"放回"的问题.因为你在投骰子时,不会把上面的点数擦掉!</li>
<li>上面的五个球的例子中,如果重复被允许,且顺序被重视,我们可以选出多少种可能的字母对(pair)?更一般的说,如
果我们不只是进行两次实验,而是进行n次实验,同时我们有N个球,而不是5个球,那么又会有多少种不同的有序字母组合?</li>
<li>在N=5个球,且n=2次实验的情况下
<ul class="org-ul">
<li><p>
各种可能性如下
</p>
<pre class="example" id="orgf4ee673">
AA AB AC AD AE
BA BB BC BD BE
CA CB CC CD CE
DA DB DC DD DE
EA EB EC ED EE
</pre></li>
<li>第一次抽取有五种可能性,然后对每一种可能性,第二次抽取又有五种可能性,因此总共有5*5=25种可能的字母对</li>
</ul></li>
<li>在N=5个球,且n=3次实验的情况下,上面的"正方形"会变成"立方体",也就会有 \(5^3=125\) 种可能的字母列表</li>
<li>在N=5个球,且n=4次实验的情况下,已经不太好进行visualize了,但是也可以得到 \(5^4=625\) 种可能的字母列表</li>
<li>在N=5个球,且n=5次实验的情况下,可以得到 \(5^4=625\) 种可能的字母列表,我们已经不需要在增加n的个数,直接
就可以得到结论:当我们进行n次尝试,从一个5-letter的box里面获取字母的时候(每次会放回字母,且顺序有关系),
总共会有 \(5^n\) 种可能的取法</li>
<li>更一般的,如果我们是N个letter,而不是五个,那么所有的可能性就是 \(N^n\) 种可能取法</li>
</ul>
</div>
<ol class="org-ol">
<li><a id="org64e23bd"></a>Question<br />
<div class="outline-text-5" id="text-1-3-0-1">
<ul class="org-ul">
<li>有一个标准的六面骰子,我们投掷两次,能够得到多少种不同的结果(不同order视为不同结果)</li>
</ul>
</div>
</li>
<li><a id="org93f27b4"></a>Solution<br />
<div class="outline-text-5" id="text-1-3-0-2">
<ul class="org-ul">
<li>由于order是有关系的,所以2,5和5,2不是一种结果,又由于每次都有6种结果(且不存在放回问题,骰子永远放回),
所以两次投递的所有不同结果数目为 \(6^2=36\)</li>
</ul>
</div>
</li>
<li><a id="org3f56ce9"></a>Question<br />
<div class="outline-text-5" id="text-1-3-0-3">
<ul class="org-ul">
<li>如果投掷一个标准的硬币四次,那么讷讷够得到多少种不同的结果(不同order视为不同结果)</li>
</ul>
</div>
</li>
<li><a id="org1b957de"></a>Solution<br />
<div class="outline-text-5" id="text-1-3-0-4">
<ul class="org-ul">
<li>思路和上面的题目类似,答案为 \(2^4=16\)</li>
</ul>
</div>
</li>
</ol>
</div>
<div id="outline-container-orga449942" class="outline-3">
<h3 id="orga449942"><span class="section-number-3">1.4.</span> Ordered sets, repetitions not allowed</h3>
<div class="outline-text-3" id="text-1-4">
<ul class="org-ul">
<li>所谓ordered set,repetitions allowed是指这么一类实验
<ul class="org-ul">
<li>假设我们有一个盒子,里面有N个标记为A,B,C,D,E,&#x2026;的球</li>
<li>我们伸手去拿一个球,并且写下球商的字母</li>
<li>然后我们不要在把球放回盒子里</li>
<li>然后在拿第二个球(不可能和第一个球相同,因为没有放回),并将这个字母写在第一个字母旁边</li>
<li>这样重复n次,得到的就是我们想要的ordered set,repetitions not allowed</li>
<li>很显然,我们这里的n必须小于N \(n \leq N\)</li>
</ul></li>
<li>上面我们的讨论还是以盒子和球为例子,但是一般来说,讨论不允许放回情况的时候,我们更喜欢使用:
<ul class="org-ul">
<li>"委员会"代替"最终放置的盒子"</li>
<li>"人"代替"球"</li>
</ul></li>
<li>这是因为人都是独一无二,不会重复的.比如
<ul class="org-ul">
<li>我们不说从13个球里面选择2个球,不允许放回.</li>
<li>我没说从13个人里面选择2个人进入委员会,且进入委员会的顺序是重要的(因为第一个进入的是主席,第二个进入的是副主席)</li>
</ul></li>
</ul>
</div>
<ol class="org-ol">
<li><a id="org35891f0"></a>Example(Two chosen from five)<br />
<div class="outline-text-5" id="text-1-4-0-1">
<ul class="org-ul">
<li>从5个人里面,选择两个人进入委员会,且顺序重要(第一个人会作为主席,第二个作为副主席)</li>
</ul>
</div>
</li>
<li><a id="org355f437"></a>First Soluton<br />
<div class="outline-text-5" id="text-1-4-0-2">
<ul class="org-ul">
<li><p>
我们把五个人都分别标记为A,B,C,D,E,我们把所有可能的"有顺序的pair"列举出来,先包含重复(虽然一个人被选
做主席,外加副主席是不可能的).那么所有的列表如下
</p>
<pre class="example" id="orgc921f54">
AA AB AC AD AE
BA BB BC BD BE
CA CB CC CD CE
DA DB DC DD DE
EA EB EC ED EE
</pre></li>
<li>我们会发现,斜线的AA,BB,CC,DD,EE是我们所不需要的.那么我们就可以得到最终的结果 \(5^2-5=20\) 种有序pair</li>
<li>我们把上面的情况进行一般性总结会得到如下的结论,如果想从N个people里面选择"有序pair",那么:
<ul class="org-ul">
<li>首先把所有可能的"有序pair"列出来,不考虑重复,那么就是 \(N^2\) 种可能</li>
<li>这里面有N个重复的pair,我们不予考虑</li>
<li>总体结果就是 \(N^2-N=N(N-1)\)</li>
</ul></li>
</ul>
</div>
</li>
<li><a id="orgdc03c31"></a>Second solution<br />
<div class="outline-text-5" id="text-1-4-0-3">
<ul class="org-ul">
<li>First solution很有说服力,但是其只能把5给泛化成N,无法泛化2成n</li>
<li>Second solution就可以继续泛化2了.</li>
<li>我们假设5个人里面选取两个委员会,第一个是主席,第二个是副主席,那么:
<ul class="org-ul">
<li>第一次我们选取的时候,有五个候选人,方法是5种</li>
<li>第二次我们选取的时候,只有四个候选人了,这时候只有4种选择法</li>
<li>所以总共有 \(5 \times 4 = 20\) 种选法</li>
</ul></li>
<li>显然Secon solution可以进行更好的泛化,假设有N个人,选取其中的n个:
<ul class="org-ul">
<li>第一次有N种方法选择</li>
<li>第二次有N-1种方法选择</li>
<li>&#x2026;</li>
<li>第n次有N-(n-1)种方法选择</li>
<li>总共就有N(N-1)(N-2)&#x2026;(N-(n-1))种方法</li>
<li><p>
如果我们用 \({}_{N}P_{n}\) 来代表从N个对象里面选取n个有顺序的对象,那么我们可以有如下结论
</p>
\begin{equation}
{}_{N}P_{n} = N(N-1)(N-2)\cdots(N-(n-1)) \tag{1.5}
\end{equation}</li>
<li><p>
如果我们把1理解为 \((N-n)!/(N-n)!\) ,那么我们就有
</p>
\begin{equation}
{}_{N}P_{n} = \frac{N!}{(N-n)!} \tag{1.6}
\end{equation}</li>
</ul></li>
</ul>
</div>
</li>
</ol>
</div>
<div id="outline-container-orgf2d7aa0" class="outline-3">
<h3 id="orgf2d7aa0"><span class="section-number-3">1.5.</span> Unordered sets, repetitions not allowed</h3>
<div class="outline-text-3" id="text-1-5">
<ul class="org-ul">
<li>本节和上一节的区别很明显,就是我们从N个里面选取n个,但是这n个的顺序不再重要了.以委员会的选举为例,我们
从5个人里选取2个人进入委员会,但是这两个人只是委员而已,不会有主席副主席的区别.那么顺序就不再重要了.</li>
</ul>
</div>
<div id="outline-container-org4335403" class="outline-4">
<h4 id="org4335403"><span class="section-number-4">1.5.1.</span> Example(Two chosen from five)</h4>
<div class="outline-text-4" id="text-1-5-1">
<ul class="org-ul">
<li>从五个人里面选取两个人,且这两个人的顺序不重要,有多少种选取方式</li>
</ul>
</div>
</div>
<div id="outline-container-org83894b4" class="outline-4">
<h4 id="org83894b4"><span class="section-number-4">1.5.2.</span> First solution</h4>
<div class="outline-text-4" id="text-1-5-2">
<ul class="org-ul">
<li><p>
我们把这个五个人标记为A,B,C,D,E,我们首先把所有的pair都写出来,包括重复的(虽然人不能重复),包括不同的
order(虽然order不重要),那么我们可以得到下面的列表(列完之后,我们再去除"重复"和"顺序"):
</p>
<pre class="example" id="org891bfab">
AA AB AC AD AE
BA BB BC BD BE
CA CB CC CD CE
DA DB DC DD DE
EA EB EC ED EE
</pre></li>
<li>首先去除"重复",对角线这个明显是重复的,不需要,那么我们就剩下 \(5^2-5\) 个了</li>
<li><p>
再去除"顺序",我们可以看到,对角线去掉后,所有剩余的pair刚好分成了两份,这两份是内容相同,顺序相反的
</p>
<pre class="example" id="orgfd0f9ac">
                 AB AC AD AE
BA                  BC BD BE
CA CB                  CD CE
DA DB DC                  DE
EA EB EC ED
</pre></li>
<li>所以我们再除以2,就得到真正的"不重复,没有顺序"的pair了,所以最终的结果是 \((5^2-5)/2=10\)</li>
<li>这里的2不能泛化,但是5可以泛化成N,我们就得到:从N个对象里面找"不重复,顺序不重要的2个对象",有 \((N^2-N)/2\) 中取法</li>
</ul>
</div>
</div>
<div id="outline-container-orgb36a985" class="outline-4">
<h4 id="orgb36a985"><span class="section-number-4">1.5.3.</span> Second solution:</h4>
<div class="outline-text-4" id="text-1-5-3">
<ul class="org-ul">
<li>我们可以把选择委员会问题看成每次选择一个,那么我们第一次就有5种选法,第二次有4种选法,那么我们总共就有
\(5 \times 4 = 20\) 种选法</li>
<li>但是在这个过程中,我们把XY和YX当做了不同的结果,其实这个两个结果由于顺序不重要,其实是同一个结果.所以,
我们最终的结果要除以2,也就是 \((5 \times 4) / 2 = 10\)</li>
<li>这里只泛化5的话,我们可以得到 \(N(N-1)/2\) 其实和solution1的结果一致</li>
<li>这里其实还可以泛化n,假设我们从N个人里面选n个委员,我们考虑顺序的情况下,我们可以从公式1-6得到我们有
\(N!/(N-n)!\) 种选法</li>
<li>同时,我们还通过公式1-3知道,n个object组成的group,有n!种排列方式,我们上面的选法需要去除这n!种排列的影响.</li>
<li>怎么去重这n!种影响呢?很简单,我们的 \(N!/(N-n)!\) 种选法中,把选择了固定某些人的情况编辑为一团,那么这一
团每个的数量都是n!,而这一团其实只能算一个选法,但是它算了n!种选法.那么显然,我们要把刚才的结果除以n!
也就是 \(\frac{N!}{n!(N-n)!}\)</li>
<li>我们之前使用 \({}_{N}P_{n}\) 来代表"从N个里面选择n个,且顺序重要"的选法,这里我们用新的标识 \({}_{N}C_{n}\)
来代表"从N个里面选择n个,且不考虑顺序"</li>
<li>而这个结果 \(\frac{N!}{n!(N-n)!}\) 也有一个写法,叫做二项式系数(binomial coefficient):
<ul class="org-ul">
<li>读作"n取K(N chosse n)"</li>
<li>写作 \(\binom{N}{n}\)</li>
</ul></li>
<li><p>
那么,整个公式就可以整理为公式1-8
</p>
\begin{equation}
{}_{N}C_n \equiv \binom{N}{n} = \frac{N!}{n! (N-n)!} \tag{1.8}
\end{equation}</li>
<li><p>
举个例子,从6个人里面选择四个委员的选法有
</p>
\begin{equation}
\binom{6}{4} = \frac{6!}{4!2!}=15
\end{equation}</li>
<li>由于我们有0!=1的定义,所以:
<ul class="org-ul">
<li>当n=N的时候,公式1-8也是成立的,这个时候结果为 \(\binom{N}{N}=N!/N!0!=1\) ,意味着,我们从N个人里面挑出
来N个人的方法就只有1种</li>
<li>当n=0的时候,公式1-8也是成立的,这个时候结果为 \(\binom{N}{0}=N!/0!N!=1\) ,意味着,我们从N个人里面挑出
来0个人的方法就只有1种,就是一个都不挑</li>
</ul></li>
<li><p>
总结起来就是,不能重放的情况下,我们本节讲的"顺序不重要的从N选取n( \(_{N}C_n\) )"其实就是:
</p>
<pre class="example" id="org7b83ed5">
"顺序不重要的从N选取n( $_{N}P_n$ )"额外再除以n!,用来去除overcounting
</pre></li>
<li>我们注意到一个有趣的现象就是 \(\binom{11}{8}\) 和 \(\binom{11}{3}\) 的结果是一样的,我们可以这么理解:
<ul class="org-ul">
<li>从11个人里面选取8个人有N种方法</li>
<li>从11个人里面"剩下"3个人,也肯定能有N种方法</li>
<li>其实"剩下"3个人,就是选取8个人</li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-org102671d" class="outline-4">
<h4 id="org102671d"><span class="section-number-4">1.5.4.</span> Examle(Three different titles)</h4>
<div class="outline-text-4" id="text-1-5-4">
<ul class="org-ul">
<li>有多少种方法从十个人里面选取一个委员会,并且这个委员会里面有如下要求:
<ul class="org-ul">
<li>一个主席</li>
<li>两个副主席(顺序不重要)</li>
<li>四个委员(顺序不重要)</li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-orgc544de9" class="outline-4">
<h4 id="orgc544de9"><span class="section-number-4">1.5.5.</span> First solution</h4>
<div class="outline-text-4" id="text-1-5-5">
<ul class="org-ul">
<li>我们首先来从10个人中选取7个人,并且这个7个人是 <b>有顺序的</b>, 那么就有 \(_{10}P_{7} = 10\cdot9\cdot8\cdot7\cdot6\cdot5\cdot4\)
种方式</li>
<li>那么 \(_{10}P_{7}\) 这种方式overcount了哪些呢?
<ul class="org-ul">
<li>overcount两个副主席的顺序,多数了2!倍</li>
<li>overcount四个委员的顺序,多数了4!倍</li>
</ul></li>
<li><p>
所以最终的答案是 \(_{10}P_{7}\) 除以2!,再除以4!,公式如下
</p>
\begin{equation}
\frac{_{10}P_7}{4!2!} = \frac{10\cdot9\cdot8\cdot7\cdot6\cdot5\cdot4}{4!\cdot2!} = 12,600 \tag{1.11}
\end{equation}</li>
</ul>
</div>
</div>
<div id="outline-container-org265caf3" class="outline-4">
<h4 id="org265caf3"><span class="section-number-4">1.5.6.</span> Second solution</h4>
<div class="outline-text-4" id="text-1-5-6">
<ul class="org-ul">
<li>从一堆对象N中,不考虑顺序的获取小部分对象n的方法是 \(\binom{N}{n}\),所以我没有:
<ul class="org-ul">
<li>从10个人中选1个主席的方法总共有 \(\binom{10}{1}\)</li>
<li>从9个人中选个2个副主席的方法总共有 \(\binom{9}{2}\)</li>
<li>从7个人中选个4个委员的方法总共有 \(\binom{7}{4}\)</li>
<li><p>
那么三者相乘,就是最终的结果(我们未把4!展开,为的是能够让我们看到我们这个公式其实和1-11一样)
</p>
\begin{equation}
\binom{10}{1} \binom{9}{2} \binom{7}{4} = \frac{10}{1!} \cdot \frac{9\cdot8}{2!} \cdot\frac{7\cdot6\cdot5\cdot4}{4!} = 12,600 \tag{1.12}
\end{equation}</li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-org9ce5b24" class="outline-4">
<h4 id="org9ce5b24"><span class="section-number-4">1.5.7.</span> Third solution</h4>
<div class="outline-text-4" id="text-1-5-7">
<ul class="org-ul">
<li>我们上面是按官职从大到小进行的选取(先选主席,再选副主席,再选委员),那么我们如果按照官职从小到大选取,结果如何的,
<ul class="org-ul">
<li><p>
公式如下
</p>
\begin{equation}
\binom{10}{4} \binom{6}{2} \binom{4}{1} = \frac{10\cdot9\cdot8\cdot7}{4!} \cdot \frac{6\cdot5}{2!} \cdot\frac{4}{1!} = 12,600 \tag{1.13}
\end{equation}</li>
</ul></li>
<li>我们可以看到,我们按照官职从小到大选取(1-13)和前面的官职从大到小选取(1-12),得到的结果是一样的!</li>
<li>这也就是说,我们以什么顺序选取subpart不重要,如果愿意,我们甚至可以
<ul class="org-ul">
<li>先选取7个主席,副主席,委员.</li>
<li>然后从这7个里面选择1个主席</li>
<li>再从6个里面选择两个副主席</li>
<li><p>
然后不用选了!因为就剩下四个了.总体选的方法还是12600种,公式如下
</p>
\begin{equation}
\binom{10}{7} \binom{7}{1} \binom{6}{2} = \frac{10\cdot9\cdot8}{3!} \cdot \frac{7}{1!} \cdot\frac{6\cdot5}{2!} = 12,600 \tag{1.14}
\end{equation}</li>
</ul></li>
</ul>
</div>
</div>
</div>
<div id="outline-container-org3a5ce82" class="outline-3">
<h3 id="org3a5ce82"><span class="section-number-3">1.6.</span> What we know so far</h3>
<div class="outline-text-3" id="text-1-6">
<ul class="org-ul">
<li>我们先后讲了如下几个部分:
<ul class="org-ul">
<li><p>
N个对象的permutation
</p>
\begin{equation}
N!
\end{equation}</li>
<li><p>
Ordered sets(n objects chosen from N), with repetions allowed
</p>
\begin{equation}
N^n
\end{equation}</li>
<li><p>
Ordered sets(n objects chosen from N), with repetions NOT allowed (当n等于N的时候,就是permutation)
</p>
\begin{equation}
_{N}P_{n} = \frac{N!}{(N-n)!}
\end{equation}</li>
<li><p>
Unordered sets(n objects chosen from N), with repetitoins not allowed
</p>
\begin{equation}
_{N}C_{n}= \binom{N}{n} = \frac{N!}{n!(N-n)!}
\end{equation}</li>
</ul></li>
<li>我们先用一种方法来联系下上面的几个结果:
<ul class="org-ul">
<li>首先我们使用N!来获得一个permutation</li>
<li>然后如果我们想获得 \(_{N}P_{n}\) 的话,我们直接把截取N!的前半部分就可以了(n算中间的话)</li>
<li>如果我们想获取 \(\binom{N}{n}\) 那么我们就用 \(_{N}P_{n}\) 再除以 n!就可以了.</li>
</ul></li>
<li>我们再用另外一种方法来联系下上面的结果:
<ul class="org-ul">
<li>首先我们使用 \(N^n\) 来从N个object里面获取n个对象(允许重放),也就是 \(N \cdot N \cdot N \cdots\)</li>
<li>我们要想得到 \(_{N}P_{n}\) 我们完全可以把上面的结果,从第二次开始,每一步都减少一个(因为不允许重放,每
次的可选择数目就减少了1),那也就得到了 \(N(N-1)(N-2)\cdots\)</li>
</ul></li>
<li><p>
我们还可以用图1-3来表示上面几个结果的联系
</p>

<div id="org526567b" class="figure">
<p><img src="https://raw.githubusercontent.com/harrifeng/image/master/peb/1-3.png" alt="1-3.png" />
</p>
<p><span class="figure-number">Figure 1: </span>peb/1-3.png</p>
</div></li>
</ul>
</div>
</div>
<div id="outline-container-orga74fe76" class="outline-3">
<h3 id="orga74fe76"><span class="section-number-3">1.7.</span> Unordered sets, repetitions allowed</h3>
<div class="outline-text-3" id="text-1-7">
<ul class="org-ul">
<li>在图1-3中,N!是一个有些特殊的结果:
<ul class="org-ul">
<li>因为这个N!公式里面只有N,没有n.</li>
<li>其他的三个公式都是从N个对象里面取n个对象,所以涉及到两个n,一个大N,一个小n</li>
</ul></li>
<li>之所以出现这个N!是因为N!(也就是permutation)是 \(_{N}P_{n}\) 公式中N=n的特殊形式,所以我们可以把N!当做
\(_{N}P_{n}\) 来看待.</li>
<li><p>
于是我们就剩下三种情况,根据order是否重要和replacement是否允许,我们得到了下图
</p>

<div id="org72655dd" class="figure">
<p><img src="https://raw.githubusercontent.com/harrifeng/image/master/peb/1-10-1.png" alt="1-10-1.png" />
</p>
<p><span class="figure-number">Figure 2: </span>peb/1-10-1.png</p>
</div></li>
<li>上图中唯一缺少的,就是从N个对象里面取n个对象,order不重要,但是允许重放.这种情况相比于其他三种情况来说,
在概率中遇到的时候不如其他三种多,但是为了完整,我们还是要介绍一下</li>
<li>在介绍之前,我们还是做几个例子来找找感觉</li>
</ul>
</div>
<div id="outline-container-org6bf6158" class="outline-4">
<h4 id="org6bf6158"><span class="section-number-4">1.7.1.</span> Example 1(n=4 chosen from N = 3)</h4>
<div class="outline-text-4" id="text-1-7-1">
<ul class="org-ul">
<li>问题:从3个字母(ABC)中获取4个letter,允许重放(所以n可以大于N),order不重要有几种方法</li>
<li>问题看起来棘手,但是我们通过思考,发现如果不关注order,还允许重放,那么其实只有四种基本类型的set(注意是set,因为没有order):
<ul class="org-ul">
<li>四个字母相同的情况,比如AAAA.由于只有三个字母,所以这种情况的排列只有3个(也就是AAAA,BBBB,CCCC)</li>
<li>三个字母相同的情况,比如AAAB(因为顺序不重要,所以AAAB等同于AABA,ABAA,BAAA),由于只有三个字母,其实是从三个字母里面选择两个,所以这种情况的排列有2*3=6个</li>
<li>两个两个字母相同的情况,比如AABB.由于只有三个字母,其实是从三个字母里面选择两个(同时顺序不重要,因为AABB和BBAA是一回事,这个和AAAB不一样),所以这种情况排列有 \(\binom{3}{2}=3\) 个</li>
<li>两个字母相同,另外两个字母不同的情况,比如AABC.由于只有三个字母,其实是从三个字母里面挑一个能重复一次的,所以这种情况排列有3个</li>
<li><p>
那么我们总结起来就是15个,详细列表如下
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-right" />

<col  class="org-right" />

<col  class="org-right" />

<col  class="org-right" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">pattern</th>
<th scope="col" class="org-right">AAAA</th>
<th scope="col" class="org-right">AAAB</th>
<th scope="col" class="org-right">AABB</th>
<th scope="col" class="org-right">AABC</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">number</td>
<td class="org-right">3</td>
<td class="org-right">6</td>
<td class="org-right">3</td>
<td class="org-right">3</td>
</tr>
</tbody>
</table></li>
</ul></li>
<li>注意15可以写成 \(\binom{6}{2}\)</li>
</ul>
</div>
</div>
<div id="outline-container-org01d6f49" class="outline-4">
<h4 id="org01d6f49"><span class="section-number-4">1.7.2.</span> Example 2(n=3 chosen fron N = 4)</h4>
<div class="outline-text-4" id="text-1-7-2">
<ul class="org-ul">
<li>问题:从4个字母(ABCD)中获取3个letter,允许重放(所以n可以大于N),order不重要有几种方法</li>
<li>思路和上面的问题一样:
<ul class="org-ul">
<li>三个字母相同的情况,比如AAA,由于只有四个字母,所以这种情况排列就是4个</li>
<li>两个字母相同的情况,比如AAB,由于只有四个字母,所以是从四个字母里面选择两个有顺序的组合,那么就是 \(_{4}P_{2} = \frac{4!}{(4-2)!} = 12\)</li>
<li>三个字母完全不同的情况,比如ABC,由于只有四个字母,所以是从四个字母里面选择三个没有顺序的组合,那么就是 \(\binom{4}{3} = \frac{4!}{3!\cdot 1!} = 4\)</li>
<li><p>
那么我们总结起来就是20个,详细列表如下
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-right" />

<col  class="org-right" />

<col  class="org-right" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">pattern</th>
<th scope="col" class="org-right">AAA</th>
<th scope="col" class="org-right">AAB</th>
<th scope="col" class="org-right">ABC</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">number</td>
<td class="org-right">4</td>
<td class="org-right">12</td>
<td class="org-right">4</td>
</tr>
</tbody>
</table></li>
</ul></li>
<li>注意20可以写成 \(\binom{6}{3}\)</li>
</ul>
</div>
</div>
<div id="outline-container-orgae4ddb9" class="outline-4">
<h4 id="orgae4ddb9"><span class="section-number-4">1.7.3.</span> Example 3(n=5 chosen fron N = 3)</h4>
<div class="outline-text-4" id="text-1-7-3">
<ul class="org-ul">
<li>问题:从3个字母(ABC)中获取5个letter,允许重放(所以n可以大于N),order不重要有几种方法</li>
<li>思路和上面的问题一样:
<ul class="org-ul">
<li>五个字母相同,只有两种字母的情况,比如AAAAA,由于只有三个字母,所以这种情况排列就是3个</li>
<li>四个字母相同,只有两种字母的情况,比如AAAAB,由于只有三个字母,所以是从三个字母里面选择两个有顺序的组合,那么就是 \(_{3}P_{2} = \frac{3!}{(3-2)!} = 6\)</li>
<li>三个字母相同,只有两种字母的情况,比如AAACC,由于只有三个字母,所以是从三个字母里面选择两个有顺序的组合,那么就是 \(_{3}P_{2} = \frac{3!}{(3-2)!} = 6\)</li>
<li>三个字母相同,有三种字母的情况,比如AAABC,由于只有三个字母,所以是从三个字母里面选择两个没有顺序的组合,那么就是 \(_{3}C_{2} = \frac{3!}{(3-2)! \cdot 2!} = 3\)</li>
<li>两个字母相同,有三种字母的情况,比如AABBC,由于只有三个字母,所以是从三个字母里面选择两个没有顺序的组合,那么就是 \(_{3}C_{2} = \frac{3!}{(3-2)! \cdot 2!} = 3\)</li>
<li><p>
那么我们总结起来就是21个,详细列表如下
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-right" />

<col  class="org-right" />

<col  class="org-right" />

<col  class="org-right" />

<col  class="org-right" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">pattern</th>
<th scope="col" class="org-right">AAAAA</th>
<th scope="col" class="org-right">AAAAB</th>
<th scope="col" class="org-right">AAABB</th>
<th scope="col" class="org-right">AAABC</th>
<th scope="col" class="org-right">AABBC</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">number</td>
<td class="org-right">3</td>
<td class="org-right">6</td>
<td class="org-right">6</td>
<td class="org-right">3</td>
<td class="org-right">3</td>
</tr>
</tbody>
</table></li>
</ul></li>
<li>注意21可以写成 \(\binom{7}{2}\)</li>
<li>我们前面不厌其烦的写了三个例子,其实就是为了寻找规律,我们也最终找到了规律:
<ul class="org-ul">
<li>对于从N个对象里面选择n个对象,顺序不重要,且能放回的情况下,其最终的方法有 \(\binom{n+(N-1)}{N-1}\) 种</li>
</ul></li>
<li>前面三个例子虽然分析的很详细,但是其并不能泛化成n和N,换句话,如果n和N很大的情况下,我们无法使用上面的方法进行分析</li>
<li>下面我们可以来介绍我们可以泛化的方法了,我们首先假设N是3,n是6
<ul class="org-ul">
<li>首先,我们使用星星来代替字母,那么其实就是有6个星星</li>
<li><p>
这6个星星可以是任意的A或者B或者C,*但是* 必须是A和A挨着,B和B挨着,C和C挨着,顺序必须是先A后B,最后C,
不能有相同的字母,但是不挨着,比如下面两个AAABCC和BBBBBBC都是合理的
</p>

<div id="org23a6b36" class="figure">
<p><img src="https://raw.githubusercontent.com/harrifeng/image/master/peb/1-4.png" alt="1-4.png" />
</p>
<p><span class="figure-number">Figure 3: </span>peb/1-4.png</p>
</div></li>
<li><p>
一旦使用星星来替代字母,那么到底选哪些字母到最终的六个成员里面,就变成了这么一个选择题:如何把两个板
子插入到六个星星的七个位置,如下图
</p>

<div id="orgfca66a0" class="figure">
<p><img src="https://raw.githubusercontent.com/harrifeng/image/master/peb/1-5.png" alt="1-5.png" />
</p>
<p><span class="figure-number">Figure 4: </span>peb/1-5.png</p>
</div></li>
<li><p>
板子插入后,第一个板子前面的都是A,第一个板子和第二个板子之间的都是B,剩下的都是C. 这个分发很类似
leetcode75(给定一个包含红色、白色和蓝色、共 n 个元素的数组 nums ，原地 对它们进行排序，使得相同颜
色的元素相邻，并按照红色、白色、蓝色顺序排列。我们使用整数 0、 1 和 2 分别表示红色、白色和蓝色)我
们这里把leetcode75的代码贴一下
</p>
<div class="org-src-container">
<pre class="src src-python"><span style="color: #531ab6;">class</span> <span style="color: #005f5f;">Solution</span>:
    <span style="color: #531ab6;">def</span> <span style="color: #721045;">sortColors</span><span style="color: #000000;">(</span><span style="color: #531ab6;">self</span>, nums: List<span style="color: #dd22dd;">[</span><span style="color: #8f0075;">int</span><span style="color: #dd22dd;">]</span><span style="color: #000000;">)</span> -&gt; <span style="color: #0000b0;">None</span>:
        <span style="color: #2a5045;">"""</span>
<span style="color: #2a5045;">        Do not return anything, modify nums in-place instead.</span>
<span style="color: #2a5045;">        """</span>
        <span style="color: #005e8b;">left</span> = -1
        <span style="color: #005e8b;">right</span> = <span style="color: #8f0075;">len</span><span style="color: #000000;">(</span>nums<span style="color: #000000;">)</span>

        <span style="color: #005e8b;">i</span> = 0
        <span style="color: #531ab6;">while</span> i &lt; right:
            <span style="color: #531ab6;">if</span> nums<span style="color: #000000;">[</span>i<span style="color: #000000;">]</span> == 0:
                <span style="color: #005e8b;">left</span> += 1
                <span style="color: #005e8b;">nums</span><span style="color: #000000;">[</span><span style="color: #005e8b;">left</span><span style="color: #000000;">]</span>, <span style="color: #005e8b;">nums</span><span style="color: #000000;">[</span>i<span style="color: #000000;">]</span> = nums<span style="color: #000000;">[</span>i<span style="color: #000000;">]</span>, nums<span style="color: #000000;">[</span>left<span style="color: #000000;">]</span>
                <span style="color: #7f0000;">#   </span><span style="color: #7f0000;">l     i   r</span>
                <span style="color: #7f0000;"># </span><span style="color: #7f0000;">000|111|xxx|222</span>
                <span style="color: #7f0000;"># </span><span style="color: #7f0000;">&#19978;&#22270;&#26159;&#24403;&#21069;&#30340;&#24773;&#24418;l&#26159;left&#30340;&#20301;&#32622;,i&#26159;index&#30340;&#20301;&#32622;,r&#26159;right&#30340;&#20301;&#32622;</span>
                <span style="color: #7f0000;"># </span><span style="color: #7f0000;">&#25105;&#20204;&#21487;&#20197;&#30475;&#21040;,i&#21644;l&#20132;&#25442;&#30340;&#26102;&#20505;,&#35201;&#20040;&#20132;&#25442;&#36807;&#26469;1(1&#22823;&#20110;1&#20010;&#30340;&#24773;&#20917;).&#35201;&#20040;&#23601;&#26159;</span>
                <span style="color: #7f0000;"># </span><span style="color: #7f0000;">&#33258;&#24049;&#21644;&#33258;&#24049;&#20132;&#25442;(1&#31561;&#20110;0&#20010;)</span>
                <span style="color: #005e8b;">i</span> += 1
            <span style="color: #531ab6;">elif</span> nums<span style="color: #000000;">[</span>i<span style="color: #000000;">]</span> == 2:
                <span style="color: #005e8b;">right</span> -= 1
                <span style="color: #7f0000;">#   </span><span style="color: #7f0000;">l     i   r</span>
                <span style="color: #7f0000;"># </span><span style="color: #7f0000;">000|111|xxx|222</span>
                <span style="color: #7f0000;"># </span><span style="color: #7f0000;">&#32780;i&#21644;r&#20132;&#25442;&#30340;&#24773;&#20917;&#19979;&#30001;&#20110;i&#23567;&#20110;r,&#37027;&#20040;&#24517;&#28982;&#26159;i&#21644;&#33258;&#24049;&#20132;&#25442;(x&#31561;&#20110;1&#30340;&#24773;&#20917;)</span>
                <span style="color: #7f0000;"># </span><span style="color: #7f0000;">&#35201;&#20040;&#26159;i&#21644;x&#20132;&#25442;(x&#22823;&#20110;1&#30340;&#24773;&#20917;), &#32531;&#36807;&#26469;x&#30340;&#35805;,&#25105;&#20204;&#24517;&#39035;&#35201;&#35201;&#20877;&#26816;&#26597;x</span>
                <span style="color: #005e8b;">nums</span><span style="color: #000000;">[</span><span style="color: #005e8b;">i</span><span style="color: #000000;">]</span>, <span style="color: #005e8b;">nums</span><span style="color: #000000;">[</span>right<span style="color: #000000;">]</span> = nums<span style="color: #000000;">[</span>right<span style="color: #000000;">]</span>, nums<span style="color: #000000;">[</span>i<span style="color: #000000;">]</span>
            <span style="color: #531ab6;">else</span>:
                <span style="color: #005e8b;">i</span> += 1
        <span style="color: #531ab6;">return</span>
</pre>
</div></li>
<li><p>
那么我们的问题就转换为如何把六个星星和两个隔板进行摆放
</p>

<div id="orged56459" class="figure">
<p><img src="https://raw.githubusercontent.com/harrifeng/image/master/peb/1-6.png" alt="1-6.png" />
</p>
<p><span class="figure-number">Figure 5: </span>peb/1-6.png</p>
</div></li>
<li>上图就是两个合理的摆放,我们可以看到隔板可以选择的位置有6+3-1个,从6+3-1个位置选择两个位置,那么就得
到了有 \(\binom{8}{2}=28\) 种选择结果</li>
<li>如果我们从另外一个角度考虑,那就是从6+3-1个位置选六个位置放星星,那么我们就有\(\binom{8}{8}=28\) 种
选择结果</li>
<li><p>
上面这种方法是非常容易泛化的,比如我们有N个letter,那么我们就有N-1个bar要放到n+(N-1)个位置.或者我们
也可以说我们有n个星星要放到n+(N-1)个位置,于是就有
</p>
\begin{equation}
\binom{n+(N-1)}{N-1} = \binom{n+(N-1)}{n} \notag
\end{equation}</li>
<li><p>
泛化之后,我们再具化,看一个n=6, N=4的例子,如下
</p>

<div id="orgb6cbf84" class="figure">
<p><img src="https://raw.githubusercontent.com/harrifeng/image/master/peb/1-7.png" alt="1-7.png" />
</p>
<p><span class="figure-number">Figure 6: </span>peb/1-7.png</p>
</div></li>
</ul></li>
<li><p>
如果我们使用 \(_{N}U_{n}\) 来表达从N个对象里面选择n个对象,顺序不重要,可以重放,那么我们就有如下公式
</p>
\begin{equation}
_{N}U_{n} = \binom{n+(N-1)}{N-1} \tag{1.16}
\end{equation}</li>
<li><p>
我们也终于可以把1-10-1的图补齐成1-11-1,如下
</p>

<div id="org91a3c06" class="figure">
<p><img src="https://raw.githubusercontent.com/harrifeng/image/master/peb/1-11-1.png" alt="1-11-1.png" />
</p>
<p><span class="figure-number">Figure 7: </span>peb/1-11-1.png</p>
</div></li>
<li>我们下面再来看一类"money partitions"问题,这种问题看起来和我们本章讨论的"with replacement, order
does not matter"的问题没关系,但是其实是一回事</li>
</ul>
</div>
</div>
<div id="outline-container-org5247b10" class="outline-4">
<h4 id="org5247b10"><span class="section-number-4">1.7.4.</span> Example(Dividing the monery)</h4>
<div class="outline-text-4" id="text-1-7-4">
<ul class="org-ul">
<li>你有10张一美元的钞票，想要分给4个人。有多少种不同的分配方式？</li>
<li>例如，如果这4个人排成一排，他们可能分别得到4、0、3、3美元，或者1、6、2、1美元，又或者0、10、0、0美元等。</li>
<li>钞票是相同的，但人是不同的。因此，4、0、3、3和3、4、0、3被视为不同的分配方式。</li>
</ul>
</div>
</div>
<div id="outline-container-org3f4a5a1" class="outline-4">
<h4 id="org3f4a5a1"><span class="section-number-4">1.7.5.</span> Solution</h4>
<div class="outline-text-4" id="text-1-7-5">
<ul class="org-ul">
<li>这个问题其实可以转换为如下问题:
<ul class="org-ul">
<li>有十张一元钱</li>
<li>由四个人,标记为A,B,C,D, 每个人一旦分配到一个美元,就给美元上面写上自己的字母</li>
<li>十个美元分配后,会产生字母排列,比如CBBDCBDBAD,由于你什么时候给美元给ABCD不重要,所以CBBDCBDBAD也就
等同于ABBBBCCDDD(alphabetical排列)</li>
<li>一旦有了ABBBBCCDDD排列,我们就可以发现了,其实这就是:从N(4)个对象里面找出n(10)个对象,顺序不重要,可以重放</li>
<li><p>
那么我们也就知道了,问题的解如下
</p>
\begin{equation}
\binom{10+(4-1)}{4-1}=\binom{13}{3}=286 \tag{1.17}
\end{equation}</li>
</ul></li>
<li>除了monery partition以外,还有几种和本节介绍的"从N(4)个对象里面找出n(10)个对象,顺序不重要,可以重放"
本质是一回事,它们就是:
<ul class="org-ul">
<li>有多少种方式吧n个球扔到N个盒子里</li>
<li>有多少种方式找出N个大于等于0的整数,其和为n.换句话说就是求方程 \(x_1 + x_2 + x_3 + x_4=10\) 的非负整数解的个数</li>
</ul></li>
<li>我们再来集中考虑下1-11-1里面的两个相关的结论:
<ul class="org-ul">
<li>在允许重放的情况下,顺序有意义的结果 \(N^n\)</li>
<li>在允许重放的情况下,顺序无意义的结果 \(\binom{n+(N-1)}{N-1}\)</li>
</ul></li>
<li>我们必须从 \(\binom{n+(N-1)}{N-1}\) 里面经过分析,得出 \(N^n\) 的结果,我们使用n=4和N=3来进行解释</li>
</ul>
</div>
</div>
<div id="outline-container-orgca815c1" class="outline-4">
<h4 id="orgca815c1"><span class="section-number-4">1.7.6.</span> Example(Reproducing \(N^n\) )</h4>
<div class="outline-text-4" id="text-1-7-6">
<ul class="org-ul">
<li>\(N^n\) 的结果告诉我们，当从装有N=3个物体中​​有放回地抽取​​n=4个物体时，可能的​​有序排列​​共有3⁴=81种。现在
让我们通过分析本节开头​​例1​​中四种基本​​无序组合​类型​（AAAA、AAAB、AABB、AABC）各自对应的有序排列数量，
来验证这一结果。虽然这种方法比直接计算3⁴=81更繁琐，但通过实际验证确认其正确性并无坏处</li>
</ul>
</div>
</div>
<div id="outline-container-org8e5b795" class="outline-4">
<h4 id="org8e5b795"><span class="section-number-4">1.7.7.</span> Solution</h4>
<div class="outline-text-4" id="text-1-7-7">
<ul class="org-ul">
<li><p>
首先列一下每种组合类型中,"无顺序组合(unordered set)"的个数
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-right" />

<col  class="org-right" />

<col  class="org-right" />

<col  class="org-right" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">pattern</th>
<th scope="col" class="org-right">AAAA</th>
<th scope="col" class="org-right">AAAB</th>
<th scope="col" class="org-right">AABB</th>
<th scope="col" class="org-right">AABC</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">number</td>
<td class="org-right">3</td>
<td class="org-right">6</td>
<td class="org-right">3</td>
<td class="org-right">3</td>
</tr>
</tbody>
</table></li>
<li>我们再计算每种"无顺序组合(unordered set)"可能产生的"有顺序组合"的数值,和"无顺序组合(unordered set)"
相乘就是这种"组合类型"得到的"有顺序组合"的总值</li>
<li>足厚我们把所有"组合类型"得到的"有顺序组合"的总值相加,就得到了"可重放,有顺序"的组合结果</li>
<li>先看AAAA,这种组合类型每次只能选一个字母,所以"有顺序组合"也就是1,合计 3*1=3</li>
<li>再看AAAB,这种组合类型每次可以把B放到4个位置,所以合计是6*4=24</li>
<li>再看AABB,这种组合类型每次可以有六种排列方式(AABB,ABAB,ABBA,BAAB,BABA,BBAA),所以合计是3*6=18</li>
<li>最后看AABC,这种组合类型每次可以有12种排列方式,所以合计是3*12=36</li>
<li>总共就是3+24+18+36=81</li>
<li>正如本节开头所说,在标准概率问题中,"允许重放的无序组合"的出现频率低于1-11-1中其他三种情况.原因之一在于:
<ul class="org-ul">
<li>其他三种情况所有的组合,都是等可能出现的.</li>
<li>而"允许重复的无序组合",其每一个结果的权重是一样的(比如BBBB和ACCC权重一样),但是概率却不一样(BBBB
每出现一次,ACCC却能以'ACCC,CACC,CCAC,CCCA'的形式出现四次).</li>
</ul></li>

<li>"有放回"（或"可重复"）等同于"独立试验"，例如:
<ul class="org-ul">
<li>掷骰子</li>
<li>抛硬币</li>
<li>从有放回的盒子中抽取小球等情形。</li>
</ul></li>
<li>而"无放回"则等同于"消耗性试验"，即每次试验后可能结果的总数会减1,例如:
<ul class="org-ul">
<li>人员委员会的挑选（因为同一个人显然不能被重复选择）</li>
<li>座位分配</li>
<li>从无放回的盒子中抽取小球等案例</li>
</ul></li>
<li>"顺序重要"与"顺序无关"的区分标准，可以形象地理解为：有序对象如同排列成线，而无序对象则似聚作一团。</li>
<li><p>
根据"顺序重要与否"以及"可放回与否",我们整理了如下的图来抽象说明每种情况,请和1-11-1.png一同对比
</p>

<div id="org69c517e" class="figure">
<p><img src="https://raw.githubusercontent.com/harrifeng/image/master/peb/1-12-1.png" alt="1-12-1.png" />
</p>
<p><span class="figure-number">Figure 8: </span>peb/1-12-1.png</p>
</div></li>
<li><p>
根据"顺序重要与否"以及"可放回与否",我们整理了如下的图来举例说明每种情况,请和1-12-1.png一同对比
</p>

<div id="org8cde42b" class="figure">
<p><img src="https://raw.githubusercontent.com/harrifeng/image/master/peb/1-13-1.png" alt="1-13-1.png" />
</p>
<p><span class="figure-number">Figure 9: </span>peb/1-13-1.png</p>
</div></li>
</ul>
</div>
</div>
</div>
<div id="outline-container-org92497f3" class="outline-3">
<h3 id="org92497f3"><span class="section-number-3">1.8.</span> Binomial coefficients</h3>
</div>
</div>
<div id="outline-container-org3cd9fd7" class="outline-2">
<h2 id="org3cd9fd7"><span class="section-number-2">2.</span> Chapter 2: Probability</h2>
<div class="outline-text-2" id="text-2">
</div>
<div id="outline-container-org0a9319c" class="outline-3">
<h3 id="org0a9319c"><span class="section-number-3">2.1.</span> Definition of probability</h3>
<div class="outline-text-3" id="text-2-1">
<ul class="org-ul">
<li>概率给了"某种事情多大概率发生"的一种度量
<ul class="org-ul">
<li><p>
概率可以有如下的定义:
</p>
<pre class="example" id="org4372b57">
概率定义:
考虑对某种可重复的过程进行大量的实验:比如抛硬币,掷筛子,从盒子中取球(可放回).
如果特定事件(如出现正面,抛出5点,取出的球为蓝色)发生的概率为p,那么,这个事件在平均情况下,
将在p比例的试验中发生
</pre></li>
<li><p>
其英文定义如下:
</p>
<pre class="example" id="orgdf0c9c2">
DEFINITION OFPROBABILITY:
Consider a very large number of identical trials of a certain process;
for example, flipping a coin, rolling a die, picking a ball from a box
(with replacement), etc. If the probability of a particular event
occurring(for example, getting a Heads, rolling a 5, or picking a blue
ball)is p, then the event will occur in a fraction p of the trails, on average
</pre></li>
</ul></li>
<li>一些概率的例子如下:
<ul class="org-ul">
<li>抛硬币时出现正面的概率是1/2(50%),之所以如此,是因为出现正面和反面的可能性相同,这意味着平均而言这
两种结果必然各占一半</li>
<li>掷一枚标准骰子出现5点的概率是1/6.之所以成立,是因为掷出1点,2点,3点,4点,5点或6点的可能性均等,
这意味着平均而言这六种结果应当各占六分之一.</li>
<li>若盒中有三个红球和七个蓝球,则抽中红球与蓝球的概率分别为3/10和7/10.该结论基于以下事实:十个球被
抽中的概率均相等(至少我们如此假设),这意味着平均而言每个球被抽中的概率为十分之一.由于红球有三个,
因此抽中红球的概率平均为3/10;同理蓝球有七个,故抽中蓝球的概率平均为7/10</li>
</ul></li>
<li>上面的定义和例子中,我们多次提到了on average(平均而言),我们下面需要详细解释下这个词的意义.</li>
<li><p>
涉及到概率问题的时候,有这么一个特性,那就是:若存在多种不同的可能结果(outcome),那么这些可能结果(outcome)
的概率相同.
</p>
<pre class="example" id="org568cdb6">
Many probabilistic situations have the property that they involve a number
of different possible outcomes, all of which are qually likely
</pre></li>
<li>outcome equally likely的例子有很多:
<ul class="org-ul">
<li>抛硬币时,正面与反面出现的可能性相等</li>
<li>掷骰子时,1至6点出现的可能性相等;</li>
<li>从盒中抽取十个球时,每个球被抽中的可能性相等.</li>
</ul></li>
<li>在outcome equally likely的情况下,
<ul class="org-ul">
<li><p>
特定事件发生的概率公式为
</p>
\begin{equation}
p = \frac{number of desired outcomes}{total number of possible outcomes} \tag{2.1}
\end{equation}</li>
<li>注意, equally likely作为前提是必须要满足的.但是这个应该不成问题,因为我们研究的主要对象permutation
和subgroup问题都支持这个assumption: all of the possible outcomes are equally likely</li>
</ul></li>
<li>那么这样一来,计算概率就简化为如下两个步骤:
<ul class="org-ul">
<li>统计(counting)出期望结果的数量</li>
<li>统计(counting)出所有可能结果的数量</li>
</ul></li>
<li>计算概率的例子有:
<ul class="org-ul">
<li>抛硬币时,得到偶数的概率是1/2, 因为期望结果(偶数)有3个(2,4,6), 而所有可能的结果有6个</li>
<li>从盒中抽取十个球时,抽中红球的概率是3/10,因为期望结果(红球)有3个,而所有可能的结果有10个</li>
</ul></li>
<li>上面的例子中,统计过程(counting)都很简单,但是之后我们遇到的统计过程(counting)会很复杂,这也是我们第一
章花费如此多时间的原因</li>
<li>在概率这个领域,如下三个词经常会相互替代:
<ul class="org-ul">
<li>probability(概率)</li>
<li>chance(几率)</li>
<li>odds(赔率)</li>
</ul></li>
<li>上面两个钟的probability和chance是同义词,比如下面两句话完全相等:
<ul class="org-ul">
<li>There is a 30% chance that the bus will be late</li>
<li>There is a 30% probability that the bus will be late</li>
</ul></li>
<li>odds(赔率)则有完全不一样的意义:
<ul class="org-ul">
<li>若某事件发生的概率为p,则其发生的赔率定义为:p比(1-p)</li>
<li>换言之,赔率是事件发生概率p,与事件不发生概率(1-p)的比值</li>
<li>实际应用中,概率p与1-p通常乘以最小整数系数一转化为整数比,例如赔率 \(\frac{1}{3}:\frac{2}{3}\) 一般写作1:2</li>
</ul></li>
</ul>
</div>
<div id="outline-container-org44ebfbc" class="outline-4">
<h4 id="org44ebfbc"><span class="section-number-4">2.1.1.</span> The importance of the words "on average"</h4>
<div class="outline-text-4" id="text-2-1-1">
<ul class="org-ul">
<li>上面的定义中包含了"平均而言(on average)"这一表述,这个词语非常重要,如果省略他们,转而采用类似如下的定
义"若某事件的发生概率为p,则该事件在试验中恰好(exactly)以比例p发生",那么会让我们的定义完全没有意义.
上述没有on average的定义的问题在于:
<ol class="org-ol">
<li>次数非整数的问题:以骰子投递为例,若以上述有缺陷的定义,一次投掷中,我们将得到1/6个1点,1/6个2点&#x2026;,
这显然是荒谬的&#x2013;你不可能投掷出1/6个1点:单次投递中1点出现的次数只能是0或1</li>
<li>多次重复实验问题:还是以骰子投递为例,若以上述有缺陷的定义,假设我们刚好投递六次,那么得到1点的次数
看似稍好(因为是整数),但是其实还是错误的,因为若我们的试验进行了六次,你会发现结果绝对不可能保证六
个点各出现一次(只是有可能出现每个点出现一次,而不是绝对),更可能的情况是某些点出现多次,而其他点数
则根本不会出现</li>
</ol></li>
<li>本质上,在少量试验(例如六次)中,各类事件发生的频率很可能与理论概率差异显著.这正是原始定义中强调
"极大数量(very large number)"的原因所在.关键在于:若投掷骰子足够多次,每个点数出现的频率将近似等
于1/6.且投掷次数越多,频率通常越接近1/6</li>
<li>在第5章中,我们将解释为何随着试验次数增加,事件发生的频率会越来越接近实际概率值.目前请先接受这一
结论:若抛硬币100次,出现正面(Heads)次数为49,50或51的概率并不算高&#x2013;实际约为24%.这表明频率有相当
概率会适度偏离理论值1/2.然而,若抛硬币100,000次,则正面出现频率落在49%至51%之间的概率高达99.999999975%.
这意味着频率几乎不可能显著偏离1/2.若进一步增加抛掷次数至10⁹(十亿次),这一现象将更加显著:正面频
率落在49.99%至50.01%狭窄区间的概率同样为99.999999975%.我们将在第5.2节详细讨论此类现象.关于"平均
而言"的更多论述,请参见附录A的最后一节.</li>
</ul>
</div>
</div>
</div>
<div id="outline-container-org684141d" class="outline-3">
<h3 id="org684141d"><span class="section-number-3">2.2.</span> The rules of probability</h3>
<div class="outline-text-3" id="text-2-2">
<ul class="org-ul">
<li>到目前为止,我们讨论的都只是单一事件的概率,例如:掷骰子得到一个偶数,抛硬币得到一次正面(Heads),</li>
<li>或者从盒子里摸到一个蓝球.</li>
<li>现在我们将考虑两个(或更多)事件.我们可以提出的合理问题包括:
<ul class="org-ul">
<li>这两个事件同时发生的概率是多少?</li>
<li>或者这两个事件中任意一个发生的概率是多少?</li>
</ul></li>
</ul>
</div>
<div id="outline-container-org271bdff" class="outline-4">
<h4 id="org271bdff"><span class="section-number-4">2.2.1.</span> AND: The "intersection" probability, P(A and B)</h4>
<div class="outline-text-4" id="text-2-2-1">
<ul class="org-ul">
<li>我们假设A和B是两个Event</li>
<li>例子一如下,我们投掷两个骰子:
<ul class="org-ul">
<li>A={在左边的骰子得到2}</li>
<li>B={在右边的骰子得到5}</li>
</ul></li>
<li>例子二如下,我们从一个盒子里面取球:
<ul class="org-ul">
<li>A={第一次从盒子里面得到一个红色的球}</li>
<li>B={不要把第一次得到的球放进来的情况下,再从盒子里面得到一个蓝色的球}</li>
</ul></li>
<li>如果我们对第一章熟悉的话,我们会发现上面两个例子中:
<ul class="org-ul">
<li>第一个例子是with replacement的,因为两个骰子都能得到六个值</li>
<li>第二个例子是without replacement,因为我们没有把第一个红球放回去.eventA和eventB选取的范围不一样(第
二次少一个球可选)</li>
</ul></li>
<li>有了这两个例子,我们就会有问题: A和B同时发生的概率是多少?为了回答这个问题,我们要分成两种情况:
<ul class="org-ul">
<li>A和B是独立事件(independent event)</li>
<li>A和B是依赖事件(dependent event)</li>
</ul></li>
</ul>
</div>
<ol class="org-ol">
<li><a id="org525ff51"></a>Independent events<br />
<div class="outline-text-5" id="text-2-2-1-1">
<ul class="org-ul">
<li>如果两个事件互不影响,或者更准确地说,如果一个事件的发生不会影响另一个事件发生的概率,那么这两个事
件就被称为相互独立(independent)的.</li>
<li>上面的第一个例子就是independent的:
<ul class="org-ul">
<li>A={在左边的骰子得到2} 的概率是1/6</li>
<li>B={在右边的骰子得到5} 的概率也是1/6,其概率和eventA没有任何关系,无论A骰子是否投递出2,都不会影响B
骰子投递出5.</li>
</ul></li>
<li>插入一句,上面的第二个例子就不是independent的了,我们后面会讲到</li>
<li>我们继续回来将independent event,独立事件的另一个例子是从一副牌中抽取一张牌:
<ul class="org-ul">
<li>A = {抽到的牌是国王牌}: 同样,抽到国王牌的概率是 1/13,这个概率不受这张牌是否是红心牌的影响</li>
<li>B = {抽到的(同一张)牌是红心牌}: 抽到红心牌的概率是 1/4,这个概率也不受这张牌是否是国王牌的影响.</li>
</ul></li>
<li>注意:即使我们只抽取一张牌,也可以定义两个不同的事件.这张牌具有两个属性(它的花色和它的点数),我们可
以为其中每一个属性定义一个事件</li>
</ul>
</div>
</li>
<li><a id="org4008912"></a>REMARK<br />
<div class="outline-text-5" id="text-2-2-1-2">
<ul class="org-ul">
<li>我们在概率论里面要区分如下两个概念:
<ul class="org-ul">
<li>结果(outcome): 所谓outcome,是指实验的结果,比如,我们从一副牌取一张牌,那么就有52种可能的结果</li>
<li>事件(event): 所谓event,是一组outcome的集合,比如,一个event可以是"抽到一张红心牌".这个事件包含 13
个outcome,即所有 13 张红心牌.</li>
</ul></li>
<li>event可以包含多种数目的outcome:
<ul class="org-ul">
<li>包含0个outcome的event叫做empty set</li>
<li>包含所有outcome的event就爱做sample space</li>
<li>event还可以包含1到N-1(N是所有outcome的数目)个outcome</li>
</ul></li>
<li>我们下面来了解下independent event公式:
<ul class="org-ul">
<li><p>
如果事件A和B是独立的,那么这两个事件同时发生的概率是两者概率的乘积
</p>
\begin{equation}
P(A \text{ and } B) = P(A) \cdot P(B) \tag{2.2}
\end{equation}</li>
<li><p>
我们把上面的公式应用的例子一,那么左边骰子数目2,右边骰子数目5的概率是
</p>
\begin{equation}
P(\text{2 and 5}) = P(2) \cdot P(5) = \frac{1}{6} \cdot \frac{1}{6} = \frac{1}{36} \tag{2.3}
\end{equation}</li>
</ul></li>
<li>我们来解释下公式2-2背后的逻辑,我们的一次实验包含投掷两次骰子,假设我们进行N(N足够大)次上述实验过程,
并且把骰子的结果以一个有序的整数对的形式呈现,那么平均而言:
<ul class="org-ul">
<li>第一个数字为2的结果总数是 \(\frac{1}{6} \cdot N\)</li>
<li><p>
现在,我们只关注这批"第一个数字为2"的结果组,忽略其他结果,在这些结果中,平均有 \(\frac{1}{6}\) 的比例
其第二个数字为5. 这个结论是从事件的独立性定理获得的:
</p>
<pre class="example" id="org5ffa8d1">
对于第二次投递骰子而言,这组第一个数字为2的1/6*N次实验,和其他第一个
为1,3,4,5,6的1/6*N次实验并无区别,因此第二次投出5的概率依然是1/6
</pre></li>
<li>综合起来考虑,同时满足第一个数字为2,第二个数字为5的实验次数,平均为 \(\frac{1}{6} \cdot (\frac{1}{6} \cdot N)\) 次</li>
</ul></li>
<li>我们还可以使用图片来思考公式2-2
<ul class="org-ul">
<li><p>
图2-1
</p>

<div id="orgc985e1b" class="figure">
<p><img src="https://raw.githubusercontent.com/harrifeng/image/master/peb/2-1.png" alt="2-1.png" />
</p>
<p><span class="figure-number">Figure 10: </span>peb/2-1.png</p>
</div></li>
<li>我们可以看到,在水平线以上的40%,是B发生的概率</li>
<li>我们还可以看到,在竖线以左的20%,是A发生的概率</li>
<li>我们发现无论是否有A,B都是40%概率,而且无论是否有B,A都是20%概率</li>
<li>并且最暗的部分就是A和B同时发生的概率,也就是0.2*0.4=0.08(注意,这里我们需要assuming that the area
of a region gives the probabilit that an outcome located in that region occurs)</li>
</ul></li>
</ul>
</div>
</li>
<li><a id="orgc47640c"></a>Dependent events<br />
<div class="outline-text-5" id="text-2-2-1-3">
<ul class="org-ul">
<li>若两个事件相互影响,或更精确地说,若一个事件的发生会影响另一个事件发生的概率,则称这两个事件为依赖事件</li>
<li>上面的例子二就是一个依赖事件:
<ul class="org-ul">
<li>盒子里面总共有3个篮球,2个红球</li>
<li>A={第一次从盒子里面得到一个红色的球}</li>
<li>B={不要把第一次得到的球放进来的情况下,再从盒子里面得到一个蓝色的球}</li>
</ul></li>
<li>如果A事件发生,那么B的发生概率就是3/4,因为只有1个红球,3个蓝球了</li>
<li>如果A事件不发生,那么B的发生概率就是2/4,因为有2个红球,2个蓝球</li>
<li>下面就是依赖事件的"And" rule: 如果事件A和事件B是依赖事件,那么他们同时发生的概率等于
<ul class="org-ul">
<li><p>
公式2-5
</p>
\begin{equation}
P(A \text{ and } B)=P(A) \cdot P(B|A) \tag{2.5}
\end{equation}</li>
<li>上面公式里面的P(B|A)就是条件概率,其意思是"A发生情况下的B发生的概率"</li>
</ul></li>
<li>公式(2.5)的逻辑基础如下:
<ul class="org-ul">
<li>考虑一个给定过程进行 N 次试验(N 极大).在上述盒子抽球的设定中,每次"试验"包含无放回地连续抽取两个球.</li>
<li>平均而言,首次抽到红球的次数为 \(P(A) \cdot N\)</li>
<li>现在我们仅关注这批"首次抽到红球"的结果,忽略其余结果:
<ol class="org-ol">
<li>根据 P(B|A) 的定义,在这些结果中,第二次抽到蓝球的比例为 P(B|A)</li>
<li>因此,A 和 B 同时发生的次数为 P(B|A)⋅P(A)⋅N.</li>
<li>由于总试验次数为 N,A 和 B 同时发生的结果比例平均为 P(A)⋅P(B|A).该比例即为 A 和 B 同时发生的概率,与公式(2.5)一致.</li>
</ol></li>
<li><p>
上述推理等价于公式2-6
</p>
\begin{equation}
\frac{n_{A \cap B}}{N} = \frac{n_A}{N} \cdot \frac{n_{A \cap B}}{n_A} \tag{2.6}
\end{equation}</li>
<li>公式2-6的左边就是 \(P(A \text{ and } B)\), 公式2-6的右边就是 \(P(A) \cdot P(B|A)\). 所以我们的公式2-6就完全等价于2-6</li>
</ul></li>
<li>概率中还非常常见的一种图示是韦恩图
<ul class="org-ul">
<li><p>
和图2-1相同功能的图2-3就是一个韦恩图
</p>

<div id="org3eb3aec" class="figure">
<p><img src="https://raw.githubusercontent.com/harrifeng/image/master/peb/2-3.png" alt="2-3.png" />
</p>
<p><span class="figure-number">Figure 11: </span>peb/2-3.png</p>
</div></li>
<li>注意:我们使用图 2-3 仅是为了展示其定性特征(qualitative features),因此我们将各个区域绘制成一般
的形状(general blobs),而不是像图 2-1 中用于定量计算(quantitative calculation)的特定矩形</li>
<li>图中最暗的部分也就是A和B都发生的部分,也就是P(B|A)</li>
<li>由于两个set的交集通常用 \(A \cap B\) 来表示,所以上图中的 \(P(A \text{ and } B\) 也就会被表示为 \(P(A \cap B)\)</li>
<li><p>
A和B的顺序并不重要.我们完全可以互换字母并写作 \(P(B \text{ and } A) = P(B) \cdot P(A|B)\) ,同时,
我们知道 \(P(B \text{ and } A) = P(A \text{ and } B)\),因为当你说两个事件都发生时,先说哪个事件无
关紧要.因此我们也可以写作 \(P(A \text{ and } B) = P(B) \cdot P(A|B)\).将此式与式 (2.5) 结合,我们
看到在贝叶斯公式中非常有用的公式2-9
</p>
\begin{align}
P(A \mathrm{~and~} B) &= P(A) \cdot P(B|A) \nonumber \\
                       &= P(B) \cdot P(A|B). \tag{2.9}
\end{align}</li>
</ul></li>
</ul>
</div>
</li>
</ol>
</div>
<div id="outline-container-orgba1645b" class="outline-4">
<h4 id="orgba1645b"><span class="section-number-4">2.2.2.</span> Example(Balls in a box)</h4>
<div class="outline-text-4" id="text-2-2-2">
<ul class="org-ul">
<li>我们来使用实际例子来展示下公式2-5,假设有两个event:
<ul class="org-ul">
<li>A = {第一次从盒中取出红色的球},这里用Red_1指代</li>
<li>B = {第二次从盒中取出蓝色的球,并且不把第一次取到的球放回},这里用Bule_2指代</li>
</ul></li>
<li>由于一开始有2个红球和3个篮球在盒中里,所以我们还有如下结论:
<ul class="org-ul">
<li>我们知道P(Blue_2|Red_1)=3/4</li>
<li>我们还知道P(Red_1)=2/5</li>
<li><p>
那么根据公式2-5,我们就有
</p>
\begin{equation}
P(Red_1 \text{ and } Blue_2) = P(Red_1) \cdot P(Blue_2|Red_1) = \frac{2}{5} \cdot \frac{3}{4} = \frac{3}{10} \tag{2.10}
\end{equation}</li>
</ul></li>
<li>有了 \(P(Red_1 \text{ and } Blue_2)=\frac{3}{10}\) 这个结论之后,我们可以用最朴素的方式来验证一下其是
否正确.验证的方法就是列出所有的可能pair,并且找出Red_1和Blue_2的pair,然后看比例是否是3/10
<ul class="org-ul">
<li>我们首先假设1,2,3,4,5是五个球</li>
<li>1,2为红色,3,4,5为蓝色</li>
<li><p>
然后就有如下列表,有四个象限代表红色第一,红色第二,蓝色第一,蓝色第二
</p>

<div id="orgb379203" class="figure">
<p><img src="https://raw.githubusercontent.com/harrifeng/image/master/peb/2-1-1.png" alt="2-1-1.png" />
</p>
<p><span class="figure-number">Figure 12: </span>peb/2-1-1.png</p>
</div></li>
<li>我们会发现上面表格的意思是第一个选择了Red,那么就可能选择1做第一个,或者2做第一个,所以Red First这
一个column就是1或者2开头(其他column或者line类似)</li>
<li>但是因为不能有11,22这种,因为我们的抽取是无放回的,不能有的"11,22"这种我们使用"-"表示</li>
<li>左下角就是我们想要的红球第一个被选中,蓝球第二个被选中的情况,有六种可能,而由于总共是20种可能,所以
得到 \(P(Red_1 \text{ and } Blue_2)=\frac{3}{10}\) 和 公式2-10结论一致</li>
<li>我们还能从图中得到P(Red_1)的值为8/20=2/5,因为左侧一共有8个可能的pair</li>
<li>我们还能从图中得到P(Blue_2|Red_1)的值为6/8=3/4, 因为这个概率的sample space就是左侧一共8个,而这8
个中有6个球是蓝色的</li>
<li>我们甚至可以来验证公式2-9,其中:
<ol class="org-ol">
<li>P(Blue_1)=12/20=3/5</li>
<li>P(Red_2|Blue_1)=6/12=1/2</li>
<li>\(P(Red_2 \text{ and } Blue_1) = \frac{3}{5} \cdot \frac{1}{2} = \frac{3}{10} = P(Red_1 \text{ and } Blue_2)\)</li>
</ol></li>
</ul></li>
<li>我们从上面的例子中还可以看出一个重要的结论,那就是:
<ul class="org-ul">
<li>如果A和B是独立的(indepenent),那么 \(P(B|A) = P(B)\)</li>
<li><p>
我们先看公式2-2
</p>
\begin{equation}
P(A \text{ and } B) = P(A) \cdot P(B) \tag{2.2}
\end{equation}</li>
<li><p>
我们再看公式2-5
</p>
\begin{equation}
P(A \text{ and } B) = P(A) \cdot P(B|A) \tag{2.5}
\end{equation}</li>
<li>我们显然会发现,由于左边相等,那么就有在A和B独立的情况下=&gt; \(P(B|A) = P(B)\)</li>
</ul></li>
<li><p>
更进一步的,我们从\(P(B|A) = P(B)\) 推断出 \(P(A|B) = P(A)\)
</p>
\begin{equation}
\begin{split}
P(A) \cdot P(B|A) &= P(B) \cdot P(A|B) \\
\implies P(A) \cdot P(B) &= P(B) \cdot P(A|B) \\
\implies P(A) &= P(A|B).
\end{split} \tag{2.11}
\end{equation}</li>
</ul>
</div>
</div>
<div id="outline-container-orgf82f437" class="outline-4">
<h4 id="orgf82f437"><span class="section-number-4">2.2.3.</span> OR: The "union" probability, P(A or B)</h4>
<div class="outline-text-4" id="text-2-2-3">
<ul class="org-ul">
<li>假设A和B是两个event,我们想知道两者之一发生的概率,也就是P(A or B),那我们我们需要根据下面情况的不同
进行不同的判断:
<ul class="org-ul">
<li>A和B是exclusive event的</li>
<li>A和B是nonexclusive event的</li>
</ul></li>
</ul>
</div>
<ol class="org-ol">
<li><a id="orgc35af46"></a>Exclusive events<br />
<div class="outline-text-5" id="text-2-2-3-1">
<ul class="org-ul">
<li>两个事件若互斥,是指其中一个事件的发生会排除另一个事件的发生.即它们不可能同时发生.例如:
<ul class="org-ul">
<li>掷一枚骰子时:A={在骰子1上,掷出数字2},B={还是在骰子1上,掷出数字5}.这两个事件互斥,因为一个数字不可能既是2又是5.</li>
<li>从一副牌中抽取单张扑克牌:A={抽中方块},B={抽中红心}.这两个事件同样互斥,因为同一张牌不可能既是方块又是红心</li>
</ul></li>
<li><p>
对于exclusive event来说,其"Or"规则是:
</p>
<ul class="org-ul">
<li><p>
如果A和B是互斥的,name两者有一个发生的概率,就是两者单独发生概率之和
</p>
\begin{equation}
P(A \text{ or } B) = P(A) + P(B) \tag{2.14}
\end{equation}</li>
<li>公式2-14会引入另外一个重要的"Not"规则,我们把B换成(not A)得到如下结果</li>
</ul>
\begin{equation}
\begin{split}
P(A \text{ or (not } A \text{)}) &= P(A) + P(\text{ not } A) \\
\implies 1 &= P(A) +  P(\text{not} A) \\
\implies P(\text{not }A) &= 1- P(A).
\end{split} \tag{2.17}
\end{equation}</li>
</ul>
</div>
</li>
<li><a id="orgd423713"></a>Nonexclusive events<br />
<div class="outline-text-5" id="text-2-2-3-2">
<ul class="org-ul">
<li>如果这两个event,有可能同时发生,那么我们就说这两个event是nonexclusive的(互不排斥事件),例子如下:
<ul class="org-ul">
<li>掷一枚骰子时,事件A = {掷出偶数(即2,4或6)},事件B = {掷出3的倍数(即3或6)}.若掷出6,则A和B同时发生.</li>
<li>从一副牌中抽一张牌时,事件A = {抽到国王牌},事件B = {抽到红心花色牌}.若抽中红心K,则A和B同时发生.</li>
</ul></li>
<li>对nonexclusive 的"Or rule"如下:
<ul class="org-ul">
<li><p>
如果A和B是nonexclusive,那么他们其中一个发生的概率等于两者概率的和减去两者同时发生的概率
</p>
\begin{equation}
P(A \text{ or } B) = P(A) + P(B) - P(A \text{ and } B) \tag{2.18}
\end{equation}</li>
<li><p>
公司2-18的韦恩图如下
</p>

<div id="org4e9f347" class="figure">
<p><img src="https://raw.githubusercontent.com/harrifeng/image/master/peb/2-6.png" alt="2-6.png" />
</p>
<p><span class="figure-number">Figure 13: </span>peb/2-6.png</p>
</div></li>
<li>公式(2.18)背后的逻辑本质上就是图2-6表达的内容.该公式所表达的规则是:区域A和区域B的并集面积等于
它们各自面积之和减去它们重叠部分的面积.之所以需要做这个减法,是为了避免重复计算同时属于A和B的那个重叠区域.</li>
</ul></li>
<li>由于A or B在图2-6中,其实就是A region和B region的"合集",同时合集在数学中往往以 \(\cup\) 表示
<ul class="org-ul">
<li><p>
所以我们可以如下表示or的关系
</p>
\begin{equation}
P(A \cup B) \equiv P(A \text{ or } B) \tag{2.19}
\end{equation}</li>
</ul></li>
</ul>
</div>
</li>
</ol>
</div>
<div id="outline-container-org4bfaf1c" class="outline-4">
<h4 id="org4bfaf1c"><span class="section-number-4">2.2.4.</span> (In)dependence and (non)exclusiveness</h4>
<div class="outline-text-4" id="text-2-2-4">
<ul class="org-ul">
<li>两个event是要么independent的,要么dependent的, 同时,两个event要么是exclusive,要么是nonexclusive的,
那么自由组合就有4种可能性,我们下面来分别讨论一下他们</li>
</ul>
</div>
<ol class="org-ol">
<li><a id="org6d71cdf"></a>Exclusive and Independent<br />
<div class="outline-text-5" id="text-2-2-4-1">
<ul class="org-ul">
<li>这种组合是不存在的,可以从两个方面进行论证:</li>
<li>论证一(基于联合概率):
<ul class="org-ul">
<li>若两事件独立,则它们的概率互不影响,这意味着两者同时发生的概率非零(即等于各自概率的乘积).</li>
<li>但是,互斥要求同时发生概率为零, 因此,它们不可能互斥</li>
</ul></li>
<li>论证二(基于条件概率):
<ul class="org-ul">
<li>若事件A与B互斥,则在A发生的条件下B发生的概率为零,即 P(B∣A)=0.</li>
<li>但若它们同时独立,则 B 发生的概率应独立于 A 的发生,即 P(B)=P(B∣A)</li>
<li>由此推出:P(B)=P(B∣A)=0.这意味着 B 是一个概率恒为零的事件&#x2013;此类事件在概率论中毫无实际意义,因为
它永远不会发生</li>
</ul></li>
<li><p>
除了这些严谨的论证,我们还可以用自己的语言理解一下这组合不存在的原因
</p>
<pre class="example" id="orgc1da1a8">
一旦两个事件是互斥的,那么一个发生,就意味着另外一个"一定不发生","一定不发生"就是一种非常强的"依赖(depend)"关系
</pre></li>
</ul>
</div>
</li>
<li><a id="org1c648db"></a>Exclusive and Dependent<br />
<div class="outline-text-5" id="text-2-2-4-2">
<ul class="org-ul">
<li>这种组合是存在的</li>
<li>一个例子如下:
<ul class="org-ul">
<li>A={在一个骰子下投出了2}</li>
<li>B={同一次投掷,在同一个骰子下投出了5}</li>
<li>A发生的时候,B不可能发生,因为是同一次投掷,所以是互斥的.</li>
<li>又由于一旦A发生了,那么B就不可能发生,显然the occurrence of one event certainly affects the
probability of the other occurring,所以是dependent的</li>
</ul></li>
<li><p>
总结起来就是,一旦两个event是互斥的,那么他们一定是互相依赖的
</p>
<pre class="example" id="org915c324">
If two events are exclusive, then they are necessarily also dependent
</pre></li>
</ul>
</div>
</li>
<li><a id="org1737725"></a>Nonexclusive and Independent<br />
<div class="outline-text-5" id="text-2-2-4-3">
<ul class="org-ul">
<li>这种组合是存在的</li>
<li>一个例子如下:
<ul class="org-ul">
<li>A={在一个骰子下投出了2}</li>
<li>B={在另外一个骰子下投出了5}</li>
<li>A和B由于是两次投掷(因为是不同的骰子),所以必然是独立的</li>
<li>A和B也是可以同时发生的,A投掷出2,B投掷出5,这个组合很正常.也就是是或存在A和B同时发生的可能性.其实
如果认真读了Exclusive and Independent部分,就能知道.一旦两个event independent了,那么必然两个event
有"重叠"的部分(同时发生的概率是一个乘积,不能为0),也就意味着两个event不会互斥!</li>
</ul></li>
<li><p>
总结起来就是,一旦两个event是独立的,那么他们一定不是互斥的!
</p>
<pre class="example" id="orgb629823">
If two events are independent, then they are necessarily also nonexclusive
</pre></li>
</ul>
</div>
</li>
<li><a id="orgfeae01b"></a>Nonexclusive and dependent<br />
<div class="outline-text-5" id="text-2-2-4-4">
<ul class="org-ul">
<li>这种组合是存在的</li>
<li>一个例子如下:
<ul class="org-ul">
<li>A={在一个骰子下投出了2}</li>
<li>B={同一次投掷,在同一个骰子下投出了偶数}</li>
<li>这个例子好在B是A的一个"超集",那么B包裹A,所以B和A肯定不是互斥的</li>
<li>又由于A的发生一定会影响到B,因为A发生了B就一定发生.P(B|A)=1.同时B发生了,P(A|B)=1/3,提升了A单独发生
的概率P(A)=1/6,所以A和B是dependent的</li>
</ul></li>
<li>上面的四种情况,我们可以总结成如下的图:
<ul class="org-ul">
<li>#+CAPTION: peb/2-3-1.png
<img src="https://raw.githubusercontent.com/harrifeng/image/master/peb/2-3-1.png" alt="2-3-1.png" /></li>
<li>exclusive意味着一定是dependent, nonexclusive的威力比较弱:可以是dependent,也可以是independent</li>
<li>independent意味着一定是nonexclusive, dependent的威力比较弱:可以是exclusive,也可以是nonexclusive</li>
</ul></li>
</ul>
</div>
</li>
</ol>
</div>
<div id="outline-container-org70109ab" class="outline-4">
<h4 id="org70109ab"><span class="section-number-4">2.2.5.</span> Conditional probability</h4>
<div class="outline-text-4" id="text-2-2-5">
<ul class="org-ul">
<li>我们前面已经引入过条件概率了,P(B|A)就是表示A已经发生的情况下,B发生的概率.</li>
<li>我们接下来会讲一个小例子用来揭示在条件概率中经常会发生的"和直觉相悖"的判断:你经常认为相同的两个条
件概率,其实并不相同
<ul class="org-ul">
<li><p>
图2-8
</p>

<div id="org40408c1" class="figure">
<p><img src="https://raw.githubusercontent.com/harrifeng/image/master/peb/2-8.png" alt="2-8.png" />
</p>
<p><span class="figure-number">Figure 14: </span>peb/2-8.png</p>
</div></li>
<li>上图通过可视化图形呈现以下概率关系:
<ol class="org-ol">
<li>随机抽取个体的身高超过6英尺3英寸(1米9)的概率分布(图中垂直方向)</li>
<li>以及姓氏首字母为Z与非Z的概率分布(图中水平方向)</li>
</ol></li>
<li>图中数据虽未精确复现实际情况,但清晰表明:
<ol class="org-ol">
<li>绝大多数人身高低于6英尺3英寸(该区域占据图形垂直方向的主体空间)</li>
<li>同时大部分人的姓氏首字母非Z(该区域占据水平方向的主体空间)</li>
</ol></li>
<li>我们假设身高与姓氏首字母的概率分布彼此独立,这种独立性体现在图形上表现为:正方形的垂直分割线与水
平分割线均为笔直线条(而非偏移线)</li>
<li>为了讨论方便,我们还给上面的区域起了名字:a,b,c,d</li>
<li>为了讨论方便,我们还在水平方向上分成了:
<ol class="org-ol">
<li>Z: 名字以Z开头(面积小,因为大部分不以Z做名字开头)</li>
<li>NotZ:名字不以Z开头(面积大)</li>
</ol></li>
<li>为了讨论方便,我们还在竖直方向上分成了:
<ol class="org-ol">
<li>over 6'3'', notU: 身高高于1米9(面积小,大部分人身高在1米7左右)</li>
<li>under 6'3'', U: 身高低于1米9(面积大)</li>
</ol></li>
</ul></li>
<li>所有的这些准备好之后,我们来看如下两个概率(这两个概率在直觉上"貌似"是相等的):
<ul class="org-ul">
<li>P(Z|U)</li>
<li>P(U|Z)</li>
</ul></li>
<li>先看P(Z|U):
<ul class="org-ul">
<li>这个条件概率的样本空间是:U发生的情况下的这个subset的,是水平线分割的下部分,也就是a+b</li>
<li>在这个样本空间下Z发生的fraction就是b</li>
<li>所以P(Z|U)=b/(b+a), 从面积看出来,这是一个很小的数值,接近0</li>
</ul></li>
<li>再来看P(U|Z)
<ul class="org-ul">
<li>这个条件概率的样本空间是:Z发生的情况下的这个subset的,是竖直线分割的下部分,也就是b+c</li>
<li>在这个样本空间下U发生的fraction就是b</li>
<li>所以P(U|Z)=b/(b+c), 从面积看出来,这是一个很大的数值,接近1</li>
</ul></li>
<li>这样就是说 P(Z|U) 和P(U|Z)是不相等的(虽然极端情况a=c的情况下,两个值会相等,但是我们考虑的是绝大部分情况下a远大于c)</li>
<li>好的,重点来了:
<ul class="org-ul">
<li><p>
我们之前之所以总是感觉P(Z|U) 和P(U|Z)相等,是基于如下 <b>错误</b> 的理解
</p>
<pre class="example" id="orgc5fc5f3">
既然U和Z是独立的,那么他们不会互相干扰,所以两者的条件概率无论谁先后,结果都相等
</pre></li>
<li><p>
而 <b>正确</b> 的理解应该是如下
</p>
<pre class="example" id="org2a83464">
既然U和Z是独立的,那么一个event不会影响另外一个event,所以"条件概率"应该更加接近其"非条件概率",
也就是说P(Z|U)=P(Z), P(U|Z)=P(U). P(Z)是一个接近0的值,而P(U)是一个接近1的值,所以两者肯定不同
</pre></li>
</ul></li>
<li><p>
上面的例子比较繁琐,但是完全理解之后对条件概率也会理解的更透彻.其实我们还可以用更加简洁的语言来举例
一个类似的,但更加通俗的例子:
</p>
<pre class="example" id="org1baaecc">
当已知某生物拥有大脑时,它属于人类的概率微乎其微;但当一致某生物是人类时,它拥有大脑的概率必然是1.
</pre></li>
</ul>
</div>
</div>
</div>
<div id="outline-container-orgbf31963" class="outline-3">
<h3 id="orgbf31963"><span class="section-number-3">2.3.</span> Examples</h3>
<div class="outline-text-3" id="text-2-3">
<ul class="org-ul">
<li>我们本节来介绍一些例子,了解概率问题最好的方式就是学习这些例子</li>
<li>在讲解这些例子之前,我们首先先了解一下解决问题的策略,这些策略很多情况下很有用</li>
</ul>
</div>
<div id="outline-container-orgc3596cb" class="outline-4">
<h4 id="orgc3596cb"><span class="section-number-4">2.3.1.</span> The art of "not"</h4>
<div class="outline-text-4" id="text-2-3-1">
<ul class="org-ul">
<li>在很多情况下,计算一个event(A)最好的方法不是直接计算event(A)的概率,而是:
<ul class="org-ul">
<li>先计算event(not A)的概率, 所谓event(not A),也被称为event(A)的补集(complement)</li>
<li>然后用1-event(not A)</li>
</ul></li>
<li>我们来详细介绍一个上述"情况"
<ul class="org-ul">
<li><p>
"最多有"的情况,用英文描述如下
</p>
<pre class="example" id="org5990414">
What is the probability of obtaining at least one of such-and-such
</pre></li>
<li>上面表述中的at least很显然听起来让我们的概率求解变的复杂,因为at least one意味着可能是:
<ol class="org-ol">
<li>一个</li>
<li>两个</li>
<li>三个</li>
<li>&#x2026;</li>
<li>N个</li>
</ol></li>
<li>解决问题的关键是, 知道event(at least one)的补集是 event(exactly zero),这是一个更容易计算的概率</li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-org2b1e6cc" class="outline-4">
<h4 id="org2b1e6cc"><span class="section-number-4">2.3.2.</span> Example(At least one 6)</h4>
<div class="outline-text-4" id="text-2-3-2">
<ul class="org-ul">
<li>有三个骰子,请问至少其中有一个为6的概率是多少</li>
</ul>
</div>
</div>
<div id="outline-container-orgd3950d9" class="outline-4">
<h4 id="orgd3950d9"><span class="section-number-4">2.3.3.</span> Solution</h4>
<div class="outline-text-4" id="text-2-3-3">
<ul class="org-ul">
<li>很显然,可以先求event(有三个骰子,请问至少其中有一个为6)的概率是多少的补集,那就是:event(刚好有0个骰子为6)的概率</li>
<li><p>
event(刚好有0个骰子为6)的概率是每个骰子都是非6,那么就是:
</p>
\begin{equation}
\frac{5}{6} \times \frac{5}{6} \times \frac{5}{6} = 125/216
\end{equation}</li>
<li>那么event(有三个骰子,请问至少其中有一个为6)的概率就是1-125/216=91/216</li>
</ul>
</div>
</div>
<div id="outline-container-orgecacc31" class="outline-4">
<h4 id="orgecacc31"><span class="section-number-4">2.3.4.</span> Picking seats</h4>
<div class="outline-text-4" id="text-2-3-4">
<ul class="org-ul">
<li>情境: 我们常常会遇到需要将不同事物分配到不同位置的情况.</li>
<li>讨论范围:这里我们通常以"将人员分配到座位"为例进行说明.</li>
<li>解决方法:解决此类问题一般有两种常用方法:
<ul class="org-ul">
<li>计数法:计算出期望结果的数量以及所有可能结果的总数,然后利用公式(2-1)
计算它们的比值(即概率 = 期望结果数 / 所有可能结果总数).</li>
<li>分步概率法: 想象逐个分配座位的过程,找出每个分配阶段成功的概率,并运用第2.2节中的概率规则(或其扩展
到两个以上事件的规则)来计算最终概率(通常涉及乘法原理).</li>
</ul></li>
<li>选择建议: 使用哪种方法取决于个人偏好.当然,用两种方法解题总是有益的,因为这样可以相互验证答案的正确性</li>
</ul>
</div>
</div>
<div id="outline-container-org0051ece" class="outline-4">
<h4 id="org0051ece"><span class="section-number-4">2.3.5.</span> Example 1(Middle in the middle)</h4>
<div class="outline-text-4" id="text-2-3-5">
<ul class="org-ul">
<li>三把椅子排成一行,三人随机入座.中等身高者最终坐在中间座位的概率是多少?</li>
</ul>
</div>
</div>
<div id="outline-container-org714e7ff" class="outline-4">
<h4 id="org714e7ff"><span class="section-number-4">2.3.6.</span> 解法一:所有 \(3! = 6\) 种可能的排列顺序如下:</h4>
<div class="outline-text-4" id="text-2-3-6">
<ul class="org-ul">
<li><p>
设人员按身高从高到低标记为 1,2,3.  排列为:
</p>
\begin{equation}
123 \quad 132 \quad 213 \quad 231 \quad 312 \quad 321
\end{equation}</li>
<li>其中两个排列(\(123\) 和 \(321\)) 是中等身高者(标记为 2)坐在中间座位的情况.因此概率为 \(\frac{2}{6} = \frac{1}{3}\).</li>
</ul>
</div>
</div>
<div id="outline-container-orgc8e270b" class="outline-4">
<h4 id="orgc8e270b"><span class="section-number-4">2.3.7.</span> 解法二:随机分配人员到座位时,可先安排中等身高者.</h4>
<div class="outline-text-4" id="text-2-3-7">
<ul class="org-ul">
<li>该人员坐在任意座位的概率均等,故坐在中间座位的概率为 \(\frac{1}{3}\).</li>
<li>因此答案为 \(\frac{1}{3}\),无需复杂计算.</li>
</ul>
</div>
</div>
<div id="outline-container-org084cb2d" class="outline-4">
<h4 id="org084cb2d"><span class="section-number-4">2.3.8.</span> 解法三:若先安排最高者(标记为 1):</h4>
<div class="outline-text-4" id="text-2-3-8">
<ul class="org-ul">
<li>有 \(\frac{1}{3}\) 的概率其坐在中间座位 → 此时中等身高者坐中间的概率为 \(0\).</li>
<li>有 \(\frac{2}{3}\) 的概率其不坐中间 → 此时中等身高者从剩余两个座位中选中间的概率为 \(\frac{1}{2}\).</li>
<li><p>
总概率为:
</p>
\begin{equation}
P = \frac{1}{3} \cdot 0 + \frac{2}{3} \cdot \frac{1}{2} = \frac{1}{3}
\end{equation}</li>
</ul>
</div>
</div>
<div id="outline-container-org1f40119" class="outline-4">
<h4 id="org1f40119"><span class="section-number-4">2.3.9.</span> 数学表述</h4>
<div class="outline-text-4" id="text-2-3-9">
<ul class="org-ul">
<li>定义事件:
<ul class="org-ul">
<li>\(T_{\text{mid}}\):最高者坐中间</li>
<li>\(M_{\text{mid}}\):中等身高者坐中间</li>
</ul></li>
<li><p>
概率分解为:
</p>
\begin{align}
P(M_{\text{mid}}) &= P(T_{\text{mid}} \text{ and } M_{\text{mid}}) + P(T_{\text{not mid}} \text{ and } M_{\text{mid}}) \notag \\
                  &= P(T_{\text{mid}}) \cdot P(M_{\text{mid}} \mid T_{\text{mid}}) + P(T_{\text{not mid}}) \cdot P(M_{\text{mid}} \mid T_{\text{not mid}}) \notag \\
                  &= \frac{1}{3} \cdot 0 + \frac{2}{3} \cdot \frac{1}{2} \notag \\
                  &= \frac{1}{3} \tag{2.29}
\end{align}</li>
</ul>
</div>
</div>
<div id="outline-container-org95e3671" class="outline-4">
<h4 id="org95e3671"><span class="section-number-4">2.3.10.</span> 直观方法(推荐):</h4>
<div class="outline-text-4" id="text-2-3-10">
<ul class="org-ul">
<li>通过大样本试验模拟更直观安全.进行 600 次试验:
<ul class="org-ul">
<li>\(T\) 坐中间的概率 \(\frac{1}{3}\) → 约 \(200\) 次 → 此时 \(M\) 必不坐中间.</li>
<li>\(T\) 不坐中间的概率 \(\frac{2}{3}\) → 约 \(400\) 次 → 其中 \(M\) 坐中间的概率 \(\frac{1}{2}\) → 约 \(200\) 次成功.</li>
</ul></li>
<li>总成功概率:\(\frac{200}{600} = \frac{1}{3}\).</li>
<li>此方法与公式法本质一致,但更易避免计算错误.</li>
</ul>
</div>
</div>
<div id="outline-container-org6daebfe" class="outline-4">
<h4 id="org6daebfe"><span class="section-number-4">2.3.11.</span> Example 2(Order of height in a line)</h4>
<div class="outline-text-4" id="text-2-3-11">
<ul class="org-ul">
<li>五把椅子排成一行,五人随机入座.求他们最终按身高 **从高到低递减**(从左至右)排列的概率?</li>
</ul>
</div>
</div>
<div id="outline-container-org59864dd" class="outline-4">
<h4 id="org59864dd"><span class="section-number-4">2.3.12.</span> 解法一:排列计数法</h4>
<div class="outline-text-4" id="text-2-3-12">
<ul class="org-ul">
<li>核心逻辑**:总排列数为 \(5!\),满足条件的排列只有 1 种.
<ul class="org-ul">
<li>总可能排列数:\(5! = 120\)</li>
<li>满足身高递减的排列数:\(1\)(最高者坐最左,次高者坐左二,依此类推)</li>
</ul></li>
<li><p>
概率公式:
</p>
\begin{equation}
P = \frac{1}{5!} = \frac{1}{120}
\end{equation}</li>
</ul>
</div>
</div>
<div id="outline-container-org0649861" class="outline-4">
<h4 id="org0649861"><span class="section-number-4">2.3.13.</span> 解法二:条件概率法</h4>
<div class="outline-text-4" id="text-2-3-13">
<ul class="org-ul">
<li>核心逻辑:按身高顺序依次安排座位,计算每步正确入座的条件概率.</li>
<li>步骤分解:
<ol class="org-ol">
<li><b>最高者</b> 坐最左的概率:\(\frac{1}{5}\)</li>
<li><b>次高者</b> 坐左二的概率(剩余 4 座):\(\frac{1}{4}\)</li>
<li><b>第三高者</b> 坐左三的概率(剩余 3 座):\(\frac{1}{3}\)</li>
<li><b>第四高者</b> 坐左四的概率(剩余 2 座):\(\frac{1}{2}\)</li>
<li><b>最矮者</b> 坐最右的概率(最后 1 座):\(1\)</li>
</ol></li>
<li><p>
联合概率公式:
</p>
\begin{equation}
P = \frac{1}{5} \times \frac{1}{4} \times \frac{1}{3} \times \frac{1}{2} \times 1 = \frac{1}{120}
\end{equation}</li>
</ul>
</div>
</div>
<div id="outline-container-org14c39c2" class="outline-4">
<h4 id="org14c39c2"><span class="section-number-4">2.3.14.</span> 公式推导:条件概率的扩展形式</h4>
<div class="outline-text-4" id="text-2-3-14">
<ul class="org-ul">
<li>设事件:
<ul class="org-ul">
<li>\(A\):最高者坐最左</li>
<li>\(B\):次高者坐左二(需 \(A\) 发生)</li>
<li>\(C\):第三高者坐左三(需 \(A,B\) 发生)</li>
<li>\(D\):第四高者坐左四(需 \(A,B,C\) 发生)</li>
<li>\(E\):最矮者坐最右(需 \(A,B,C,D\) 发生)</li>
</ul></li>
<li><p>
联合概率公式(式 2.30):
</p>
\begin{equation}
P(A \cap B \cap C \cap D \cap E) = P(A) \cdot P(B \mid A) \cdot P(C \mid A \cap B) \cdot P(D \mid A \cap B \cap C) \cdot P(E \mid A \cap B \cap C \cap D)
\end{equation}</li>
<li><p>
代入具体值:
</p>
\begin{equation}
P = \frac{1}{5} \cdot \frac{1}{4} \cdot \frac{1}{3} \cdot \frac{1}{2} \cdot 1
\end{equation}</li>
<li>替代视角:按座位分配人员,等价计算过程
<ol class="org-ol">
<li>最左座分配给最高者的概率:\(\frac{1}{5}\)</li>
<li>左二座分配给次高者的概率(剩余 4 人):\(\frac{1}{4}\)</li>
<li>左三座分配给第三高者的概率(剩余 3 人):\(\frac{1}{3}\)</li>
<li>左四座分配给第四高者的概率(剩余 2 人):\(\frac{1}{2}\)</li>
<li>最右座分配给最矮者的概率(最后 1 人):\(1\)</li>
</ol></li>
<li><p>
结果一致
</p>
\begin{equation}
P = \frac{1}{120}
\end{equation}</li>
</ul>
</div>
</div>
<div id="outline-container-org0e48a9f" class="outline-4">
<h4 id="org0e48a9f"><span class="section-number-4">2.3.15.</span> Example 3 (Order of height in a circle)</h4>
<div class="outline-text-4" id="text-2-3-15">
<ul class="org-ul">
<li>五把椅子**排成一个圆圈**,五人随机入座.求最终形成身高 <b><b>从高到低顺时针递减</b></b> 排列的概率?</li>
<li>关键条件
<ol class="org-ol">
<li>顺时针方向身高严格递减</li>
<li>最高者位置任意(序列起点不固定)</li>
<li>旋转对称性需特殊处理</li>
</ol></li>
</ul>
</div>
</div>
<div id="outline-container-org7b55404" class="outline-4">
<h4 id="org7b55404"><span class="section-number-4">2.3.16.</span> 解法一:排列计数法</h4>
<div class="outline-text-4" id="text-2-3-16">
<ul class="org-ul">
<li>核心逻辑
<ul class="org-ul">
<li>总排列数 = \(5! = 120\)(线性排列计数)[1](@ref)</li>
<li>有效排列数 = \(5\)(最高者可在任意座位,其余位置唯一确定)[1](@ref)</li>
</ul></li>
<li><p>
概率公式
</p>
\begin{equation}
P = \frac{\text{有效排列数}}{\text{总排列数}} = \frac{5}{120} = \frac{1}{24}
\end{equation}</li>
<li><p>
理论依据:圆形排列实际独立排列数为 \((n-1)!\)(\(n=5\) 时=24)[1](@ref),满足条件的排列占比:
</p>
\begin{equation}
\frac{1}{(n-1)!} = \frac{1}{24}
\end{equation}</li>
</ul>
</div>
</div>
<div id="outline-container-orge328342" class="outline-4">
<h4 id="orge328342"><span class="section-number-4">2.3.17.</span> 解法二:条件概率分解法</h4>
<div class="outline-text-4" id="text-2-3-17">
<ul class="org-ul">
<li>分步推理
<ol class="org-ol">
<li><code>最高者入座</code>:
<ul class="org-ul">
<li>可坐任意座位 → 成功概率 = \(\frac{5}{5} = 1\)</li>
</ul></li>
<li><code>次高者入座</code>:
<ul class="org-ul">
<li>需坐最高者*顺时针邻座* → 概率 = \(\frac{1}{4}\)(剩余4座位选1)</li>
</ul></li>
<li><code>第三高者入座</code>:
<ul class="org-ul">
<li>需坐次高者*顺时针邻座* → 概率 = \(\frac{1}{3}\)(剩余3座位选1)</li>
</ul></li>
<li><code>第四高者入座</code>:
<ul class="org-ul">
<li>需坐第三高者*顺时针邻座* → 概率 = \(\frac{1}{2}\)(剩余2座位选1)</li>
</ul></li>
<li><code>最矮者入座</code>:
<ul class="org-ul">
<li>最后1座位必坐 → 概率 = \(1\)</li>
</ul></li>
</ol></li>
<li><p>
联合概率公式
</p>
\begin{equation}
P = 1 \times \frac{1}{4} \times \frac{1}{3} \times \frac{1}{2} \times 1 = \frac{1}{24}
\end{equation}</li>
</ul>
</div>
</div>
<div id="outline-container-orga7a9647" class="outline-4">
<h4 id="orga7a9647"><span class="section-number-4">2.3.18.</span> Example 4(Three girls and three boys)</h4>
<div class="outline-text-4" id="text-2-3-18">
<ul class="org-ul">
<li>问题描述:六把椅子排成一行,三名女生和三名男生随机入座.求**三名女生最终全部坐在最左侧三个座位**的概率?</li>
</ul>
</div>
</div>
<div id="outline-container-org77ce988" class="outline-4">
<h4 id="org77ce988"><span class="section-number-4">2.3.19.</span> 解法一:排列计数法</h4>
<div class="outline-text-4" id="text-2-3-19">
<ul class="org-ul">
<li>核心逻辑
<ol class="org-ol">
<li>总排列数 = \(6! = 720\)(六人全排列)</li>
<li>成功条件分解:
<ul class="org-ul">
<li>女生在左三座位的排列数 = \(3! = 6\)</li>
<li>男生在右三座位的排列数 = \(3! = 6\)</li>
</ul></li>
<li>成功排列总数 = \(3! \times 3! = 36\)</li>
</ol></li>
<li><p>
概率公式
</p>
\begin{equation}
P = \frac{3! \times 3!}{6!} = \frac{6 \times 6}{720} = \frac{36}{720} = \frac{1}{20}
\end{equation}</li>
</ul>
</div>
</div>
<div id="outline-container-org12d2862" class="outline-4">
<h4 id="org12d2862"><span class="section-number-4">2.3.20.</span> 解法二:顺序概率法(女生优先入座)</h4>
<div class="outline-text-4" id="text-2-3-20">
<ul class="org-ul">
<li>分步计算
<ol class="org-ol">
<li><code>第一位女生</code> 坐左侧的概率:
<ul class="org-ul">
<li>左侧空座位:3个</li>
<li>总空座位:6个</li>
<li>概率 = \(\frac{3}{6}\)</li>
</ul></li>
<li><code>第二位女生</code> 坐左侧的条件概率:
<ul class="org-ul">
<li>左侧剩余空座位:2个</li>
<li>总剩余座位:5个</li>
<li>概率 = \(\frac{2}{5}\)</li>
</ul></li>
<li><code>第三位女生</code> 坐左侧的条件概率:
<ul class="org-ul">
<li>左侧剩余空座位:1个</li>
<li>总剩余座位:4个</li>
<li>概率 = \(\frac{1}{4}\)</li>
</ul></li>
</ol></li>
<li><p>
联合概率公式
</p>
\begin{equation}
P = \frac{3}{6} \times \frac{2}{5} \times \frac{1}{4} = \frac{1}{20}
\end{equation}</li>
<li>男生无需额外计算:若三女生已占左三座,剩余三座必由男生占据.</li>
</ul>
</div>
</div>
<div id="outline-container-orge5d9b81" class="outline-4">
<h4 id="orge5d9b81"><span class="section-number-4">2.3.21.</span> 解法三:组合选择法</h4>
<div class="outline-text-4" id="text-2-3-21">
<ul class="org-ul">
<li>核心洞察
<ul class="org-ul">
<li>女生座位选择本质是组合问题</li>
<li>从6座位选3座给女生:总选法 = \(\binom{6}{3}\)</li>
<li>成功选法:仅左三座1种</li>
</ul></li>
<li><p>
概率公式
</p>
\begin{equation}
P = \frac{1}{\binom{6}{3}} = \frac{1}{\frac{6!}{3!3!}} = \frac{3!3!}{6!} = \frac{1}{20}
\end{equation}</li>
</ul>
</div>
</div>
<div id="outline-container-org4fc5e47" class="outline-4">
<h4 id="org4fc5e47"><span class="section-number-4">2.3.22.</span> Socks in a drawer</h4>
<div class="outline-text-4" id="text-2-3-22">
<ul class="org-ul">
<li>从抽屉中抽取彩色袜子的概率问题这是一种经典的概率模型.若通过计数法处理此类问题,则会涉及子群划分与
二项式系数(binomial coefficients);若采用连续抽取的设想,则需应用概率乘法原理及2.2节的相关法则.</li>
</ul>
</div>
</div>
<div id="outline-container-org5e992c5" class="outline-4">
<h4 id="org5e992c5"><span class="section-number-4">2.3.23.</span> Example 1 (Two blue and two red)</h4>
<div class="outline-text-4" id="text-2-3-23">
<ul class="org-ul">
<li>抽屉中有两只蓝袜和两只红袜.若随机抽取两只袜子,获得同色配对的概率是多少?</li>
</ul>
</div>
</div>
<div id="outline-container-org1c2cc35" class="outline-4">
<h4 id="org1c2cc35"><span class="section-number-4">2.3.24.</span> 解法一</h4>
<div class="outline-text-4" id="text-2-3-24">
<ul class="org-ul">
<li><p>
所有可能组合数为二项式系数 \(\binom{4}{2}=6\) .其中存在两组成对情况(一蓝对,一红对),故概率为 2/6 = 1/3.
若枚举所有组合(设蓝袜编号1,2,红袜编号3,4):
</p>
<pre class="example" id="org3805b8f">
1,2｜1,3｜1,4｜2,3｜2,4｜3,4
</pre></li>
</ul>
</div>
</div>
<div id="outline-container-org1c7ef68" class="outline-4">
<h4 id="org1c7ef68"><span class="section-number-4">2.3.25.</span> 解法二</h4>
<div class="outline-text-4" id="text-2-3-25">
<ul class="org-ul">
<li>抽取首只袜子后,抽屉中剩余:同色袜1只,异色袜2只.剩余三只袜子中,仅有一只可形成配对,其余两只不可,
因此概率为 1/3.</li>
</ul>
</div>
</div>
<div id="outline-container-org5ec6943" class="outline-4">
<h4 id="org5ec6943"><span class="section-number-4">2.3.26.</span> Example 2(Four blue and two red)</h4>
<div class="outline-text-4" id="text-2-3-26">
<ul class="org-ul">
<li>抽屉中有四只蓝袜与两只红袜(如图2.9所示).若随机抽取两只袜子,获得同色配对的概率是多少?</li>
</ul>
</div>
</div>
<div id="outline-container-org46ea276" class="outline-4">
<h4 id="org46ea276"><span class="section-number-4">2.3.27.</span> 解法一:组合计数法</h4>
<div class="outline-text-4" id="text-2-3-27">
<ul class="org-ul">
<li>总可能配对数为二项式系数 \( \binom{6}{2} = 15 \) 种组合.</li>
<li>成功配对包括两类:
<ul class="org-ul">
<li>蓝袜配对数:\( \binom{4}{2} = 6 \) 组</li>
<li>红袜配对数:\( \binom{2}{2} = 1 \) 组</li>
</ul></li>
<li><p>
同色配对概率为:
</p>
\begin{equation}
\frac{\binom{4}{2} + \binom{2}{2}}{\binom{6}{2}} = \frac{6 + 1}{15} = \frac{7}{15} \quad \tag{2.32}
\end{equation}</li>
</ul>
</div>
</div>
<div id="outline-container-orgf976a4c" class="outline-4">
<h4 id="orgf976a4c"><span class="section-number-4">2.3.28.</span> 解法二:条件概率法</h4>
<div class="outline-text-4" id="text-2-3-28">
<ul class="org-ul">
<li>分步计算匹配概率:
<ol class="org-ol">
<li><b><b>首抽为蓝袜(概率 \( \frac{4}{6} \))</b></b>:
剩余三蓝二红,次抽仍为蓝的概率为 \( \frac{3}{5} \).</li>
<li><b><b>首抽为红袜(概率 \( \frac{2}{6} \))</b></b>:
剩余一红四蓝,次抽仍为红的概率为 \( \frac{1}{5} \).</li>
</ol></li>
<li><p>
同色配对总概率为:
</p>
\begin{equation}
\left( \frac{4}{6} \times \frac{3}{5} \right) + \left( \frac{2}{6} \times \frac{1}{5} \right) = \frac{14}{30} = \frac{7}{15} \quad \tag{2.33}
\end{equation}</li>
</ul>
</div>
</div>
<div id="outline-container-org1711788" class="outline-4">
<h4 id="org1711788"><span class="section-number-4">2.3.29.</span> Coins and dice</h4>
<div class="outline-text-4" id="text-2-3-29">
<ul class="org-ul">
<li>概率问题中总数存在投掷硬币和骰子的问题,这里我们列举几个</li>
</ul>
</div>
</div>
<div id="outline-container-org1d37a92" class="outline-4">
<h4 id="org1d37a92"><span class="section-number-4">2.3.30.</span> Example 1(One of each number)</h4>
<div class="outline-text-4" id="text-2-3-30">
<ul class="org-ul">
<li>投掷六枚骰子,求恰好出现数字1至6各一次的概率?</li>
</ul>
</div>
</div>
<div id="outline-container-org66bb820" class="outline-4">
<h4 id="org66bb820"><span class="section-number-4">2.3.31.</span> 解法一:排列计数法</h4>
<div class="outline-text-4" id="text-2-3-31">
<ul class="org-ul">
<li><b><b>总样本空间</b></b>:骰子有序投掷时,每个骰子有6种可能结果,总样本数为 \(6^6\).</li>
<li><b><b>有效事件</b></b>:需每个数字(1-6)恰好出现一次,此即6个数字的全排列问题.</li>
<li><b><b>排列数</b></b>:\(6!\) 种排列方式.</li>
<li><p>
<b><b>概率计算</b></b>:
</p>
\begin{equation}
P = \frac{6!}{6^6} = \frac{720}{46656} \approx 0.015 \tag{2.35}
\end{equation}</li>
</ul>
</div>
</div>
<div id="outline-container-orge2af954" class="outline-4">
<h4 id="orge2af954"><span class="section-number-4">2.3.32.</span> 解法二:序贯概率乘法原理**</h4>
<div class="outline-text-4" id="text-2-3-32">
<ul class="org-ul">
<li>假设依次投掷六枚骰子,要求每次新增不重复数字:
<ol class="org-ol">
<li><b><b>首枚骰子</b></b>:任意结果均可接受(概率=\(1\))</li>
<li><b><b>第二枚</b></b>:需避开首枚数字 → 有效选择5种 → 概率=\(\frac{5}{6}\)</li>
<li><b><b>第三枚</b></b>:需避开前两枚数字 → 有效选择4种 → 概率=\(\frac{4}{6}\)</li>
<li><b><b>第四枚</b></b>:需避开前三枚数字 → 有效选择3种 → 概率=\(\frac{3}{6}\)</li>
<li><b><b>第五枚</b></b>:需避开前四枚数字 → 有效选择2种 → 概率=\(\frac{2}{6}\)</li>
<li><b><b>第六枚</b></b>:仅剩唯一数字 → 概率=\(\frac{1}{6}\)</li>
</ol></li>
<li><p>
总概率
</p>
\begin{equation}
P = 1 \times \frac{5}{6} \times \frac{4}{6} \times \frac{3}{6} \times \frac{2}{6} \times \frac{1}{6} = \frac{5}{324} \tag{2.36}
\end{equation}</li>
</ul>
</div>
</div>
<div id="outline-container-org09b4d4c" class="outline-4">
<h4 id="org09b4d4c"><span class="section-number-4">2.3.33.</span> Example 2(Three pairs)</h4>
<div class="outline-text-4" id="text-2-3-33">
<ul class="org-ul">
<li>投掷六枚骰子,求恰好出现**三组相同点数对**(即三个不同数字各出现两次)的概率?</li>
</ul>
</div>
</div>
<div id="outline-container-org92d21be" class="outline-4">
<h4 id="org92d21be"><span class="section-number-4">2.3.34.</span> 解法:有序样本空间计数法</h4>
<div class="outline-text-4" id="text-2-3-34">
<ul class="org-ul">
<li><b><b>总样本空间</b></b></li>
</ul>
<p>
骰子有序投掷时,总可能结果数为:  6^6 = 46,656
</p>
<ul class="org-ul">
<li><b><b>有效事件计数(分步计算)</b></b>
<ol class="org-ol">
<li><b><b>选择三个不同数字</b></b>
从6个数字中选3个,组合数为:  \(\binom{6}{3} = 20\)</li>
<li><p>
<b><b>分配数字至骰子位置</b></b>
设选定数字为1,2,3.需将两个1,两个2,两个3分配到六个骰子位置:
</p>
<ul class="org-ul">
<li><b><b>步骤1</b></b>:为两个1选择位置 → \(\binom{6}{2} = 15\) 种方式</li>
<li><b><b>步骤2</b></b>:为两个2选择剩余四个位置中的两个 → \(\binom{4}{2} = 6\) 种方式</li>
<li><b><b>步骤3</b></b>:最后两个位置分配给两个3 → \(\binom{2}{2} = 1\) 种方式</li>
</ul>
<p>
该步骤总方式数:
</p>
\begin{equation}
\binom{6}{2} \times \binom{4}{2} \times \binom{2}{2} = 15 \times 6 \times 1 = 90
\end{equation}</li>
</ol></li>
<li><p>
<b><b>有效事件总数</b></b>  综合两步计算:
</p>
\begin{equation}
\binom{6}{3} \times \left[ \binom{6}{2} \times \binom{4}{2} \times \binom{2}{2} \right] = 20 \times 90 = 1,800
\end{equation}</li>
<li><p>
<b><b>概率计算</b></b>
</p>
\begin{equation}
p = \frac{\binom{6}{3} \cdot \binom{6}{2} \cdot \binom{4}{2} \cdot \binom{2}{2}}{6^6} = \frac{1,800}{46,656} = \frac{648}{16,664} \approx 3.9\% \quad (2.37)
\end{equation}</li>
<li><b><b>解法对比说明</b></b>  若采用前例(各点数各出现一次)的**序贯概率乘法**思路,需考虑多种路径:
<ul class="org-ul">
<li>可能序列模式包括 AABBCC,ABABCC 等(如:1,1,2,2,3,3 或 1,2,1,2,3,3)</li>
<li>需计算不同出现顺序的条件概率,导致分支过多(例如:第二枚骰子可能与第一枚相同或不同)</li>
<li>计算复杂度显著高于**组合计数法**(本例解法)</li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-orgcb59295" class="outline-4">
<h4 id="orgcb59295"><span class="section-number-4">2.3.35.</span> Example 3(Five coin flips)</h4>
<div class="outline-text-4" id="text-2-3-35">
<ul class="org-ul">
<li>一枚硬币连续抛掷五次.求出现不同正面数(0至5次)的概率分布.</li>
</ul>
</div>
</div>
<div id="outline-container-orgf58d3b5" class="outline-4">
<h4 id="orgf58d3b5"><span class="section-number-4">2.3.36.</span> 解法:有序样本空间计数法**</h4>
<div class="outline-text-4" id="text-2-3-36">
<ul class="org-ul">
<li><b><b>总样本空间</b></b>  每次抛掷有2种可能结果(正面H或反面T),五次抛掷的总可能结果数为:  2^5 = 32</li>
<li><b><b>有效事件计数(基于二项式系数)</b></b>  各正面数 \(k\) 对应的有效结果数由组合数 \(\binom{5}{k}\) 给出:
<ul class="org-ul">
<li><b><b>0次正面</b></b>:仅TTTT一种序列 → \(\binom{5}{0} = 1\)</li>
<li><b><b>1次正面</b></b>:H出现在五个位置中的任一个(如HTTTT)→ \(\binom{5}{1} = 5\)</li>
<li><b><b>2次正面</b></b>:从五个位置选两个放置H(如HHTTT)→ \(\binom{5}{2} = 10\)</li>
<li><b><b>3次正面</b></b>:选三个位置放置H → \(\binom{5}{3} = 10\)</li>
<li><b><b>4次正面</b></b>:选四个位置放置H → \(\binom{5}{4} = 5\)</li>
<li><b><b>5次正面</b></b>:仅HHHHH一种序列 → \(\binom{5}{5} = 1\)</li>
</ul></li>

<li><p>
<b><b>概率计算</b></b>
</p>
\begin{equation}
P(k) = \frac{\binom{5}{k}}{2^5} \quad (k = 0,1,2,3,4,5) \tag{2.38}
\end{equation}</li>
<li><p>
各自结果
</p>
\begin{align}
P(0) &= \frac{\binom{5}{0}}{32}, \quad &P(1) &= \frac{\binom{5}{1}}{32}, \quad &P(2) &= \frac{\binom{5}{2}}{32}, \\
P(3) &= \frac{\binom{5}{3}}{32}, \quad &P(4) &= \frac{\binom{5}{4}}{32}, \quad &P(5) &= \frac{\binom{5}{5}}{32} \tag{2.39}
\end{align}</li>
<li><p>
代入具体数值:
</p>
\begin{align}
P(0) &= \frac{1}{32}, \quad &P(1) &= \frac{5}{32}, \quad &P(2) &= \frac{10}{32}, \\
P(3) &= \frac{10}{32}, \quad &P(4) &= \frac{5}{32}, \quad &P(5) &= \frac{1}{32} \tag{2.39}
\end{align}</li>
</ul>
</div>
</div>
<div id="outline-container-orgaf031b6" class="outline-4">
<h4 id="orgaf031b6"><span class="section-number-4">2.3.37.</span> Cards</h4>
<div class="outline-text-4" id="text-2-3-37">
<ul class="org-ul">
<li>在第一章中(尤其是习题1.10),我们已对纸牌组合计数进行了大量讨论,部分结论将延续至本节应用.如多次
强调的,概率问题本质上是计数问题.关于扑克牌的概率问题几乎是无穷尽的.本节所有案例均基于标准52张牌
(不含大小王)的扑克牌进行推导</li>
</ul>
</div>
</div>
<div id="outline-container-orgdc3f314" class="outline-4">
<h4 id="orgdc3f314"><span class="section-number-4">2.3.38.</span> Example 1(Royal flush from seven cards)</h4>
<div class="outline-text-4" id="text-2-3-38">
<ul class="org-ul">
<li>在扑克的某些变体中,玩家会获得七张牌(通过不同方式),并需从中组成最佳的五张牌手牌.求能组成皇家同
花顺(即同一花色的10,J,Q,K,A)的概率?</li>
</ul>
</div>
</div>
<div id="outline-container-orgd223345" class="outline-4">
<h4 id="orgd223345"><span class="section-number-4">2.3.39.</span> 解法:组合计数法**</h4>
<div class="outline-text-4" id="text-2-3-39">
<ul class="org-ul">
<li><b><b>总样本空间</b></b>  从52张牌中随机抽取7张的组合数为:   \(\binom{52}{7} = 133,784,560\)</li>
<li><b><b>有效事件计数</b></b>  包含皇家同花顺的七张牌手牌需满足:
<ol class="org-ol">
<li><b><b>选择花色</b></b>:皇家同花顺有4种花色选择(黑桃♠,红心♥,梅花♣,方块♦)</li>
<li><b><b>选择额外两张牌</b></b>:剩余47张牌中任选2张(因已移除5张皇家同花顺牌)</li>
</ol></li>
<li><p>
有效事件数:
</p>
\begin{equation}
4 \times \binom{47}{2} = 4 \times \frac{47 \times 46}{2} = 4 \times 1,081 = 4,324
\end{equation}</li>
<li><p>
<b><b>概率计算</b></b>
</p>
\begin{equation}
p = \frac{4 \times \binom{47}{2}}{\binom{52}{7}} = \frac{4,324}{133,784,560} \approx 0.0032\% \quad (2.40)
\end{equation}</li>
<li><b><b>与五张牌概率的对比</b></b></li>
<li><b><b>五张牌情况</b></b>:
<ul class="org-ul">
<li>总样本空间:\(\binom{52}{5} = 2,598,960\)</li>
<li>有效事件数:仅4种皇家同花顺(每种花色1种)</li>
<li><p>
概率:
</p>
\begin{equation}
p_5 = \frac{4}{\binom{52}{5}} = \frac{4}{2,598,960} \approx 0.00015\%
\end{equation}</li>
</ul></li>
<li><p>
<b><b>概率比值</b></b>:
</p>
\begin{equation}
\frac{p}{p_5} = \frac{0.0032\%}{0.00015\%} \approx 21
\end{equation}</li>
</ul>
</div>
</div>
<div id="outline-container-org01ab693" class="outline-4">
<h4 id="org01ab693"><span class="section-number-4">2.3.40.</span> Example 2 (Suit full hourse)</h4>
<div class="outline-text-4" id="text-2-3-40">
<ul class="org-ul">
<li>在五张牌的扑克手牌中,求出现花色满堂红(即三张同花色牌与两张另一花色牌组合)的概率?需注意:此牌型
在实际扑克中无积分价值,但仍可计算其概率.试对比此概率与实际满堂红(三张同点数牌与两张另一同点数牌
组合)的概率差异.(可引用习题1.10(a)的结果</li>
</ul>
</div>
</div>
<div id="outline-container-org6954700" class="outline-4">
<h4 id="org6954700"><span class="section-number-4">2.3.41.</span> Solution</h4>
<div class="outline-text-4" id="text-2-3-41">
<ul class="org-ul">
<li>花色满堂红是要求花色一样,数组无所谓,所以获取方式如下:
<ul class="org-ul">
<li>我们有4种方式从4种花色中选择一种来出现三次,并且有 \(\binom{13}{3}\) 种方式选择哪三个牌出现</li>
<li>我们有3种方式从剩下的3种花色中选择一种来出现两次,并且有 \(\binom{13}{2}\) 种方式选择哪两个牌出现</li>
<li>而总共有 \(\binom{52}{5}\) 种选取方式</li>
<li><p>
所以我们可以得到花色满堂红的概率是
</p>
\begin{equation}
\frac{4 \cdot \binom{13}{3}\cdot 3 \cdot \binom{13}{2}}{\binom{52}{5}}=\frac{267,696}{2,598,960} \approx 10.3\% \tag{2.41}
\end{equation}</li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-org8053c6f" class="outline-4">
<h4 id="org8053c6f"><span class="section-number-4">2.3.42.</span> 真正的满堂红</h4>
<div class="outline-text-4" id="text-2-3-42">
<ul class="org-ul">
<li><p>
真正的满堂红不是要求花色一样,而是要求数值一样,那么获取的方式就不太一样
</p>
<ul class="org-ul">
<li>我们有13种方式从13种牌中选择一种来出现三次,并且有 \(\binom{4}{3}\) 种方式选择哪三个花色出现</li>
<li>我们有12种方式从剩下的12种花色中选择一种来出现两次,并且有 \(\binom{4}{2}\) 种方式选择哪两个花色个出
现.注意,真正满堂红在意的是数值,不是花色,所以选取的池子还是4</li>
<li>而总共有 \(\binom{52}{5}\) 种选取方式</li>
<li>所以我们可以得到真正满堂红的概率是</li>
</ul>
\begin{equation}
\frac{13 \cdot \binom{4}{3}\cdot 12 \cdot \binom{4}{2}}{\binom{52}{5}}=\frac{3,734}{2,598,960} \approx 0.14\% \tag{2.41}
\end{equation}</li>
</ul>
</div>
</div>
<div id="outline-container-org926fc5c" class="outline-4">
<h4 id="org926fc5c"><span class="section-number-4">2.3.43.</span> Example 3 (Only two suits)</h4>
<div class="outline-text-4" id="text-2-3-43">
<ul class="org-ul">
<li>求五张扑克手牌中所有牌**至多属于两种花色**的概率(单一花色也符合此条件).需注意:
<ul class="org-ul">
<li>前一示例的"花色满堂红"(三张同花色+两张另一花色)是此问题的特例.</li>
<li>解题需谨慎处理**重复计数**问题(如纯同花手牌被多次统计).</li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-org1846db6" class="outline-4">
<h4 id="org1846db6"><span class="section-number-4">2.3.44.</span> 解法一:</h4>
<div class="outline-text-4" id="text-2-3-44">
<ul class="org-ul">
<li>如果出现两种花色,有 \(\binom{4}{2} = 6\) 种选择方式</li>
<li>对于确定的两种花色,那就是13*2=26张牌里面选出5张牌的方法有 \(\binom{26}{5}\) 种</li>
<li><p>
乍看之下似乎应该有如下种"至多两种花色"组成的牌型:
</p>
\begin{equation}
\binom{4}{2} \cdot \binom{26}{5} = 394680
\end{equation}</li>
<li>然后这种方式 <b>并不正确</b>, 因为我们重复(实际上是三次)计算了同花顺(仅仅包含一种花色的牌型): 例如,如果五张全是红心,那么:
<ul class="org-ul">
<li>我们在红心/方块的26张牌组合中算过一次</li>
<li>我们在红心/黑桃的26张牌组合中又算过一次</li>
<li>我们在红心/梅花的26张牌组合中还算过一次</li>
</ul></li>
<li>但是其实我们应该只算一次,所以只对红心的情况,我们多算了两次,总共是 \(2\cdot \binom{13}{5}\) 种情况</li>
<li>又因为和红心等地位的还有三种牌,所以我们总共多算了 \(4 \cdot 2 \cdot \binom{13}{5}\) 种情况</li>
<li><p>
所以总的"至多两种花色"的牌型数量为
</p>
\begin{equation}
\binom{4}{2} \binom{26}{5} - 8 \binom{13}{5} = 394,680 - 10,296 = 384,384
\end{equation}</li>
<li><p>
概率计算的总样本空间为 \(\binom{52}{5} = 2,598,960\), 概率计算结果为
</p>
\begin{equation}
p = \frac{384,384}{2,598,960} \approx 14.8\% \tag{2.43}
\end{equation}</li>
<li>上面2-43概率值比2-41的概率值大,这是合理的,因为"花色满堂红"是"至多两种花色"的一个子集</li>
</ul>
</div>
</div>
<div id="outline-container-orgd490f95" class="outline-4">
<h4 id="orgd490f95"><span class="section-number-4">2.3.45.</span> 解法二</h4>
<div class="outline-text-4" id="text-2-3-45">
<ul class="org-ul">
<li>我们可以通过三种情况来分析"至多两种花色"的牌型:
<ol class="org-ol">
<li>所有五张牌都来自同一种花色(即同花)</li>
<li>四张牌来自同一种花色,另外一张来自另一种花色</li>
<li>三张牌来自同一种花色,另外两张来自另一种花色</li>
</ol></li>
<li>我们分别用(5,0),(4,1),(3,2)来表示这些类型的牌型,那么:
<ul class="org-ul">
<li>(5,0)类型: 有 \(4 \binom{13}{5} = 5148\) 种,因为从某一种花色的13张牌中选出5张牌的方法有
\(\binom{13}{5}\) 种,同时,我们有四种花色,所以共有 \(4 \times \binom{13}{5}=5,148\) 种</li>
<li>(3,2)类型: 我们在上一个问题中计算过(花色满堂红),共有 \(4 \times \binom{13}{3} \times 3 \times \binom{13}{2}=267,696\) 种</li>
<li>(4,1)类型: 我们可以从(花色满堂红)推理出,共有 \(4 \times \binom{13}{4} \times 3 \times \binom{13}{1}=111,540\) 种</li>
</ul></li>
<li><p>
将这三种情况相加总的"至多两种花色"的牌型数量为,这个结果和解法一一致,概率值当然也一致
</p>
\begin{equation}
5,148 + 267,696 + 111,540  = 384,384
\end{equation}</li>
</ul>
</div>
</div>
</div>
<div id="outline-container-org907d7ad" class="outline-3">
<h3 id="org907d7ad"><span class="section-number-3">2.4.</span> Four classic problems</h3>
<div class="outline-text-3" id="text-2-4">
<ul class="org-ul">
<li>现在我们来看看四个经典的概率问题.如果没有讨论"生日问题"和"游戏节目问题",任何一本关于概率的书都算
不上完整.此外,"检察官谬误"和"男孩/女孩问题"也是两个经典问题,研究它们的细节非常有启发性.这四个问
题的答案可能一开始看起来有些违反直觉,但如果你花足够的时间思考,它们最终是合乎逻辑的.</li>
</ul>
</div>
<div id="outline-container-org9fd88d4" class="outline-4">
<h4 id="org9fd88d4"><span class="section-number-4">2.4.1.</span> The Birthday Problem</h4>
<div class="outline-text-4" id="text-2-4-1">
<ul class="org-ul">
<li>我们首先介绍"生日问题".除了这个问题本身非常有趣之外,它的结果出乎意料,甚至可以让你在派对上利用对
这问题毫不知情的人,通过打赌赢得金钱(只要派对上有足够多的人,我们会看到这一点!).</li>
<li>问题:房间里需要有多少人,才能使至少两个人拥有相同生日的概率超过1/2?这里的"相同生日"指的是一年中的
同一天,但年份可以不同.忽略闰年.</li>
<li>解决方案:如果有一个问题需要使用第2.3.1节中的"反向思考"策略,那一定是这个问题.有许多不同的方式可以
产生至少一个相同生日(一个配对,两个配对,一个三人组等),要将所有这些单独概率加起来是完全不可行的.
计算没有相同生日的概率,然后用1减去这个结果以得到至少有一个相同生日的概率会更容易</li>
<li>计算没有相同生日的概率如下.假设房间里有n个人.我们可以想象将他们一个接一个地随机分配到日历上,目前
的目标是没有相同生日.第一个名字可以放到任何一天.但当我们放下第二个名字时,只剩下364个"好"的日子,
因为我们不希望这个日子与第一个名字的日子重合.因此,第二个名字成功的概率是364/365.然后,当我们放下
第三个名字时,只剩下363个"好"的日子(假设前两个人的生日不同),因为我们不希望这个日子与前两个日子重
合.因此,第三个名字成功的概率是363/365.同样,当我们放下第四个名字时,只剩下362个"好"的日子(假设
前三个人的生日不同),因此第四个名字成功的概率是362/365.以此类推.</li>
<li><p>
如果房间里有n个人,那么所有人的生日都不相同的概率(即房间里没有相同生日的概率,因此以下公式中的"no"表示"没有")为:
</p>
\begin{equation}
P_{\text{no}}^{(n)} = \frac{365}{365} \times \frac{364}{365} \times \frac{363}{365} \times \cdots \times \frac{365 - (n-1) + 1}{365} = \prod_{k=1}^{n-1} \left(1 - \frac{k}{365}\right)
\end{equation}</li>
<li>如果你愿意,你可以将开头的1写为365/365,使公式看起来更整齐.请注意,最后一项涉及(n−1)而不是n,因为
(n−1)是已经放下的名字的数量.为了双重验证,这个(n−1)是正确的,它适用于n=2和n=3等小数值.每当你写下
涉及参数n的公式时,务必进行简单检查.</li>
<li>我们现在需要将公式中的乘积计算到结果小于1/2的程度,这样就可以得出至少有一个相同生日的概率大于1/2的
结论.用计算器计算虽然繁琐,但并不太困难.我们发现:
<ul class="org-ul">
<li><p>
22个人概率小于0.5
</p>
\begin{equation}
P_{\text{no}}^{(22)} \approx 0.524, \quad P_{\text{yes}}^{(22)} = 1 - 0.524 = 0.476 < 0.5
\end{equation}</li>
<li><p>
23个人概率大于0.5
</p>
\begin{equation}
  P_{\text{no}}^{(23)} \approx 0.493, \quad P_{\text{yes}}^{(23)} = 1 - 0.493 = 0.507 > 0.5
\end{equation}</li>
</ul></li>
<li>我们可以得出结论:房间里至少需要23个人,才能使至少两个人拥有相同生日的概率大于50%.当n=23时,这个概
率是50.7%.</li>
<li>许多人难以相信n=23的结果,其中一个原因是他们在问另一个问题,即:"需要有多少人(除了我之外)才能使至
少有1/2的概率有人拥有我的生日?"这个问题的答案确实比23大得多.计算方式如下:
<ul class="org-ul">
<li>某一天没有人拥有生日的概率为: \((\frac{364}{365})^n\)</li>
</ul></li>
<li>因为每个人有364/365的概率不在特定一天拥有生日.当n=252时,这个概率刚好大于1/2.而当n=253时,这个概
率刚好小于1/2,值为0.4995.因此,你需要遇到253个其他人,才能使至少有一个人拥有你的生日(或任何特定
生日)的概率大于1/2.有关进一步讨论,请参见问题2.16.</li>
</ul>
</div>
</div>
<div id="outline-container-org0e44c95" class="outline-4">
<h4 id="org0e44c95"><span class="section-number-4">2.4.2.</span> The Game-Show Problem</h4>
<div class="outline-text-4" id="text-2-4-2">
<ul class="org-ul">
<li>我们现在来讨论游戏节目问题.除了这个问题有多种常见的错误解法外,这个问题还有着人们热烈争论这些错误
解法的悠久历史.</li>
<li>问题:一位游戏节目主持人给你三扇门供选择.其中一扇门后是大奖,而另外两扇门后是山羊.主持人(他知道
每扇门后面是什么)宣布,在你选择一扇门(但不打开)后,他会打开另外两扇门中的一扇,并故意展示一只山
羊.他接着会给你机会,将选择换到剩下的一扇门上.为了最大化赢得大奖的概率,你应该换门吗?还是不换?
或者,这两种选择对结果没有影响?</li>
<li>解决方法:我们给出三种解法,其中一种是正确的,两种是错误的.
<ul class="org-ul">
<li>推理1:一旦主持人展示了一只山羊,大奖必然在剩下的两扇门中的一扇后面.由于大奖一开始是随机分布的,
因此剩下的两扇门后大奖的概率应该是均等的.也就是说,每扇门的概率都是1/2,所以换门与否无关紧要.如
果你愿意,你可以想象一个朋友(他对主持人会打开一扇门并展示山羊的过程有所了解)在主持人打开门后进
入房间.他看到两扇完全相同且未打开的门(他不知道你最初选择的是哪一扇),以及一只山羊.所以对他来
说,每扇未打开的门后有大奖的概率是1/2.你的朋友和你得出的概率不可能不同,因此你也会认为每扇未打开
的门后有大奖的概率是1/2.因此,换门与否无关紧要.</li>
<li>推理2:一开始,每扇门后有大奖的概率是1/3.因此,如果你不换门,你赢得大奖的概率是1/3.主持人的任何
行动都不能改变这一事实:如果你玩很多次这个游戏,其中大约1/3的情况下大奖会在你最初选择的门后.同样,
如果你换到另一扇未打开的门,大奖在那扇门后的概率也是1/3.(显然,两扇门后至少有一扇门后是山羊,所
以主持人展示一只山羊并没有告诉你任何新信息.)因此,由于无论换门与否,概率都是1/3,所以换门与否无
关紧要.</li>
<li>推理3:和推理2的第一段相同,如果你不换门,你赢得大奖的概率是1/3.然而,如果你换门,你赢得大奖的概
率会超过1/3,增加到2/3.这可以如下解释.不失一般性,假设你选择了第一扇门(如果你愿意,你可以对其
他门重复以下推理,结果是相同的).三扇门后面有三种可能的情况:大奖,山羊,山羊(PGG),山羊,大奖
,山羊(GPG),以及山羊,山羊,大奖(GGP),其中P表示大奖,G表示山羊.如果你不换门,那么只有在第
一种情况下(PGG),你会赢,因此你的中奖概率是1/3(与推理2第一段一致).但如果你换门,从第一扇门换
到第二或第三扇门,那么在第一种情况(PGG)中你会输,但在另外两种情况下(GPG和GGP)你会赢,因为主持
人一定会展示一只山羊并留下大奖未打开.因此,由于三种可能性中有两种情况下换门会成功,所以如果你换
门,你赢得大奖的概率是2/3.</li>
</ul></li>
<li>所以,*你实际上应该换门* .</li>
<li>**第三种解法是正确的.**第一种解法的错误在于"大奖在剩下的两扇门后的概率是均等的"这一说法.这是不正
确的.主持人展示一只山羊这一行为打破了两扇门之间的对称性,如第三种解法所解释的.一扇门是你最初选择
的门,而另一扇门是你没有选择的两扇门之一.当然,仅仅因为有两种可能性并不意味着它们的概率必须相等!</li>
<li>支持第一种解法的朋友推理的错误在于以下几点:虽然对于你的朋友来说,两扇未打开门的概率确实是1/2,但对
你来说并不是1/2."你的概率和朋友的概率不能不同"这一说法是错误的.你有你的朋友没有的信息;你知道两扇
未打开的门中,哪一扇是你最初选择的门,哪一扇是主持人故意留下未打开的门.(如第三种解法所示,这一信
息得出的概率分别是1/3和2/3.)你的朋友并没有这些关键信息.对他来说,两扇门看起来是一样的.不同的人
有不同的概率是完全可能的.如果我抛了一枚硬币,并偷看了一眼结果是正面,而你没有看到,那么对于你来说,
正面的概率是1/2,而对我来说是1.</li>
<li>第二种解法的错误在于展示山羊这一行为确实给了你新的信息,如刚才提到的.这一信息告诉你大奖不在那扇门
后,并且区分了两扇未打开的门.一扇门是你最初选择的门,而另一扇门是你没有选择的两扇门之一.如第三种
解法所示,这一信息使得另一扇门有大奖的概率增加了.注意,第二种解法不正确的另一个原因是:两个1/3的概
率之和并不等于1.</li>
<li>总结来说,主持人打开一扇门后,"换门"和"不换门"策略的概率不同,这并不意外(在主持人打开门之前,无论
换门与否,概率显然是相同的,都等于1/3),因为主持人给了你一些关于门后物品分布的信息.</li>
<li>附注:
<ul class="org-ul">
<li>如果你仍然怀疑第三种解法的正确性,可以想象一个有1000扇门的情景,其中只有一扇门后有大奖,其他999扇
门后都有山羊.在你选了一扇门后,主持人打开另外998扇门,展示了998只山羊(并且他事先声明他会这么做
).在这种情况下,如果你不换门,你的中奖概率是1/1000.但如果你换门,你的中奖概率是999/1000.这可
以通过列出(或想象列出)所有1000种可能性来看到(就像我们在三扇门情景中列出的PGG,GPG和GGP三种情况
一样).显然,你应该换门,因为唯一一种换门后会输的情况是你最初选择了大奖,而这种情况只占1/1000.</li>
<li>简而言之,主持人通过展示998只山羊给了你大量信息.最初,有999/1000的概率大奖在剩下的999扇门后,而
主持人好心地告诉你具体是哪一扇门(在大奖极有可能确实在这999扇门之一的情况下).</li>
<li>问题陈述中的"主持人宣布在你选择一扇门(但不打开)后,他会打开另外两扇门中的一扇,并故意展示一只山
羊"这一句至关重要.如果省略这句话,而只是简单地说"主持人随后打开另外一扇门并展示一只山羊",那么就
无法确定一个优先选择的策略.如果主持人没有事先声明他的行动,那么很可能他总是展示一只山羊(如上所
述,在这种情况下你应该换门).或者,他随机打开一扇门,刚好是一只山羊(在这种情况下,换门与否无关
紧要,你可以在问题2.18中证明).或者,他只在你的初始选择是大奖时才打开一扇门并展示一只山羊(在这
种情况下,你绝对不应该换门).或者,他可能在星期二执行一种程序,而在星期五执行另一种程序,这取决
于他袜子的颜色.等等.</li>
</ul></li>
<li>如上所述,这个问题因其引发的激烈争论而臭名昭著.得出错误答案并没什么大不了的,也没有什么大不了的短
时间内无法接受正确答案.但对于争论持续不休,超过20分钟就毫无意义了,因为此时每个人都应该停下来直接
玩这个游戏!你可以分别用换门策略和不换门策略玩若干次.你只需要三枚硬币,其中一枚硬币的底部画上一个
点即可.实际玩游戏不仅会得出正确答案(如果你玩足够多次,结果会趋于平均),还会让你清晰地看到正确推
理的模式(或者如果你已经接受了正确的推理,则强化该推理).当你可以做实验时,却无休止地争论实验结果,
这和当你可以打开门时,却无休止地争论门后是什么一样荒谬.</li>
</ul>
</div>
</div>
<div id="outline-container-org1a97fe6" class="outline-4">
<h4 id="org1a97fe6"><span class="section-number-4">2.4.3.</span> The Prosecutor's Fallacy</h4>
<div class="outline-text-4" id="text-2-4-3">
<ul class="org-ul">
<li>我们现在呈现概率学中一个最经典的问题/悖论之一.这一问题之所以经典,很大程度上是因为它与现实世界的紧
密相关性.在阅读以下问题陈述时,请认真思考并在查看答案之前确定一个答案.第2.2.4节中关于条件概率的讨
论可以为答案提供线索.</li>
<li>问题:考虑以下场景.一座城市(比如我们假设人口为一百万的波士顿)的侦探正在调查一宗犯罪案件,他们根
据身高,纹身,跛行,耳环等特征描述了犯罪者的外貌.假设每1万人中只有1人符合这一描述.第二天,警察在
例行巡逻时发现了一名符合描述的人.此人因此被逮捕,并仅因符合描述这一点被送上法庭受审.</li>
<li><p>
在庭审过程中,检察官告诉陪审团,
</p>
<pre class="example" id="orgcc40256">
由于每1万人中只有1人符合描述(这是一个真实的陈述),一个无辜的人符合描述的概率极低(这一点也是真
实的);因此,被告是无辜的可能性极低.
</pre></li>
<li>如果你是陪审团的一员,你会投"有
罪"票吗?如果会,你的信心有多高?如果不会,检察官的推理哪里出了问题?</li>
<li>解决方案:我们假设只考虑波士顿的居民.有一百万人,因此如果每1万人中只有1人符合描述,这意味着波士顿
有100人符合描述(其中1人是罪犯).当警察抓到一个符合描述的人时,此人可能是这100人中的任何一个.所以,
被告在法庭上确实为犯罪者的概率只有1/100.换句话说,被告是无辜的概率是99%.基于给定的证据,投票"有
罪"将是一个可怕且悲剧性的选择.</li>
<li>上述(正确的)推理相当清楚,但它与检察官的推理相矛盾.因此,检察官的推理必然是错误的.但到底哪里错
了呢?检察官的推理每一步似乎都很合理.为了找出逻辑中的错误,我们将检察官的论点分为三条独立的陈述:
<ol class="org-ol">
<li>每1万人中只有1人符合描述.</li>
<li>一个无辜的人符合描述的概率极低(远低于合理怀疑的范围).</li>
<li>因此,被告是无辜的可能性极低.</li>
</ol></li>
<li>如我们在问题中提到的,前两条陈述是正确的.陈述1是基于假设的事实,而陈述2基本上是正确的,因为1/10,000
是一个很小的数字.为了更精确地说明这一点,我们可以计算无辜者符合描述的确切概率.在波士顿的一百万人
中,符合描述的人数是(1/10,000) × 10⁶ = 100人.在这100人中,只有1人是有罪的,因此99人是无辜的.而无
辜者的总人数是10⁶ - 1 = 999,999.因此,一个无辜者符合描述的概率为:
<ul class="org-ul">
<li>无辜且符合描述的概率 ≈ 9.9 × 10⁻⁵ ≈ 1/10,000.</li>
<li>正如预期,这个概率实际上等于1/10,000.</li>
</ul></li>
<li>现在来看第三条陈述.这里出现了错误.这条陈述是错误的,因为陈述2并不意味着陈述3成立.我们已经计算出
被告无辜的概率是99%.这个正确的结果(99%)与检察官试图误导的错误概率(1/10,000)截然不同.然而,即
使正确的99%结果告诉我们陈述3是错误的,但具体错误在哪里呢?毕竟,乍一看陈述3似乎是从陈述2推导出来的.</li>
<li>错误在于混淆了条件概率.具体来说:
<ul class="org-ul">
<li>陈述2涉及无辜情况下符合描述的概率.这个(正确的)陈述等价于:"如果一个人是无辜的,那么他符合描述
的概率非常小."这个概率是条件概率P(D|I),其中D表示符合描述,I表示无辜.</li>
<li>陈述3涉及符合描述的情况下无辜的概率.这个(错误的)陈述等价于:"如果一个人(例如被告)符合描述,
那么他无辜的概率非常小."这个概率是条件概率P(I|D).</li>
<li><b>这两个条件概率并不相同.检察官的错误在于假设或暗示它们相同</b> 正如我们之前所看到的,P(D|I) = 99/999,999 ≈ 0.0001,
而P(I|D) = 0.99.这两个概率有显著差异.</li>
</ul></li>
<li><p>
直观上,P(D|I)很小,因为符合描述的人(特别是无辜者)只占总人口的一小部分.而P(I|D)接近1,因为几乎所
有符合描述的人(尤其是符合描述的人中的绝大多数)都是无辜的.这种情况可以用图2.10表示.(这只是一个
粗略的图示;面积的比例并不完全准确.)大椭圆代表999,999个无辜的人,而小椭圆代表符合描述的100人.
</p>

<div id="orgb863b6f" class="figure">
<p><img src="https://raw.githubusercontent.com/harrifeng/image/master/peb/2-10.png" alt="2-10.png" />
</p>
<p><span class="figure-number">Figure 15: </span>peb/2-10.png</p>
</div></li>
<li><p>
图中有三种基本类型的人:A = 999,900个无辜但不符合描述的人,B = 99个无辜且符合描述的人,以及C = 1个
符合描述的有罪者.(第四种可能性&#x2013;有罪但不符合描述的人&#x2013;不存在.)与上述讨论相关的两个条件概率如下:
</p>
<pre class="example" id="org4f83139">
P(D|I) = B / (B + A) = 99 / 999,999,
P(I|D) = B / (B + C) = 99 / 100.
</pre></li>
<li>这两个概率的分子都为B,因为B代表无辜且符合描述的人.但第一个分母中的A远大于第二个分母中的C.换句话
说,B占无辜者(图2.10中的大椭圆)的比例很小,而占符合描述者(图2.10中的小椭圆)的比例却很大.</li>
<li>检察官的错误推理在实际法庭案件中已被无数次使用,这带来了悲剧性的后果.无辜的人被定罪,而有罪的人逍
遥法外(这种推理也可能被用来得出这一结论).这些后果不能归咎于陪审团,因为许多陪审员无法发现推理中
的错误是不可避免的.认为整个社会都应该熟悉概率学中的这一问题是荒谬的.当然,也不能将责任归咎于提出
这一论点的律师.这个人可能是(1)过于激进和/或不称职,或者(2)完全有权提出一个已知是无效的论点(尽
管这可能令人反感).最终,责任落在了(1)未能反驳这一已知逻辑谬误的对方律师,或者(2)在某些情况下
不允许最终反驳的法律制度上.</li>
</ul>
</div>
</div>
<div id="outline-container-orgfa5c54d" class="outline-4">
<h4 id="orgfa5c54d"><span class="section-number-4">2.4.4.</span> The Boy/Girl Problem</h4>
<div class="outline-text-4" id="text-2-4-4">
<ul class="org-ul">
<li>众所周知的"男孩/女孩问题"可以用许多不同的方式表述,并且不同的表述可能会产生相同或不同的答案.以下列
出了三种不同的表述方式,在所有表述中,我们假设场景中涉及的任何过程都是完全随机的.也就是说,我们假
设每个孩子是男孩或女孩的概率相等(尽管在现实生活中并非完全如此),假设与对话对象没有任何特殊性,并
假设孩子之间没有任何相关性(如双胞胎的情况),等等.</li>
<li>问题:
<ol class="org-ol">
<li>你在街上随机遇到一个人,他说:"我有两个孩子.其中至少有一个是男孩."那么另一个孩子是男孩的概率是
多少?</li>
<li>你在街上随机遇到一个人,他说:"我有两个孩子.大的那个是男孩."那么另一个孩子是男孩的概率是多少?</li>
<li>你在街上随机遇到一个人,他说:"我有两个孩子,其中一个是站在我旁边的这个男孩."那么另一个孩子是男
孩的概率是多少?</li>
</ol></li>
<li>解答:</li>
</ul>
</div>
<ol class="org-ol">
<li><a id="org988d843"></a>问题1<br />
<div class="outline-text-5" id="text-2-4-4-1">
<ul class="org-ul">
<li><p>
解决这三种表述的关键在于列出该家庭孩子的各种可能组合,同时仅考虑"我有两个孩子"的信息,而暂时不考虑
关于男孩的信息.用B表示男孩,G表示女孩,在本问题(a)的场景中,家庭的可能类型(在父母给出关于男孩的信
息之前)如下,且每种类型的概率为1/4:
</p>
<pre class="example" id="orga8e5f5f">
BB BG GB GG
</pre></li>
<li>在每对字母中,第一个字母表示大的孩子,第二个字母表示小的孩子.</li>
<li>注意,这里确实存在四种等可能的情况(BB,BG,GB,GG),而不是三种等可能的情况(BB,BG,GG).这是因
为大的孩子有50%的概率是男孩或女孩,小的孩子也有50%的概率是男孩或女孩.因此BG和GB两种情况分别只算一
次,就像抛两枚硬币时HT和TH分别只算一次一样,其中四种等可能的情况是HH,HT,TH,TT.</li>
<li>根据题目中所述的完全随机的假设,我们假设你在遇到父母之前,随机遇到任何一种两孩家庭的概率是相等的.</li>
<li>现在让我们引入"至少有一个是男孩"的信息.这一信息告诉我们,你不可能在与GG家庭的父母交谈.这个父母必
须是BB,BG或GB家庭的父母,并且这三种家庭是等可能的(因为从"至少有一个是男孩"的陈述来看,它们是等价
的).这些是上面列表中被框出的家庭.在这三种情况下,只有BB家庭的另一个孩子是男孩.因此,另一个孩子
是男孩的概率是1/3.</li>
<li>如果不相信上述推理,可以想象进行多次试验.这在解决概率问题时总是一个好策略.假设你遇到了1000个随机的两孩家庭父母.你会遇到大约250种每种可能的家庭类型.250个GG家庭与题目给定的条件无关,因此必须排除.只有其他750个父母(BB,BG,GB)能够提供给定的信息,即至少有一个孩子是男孩.在这750个父母中,250个是BB类型,因此另一个孩子是男孩.所需的概率是250/750 = 1/3.</li>
</ul>
</div>
</li>
<li><a id="org18ac53f"></a>问题2<br />
<div class="outline-text-5" id="text-2-4-4-2">
<ul class="org-ul">
<li><p>
(2) 与(1)部分类似,在考虑有关男孩的信息之前,孩子有四种等可能的组合
</p>
<pre class="example" id="org46ca523">
BB BG GB GG
</pre></li>
<li>但一旦父母告诉你大的孩子是男孩,那么GB和GG情况被排除;记住,每对字母中的第一个字母对应大的孩子.所
以你一定是在与BB或BG家庭的父母交谈,这两种情况是等可能的.在这两种情况下,只有BB家庭的另一个孩子是
男孩.因此,另一个孩子是男孩的概率是1/2.</li>
</ul>
</div>
</li>
<li><a id="org539d625"></a>问题3<br />
<div class="outline-text-5" id="text-2-4-4-3">
<ul class="org-ul">
<li>这一版本的问题稍微复杂一些,因为在考虑有关男孩的信息之前,现在有八种等可能的情况,而不是只有四种.
这是因为在上面列表中的四种家庭类型中,父母可能选择带其中任意一个孩子外出(我们假设两者的概率相等,
就像我们假设其他所有事情一样).因此,八种等可能的情况如下图2.5所示(暂时忽略框框).加粗的字母表示
你遇到的孩子:
Bb Bg Gb Gg
bB bG gB gG</li>
<li>一旦父母告诉你,其中一个孩子是站在那里的男孩,八种可能中的四种被排除.只有图2.5中框出大写的B的四种
情况符合所给条件,即站在那里的是男孩.在这四种等可能的情况下,其中两种有另一个孩子是男孩.因此,另
一个孩子是男孩的概率是1/2.</li>
</ul>
</div>
</li>
</ol>
</div>
</div>
<div id="outline-container-org1d27f50" class="outline-3">
<h3 id="org1d27f50"><span class="section-number-3">2.5.</span> Bayes' theorem</h3>
<div class="outline-text-3" id="text-2-5">
<ul class="org-ul">
<li>我们现在介绍贝叶斯定理(Bayes' theorem),它给出了某些条件概率之间的关系.这个定理与我们本章讨论的
许多内容都相关,尤其是第2.4节.严格来说,我们已经推导出了证明该定理所需的全部内容(并且我们在不知不
觉中其实已经使用过这个定理了),所以证明将非常简短.</li>
<li>该定理有三种常见形式.在我们证明这些形式之后,我们将做一个示例,然后介绍一种用图像思考该定理的有用
方法.
<ul class="org-ul">
<li><p>
贝叶斯定理的"简单形式"是:
</p>
\begin{equation}
P(A | Z) = \frac{P(Z | A) \cdot P(A)}{P(Z)} \tag{2.51}
\end{equation}</li>
<li><p>
其"显式形式"是(其中 "~A" 是 "非 A" 的简写):
</p>
\begin{equation}
P(A|Z) = \frac{P(Z|A) \cdot P(A)}{P(Z|A) \cdot P(A) + P(Z|\sim A) \cdot P(\sim A)} \tag{2.52}
\end{equation}</li>
<li><p>
而其"一般形式"是:
</p>
\begin{equation}
P(A_k | Z) = \frac{P(Z | A_k) \cdot P(A_k)}{\sum_{i} P(Z | A_i) \cdot P(A_i)} \tag{2.53}
\end{equation}</li>
<li>公式2.53中的  \(P(A_i)\) 叫做先验概率(prior probability)</li>
<li>公式2.53中的 \(P(Z | A_i)\) 叫做条件概率(conditional probability)</li>
<li>公式2.53中的 \(P(A_k | Z)\) 叫做后验概率(posterior probability)</li>
<li>先验概率和条件概率是你已知的信息</li>
<li>而后验概率则是你要求解的</li>
</ul></li>
<li><b>证明(2.51)</b>
<ul class="org-ul">
<li><p>
方程 (2.51) 中的贝叶斯定理简单形式源于我们之前在方程 (2.9) 中所指出的内容.由于在联合概率
P(A and Z) 中,A 和 Z 的顺序无关紧要,我们可以为这个概率写出两个不同的表达式:
</p>
\begin{align}
P(A \text{ and } Z) &= P(A | Z) \cdot P(Z) \notag \\
                    &= P(Z | A) \cdot P(A) \tag{2.54}
\end{align}</li>
<li>如果我们将这两个等式的右侧相等,并两边都除以 P(Z),我们就得到了方程 (2.51).</li>
</ul></li>
<li><b>证明(2.52)</b>
<ul class="org-ul">
<li><p>
方程 (2.52) 的显式形式源于这样一个事实:方程 (2.51) 分母中的 P(Z) 可以写为:
</p>
\begin{align}
P(Z) &= P(Z \text{ and } A) + P(Z \text{ and } \sim A) \notag \\
     &= P(Z | A) \cdot P(A) + P(Z | \sim A) \cdot P(\sim A) \tag{2.55}
\end{align}</li>
<li>公式2.55的第一行来自于这么一个事实:一个outcome要么属于 \(A\) ,要么属于 \(\sim{A}\)</li>
<li>公式2.55的第二行来自对公式2.54的多次利用</li>
</ul></li>
<li><b>证明(2.53)</b>
<ul class="org-ul">
<li><p>
方程 (2.53) 的一般形式是通过将方程 (2.51) 中的 A 替换为 A_k 并注意到以下事实得到的:
</p>
\begin{align}
P(Z) &= \sum_{i} P(Z \text{ and } A_i) \notag \\
     &= \sum_{i} P(Z | A_i) \cdot P(A_i) \tag{2.56}
\end{align}</li>
<li>公式2.56的第一行来自于这么一个事实:每个outcome都属于 \(A_i\) 中的一个</li>
<li>公式2.56的第一行则来源于对方程 (2.54) 的 n 次应用(n 是 A_i 的个数).注意,方程 (2.52) 是方程 (2.53) 的一个特例.</li>
</ul></li>
<li>还要注意,定理三种形式(2.51,2.52,2.53)右侧的分子都等于由方程 (2.54) 得出的 P(A and Z) 或 P(A_k and Z).</li>
</ul>
</div>
<div id="outline-container-org4454e0c" class="outline-4">
<h4 id="org4454e0c"><span class="section-number-4">2.5.1.</span> Example(False positive)</h4>
<div class="outline-text-4" id="text-2-5-1">
<ul class="org-ul">
<li>一家医院对患者进行测试,以判断其是否患有某种疾病.假设我们知道以下三件事情:
<ul class="org-ul">
<li>整体人群中有 2% 的人患有这种疾病.</li>
<li>如果一个人确实患有这种疾病,则测试有 95% 的概率正确显示该人患病.(因此,5% 的情况下,测试会错误
地显示该人未患病.)</li>
<li>如果一个人没有这种疾病,则测试有 10% 的概率错误地显示该人患病(即"假阳性"结果).(因此,90% 的情
况下,测试正确显示该人未患病.)</li>
</ul></li>
<li>我们想回答的问题是:如果一个患者测试结果为阳性,他实际上患有该疾病的概率是多少?</li>
<li>我们将用两种方法来回答这个问题:
<ul class="org-ul">
<li>一种是假装不知道贝叶斯定理;</li>
<li>另一种是使用贝叶斯定理.</li>
</ul></li>
<li>两种方法的推理过程完全相同,因为在第一个解法中,我们实际上是在不知不觉中使用了贝叶斯定理.</li>
</ul>
</div>
</div>
<div id="outline-container-org775cab3" class="outline-4">
<h4 id="org775cab3"><span class="section-number-4">2.5.2.</span> First Solution</h4>
<div class="outline-text-4" id="text-2-5-2">
<ul class="org-ul">
<li>分析一个大样本的人群测试结果
<ul class="org-ul">
<li>假设从总体人群中抽取一大组人(比如 1000 人)并对他们进行疾病测试.每个人的情况可以有两种可能性:
<ol class="org-ol">
<li>患有疾病或不患有疾病;</li>
<li>测试结果为阳性或阴性.</li>
</ol></li>
<li><p>
因此,总共有 (2×2=4) 种类型的人(根据疾病状态和测试结果).通过概率树可以确定每种类型的人数;见下
图(图 2-11).已知的三个条件分别对应概率树中的三次分支:
</p>

<div id="org0ce70e1" class="figure">
<p><img src="https://raw.githubusercontent.com/harrifeng/image/master/peb/2-11.png" alt="2-11.png" />
</p>
<p><span class="figure-number">Figure 16: </span>peb/2-11.png</p>
</div></li>
<li>第一个条件告诉我们,在这 1000 人中,有 2% 的人(即 20 人)患有这种疾病(平均值),而 98% 的人(即
980 人)没有这种疾病.</li>
<li>第二个条件告诉我们,在患有这种疾病的 20 人中,有 95%(即 19 人)测试结果为阳性,而 5%(即 1 人)
测试结果为阴性.</li>
<li>第三个条件告诉我们,在没有这种疾病的 980 人中,有 10%(即 98 人)测试结果为阳性,而 90%(即 882
人)测试结果为阴性.</li>
</ul></li>
<li><p>
回答问题,我们现在可以直接从树状图中得出问题的答案(即:"如果一个患者测试结果为阳性,他实际上患有疾
病的概率是多少?").测试结果为阳性的人总数是两个圈出数字的总和,即 (19+98=117).在这 117 人中,只
有 19 人确实患有疾病.因此,我们的答案是:
</p>
\begin{equation}
p = \frac{19}{19 + 98} = \frac{19}{117} \approx 16\%
\end{equation}</li>
<li><p>
如果我们想直接用给定的概率来写出这个公式,可以回忆一下我们是如何得到 19 和 98 这两个数字的(注意这里
不是套公式,是从图2-11里面把如何获得19和117过程的概率乘起来):
</p>
\begin{equation}
p = \frac{(0.95)(0.02)}{(0.95)(0.02) + (0.10)(0.98)} = 0.16
\end{equation}</li>
</ul>
</div>
</div>
<div id="outline-container-org5a5bfaa" class="outline-4">
<h4 id="org5a5bfaa"><span class="section-number-4">2.5.3.</span> Second Solution</h4>
<div class="outline-text-4" id="text-2-5-3">
<ul class="org-ul">
<li>我们将使用方程 (2.52) 中的贝叶斯定理"显式形式",它是方程 (2.53) 中"一般形式"的一个特例.使用方程 (2.52) 的符号,
<ul class="org-ul">
<li><p>
我们有:
</p>
<pre class="example" id="orgff3d706">
A = 患病
′A = 未患病
Z = 检测阳性 (2.59)
</pre></li>
<li><p>
我们的目标是计算 P(A|Z),即给定检测呈阳性的条件下,患病的概率.根据给出的三点事实,我们知道:
</p>
<pre class="example" id="org5d4ac3b">
P(A) = 0.02
P(Z|A) = 0.95
P(Z|′A) = 0.10 (2.60)
</pre></li>
</ul></li>
<li>在上面的第一种解法中,我们使用了概率树来计算各种数字和概率.</li>
<li><p>
在接下来的讨论中,我们将 <b>假设之前没有见过贝叶斯定理</b> ,之后将再回到该定理,并在图 2-14 中展示定理的不
同组成部分如何对应图中不同区域.
</p>

<div id="org3aba349" class="figure">
<p><img src="https://raw.githubusercontent.com/harrifeng/image/master/peb/2-14.png" alt="2-14.png" />
</p>
<p><span class="figure-number">Figure 17: </span>peb/2-14.png</p>
</div></li>
<li><p>
图2-12 以图示方式展示了图 2-11 中的概率树
</p>

<div id="orgf05c8ea" class="figure">
<p><img src="https://raw.githubusercontent.com/harrifeng/image/master/peb/2-12.png" alt="2-12.png" />
</p>
<p><span class="figure-number">Figure 18: </span>peb/2-12.png</p>
</div></li>
<li>整个正方形代表给定的 1000 人.一条垂直线将正方形划分为两个矩形:
<ul class="org-ul">
<li>左侧一个非常窄的矩形,代表患病的 20 人;</li>
<li>右侧一个宽矩形,代表未患病的 980 人.</li>
<li>这两个矩形进一步划分为检测呈阳性的人(下部阴影区域,分别为 19 人和 98 人)</li>
<li>或检测呈阴性的人(上部非阴影区域,分别为 1 人和 882 人).</li>
<li>所求的"在检测呈阳性的条件下患病的概率"等于 19 个真阳性(深色细阴影矩形)除以总的检测阳性人数
19 + 98 = 117(两个阴影区域的总和).</li>
</ul></li>
<li>在图 2-12 中,人口中只有两类人&#x2013;患有疾病的人和未患疾病的人.</li>
<li>作为一个更广泛的设置的例子,我们来考虑人们如何通勤上班.假设我们知道以下信息:人们
<ul class="org-ul">
<li>步行</li>
<li>骑自行车</li>
<li>开车</li>
<li>坐公交等通勤方式</li>
</ul></li>
<li>然后,对于每种通勤方式,我们假设还知道具有某种特定属性(例如,会弹吉他)的人数百分比.我们可以提出
这样的问题:"如果我们从会弹吉他的人群中随机选取一个人(这些人中都通勤上班),那么这个人步行上班的概
率是多少?"</li>
<li>如果将这个问题与之前的疾病测试问题进行比较,我们会发现弹吉他类似于测试结果为阳性,而步行上班类似于
患有疾病.只是现在我们有多种通勤方式,而不是仅仅两种疾病状态(患病或未患病).</li>
<li>为了回答上述问题,我们可以绘制一个图,
<ul class="org-ul">
<li><p>
与图 2-12 类似;参见图 2-13,
</p>

<div id="orgd800929" class="figure">
<p><img src="https://raw.githubusercontent.com/harrifeng/image/master/peb/2-13.png" alt="2-13.png" />
</p>
<p><span class="figure-number">Figure 19: </span>peb/2-13.png</p>
</div></li>
<li>该图中使用了一些虚构的百分比来表示各种通勤方式.这些百分比显然完全不现实,但对于举例来说已经足够</li>
<li>为了简单起见,我们假设只有四种可能的通勤方式.如果弹吉他的人用阴影区域表示,那么问题的答案可以通
过将深色阴影区域(代表弹吉他且步行的人)的面积除以所有阴影区域的总面积(代表所有弹吉他的人)来得
到.</li>
<li><p>
数学上,这等价于将公式 (2.54) 的第一步结果除以P(Z),然后让 (A=\text{"步行"}) 和 (Z=\text{"弹吉他"})
</p>
\begin{align}
P(\text{walk|guitar}) &= \frac{P(\text{walk and guitar})}{P(\text{guitar})} \notag \\
                      &= \frac{\text{dark shaed area}}{\text{total shaed area}}. \tag{2.63}
\end{align}</li>
</ul></li>
<li>假设只有四种可能的通勤方式,我们需要给出八个信息:
<ul class="org-ul">
<li><p>
我们需要给出步行,骑自行车,开车或坐公交的百分比.(实际上,由于这些百分比必须加起来为 100%,这里只有三个独立的信息.)
</p>

<div id="org5597079" class="figure">
<p><img src="https://raw.githubusercontent.com/harrifeng/image/master/peb/2-13.png" alt="2-13.png" />
</p>
<p><span class="figure-number">Figure 20: </span>peb/2-13.png</p>
</div></li>
<li>这些百分比决定了图 2-13 中垂直矩形的相对宽度.在"假阳性"示例中,这些信息与第 99 页的第一个要点中
给出的信息(患病人群的百分比)类似.</li>
<li>对于每种通勤方式,我们需要给出弹吉他的人数百分比.</li>
<li>这四个百分比决定了图 2-13 中垂直矩形内阴影区域的高度.</li>
<li>当然,如果我们直接知道深色阴影区域的面积(代表弹吉他且步行的人数)以及所有阴影区域的总面积(代表
所有弹吉他的人数),那么我们只需将这两部分信息相除即可完成计算.但在大多数情况下,我们通常会被给
出上述八个(或相关数量的)信息,而不是面积数据,主要任务是从这些信息中推导出面积数据.</li>
<li>如果您更愿意以概率树的形式思考,如图 2-11,那么在当前的通勤示例中,初始分叉有四个分支(对应步行/
骑车/开车/坐公交的选项),然后每个选项再分为两种可能性(弹吉他或不弹吉他).因此,我们最终会得到
四个圈出的数字(弹吉他的人数),而不是图 2-11 中的两个,我们需要将其中一个(步行分支中的数字)除
以所有四个数字的总和.</li>
<li><p>
贝叶斯定理在类似于图 2-13 的图形中的解释在图 2-14 中总结.在这个图中,我们用面积来表示概率,而不
是实际数字(虽然两种方式都可以),因为高度和宽度则分别代表相关概率.以图形而非代数计算的方式来理
解贝叶斯定理总是更直观,因此当您思考贝叶斯定理时,您可能会想到图 2-14.
</p>

<div id="org3ae35ab" class="figure">
<p><img src="https://raw.githubusercontent.com/harrifeng/image/master/peb/2-14.png" alt="2-14.png" />
</p>
<p><span class="figure-number">Figure 21: </span>peb/2-14.png</p>
</div></li>
</ul></li>
</ul>
</div>
</div>
</div>
<div id="outline-container-org12f2ea5" class="outline-3">
<h3 id="org12f2ea5"><span class="section-number-3">2.6.</span> Stirling's formula</h3>
<div class="outline-text-3" id="text-2-6">
<ul class="org-ul">
<li>斯特林公式为 n! 提供了一个有效的近似,适用于较大的n.其核心意义在于:
<ul class="org-ul">
<li>随着n增大,近似效果会以乘性方式(而非加性方式)趋近于真实值</li>
<li>也就是说,近似值与真实值 \(n!\) 的 <b>比值会趋近于 1</b></li>
</ul></li>
<li><p>
斯特林公式的表达式为:
</p>
\begin{equation}
n! \approx n^n e^{-n} \sqrt{2\pi n} \quad \text{(Stirling's formula)} \tag{2.64}
\end{equation}</li>
<li>其中 \(e\) 是自然对数的底数(欧拉数),\(e \approx 2.71828\)</li>
<li>斯特林公式存在多种证明方法,但通常涉及微积分知识,本文暂不展开.</li>
<li>下表为 <b>斯特林公式的精度验证</b>
<ul class="org-ul">
<li><p>
表2-6
</p>

<div id="orgd9e78eb" class="figure">
<p><img src="https://raw.githubusercontent.com/harrifeng/image/master/peb/t2-6.png" alt="t2-6.png" />
</p>
<p><span class="figure-number">Figure 22: </span>peb/t2-6.png</p>
</div></li>
<li>即使 \(n=10\),近似误差也仅约 0.8%.虽然对小数值(如 \(n=1\) 或 \(5\))无需使用此公式,但其近似结果仍令
人惊讶地接近真实值.</li>
<li>您会注意到,在表中关于10的幂次的情况中,\(\frac{S(n)}{n!}\) 的比值都呈现相同的形式:即小数部分是越
来越多的9,最后跟着一个2.实际上,这个"2"并不精确,因为我们对数值进行了舍入,但对所有数字而言,这
种舍入的结果基本一致.这并非巧合,这是由斯特林公式(Stirling's formula)的一个更精确版本推导出的
结果,但我们这里不会深入探讨.</li>
</ul></li>
<li>斯特林公式在第5章中会非常关键,那时我们会讨论某些概率分布的近似情况.但目前,它在处理大数的二项式系
数时就已经很有用,因为这些二项式系数涉及到大数的阶乘运算.使用斯特林公式有两个主要好处:
<ul class="org-ul">
<li>避免计算器错误:根据您使用的计算器类型,当您输入一个非常大的数的阶乘时,可能会收到错误消息.而如
果先使用斯特林公式将表达式简化(用字母 (n) 表示您正在处理的具体数值),然后再将简化后的结果输入到
计算器中,就可以避免这个问题.</li>
<li>符号化答案的优势:如果您使用斯特林公式得到了一个用 (n) 表示的简化答案(我们称之为符号化答案,因为
它以符号 (n) 表示,而不是具体的数值),您可以随后将具体的 (n) 值代入,或者代入任何其他值.符号化
答案的好处在于,每次给定一个新的 (n) 值时,您不需要重新从头解决这个问题.您只需将新的 (n) 值代入
符号化答案即可.</li>
</ul></li>
</ul>
</div>
<div id="outline-container-orgab50ca6" class="outline-4">
<h4 id="orgab50ca6"><span class="section-number-4">2.6.1.</span> Exampe(50 out of 100)</h4>
<div class="outline-text-4" id="text-2-6-1">
<ul class="org-ul">
<li>问题:一枚硬币抛掷 100 次,求 <b>恰好出现 50 次正面</b> 的概率.</li>
<li>解法:
<ul class="org-ul">
<li><p>
在 100 次抛掷中,共有 \(2^{100}\) 种等可能结果,其中恰有 50 次正面的组合数为 \(\binom{100}{50}\).因此概率为:
</p>
\begin{equation}
P(50) = \frac{1}{2^{100}} \binom{100}{50} = \frac{1}{2^{100}} \cdot \frac{100!}{50! \, 50!} \tag{2.65}
\end{equation}</li>
</ul></li>
<li>虽然这是精确解,但计算器可能无法处理大阶乘.我们使用斯特林公式推导符号化解析解:
<ul class="org-ul">
<li>步骤 1:将数值替换为符号 令 \(n\) 表示目标正面次数,则总抛掷次数为 \(2n\)(本例中 \(n=50\)).</li>
<li>步骤 2:应用斯特林公式近似概率表达式转化为:
<ol class="org-ol">
<li><p>
概率表达式转化为:
</p>
\begin{equation}
P(n) = \frac{1}{2^{2n}} \binom{2n}{n} = \frac{1}{2^{2n}} \cdot \frac{(2n)!}{(n!)^2} \notag
\end{equation}</li>
<li><p>
对阶乘项应用斯特林公式:
</p>
\begin{equation}
(2n)! \approx (2n)^{2n} e^{-2n} \sqrt{4\pi n}, \quad n! \approx n^n e^{-n} \sqrt{2\pi n} \notag
\end{equation}</li>
<li><p>
代入后化简:
</p>
\begin{equation}
P(n) \approx \frac{1}{2^{2n}} \cdot \frac{(2n)^{2n} e^{-2n} \sqrt{4\pi n}}{(n^n e^{-n} \sqrt{2\pi n})^2} = \frac{1}{2^{2n}} \cdot \frac{(2n)^{2n} e^{-2n} \cdot 2\sqrt{\pi n}}{n^{2n} e^{-2n} \cdot 2\pi n} = \frac{1}{\sqrt{\pi n}} \tag{2.66}
\end{equation}</li>
</ol></li>
<li><p>
最终得到简洁的符号化解析解:
</p>
\begin{equation}
P(50) \approx \frac{1}{\sqrt{\pi \cdot 50}} \approx 0.07979 \approx 8\% \tag{2.67}
\end{equation}</li>
<li><b>精确值</b> 约为 0.07959,近似误差仅 0.25%</li>
</ul></li>
<li><p>
如果我们将 (n=500),我们会得到(P(500)≈2.5%).这表示在 1000 次抛硬币中恰好出现 500 次正面的概率.如
上所述,我们只需将想要的数字代入公式,而无需重新进行整个计算!
</p>
\begin{equation}
  P(500) \approx \frac{1}{\sqrt{\pi \cdot 500}} \approx 0.025
\end{equation}</li>
<li>公式(2.66)中的 1/√(πn) 结果极其简洁.它比公式(2.65)中的表达式简单得多,也比公式(2.66)的前两行中的表达式简单得多.</li>
<li>诚然,它只是一个近似结果,但这是一个很好的近似.公式(2.65)中的精确结果大约是 0.07959,因此当 n = 5
0 时,公式(2.67)中近似结果与精确结果的比值为 1.0025.</li>
<li>换句话说,该近似值只偏差了 0.25%.对于大多数目的来说,这已经足够好了.</li>
<li>当你推导出像公式(2.66)这样的符号近似表达式时,你既有所得也有所失:
<ul class="org-ul">
<li>你当然会失去一些准确性,因为严格来说你的答案并不正确(尽管它的精度总是相当充分).</li>
<li>但你会获得大量关于答案如何依赖于你的输入数字 n 的信息.</li>
</ul></li>
<li>而且,沿着同样的思路,你获得了一些美感.由此得到的符号答案总是漂亮而简洁,因此它让你能轻松地看出答案如何依赖于 n.
<ul class="org-ul">
<li>例如,在我们的抛硬币例子中,公式(2.66)中的表达式与 1/√n 成正比.由此得到的符号答案总是
漂亮而简洁,因此它让你能轻松地看出答案如何依赖于 n.因此无需进行任何计算,我们就能快速利用
P(50) ≈ 8% 的结果推断出 P(5000) ≈ 0.8%.</li>
<li>简而言之,公式(2.66)中的符号结果所包含的信息,远比直接由公式(2.65)得到的数值结果 8% 要多得多.</li>
</ul></li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="author">Author: harrifeng@outlook.com</p>
<p class="date">Created: 2025-07-02 Wed 17:15</p>
<p class="validation"><a href="https://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
